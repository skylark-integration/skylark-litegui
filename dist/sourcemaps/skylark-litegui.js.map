{"version":3,"sources":["skylark-litegui.js"],"names":["define","skylark","LiteGUI","root","content","panels","windows","undo_steps","modalbg_div","mainmenu","init","options","width","height","this","setWindowSize","container","document","getElementById","body","wrapped","createElement","style","position","overflow","appendChild","classList","contains","window","addEventListener","e","maximizeWindow","className","modalbg","display","menubar","createMenubar","gui_callback","i","close","trigger","element","event_name","params","origin","evt","createEvent","initCustomEvent","srcElement","dispatchEvent","__events","bind","event","callback","constructor","String","querySelectorAll","NodeList","Array","length","inner","dummy","widget","Object","defineProperty","enumerable","configurable","writable","value","unbind","removeEventListener","removeClass","elem","selector","class_name","list","remove","add","litegui_element","elements","parentNode","removeChild","getById","id","Menubar","w","h","boxShadow","setCursor","name","cursor","isCursorOverElement","left","pageX","top","pageY","rect","getBoundingClientRect","getRect","toClipboard","object","force_local","JSON","stringify","input","in_clipboard","queryCommandSupported","type","opacity","select","execCommand","console","log","err","warn","_safe_cliboard","localStorage","setItem","getLocalClipboard","data","getItem","parse","addCSS","code","innerHTML","getElementsByTagName","requireCSS","url","on_complete","link","rel","href","shift","media","head","onload","request","dataType","mimeType","xhr","XMLHttpRequest","open","responseType","overrideMimeType","nocache","setRequestHeader","load","response","status","error","LEvent","xmlparser","DOMParser","parseFromString","success","call","onerror","FormData","append","send","requestText","on_error","requestJSON","requestBinary","requireScript","on_progress","version","total","loaded_scripts","script","num","src","original_src","async","push","requireScriptSerial","addScript","newDiv","tag","id_class","events","t","split","substr","v","setAttribute","createListItem","values","childNodes","subelem","querySelector","innerText","createButton","undefined","getParents","parentElement","nodeType","Node","ELEMENT_NODE","newWindow","title","new_window","write","styles","outerHTML","scripts","showModalBackground","showMessage","dialog","Dialog","noclose","addButton","makeModal","popup","min_height","show","alert","confirm","paddingBottom","buttons","dataset","focus","prompt","textinput","textarea","keyCode","which","choice","choices","downloadURL","filename","download","click","downloadFile","file","File","Blob","URL","createObjectURL","setTimeout","revokeObjectURL","getUrlVars","hash","vars","hashes","location","slice","indexOf","getUrlVar","blur","draggable","dragger","on_start","on_finish","on_is_draggable","inner_mouse","getClientRects","x","y","stopPropagation","preventDefault","prev_x","clientX","prev_y","clientY","deltax","deltay","cloneObject","target","o","isFunction","Float32Array","apply","isArray","set","safeName","str","replace","special_codes","navicon","refresh","gear","open_folder","tick","trash","htmlEncode","html_code","htmlDecode","unicode_character","sizeToCSS","Math","abs","getElementWindow","doc","ownerDocument","defaultView","parentWindow","createDropArea","callback_drop","callback_enter","callback_exit","onDragEvent","onDrop","r","stopImmediatePropagation","prototype","eval_code","match","tpl","re","exec","Function","escapeHtmlEntities","text","c","entityTable","charCodeAt","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","attach","Area","legacy","litearea","that","_computed_size","offsetWidth","offserHeight","content_id","split_direction","sections","autoresize","onResize","VERTICAL","HORIZONTAL","splitbar_size","getSection","computed_size","offsetHeight","sendResizeEvent","section","j","onresize","getWidth","getHeight","isVisible","adjustHeight","direction","sizes","editable","area1","area2","splitinfo","splitbar","dynamic_section","inner_mousemove","inner_mouseup","last_pos","size","h1","h2","w1","w2","moveSplit","immediateResize","inmediateResize","hide","showSection","hideSection","delta","min_size","minSplitSize","areas","a","b","d","setAreaSize","area","merge","main_section","main","query","Console","log_element","processKeyDown","_prompt","onAutocomplete","onProcessCommand","history","_history_offset","_input_blocked","cmd","trim","addMessage","pos","as_text","txt","con","children","scrollTop","update","args","arguments","join","clear","_ctor","MINIMIZED_WIDTH","title_height","getDialog","minWidth","minHeight","panel","minimize","detachable","closable","footer","fullcontent","scroll","close_button","maximize_button","maximize","minimize_button","hide_button","detach_button","detachWindow","enableProperties","on_attached_to_DOM","on_resize","on_detached_from_DOM","parent","center","litegui_item","bringToFront","minimized","resizable","setResizable","corner","mouse","is_corner","neww","newh","dockTo","dock_type","Panel","right","bottom","button","on_close","onclose","dialog_window","highlight","time","outline","old_box","splice","arrangeMinimized","reference_element","detach_window","fadeIn","transition","setPosition","setSize","setTitle","header","parent_width","parent_height","floor","adjustSize","margin","skip_timeout","extra","textContent","onbeforeunload","index","_old_height","reattachWindow","showAll","dialogs","hideAll","closeAll","Dragger","parseFloat","Number","precision","extraclass","wrap","full","disabled","dragger_class","toFixed","units","tabIndex","tab_index","inner_inc","doc_binded","inner_move","inner_up","requestPointerLock","screenX","screenY","inner_wheel","diff","movementX","movementY","axis","horizontal","activeElement","wheelDelta","deltaY","exitPointerLock","linear","pow","scale","step","shiftKey","ctrlKey","max","min","setRange","setValue","skip_event","getValue","Inspector","one_line","widgets","widgets_by_name","row_number","addContainer","random","name_width","widgets_width","noscroll","onchange","appendTo","widgets_per_row","getValues","setValues","at_front","insertBefore","firstChild","purgeElement","hasChildNodes","lastChild","current_section","_current_container","_current_container_stack","on_refresh","widget_parent","replaceChild","pushContainer","isContainerInStack","popContainer","aux","pop","setup","info","getWidget","inspectInstance","instance","properties","properties_info_example","properties_to_skip","getProperties","collectProperties","classObject","properties_info","getInspectorProperties","inner_clone","shared_options","Boolean","BYTES_PER_ELEMENT","is_number","properties_order","sorted_properties","showProperties","original","varname","assignValue","callback_update","on_addProperty","onShowProperties","current_value","getOwnPropertyDescriptor","__proto__","createWidget","inspector","widget_name","namewidth","contentwidth","content_width","pretitle","filling","content_class","content_element","onWidgetChange","expand_value","skip_wchange","widget_constructors","null","default","number","slider","string","color","boolean","checkbox","icon","vec2","vector2","vec3","vector3","vec4","vector4","enum","dropdown","combo","line","tree","datatree","pad","array","separator","registerWidget","func_name","charAt","toUpperCase","func","toLowerCase","applyOptions","addSeparator","addNull","addDefault","addCheckbox","addString","addNumber","addVector4","addVector3","addVector2","processOptions","inputtype","password","placeHolder","align","immediate","setIcon","img","background","paddingLeft","disable","enable","processElement","addStringButton","callback_button","button_width","inputfield","addTextarea","callback_keydown","callback_before","ret","wcontent","dragger1","marginLeft","dragger2","inner_before_change","draggers","inputs","elems","new_val","dragger3","addPad","minx","miny","maxx","maxy","backgroundImage","backgroundSize","backgroundRepeat","handler","_onMouseEvent","mousex","mousey","addInfo","nodeName","scrollToBottom","offsetTop","addSlider","slider_container","Slider","text_input","onChange","label_on","label","label_off","addFlags","flags","force_flags","f","flag_options","addCombo","stop_event","selected","item_value","item_index","item_title","items","item","selectedIndex","removeAttribute","setOptionValues","addComboButtons","buttonname","addTags","tags","inner_addtag","select_element","tagname","addList","list_height","infocontent","ul_elements","ul","inner_key","callback_dblclick","next","nextSibling","scrollIntoViewIfNeeded","block","behavior","prev","previousSibling","inner_item_click","multiselection","toggle","lis","inner_item_dblclick","insert_item","item_style","item_name","li_element","updateItems","new_values","item_selected","addItem","removeItem","getSelected","getByIndex","getIndex","selectIndex","add_to_selection","deselectIndex","scrollToIndex","selectAll","deselectAll","getNumberOfItems","filter","case_sensitive","use_string","needle","selectByFilter","button_text","button_classname","micro","attrs","wclick","addButtons","addIcon","img_url","image","padding","backgroundPosition","addColor","show_rgb","parseColor","input_element","myColor","jscolor","pickerFaceColor","pickerBorderColor","pickerInsetColor","rgb_intensity","pickerOnfocus","fromRGB","rgbelement","rgb","onImmediateChange","event_data","concat","toString","addFile","filename_element","files","generate_url","read_file","reader","FileReader","e2","result","readAsArrayBuffer","readAsDataURL","readAsText","addLine","line_editor","LineEditor","addTree","tree_root","Tree","tree_options","onItemSelected","node","updateTree","addDataTree","inner_recursive","root_node","addArray","data_type","max_items","length_widget","parseInt","row","widget_row_container","item_options","assign","data_options","startContainer","endContainer","addSection","end","collapsed","no_collapse","_last_container_stack","sectiontitle","localName","seccont","setCurrentSection","getCurrentSection","endCurrentSection","beginGroup","group","scrollable","endGroup","addTitle","help","scrollTo","on_update","updateWidgets","menu","is_open","auto_open","sort_entries","closing_time","attachToPanel","path","prev_length","tokens","current_token","current_pos","last_item","updateMenu","findMenu","order","hidePanels","showMenu","is_submenu","closing_by_leave","clearInterval","sorted_entries","sort","a_order","b_order","menu_item","has_submenu","checked","property","hasOwnProperty","isChecked","box","Table","columns","column_fields","rows","_must_update_header","colums","setColumns","setRows","reuse","updateContent","addRow","skip_add","tr","td","column","updateRow","cells","field","updateCell","cell","avg_width","rest","th","data_row","Tabs","mode","tabs","current_tab","onMouseWheel","scrollLeft","tabs_width","tabs_height","tabs_root","tabs_by_index","getCurrentTab","getCurrentTabId","getPreviousTab","previous_tab","prepend","getTab","getTabByIndex","getNumOfTabs","getTabContent","tab","getTabIndex","addTab","safe_id","tab_className","bigicon","removeTab","after","plus_tab","tab_width","autoswitch","_timeout_mouseover","clearTimeout","tab_id","onTabClicked","tab_info","destroy","recomputeTabsByIndex","callback_context","selectTab","skip_callbacks","addPlusTab","addButtonTab","callback_canopen","callback_leave","tab_content","skip_events","setTabVisibility","child","removeAllTabs","keep_plus","hideTab","showTab","transferTab","target_tabs","newtab","detachTab","tab_window","newtabs","allow_rename","allow_drag","allow_multiselection","indent_offset","round","collapsed_depth","onBackgroundClicked","onContextMenu","root_item","createAndInsert","INDENT","insertItem","parent_id","_updateListBox","_findElement","element_index","parent_element_index","_findElementIndex","child_level","createTreeItem","existing_item","_insertInside","_isNodeChildrenVisible","markAsSelected","parent_index","offset_index","level","parent_level","indent","new_childNode","current_level","listbox","childNode","_findElementLastChildIndex","start_index","_findChildElements","only_direct","DOM","title_element","precontent","postcontent","visible","_editing","isNodeSelected","onItemAddToSelection","getSelectedItem","nodeList","last_index","current_index","_skip_scroll","_old_name","that2","new_name","old_name","onItemContextMenu","draggable_element","ev","dataTransfer","setData","onDragData","drag_data","count","skipdrag","item_id","getData","onDropItem","onMoveItem","moveItem","parent_item","filterByName","filterByRule","callback_to_filter","param","expandItem","parents","getParent","collapseItem","isInsideArea","rects","scrollToItem","setSelectedItem","send_event","unmarkAllAsSelected","addItemToSelection","removeItemFromSelection","getSelectedItems","isItemSelected","getChildren","id_or_node","getAncestors","isAncestor","dest","old_parent","old_parent_level","level_offset","unshift","new_level","remove_children","child_nodes","updateItem","incontent","updateItemId","old_id","new_id","keep_root","getNodeByIndex","selected_array","semiselected","add_to_existing_selection","visited","pre","createLitebox","onClickBox","setEmpty","collapse","child_elements","child_parent","SearchBox","placeholder","ContextMenu","parentMenu","lock","current_submenu","pointerEvents","on_mouse_wheel","closing_timer","root_document","body_rect","root_rect","List","ComplexList","item_code","onItemToggled","onItemRemoved","Button","inner_onclick","close_parent","ignore_item_callbacks","submenu","autoopen","onclick_callback","ignore_parent_menu","getTopMenu","getFirstEvent","ContextualMenu","Checkbox","on_change","old_value","state","on_change_callback","expand","setFromX","norm","range","percentage","percentage2","onMouseMove","mouseX","onMouseUp","offsetX","offsetY","layerX","layerY","bgcolor","pointscolor","linecolor","xrange","yrange","defaulty","no_trespassing","show_samples","canvas","convert","unconvert","onmousemove","onmouseup","min_dist","dist","distance","computeSelected","sortValues","last_mouse","redraw","getValueAt","last","resample","samples","dx","addValue","ctx","getContext","setTransform","translate","fillStyle","fillRect","strokeStyle","beginPath","moveTo","lineTo","stroke","arc","PI","fill","dy","sqrt","addHTML","html","on_click","is_enabled","can_be_removed",".title","setSelected","setContent","is_html","toggleEnabled"],"mappings":"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AAA,OACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,OACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,OACAC,IAAA,QACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,SACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,MACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,SACAC,IAAA,OACAC,IAAA,QACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,SACAC,IAAA,QACAC,IAAA,QACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,SACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,MACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,SACAC,IAAA,OACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,OACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,UACAC,IAAA,OACAC,IAAA,MACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,SACAC,IAAA,KACAC,IAAA,KACAC,IAAA,KACAC,IAAA,UACAC,IAAA,KACAC,IAAA,MACAC,IAAA,QACAC,IAAA,MACAC,IAAA,UACAC,IAAA,MACAC,IAAA,MACAC,IAAA,MACAC,IAAA,QACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,UACAC,IAAA,OACAC,IAAA,MACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,SACAC,IAAA,KACAC,IAAA,KACAC,IAAA,KACAC,IAAA,UACAC,IAAA,KACAC,IAAA,MACAC,IAAA,SACAC,IAAA,QACAC,IAAA,MACAC,IAAA,UACAC,IAAA,MACAC,IAAA,MACAC,IAAA,MACAC,IAAA,QACAC,IAAA,WACAC,IAAA,QACAC,IAAA,MACAC,KAAA,OACAC,KAAA,SACAC,KAAA,QACAC,KAAA,QACAC,KAAA,QACAC,KAAA,QACAC,KAAA,SACAC,KAAA,QACAC,KAAA,OACAC,KAAA,QACAC,KAAA,UACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,QACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,SACAC,KAAA,OACAC,KAAA,QACAC,KAAA,QACAC,KAAA,QACAC,KAAA,OACAC,KAAA,QACAC,KAAA,KACAC,KAAA,OACAC,KAAA,MACAC,KAAA,QACAC,KAAA,SACAC,KAAA,QACAC,KAAA,OACAC,KAAA,QACAC,KAAA,MACAC,KAAA,MACAC,KAAA,KACAC,KAAA,MACAC,KAAA,MACAC,KAAA,MACAC,KAAA,SACAC,KAAA,MACAC,KAAA,OACAC,KAAA,QACAC,KAAA,KACAC,KAAA,QACAC,KAAA,KACAC,KAAA,KACAC,KAAA,MACAC,KAAA,MACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,QACAC,KAAA,SACAC,KAAA,OACAC,KAAA,OACAC,KAAA,QACAC,KAAA,QACAC,KAAA,SACAC,KAAA,SACAC,KAAA,OACAC,KAAA,OACAC,KAAA,MACAC,KAAA,SACAC,KAAA,QACAC,KAAA,SACAC,KAAA,QACAC,IAAA,QACAC,IAAA,QACAC,IAAA,SACAC,IAAA,SACAC,IAAA,OACAC,IAAA,OACAC,IAAA,QACAC,KAAA,OACAC,KAAA,OACAC,KAAA,SACAC,KAAA,OACAC,KAAA,MACAC,KAAA,MACAC,KAAA,MACAC,KAAA,QACAC,KAAA,QACAC,KAA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","file":"../skylark-litegui.js","sourcesContent":["\r\n/**\r\n* Core namespace of LiteGUI library, it holds some useful functions\r\n*\r\n* @class LiteGUI\r\n* @constructor\r\n*/\r\n\r\ndefine('skylark-litegui/litegui',[\r\n\t\"skylark-langx-ns\"\r\n],function(skylark){\r\n\r\n\r\n\tvar LiteGUI = {\r\n\t\troot: null,\r\n\t\tcontent: null,\r\n\r\n\t\tpanels: {},\r\n\t\twindows: [], //windows opened by the GUI (we need to know about them to close them once the app closes)\r\n\r\n\t\t//undo\r\n\t\tundo_steps: [],\r\n\r\n\t\t//used for blacken when a modal dialog is shown\r\n\t\tmodalbg_div: null,\r\n\r\n\t\t//the top menu\r\n\t\tmainmenu: null,\r\n\r\n\t\t/**\r\n\t\t* initializes the lib, must be called\r\n\t\t* @method init\r\n\t\t* @param {object} options some options are container, menubar, \r\n\t\t*/\r\n\t\tinit: function(options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\tif(options.width && options.height)\r\n\t\t\t\tthis.setWindowSize(options.width,options.height);\r\n\r\n\t\t\t//choose main container\r\n\t\t\tthis.container = null;\r\n\t\t\tif( options.container )\r\n\t\t\t\tthis.container = document.getElementById(options.container);\r\n\t\t\tif(!this.container )\r\n\t\t\t\tthis.container = document.body;\r\n\r\n\t\t\tif( options.wrapped )\r\n\t\t\t{\r\n\t\t\t\t//create litegui root element\r\n\t\t\t\tvar root = document.createElement(\"div\");\r\n\t\t\t\troot.style.position = \"relative\";\r\n\t\t\t\troot.style.overflow = \"hidden\";\r\n\t\t\t\tthis.root = root;\r\n\t\t\t\tthis.container.appendChild( root );\r\n\r\n\t\t\t\t//content: the main container for everything\r\n\t\t\t\tvar content = document.createElement(\"div\");\r\n\t\t\t\tthis.content = content;\r\n\t\t\t\tthis.root.appendChild(content);\r\n\r\n\t\t\t\t//maximize\r\n\t\t\t\tif( this.root.classList.contains(\"fullscreen\") )\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.addEventListener(\"resize\", function(e) { \r\n\t\t\t\t\t\tLiteGUI.maximizeWindow();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.root = this.content = this.container;\r\n\r\n\t\t\tthis.root.className = \"litegui-wrap fullscreen\";\r\n\t\t\tthis.content.className = \"litegui-maincontent\";\r\n\r\n\t\t\t//create modal dialogs container\r\n\t\t\tvar modalbg = this.modalbg_div = document.createElement(\"div\");\r\n\t\t\tthis.modalbg_div.className = \"litemodalbg\";\r\n\t\t\tthis.root.appendChild(this.modalbg_div);\r\n\t\t\tmodalbg.style.display = \"none\";\r\n\r\n\t\t\t//create menubar\r\n\t\t\tif(options.menubar)\r\n\t\t\t\tthis.createMenubar();\r\n\r\n\t\t\t//called before anything\r\n\t\t\tif(options.gui_callback)\r\n\t\t\t\toptions.gui_callback();\r\n\r\n\t\t\t//external windows\r\n\t\t\twindow.addEventListener(\"beforeunload\", function(e) {\r\n\t\t\t\tfor(var i in LiteGUI.windows)\r\n\t\t\t\t\tLiteGUI.windows[i].close();\r\n\t\t\t\tLiteGUI.windows = [];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Triggers a simple event in an object (similar to jQuery.trigger)\r\n\t\t* @method trigger\r\n\t\t* @param {Object} element could be an HTMLEntity or a regular object\r\n\t\t* @param {String} event_name the type of the event\r\n\t\t* @param {*} params it will be stored in e.detail\r\n\t\t* @param {*} origin it will be stored in e.srcElement\r\n\t\t*/\r\n\t\ttrigger: function(element, event_name, params, origin)\r\n\t\t{\r\n\t\t\tvar evt = document.createEvent( 'CustomEvent' );\r\n\t\t\tevt.initCustomEvent( event_name, true,true, params ); //canBubble, cancelable, detail\r\n\t\t\tevt.srcElement = origin;\r\n\t\t\tif( element.dispatchEvent )\r\n\t\t\t\telement.dispatchEvent( evt );\r\n\t\t\telse if( element.__events )\r\n\t\t\t\telement.__events.dispatchEvent( evt );\r\n\t\t\t//else nothing seems binded here so nothing to do\r\n\t\t\treturn evt;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Binds an event in an object (similar to jQuery.bind)\r\n\t\t* If the element is not an HTML entity a new one is created, attached to the object (as non-enumerable, called __events) and used\r\n\t\t* @method trigger\r\n\t\t* @param {Object} element could be an HTMLEntity, a regular object, a query string or a regular Array of entities\r\n\t\t* @param {String} event the string defining the event\r\n\t\t* @param {Function} callback where to call\r\n\t\t*/\r\n\t\tbind: function( element, event, callback )\r\n\t\t{\r\n\t\t\tif(!element)\r\n\t\t\t\tthrow(\"Cannot bind to null\");\r\n\t\t\tif(!event)\r\n\t\t\t\tthrow(\"Event bind missing\");\r\n\t\t\tif(!callback)\r\n\t\t\t\tthrow(\"Bind callback missing\");\r\n\r\n\t\t\tif(element.constructor === String)\r\n\t\t\t\telement = document.querySelectorAll( element );\r\n\t\t\t\t\r\n\t\t\tif(element.constructor === NodeList || element.constructor === Array)\r\n\t\t\t{\r\n\t\t\t\tfor(var i = 0; i < element.length; ++i)\r\n\t\t\t\t\tinner( element[i] );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tinner( element );\r\n\r\n\t\t\tfunction inner( element )\r\n\t\t\t{\r\n\t\t\t\tif(element.addEventListener)\r\n\t\t\t\t\telement.addEventListener(event, callback);\r\n\t\t\t\telse if(element.__events)\r\n\t\t\t\t\telement.__events.addEventListener( event, callback );\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t//create a dummy HTMLentity so we can use it to bind HTML events\r\n\t\t\t\t\tvar dummy = document.createElement(\"span\");\r\n\t\t\t\t\tdummy.widget = element; //double link\r\n\t\t\t\t\tObject.defineProperty( element, \"__events\", {\r\n\t\t\t\t\t\tenumerable: false,\r\n\t\t\t\t\t\tconfigurable: false,\r\n\t\t\t\t\t\twritable: false,\r\n\t\t\t\t\t\tvalue: dummy\r\n\t\t\t\t\t});\r\n\t\t\t\t\telement.__events.addEventListener( event, callback );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Unbinds an event in an object (similar to jQuery.unbind)\r\n\t\t* @method unbind\r\n\t\t* @param {Object} element could be an HTMLEntity or a regular object\r\n\t\t* @param {String} event the string defining the event\r\n\t\t* @param {Function} callback where to call\r\n\t\t*/\r\n\t\tunbind: function(element, event, callback)\r\n\t\t{\r\n\t\t\tif( element.removeEventListener )\r\n\t\t\t\telement.removeEventListener( event, callback );\r\n\t\t\telse if( element.__events && element.__events.removeEventListener )\r\n\t\t\t\telement.__events.removeEventListener( event, callback );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* removes a class \r\n\t\t* @method removeClass\r\n\t\t* @param {HTMLElement} root\r\n\t\t* @param {String} selector\r\n\t\t* @param {String} class_name\r\n\t\t*/\r\n\t\tremoveClass: function( elem, selector, class_name ){\r\n\t\t\tif(!class_name)\r\n\t\t\t{\r\n\t\t\t\tclass_name = selector;\r\n\t\t\t\tselector = \".\" + selector;\r\n\t\t\t}\r\n\t\t\tvar list = (elem || document).querySelectorAll( selector );\r\n\t\t\tfor(var i = 0; i < list.length; ++i)\r\n\t\t\t\tlist[i].classList.remove(class_name);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Appends litegui widget to the global interface\r\n\t\t* @method add\r\n\t\t* @param {Object} litegui_element\r\n\t\t*/\r\n\t\tadd: function( litegui_element )\r\n\t\t{\r\n\t\t\tthis.content.appendChild( litegui_element.root || litegui_element );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Remove from the interface, it is is an HTML element it is removed from its parent, if it is a widget the same.\r\n\t\t* @method remove\r\n\t\t* @param {Object} litegui_element it also supports HTMLentity, selector string or Array of elements\r\n\t\t*/\r\n\t\tremove: function( element )\r\n\t\t{\r\n\t\t\tif(!element)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif( element.constructor === String ) //selector\r\n\t\t\t{\r\n\t\t\t\tvar elements = document.querySelectorAll( element );\r\n\t\t\t\tfor(var i = 0; i < elements.length; ++i)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar element = elements[i];\r\n\t\t\t\t\tif(element && element.parentNode)\r\n\t\t\t\t\t\telement.parentNode.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif( element.constructor === Array || element.constructor === NodeList ) \r\n\t\t\t{\r\n\t\t\t\tfor(var i = 0; i < element.length; ++i)\r\n\t\t\t\t\tLiteGUI.remove( element[i] );\r\n\t\t\t}\r\n\t\t\telse if( element.root && element.root.parentNode ) //ltiegui widget\r\n\t\t\t\telement.root.parentNode.removeChild( element.root );\r\n\t\t\telse if( element.parentNode ) //regular HTML entity\r\n\t\t\t\telement.parentNode.removeChild( element );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* wrapper of document.getElementById\r\n\t\t* @method getById\r\n\t\t* @param {String} id\r\n\t\t* return {HTMLEntity}\r\n\t\t**/\r\n\t\tgetById: function(id)\r\n\t\t{\r\n\t\t\treturn document.getElementById(id);\r\n\t\t},\r\n\r\n\t\tcreateMenubar: function()\r\n\t\t{\r\n\t\t\tthis.menubar = new LiteGUI.Menubar(\"mainmenubar\");\r\n\t\t\tthis.add( this.menubar );\r\n\t\t},\r\n\r\n\t\tsetWindowSize: function(w,h)\r\n\t\t{\r\n\t\t\tvar style = this.root.style;\r\n\r\n\t\t\tif(w && h)\r\n\t\t\t{\r\n\t\t\t\tstyle.width = w+\"px\";\r\n\t\t\t\tstyle.height = h + \"px\";\r\n\t\t\t\tstyle.boxShadow = \"0 0 4px black\"\r\n\t\t\t\tthis.root.classList.remove(\"fullscreen\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif( this.root.classList.contains(\"fullscreen\") )\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.root.classList.add(\"fullscreen\");\r\n\t\t\t\tstyle.width = \"100%\";\r\n\t\t\t\tstyle.height = \"100%\";\r\n\t\t\t\tstyle.boxShadow = \"0 0 0\";\r\n\t\t\t}\r\n\t\t\tLiteGUI.trigger( LiteGUI, \"resized\");\r\n\t\t},\r\n\r\n\t\tmaximizeWindow: function()\r\n\t\t{\r\n\t\t\tthis.setWindowSize();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Change cursor\r\n\t\t* @method setCursor\r\n\t\t* @param {String} cursor\r\n\t\t**/\r\n\t\tsetCursor: function( name )\r\n\t\t{\r\n\t\t\tthis.root.style.cursor = name;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Test if the cursor is inside an element\r\n\t\t* @method setCursor\r\n\t\t* @param {String} cursor\r\n\t\t**/\r\n\t\tisCursorOverElement: function( event, element )\r\n\t\t{\r\n\t\t\tvar left = event.pageX;\r\n\t\t\tvar top = event.pageY;\r\n\t\t\tvar rect = element.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn false;\r\n\t\t\tif(top > rect.top && top < (rect.top + rect.height) &&\r\n\t\t\t\tleft > rect.left && left < (rect.left + rect.width) )\r\n\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetRect: function(element)\r\n\t\t{\r\n\t\t\treturn element.getBoundingClientRect();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Copy a string to the clipboard (it needs to be invoqued from a click event)\r\n\t\t* @method toClipboard\r\n\t\t* @param {String} data\r\n\t\t* @param {Boolean} force_local force to store the data in the browser clipboard (this one can be read back)\r\n\t\t**/\r\n\t\ttoClipboard: function( object, force_local )\r\n\t\t{\r\n\t\t\tif(object && object.constructor !== String )\r\n\t\t\t\tobject = JSON.stringify( object );\r\n\r\n\t\t\tvar input = null;\r\n\t\t\tvar in_clipboard = false;\r\n\t\t\tif( !force_local )\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tvar copySupported = document.queryCommandSupported('copy');\r\n\t\t\t\tinput = document.createElement(\"input\");\r\n\t\t\t\tinput.type = \"text\";\r\n\t\t\t\tinput.style.opacity = 0;\r\n\t\t\t\tinput.value = object;\r\n\t\t\t\tdocument.body.appendChild( input );\r\n\t\t\t\tinput.select();\r\n\t\t\t\tin_clipboard = document.execCommand('copy');\r\n\t\t\t\tconsole.log( in_clipboard ? \"saved to clipboard\" : \"problem saving to clipboard\");\r\n\t\t\t\tdocument.body.removeChild( input );\r\n\t\t\t} catch (err) {\r\n\t\t\t\tif(input)\r\n\t\t\t\t\tdocument.body.removeChild( input );\r\n\t\t\t\tconsole.warn('Oops, unable to copy using the true clipboard');\r\n\t\t\t}\r\n\r\n\t\t\t//old system\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis._safe_cliboard = null;\r\n\t\t\t\tlocalStorage.setItem(\"litegui_clipboard\", object );\r\n\t\t\t}\r\n\t\t\tcatch (err)\r\n\t\t\t{\r\n\t\t\t\tthis._safe_cliboard = object;\r\n\t\t\t\tconsole.warn(\"cliboard quota excedeed\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Reads from the secondary clipboard (only can read if the data was stored using the toClipboard)\r\n\t\t* @method getLocalClipboard\r\n\t\t* @return {String} clipboard\r\n\t\t**/\r\n\t\tgetLocalClipboard: function()\r\n\t\t{\r\n\t\t\tvar data = localStorage.getItem(\"litegui_clipboard\");\r\n\t\t\tif(!data && this._safe_cliboard)\r\n\t\t\t\tdata = this._safe_cliboard;\r\n\t\t\tif(!data) \r\n\t\t\t\treturn null;\r\n\t\t\tif(data[0] == \"{\")\r\n\t\t\t\treturn JSON.parse( data );\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Insert some CSS code to the website\r\n\t\t* @method addCSS\r\n\t\t* @param {String|Object} code it could be a string with CSS rules, or an object with the style syntax.\r\n\t\t**/\r\n\t\taddCSS: function(code)\r\n\t\t{\r\n\t\t\tif(!code)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(code.constructor === String)\r\n\t\t\t{\r\n\t\t\t\tvar style = document.createElement('style');\r\n\t\t\t\tstyle.type = 'text/css';\r\n\t\t\t\tstyle.innerHTML = code;\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(style);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tfor(var i in code)\r\n\t\t\t\tdocument.body.style[i] = code[i];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Requires a new CSS\r\n\t\t* @method requireCSS\r\n\t\t* @param {String} url string with url or an array with several urls\r\n\t\t* @param {Function} on_complete\r\n\t\t**/\r\n\t\trequireCSS: function(url, on_complete)\r\n\t\t{\r\n\t\t\tif(typeof(url)==\"string\")\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\twhile(url.length)\r\n\t\t\t{\r\n\t\t\t\tvar link  = document.createElement('link');\r\n\t\t\t\t//link.id   = cssId;\r\n\t\t\t\tlink.rel  = 'stylesheet';\r\n\t\t\t\tlink.type = 'text/css';\r\n\t\t\t\tlink.href = url.shift(1);\r\n\t\t\t\tlink.media = 'all';\r\n\t\t\t\tvar head = document.getElementsByTagName('head')[0];\r\n\t\t\t\thead.appendChild(link);\r\n\t\t\t\tif(url.length == 0)\r\n\t\t\t\t\tlink.onload = on_complete;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request file from url (it could be a binary, text, etc.). If you want a simplied version use \r\n\t\t* @method request\r\n\t\t* @param {Object} request object with all the parameters like data (for sending forms), dataType, success, error\r\n\t\t* @param {Function} on_complete\r\n\t\t**/\r\n\t\trequest: function(request)\r\n\t\t{\r\n\t\t\tvar dataType = request.dataType || \"text\";\r\n\t\t\tif(dataType == \"json\") //parse it locally\r\n\t\t\t\tdataType = \"text\";\r\n\t\t\telse if(dataType == \"xml\") //parse it locally\r\n\t\t\t\tdataType = \"text\";\r\n\t\t\telse if (dataType == \"binary\")\r\n\t\t\t{\r\n\t\t\t\t//request.mimeType = \"text/plain; charset=x-user-defined\";\r\n\t\t\t\tdataType = \"arraybuffer\";\r\n\t\t\t\trequest.mimeType = \"application/octet-stream\";\r\n\t\t\t}\t\r\n\r\n\t\t\t//regular case, use AJAX call\r\n\t        var xhr = new XMLHttpRequest();\r\n\t        xhr.open( request.data ? 'POST' : 'GET', request.url, true);\r\n\t        if(dataType)\r\n\t            xhr.responseType = dataType;\r\n\t        if (request.mimeType)\r\n\t            xhr.overrideMimeType( request.mimeType );\r\n\t\t\tif( request.nocache )\r\n\t\t\t\txhr.setRequestHeader('Cache-Control', 'no-cache');\r\n\r\n\t        xhr.onload = function(load)\r\n\t\t\t{\r\n\t\t\t\tvar response = this.response;\r\n\t\t\t\tif(this.status != 200)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar err = \"Error \" + this.status;\r\n\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\tLEvent.trigger(xhr,\"fail\", this.status);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(request.dataType == \"json\") //chrome doesnt support json format\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(request.dataType == \"xml\")\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar xmlparser = new DOMParser();\r\n\t\t\t\t\t\tresponse = xmlparser.parseFromString(response,\"text/xml\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(request.success)\r\n\t\t\t\t\trequest.success.call(this, response, this);\r\n\t\t\t};\r\n\t        xhr.onerror = function(err) {\r\n\t\t\t\tif(request.error)\r\n\t\t\t\t\trequest.error(err);\r\n\t\t\t}\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tif( request.data )\r\n\t\t\t{\r\n\t\t\t\tfor(var i in request.data)\r\n\t\t\t\t\tdata.append(i,request.data[i]);\r\n\t\t\t}\r\n\r\n\t        xhr.send( data );\r\n\t\t\treturn xhr;\r\n\t\t},\t\r\n\r\n\t\t/**\r\n\t\t* Request file from url\r\n\t\t* @method requestText\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestText: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"text\", success: on_complete, error: on_error });\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request file from url\r\n\t\t* @method requestJSON\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestJSON: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"json\", success: on_complete, error: on_error });\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request binary file from url\r\n\t\t* @method requestBinary\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestBinary: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"binary\", success: on_complete, error: on_error });\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method requireScript\r\n\t\t* @param {String|Array} url the url of the script or an array containing several urls\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t* @param {Function} on_progress (if several files are required, on_progress is called after every file is added to the DOM)\r\n\t\t**/\r\n\t\trequireScript: function(url, on_complete, on_error, on_progress, version )\r\n\t\t{\r\n\t\t\tif(!url)\r\n\t\t\t\tthrow(\"invalid URL\");\r\n\r\n\t\t\tif( url.constructor === String )\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\tvar total = url.length;\r\n\t\t\tvar size = total;\r\n\t\t\tvar loaded_scripts = [];\r\n\r\n\t\t\tfor(var i in url)\r\n\t\t\t{\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.num = i;\r\n\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\tscript.src = url[i] + ( version ? \"?version=\" + version : \"\" );\r\n\t\t\t\tscript.original_src = url[i];\r\n\t\t\t\tscript.async = false;\r\n\t\t\t\tscript.onload = function(e) { \r\n\t\t\t\t\ttotal--;\r\n\t\t\t\t\tloaded_scripts.push(this);\r\n\t\t\t\t\tif(total)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(on_progress)\r\n\t\t\t\t\t\t\ton_progress(this.original_src, this.num);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(on_complete)\r\n\t\t\t\t\t\ton_complete( loaded_scripts );\r\n\t\t\t\t};\r\n\t\t\t\tif(on_error)\r\n\t\t\t\t\tscript.onerror = function(err) { \r\n\t\t\t\t\t\ton_error(err, this.original_src, this.num );\r\n\t\t\t\t\t}\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t//old version, it loads one by one, so it is slower\r\n\t\trequireScriptSerial: function(url, on_complete, on_progress )\r\n\t\t{\r\n\t\t\tif(typeof(url)==\"string\")\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\tvar loaded_scripts = [];\r\n\t\t\tfunction addScript()\r\n\t\t\t{\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\tscript.src = url.shift(1);\r\n\t\t\t\tscript.onload = function(e) { \r\n\t\t\t\t\tif(url.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(on_progress)\r\n\t\t\t\t\t\t\ton_progress(url[0], url.length);\r\n\r\n\t\t\t\t\t\taddScript();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tloaded_scripts.push(this);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(on_complete)\r\n\t\t\t\t\t\ton_complete( loaded_scripts );\r\n\t\t\t\t};\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t\t}\r\n\r\n\t\t\taddScript();\r\n\t\t},\r\n\r\n\t\tnewDiv: function(id, code)\r\n\t\t{\r\n\t\t\treturn this.createElement(\"div\",id,code);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method createElement\r\n\t\t* @param {String} tag\r\n\t\t* @param {String} id_class string containing id and classes, example: \"myid .someclass .anotherclass\"\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} style\r\n\t\t**/\r\n\t\tcreateElement: function(tag, id_class, content, style, events)\r\n\t\t{\r\n\t\t\tvar elem = document.createElement( tag );\r\n\t\t\tif(id_class)\r\n\t\t\t{\r\n\t\t\t\tvar t = id_class.split(\" \");\r\n\t\t\t\tfor(var i = 0; i < t.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(t[i][0] == \".\")\r\n\t\t\t\t\t\telem.classList.add( t[i].substr(1) );\r\n\t\t\t\t\telse if(t[i][0] == \"#\")\r\n\t\t\t\t\t\telem.id = t[i].substr(1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telem.id = t[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telem.root = elem;\r\n\t\t\tif(content)\r\n\t\t\t\telem.innerHTML = content;\r\n\t\t\telem.add = function(v) { this.appendChild( v.root || v ); };\r\n\r\n\t\t\tif(style)\r\n\t\t\t{\r\n\t\t\t\tif(style.constructor === String)\r\n\t\t\t\t\telem.setAttribute(\"style\",style);\r\n\t\t\t\telse\r\n\t\t\t\t\tfor(var i in style)\r\n\t\t\t\t\t\telem.style[i] = style[i];\r\n\t\t\t}\r\n\r\n\t\t\tif(events)\r\n\t\t\t{\r\n\t\t\t\tfor(var i in events)\r\n\t\t\t\t\telem.addEventListener(i, events[i]);\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Useful to create elements from a text like '<div><span class=\"title\"></span></div>' and an object like { \".title\":\"mytitle\" }\r\n\t\t* @method createListItem\r\n\t\t* @param {String} code\r\n\t\t* @param {Object} values it will use innerText in the elements that matches that selector\r\n\t\t* @param {Object} style\r\n\t\t* @return {HTMLElement} \r\n\t\t**/\r\n\t\tcreateListItem: function( code, values, style )\r\n\t\t{\r\n\t\t\tvar elem = document.createElement(\"span\");\r\n\t\t\telem.innerHTML = code;\r\n\t\t\telem = elem.childNodes[0]; //to get the node\r\n\t\t\tif(values)\r\n\t\t\tfor(var i in values)\r\n\t\t\t{\r\n\t\t\t\tvar subelem = elem.querySelector(i);\r\n\t\t\t\tif(subelem)\r\n\t\t\t\t\tsubelem.innerText = values[i];\r\n\t\t\t}\r\n\t\t\tif(style)\r\n\t\t\tfor(var i in style)\r\n\t\t\t\telem.style[i] = style[i];\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method createButton\r\n\t\t* @param {String} id\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback when the button is pressed\r\n\t\t* @param {Object|String} style\r\n\t\t**/\r\n\t\tcreateButton: function( id_class, content, callback, style )\r\n\t\t{\r\n\t\t\tvar elem = document.createElement(\"button\");\r\n\t\t\telem.className = \"litegui litebutton button\";\r\n\t\t\tif(id_class)\r\n\t\t\t{\r\n\t\t\t\tvar t = id_class.split(\" \");\r\n\t\t\t\tfor(var i = 0; i < t.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(t[i][0] == \".\")\r\n\t\t\t\t\t\telem.classList.add( t[i].substr(1) );\r\n\t\t\t\t\telse if(t[i][0] == \"#\")\r\n\t\t\t\t\t\telem.id = t[i].substr(1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telem.id = t[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telem.root = elem;\r\n\t\t\tif(content !== undefined)\r\n\t\t\t\telem.innerHTML = content;\r\n\t\t\tif(callback)\r\n\t\t\t\telem.addEventListener(\"click\", callback );\r\n\t\t\tif(style)\r\n\t\t\t{\r\n\t\t\t\tif(style.constructor === String)\r\n\t\t\t\t\telem.setAttribute(\"style\",style);\r\n\t\t\t\telse\r\n\t\t\t\t\tfor(var i in style)\r\n\t\t\t\t\t\telem.style[i] = style[i];\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\tgetParents: function(element)\r\n\t\t{\r\n\t\t\tvar elements = [];\r\n\t\t\twhile ((element = element.parentElement) !== null) {\r\n\t\t\t\tif (element.nodeType !== Node.ELEMENT_NODE)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telements.push(elem);\r\n\t\t\t}\r\n\t\t\treturn elements;\r\n\t\t},\r\n\r\n\t\t//used to create a window that retains all the CSS info or the scripts.\r\n\t\tnewWindow: function(title, width, height, options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\tvar new_window = window.open(\"\",\"\",\"width=\"+width+\", height=\"+height+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\t\tnew_window.document.write( \"<html><head><title>\"+title+\"</title>\" );\r\n\r\n\t\t\t//transfer style\r\n\t\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\t\tnew_window.document.write( styles[i].outerHTML );\r\n\r\n\t\t\t//transfer scripts (optional because it can produce some errors)\r\n\t\t\tif(options.scripts)\r\n\t\t\t{\r\n\t\t\t\tvar scripts = document.querySelectorAll(\"script\");\r\n\t\t\t\tfor(var i = 0; i < scripts.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(scripts[i].src) //avoid inline scripts, otherwise a cloned website would be created\r\n\t\t\t\t\t\tnew_window.document.write( scripts[i].outerHTML );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar content = options.content || \"\";\r\n\t\t\tnew_window.document.write( \"</head><body>\"+content+\"</body></html>\" );\r\n\t\t\tnew_window.document.close();\r\n\t\t\treturn new_window;\r\n\t\t},\r\n\r\n\t\t//* DIALOGS *******************\r\n\t\tshowModalBackground: function(v)\r\n\t\t{\r\n\t\t\tif(LiteGUI.modalbg_div)\r\n\t\t\t\tLiteGUI.modalbg_div.style.display = v ? \"block\" : \"none\";\r\n\t\t},\r\n\r\n\t\tshowMessage: function(content, options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\t\r\n\t\t\toptions.title = options.title || \"Attention\";\r\n\t\t\toptions.content = content;\r\n\t\t\toptions.close = 'fade';\r\n\t\t\tvar dialog = new LiteGUI.Dialog( options );\r\n\t\t\tif(!options.noclose)\r\n\t\t\t\tdialog.addButton(\"Close\",{ close: true });\r\n\t\t\tdialog.makeModal('fade');\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a dialog with a message\r\n\t\t* @method popup\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} options ( min_height, content, noclose )\r\n\t\t**/\r\n\t\tpopup: function( content, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\toptions.min_height = 140;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\toptions.content = content;\r\n\t\t\toptions.close = 'fade';\r\n\r\n\t\t\tvar dialog = new LiteGUI.Dialog(options);\r\n\t\t\tif(!options.noclose)\r\n\t\t\t\tdialog.addButton(\"Close\",{ close: true });\r\n\t\t\tdialog.show();\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t* Shows an alert dialog with a message\r\n\t\t* @method alert\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\talert: function( content, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\t\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Alert\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\toptions.height = options.height || 140;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\t\t\tLiteGUI.remove(\".litepanel.alert\"); //kill other panels\r\n\t\t\treturn LiteGUI.showMessage(content,options);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a confirm dialog with a message\r\n\t\t* @method confirm\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tconfirm: function( content, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Confirm\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\t//options.height = 100;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tcontent +=\"<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>\";\r\n\t\t\toptions.noclose = true;\r\n\r\n\t\t\tvar dialog = this.showMessage(content,options);\r\n\t\t\tdialog.content.style.paddingBottom = \"10px\";\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\t\t\tbuttons[0].focus();\r\n\r\n\t\t\tfunction inner(v) {\r\n\t\t\t\tvar v = this.dataset[\"value\"] == \"yes\";\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback) \r\n\t\t\t\t\tcallback(v);\r\n\t\t\t}\r\n\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a prompt dialog with a message\r\n\t\t* @method prompt\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tprompt: function( content, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Prompt\";\r\n\t\t\toptions.width = options.width || 280;\r\n\r\n\t\t\t//options.height = 140 + (options.textarea ? 40 : 0);\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tvar value = options.value || \"\";\r\n\t\t\tvar textinput = \"<input type='text' value='\"+value+\"'/>\";\r\n\t\t\tif (options.textarea)\r\n\t\t\t\ttextinput = \"<textarea class='textfield' style='width:95%'>\"+value+\"</textarea>\";\r\n\r\n\t\t\tcontent +=\"<p>\"+textinput+\"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>\";\r\n\t\t\toptions.noclose = true;\r\n\t\t\tvar dialog = this.showMessage( content, options );\r\n\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\r\n\t\t\tvar input = dialog.content.querySelector(\"input,textarea\");\r\n\t\t\tinput.addEventListener(\"keydown\", inner_key, true);\r\n\r\n\t\t\tfunction inner() {\r\n\t\t\t\tvar value = input.value;\r\n\t\t\t\tif(this.dataset && this.dataset[\"value\"] == \"cancel\")\r\n\t\t\t\t\tvalue = null;\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback)\r\n\t\t\t\t\tcallback( value );\r\n\t\t\t};\r\n\r\n\t\t\tfunction inner_key(e)\r\n\t\t\t{\r\n\t\t\t\tif (!e)\r\n\t\t\t\t\te = window.event;\r\n\t\t\t\tvar keyCode = e.keyCode || e.which;\r\n\t\t\t\tif (keyCode == '13'){\r\n\t\t\t\t\tinner();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\t\r\n\t\t\t\tif (keyCode == '29')\r\n\t\t\t\t\tdialog.close();\r\n\t\t\t};\r\n\r\n\t\t\tinput.focus();\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a choice dialog with a message\r\n\t\t* @method choice\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tchoice: function( content, choices, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Select one option\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\t//options.height = 100;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tfor(var i in choices)\r\n\t\t\t{\r\n\t\t\t\tcontent +=\"<button class='litebutton' data-value='\"+i+\"' style='width:45%; margin-left: 10px'>\"+(choices[i].content || choices[i])+\"</button>\";\r\n\t\t\t}\r\n\t\t\toptions.noclose = true;\r\n\r\n\t\t\tvar dialog = this.showMessage(content,options);\r\n\t\t\tdialog.content.style.paddingBottom = \"10px\";\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\r\n\t\t\tfunction inner(v) {\r\n\t\t\t\tvar v = choices[ this.dataset[\"value\"] ];\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback) \r\n\t\t\t\t\tcallback(v);\r\n\t\t\t}\r\n\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\tdownloadURL: function( url, filename )\r\n\t\t{\r\n\t\t\tvar link = document.createElement('a');\r\n\t\t\tlink.href = url;\r\n\t\t\tlink.download = filename;\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlink.click();\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t},\r\n\r\n\t\tdownloadFile: function( filename, data, dataType )\r\n\t\t{\r\n\t\t\tif(!data)\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"No file provided to download\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!dataType)\r\n\t\t\t{\r\n\t\t\t\tif(data.constructor === String )\r\n\t\t\t\t\tdataType = 'text/plain';\r\n\t\t\t\telse\r\n\t\t\t\t\tdataType = 'application/octet-stream';\r\n\t\t\t}\r\n\r\n\t\t\tvar file = null;\r\n\t\t\tif(data.constructor !== File && data.constructor !== Blob)\r\n\t\t\t\tfile = new Blob( [ data ], {type : dataType});\r\n\t\t\telse\r\n\t\t\t\tfile = data;\r\n\r\n\t\t\tvar url = URL.createObjectURL( file );\r\n\t\t\tvar element = document.createElement(\"a\");\r\n\t\t\telement.setAttribute('href', url);\r\n\t\t\telement.setAttribute('download', filename );\r\n\t\t\telement.style.display = 'none';\r\n\t\t\tdocument.body.appendChild(element);\r\n\t\t\telement.click();\r\n\t\t\tdocument.body.removeChild(element);\r\n\t\t\tsetTimeout( function(){ URL.revokeObjectURL( url ); }, 1000*60 ); //wait one minute to revoke url\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the URL vars ( ?foo=faa&foo2=etc )\r\n\t\t* @method getUrlVars\r\n\t\t**/\r\n\t\tgetUrlVars: function(){\r\n\t\t\tvar vars = [], hash;\r\n\t\t\tvar hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n\t\t\tfor(var i = 0; i < hashes.length; i++)\r\n\t\t\t{\r\n\t\t\t  hash = hashes[i].split('=');\r\n\t\t\t  vars.push(hash[0]);\r\n\t\t\t  vars[hash[0]] = hash[1];\r\n\t\t\t}\r\n\t\t\treturn vars;\r\n\t\t},\r\n\r\n\t\tgetUrlVar: function(name) {\r\n\t\t\treturn LiteGUI.getUrlVars()[name];\r\n\t\t},\r\n\r\n\t\tfocus: function( element )\r\n\t\t{\r\n\t\t\telement.focus();\r\n\t\t},\r\n\r\n\t\tblur: function( element )\r\n\t\t{\r\n\t\t\telement.blur();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Makes one element draggable\r\n\t\t* @method draggable\r\n\t\t* @param {HTMLEntity} container the element that will be dragged\r\n\t\t* @param {HTMLEntity} dragger the area to start the dragging\r\n\t\t**/\r\n\t\tdraggable: function( container, dragger, on_start, on_finish, on_is_draggable )\r\n\t\t{\r\n\t\t\tdragger = dragger || container;\r\n\t\t\tdragger.addEventListener(\"mousedown\", inner_mouse);\r\n\t\t\tdragger.style.cursor = \"move\";\r\n\t\t\tvar prev_x = 0;\r\n\t\t\tvar prev_y = 0;\r\n\r\n\t\t\tvar rect = container.getClientRects()[0];\r\n\t\t\tvar x = rect ? rect.left : 0;\r\n\t\t\tvar y = rect ? rect.top : 0;\r\n\r\n\t\t\tcontainer.style.position = \"absolute\";\r\n\t\t\tcontainer.style.left = x + \"px\";\r\n\t\t\tcontainer.style.top = y + \"px\";\r\n\r\n\t\t\tfunction inner_mouse(e)\r\n\t\t\t{\r\n\t\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!rect)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trect = container.getClientRects()[0];\r\n\t\t\t\t\t\tx = rect ? rect.left : 0;\r\n\t\t\t\t\t\ty = rect ? rect.top : 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(on_is_draggable && on_is_draggable(container,e) == false )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tprev_x = e.clientX;\r\n\t\t\t\t\tprev_y = e.clientY;\r\n\t\t\t\t\tdocument.addEventListener(\"mousemove\",inner_mouse);\r\n\t\t\t\t\tdocument.addEventListener(\"mouseup\",inner_mouse);\r\n\t\t\t\t\tif(on_start)\r\n\t\t\t\t\t\ton_start( container, e );\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.type == \"mouseup\")\r\n\t\t\t\t{\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\",inner_mouse);\r\n\t\t\t\t\tdocument.removeEventListener(\"mouseup\",inner_mouse);\r\n\r\n\t\t\t\t\tif( on_finish )\r\n\t\t\t\t\t\ton_finish( container, e );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.type == \"mousemove\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar deltax = e.clientX - prev_x;\r\n\t\t\t\t\tvar deltay = e.clientY - prev_y;\r\n\t\t\t\t\tprev_x = e.clientX;\r\n\t\t\t\t\tprev_y = e.clientY;\r\n\t\t\t\t\tx += deltax;\r\n\t\t\t\t\ty += deltay;\r\n\t\t\t\t\tcontainer.style.left = x + \"px\";\r\n\t\t\t\t\tcontainer.style.top = y + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Clones object content\r\n\t\t* @method cloneObject\r\n\t\t* @param {Object} object\r\n\t\t* @param {Object} target\r\n\t\t**/\r\n\t\tcloneObject: function(object, target)\r\n\t\t{\r\n\t\t\tvar o = target || {};\r\n\t\t\tfor(var i in object)\r\n\t\t\t{\r\n\t\t\t\tif(i[0] == \"_\" || i.substr(0,6) == \"jQuery\") //skip vars with _ (they are private)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar v = object[i];\r\n\t\t\t\tif(v == null)\r\n\t\t\t\t\to[i] = null;\t\t\t\r\n\t\t\t\telse if ( isFunction(v) )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse if (typeof(v) == \"number\" || typeof(v) == \"string\")\r\n\t\t\t\t\to[i] = v;\r\n\t\t\t\telse if( v.constructor == Float32Array ) //typed arrays are ugly when serialized\r\n\t\t\t\t\to[i] = Array.apply( [], v ); //clone\r\n\t\t\t\telse if ( isArray(v) )\r\n\t\t\t\t{\r\n\t\t\t\t\tif( o[i] && o[i].constructor == Float32Array ) //reuse old container\r\n\t\t\t\t\t\to[i].set(v);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[i] = JSON.parse( JSON.stringify(v) ); //v.slice(0); //not safe using slice because it doesnt clone content, only container\r\n\t\t\t\t}\r\n\t\t\t\telse //slow but safe\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//prevent circular recursions\r\n\t\t\t\t\t\to[i] = JSON.parse( JSON.stringify(v) );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn o;\r\n\t\t},\r\n\r\n\t\tsafeName: function( str )\r\n\t\t{\r\n\t\t\treturn String(str).replace(/[\\s\\.]/g, '');\r\n\t\t},\r\n\r\n\t\t//those useful HTML unicode codes that I never remeber but I always need\r\n\t\tspecial_codes: {\r\n\t\t\tclose: \"&#10005;\",\r\n\t\t\tnavicon: \"&#9776;\",\r\n\t\t\trefresh: \"&#8634;\",\r\n\t\t\tgear: \"&#9881;\",\r\n\t\t\topen_folder: \"&#128194;\",\r\n\t\t\tdownload: \"&#11123;\",\r\n\t\t\ttick: \"&#10003;\",\r\n\t\t\ttrash: \"&#128465;\"\r\n\t\t},\r\n\t\t\r\n\t\t//given a html entity string it returns the equivalent unicode character\r\n\t\thtmlEncode: function( html_code )\r\n\t\t{\r\n\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\te.innerHTML = html_code;\r\n\t\t\treturn e.innerText;\r\n\t\t},\r\n\r\n\t\t//given a unicode character it returns the equivalent html encoded string\r\n\t\thtmlDecode: function( unicode_character )\r\n\t\t{\r\n\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\te.innerText = unicode_character;\r\n\t\t\treturn e.innerHTML;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Convert sizes in any format to a valid CSS format (number to string, negative number to calc( 100% - number px )\r\n\t\t* @method sizeToCSS\r\n\t\t* @param {String||Number} size\r\n\t\t* @return {String} valid css size string\r\n\t\t**/\r\n\t\tsizeToCSS: function( v )\r\n\t\t{\r\n\t\t\tif( v ===  undefined || v === null )\r\n\t\t\t\treturn null;\r\n\t\t\tif(v.constructor === String )\r\n\t\t\t\treturn v;\r\n\t\t\tif(v >= 0 )\r\n\t\t\t\treturn (v|0) + \"px\";\r\n\t\t\treturn \"calc( 100% - \" + Math.abs(v|0) + \"px )\";\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the window where this element is attached (used in multi window applications)\r\n\t\t* @method getElementWindow\r\n\t\t* @param {HTMLElement} v\r\n\t\t* @return {Window} the window element\r\n\t\t**/\r\n\t\tgetElementWindow: function(v)\r\n\t\t{\r\n\t        var doc = v.ownerDocument;\r\n\t        return doc.defaultView || doc.parentWindow;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Helper, makes drag and drop easier by enabling drag and drop in a given element\r\n\t\t* @method createDropArea\r\n\t\t* @param {HTMLElement} element the element where users could drop items\r\n\t\t* @param {Function} callback_drop function to call when the user drops the item\r\n\t\t* @param {Function} callback_enter [optional] function to call when the user drags something inside\r\n\t\t**/\r\n\t\tcreateDropArea: function( element, callback_drop, callback_enter, callback_exit )\r\n\t\t{\r\n\t\t\telement.addEventListener(\"dragenter\", onDragEvent);\r\n\r\n\t\t\tfunction onDragEvent(evt)\r\n\t\t\t{\r\n\t\t\t\telement.addEventListener(\"dragexit\", onDragEvent);\r\n\t\t\t\telement.addEventListener(\"dragover\", onDragEvent);\r\n\t\t\t\telement.addEventListener(\"drop\", onDrop);\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tif(evt.type == \"dragenter\" && callback_enter)\r\n\t\t\t\t\tcallback_enter(evt, this);\r\n\t\t\t\tif(evt.type == \"dragexit\" && callback_exit)\r\n\t\t\t\t\tcallback_exit(evt, this);\r\n\t\t\t}\r\n\r\n\t\t\tfunction onDrop(evt)\r\n\t\t\t{\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tevt.preventDefault();\r\n\r\n\t\t\t\telement.removeEventListener(\"dragexit\", onDragEvent);\r\n\t\t\t\telement.removeEventListener(\"dragover\", onDragEvent);\r\n\t\t\t\telement.removeEventListener(\"drop\", onDrop);\r\n\r\n\t\t\t\tvar r = undefined;\r\n\t\t\t\tif(callback_drop)\r\n\t\t\t\t\tr = callback_drop(evt);\r\n\t\t\t\tif(r)\r\n\t\t\t\t{\r\n\t\t\t\t\tevt.stopPropagation();\r\n\t\t\t\t\tevt.stopImmediatePropagation();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//low quality templating system\r\n\tObject.defineProperty( String.prototype, \"template\", {\r\n\t\tvalue: function( data, eval_code )\r\n\t\t{\r\n\t\t\tvar tpl = this;\r\n\t\t\tvar re = /{{([^}}]+)?}}/g, match;\r\n\t\t    while(match = re.exec(tpl)) {\r\n\t\t\t\tvar str = eval_code ? (new Function(\"with(this) { try { return \" + match[1] +\"} catch(e) { return 'error';} }\")).call(data) : data[match[1]];\r\n\t\t\t    tpl = tpl.replace(match[0], str);\r\n\t\t    }\r\n\t\t    return tpl;\t\t\r\n\t\t},\r\n\t\tenumerable: false\r\n\t});\r\n\r\n\r\n\tfunction purgeElement(d, skip) {\r\n\t    var a = d.attributes, i, l, n;\r\n\r\n\t    if (a) {\r\n\t        for (i = a.length - 1; i >= 0; i -= 1) {\r\n\t            n = a[i].name;\r\n\t            if (typeof d[n] === 'function') {\r\n\t                d[n] = null;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\r\n\t    a = d.childNodes;\r\n\t    if (a) {\r\n\t        l = a.length;\r\n\t        for (i = 0; i < l; i += 1) {\r\n\t            purgeElement(d.childNodes[i]);\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\t//useful functions\r\n\r\n\t//from stackoverflow http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\r\n\r\n\tif(typeof escapeHtmlEntities == 'undefined') {\r\n\t        escapeHtmlEntities = function (text) {\r\n\t            return text.replace(/[\\u00A0-\\u2666<>\\&]/g, function(c) {\r\n\t                return '&' + \r\n\t                (escapeHtmlEntities.entityTable[c.charCodeAt(0)] || '#'+c.charCodeAt(0)) + ';';\r\n\t            });\r\n\t        };\r\n\r\n\t        // all HTML4 entities as defined here: http://www.w3.org/TR/html4/sgml/entities.html\r\n\t        // added: amp, lt, gt, quot and apos\r\n\t        escapeHtmlEntities.entityTable = {\r\n\t            34 : 'quot', \r\n\t            38 : 'amp', \r\n\t            39 : 'apos', \r\n\t            60 : 'lt', \r\n\t            62 : 'gt', \r\n\t            160 : 'nbsp', \r\n\t            161 : 'iexcl', \r\n\t            162 : 'cent', \r\n\t            163 : 'pound', \r\n\t            164 : 'curren', \r\n\t            165 : 'yen', \r\n\t            166 : 'brvbar', \r\n\t            167 : 'sect', \r\n\t            168 : 'uml', \r\n\t            169 : 'copy', \r\n\t            170 : 'ordf', \r\n\t            171 : 'laquo', \r\n\t            172 : 'not', \r\n\t            173 : 'shy', \r\n\t            174 : 'reg', \r\n\t            175 : 'macr', \r\n\t            176 : 'deg', \r\n\t            177 : 'plusmn', \r\n\t            178 : 'sup2', \r\n\t            179 : 'sup3', \r\n\t            180 : 'acute', \r\n\t            181 : 'micro', \r\n\t            182 : 'para', \r\n\t            183 : 'middot', \r\n\t            184 : 'cedil', \r\n\t            185 : 'sup1', \r\n\t            186 : 'ordm', \r\n\t            187 : 'raquo', \r\n\t            188 : 'frac14', \r\n\t            189 : 'frac12', \r\n\t            190 : 'frac34', \r\n\t            191 : 'iquest', \r\n\t            192 : 'Agrave', \r\n\t            193 : 'Aacute', \r\n\t            194 : 'Acirc', \r\n\t            195 : 'Atilde', \r\n\t            196 : 'Auml', \r\n\t            197 : 'Aring', \r\n\t            198 : 'AElig', \r\n\t            199 : 'Ccedil', \r\n\t            200 : 'Egrave', \r\n\t            201 : 'Eacute', \r\n\t            202 : 'Ecirc', \r\n\t            203 : 'Euml', \r\n\t            204 : 'Igrave', \r\n\t            205 : 'Iacute', \r\n\t            206 : 'Icirc', \r\n\t            207 : 'Iuml', \r\n\t            208 : 'ETH', \r\n\t            209 : 'Ntilde', \r\n\t            210 : 'Ograve', \r\n\t            211 : 'Oacute', \r\n\t            212 : 'Ocirc', \r\n\t            213 : 'Otilde', \r\n\t            214 : 'Ouml', \r\n\t            215 : 'times', \r\n\t            216 : 'Oslash', \r\n\t            217 : 'Ugrave', \r\n\t            218 : 'Uacute', \r\n\t            219 : 'Ucirc', \r\n\t            220 : 'Uuml', \r\n\t            221 : 'Yacute', \r\n\t            222 : 'THORN', \r\n\t            223 : 'szlig', \r\n\t            224 : 'agrave', \r\n\t            225 : 'aacute', \r\n\t            226 : 'acirc', \r\n\t            227 : 'atilde', \r\n\t            228 : 'auml', \r\n\t            229 : 'aring', \r\n\t            230 : 'aelig', \r\n\t            231 : 'ccedil', \r\n\t            232 : 'egrave', \r\n\t            233 : 'eacute', \r\n\t            234 : 'ecirc', \r\n\t            235 : 'euml', \r\n\t            236 : 'igrave', \r\n\t            237 : 'iacute', \r\n\t            238 : 'icirc', \r\n\t            239 : 'iuml', \r\n\t            240 : 'eth', \r\n\t            241 : 'ntilde', \r\n\t            242 : 'ograve', \r\n\t            243 : 'oacute', \r\n\t            244 : 'ocirc', \r\n\t            245 : 'otilde', \r\n\t            246 : 'ouml', \r\n\t            247 : 'divide', \r\n\t            248 : 'oslash', \r\n\t            249 : 'ugrave', \r\n\t            250 : 'uacute', \r\n\t            251 : 'ucirc', \r\n\t            252 : 'uuml', \r\n\t            253 : 'yacute', \r\n\t            254 : 'thorn', \r\n\t            255 : 'yuml', \r\n\t            402 : 'fnof', \r\n\t            913 : 'Alpha', \r\n\t            914 : 'Beta', \r\n\t            915 : 'Gamma', \r\n\t            916 : 'Delta', \r\n\t            917 : 'Epsilon', \r\n\t            918 : 'Zeta', \r\n\t            919 : 'Eta', \r\n\t            920 : 'Theta', \r\n\t            921 : 'Iota', \r\n\t            922 : 'Kappa', \r\n\t            923 : 'Lambda', \r\n\t            924 : 'Mu', \r\n\t            925 : 'Nu', \r\n\t            926 : 'Xi', \r\n\t            927 : 'Omicron', \r\n\t            928 : 'Pi', \r\n\t            929 : 'Rho', \r\n\t            931 : 'Sigma', \r\n\t            932 : 'Tau', \r\n\t            933 : 'Upsilon', \r\n\t            934 : 'Phi', \r\n\t            935 : 'Chi', \r\n\t            936 : 'Psi', \r\n\t            937 : 'Omega', \r\n\t            945 : 'alpha', \r\n\t            946 : 'beta', \r\n\t            947 : 'gamma', \r\n\t            948 : 'delta', \r\n\t            949 : 'epsilon', \r\n\t            950 : 'zeta', \r\n\t            951 : 'eta', \r\n\t            952 : 'theta', \r\n\t            953 : 'iota', \r\n\t            954 : 'kappa', \r\n\t            955 : 'lambda', \r\n\t            956 : 'mu', \r\n\t            957 : 'nu', \r\n\t            958 : 'xi', \r\n\t            959 : 'omicron', \r\n\t            960 : 'pi', \r\n\t            961 : 'rho', \r\n\t            962 : 'sigmaf', \r\n\t            963 : 'sigma', \r\n\t            964 : 'tau', \r\n\t            965 : 'upsilon', \r\n\t            966 : 'phi', \r\n\t            967 : 'chi', \r\n\t            968 : 'psi', \r\n\t            969 : 'omega', \r\n\t            977 : 'thetasym', \r\n\t            978 : 'upsih', \r\n\t            982 : 'piv', \r\n\t            8226 : 'bull', \r\n\t            8230 : 'hellip', \r\n\t            8242 : 'prime', \r\n\t            8243 : 'Prime', \r\n\t            8254 : 'oline', \r\n\t            8260 : 'frasl', \r\n\t            8472 : 'weierp', \r\n\t            8465 : 'image', \r\n\t            8476 : 'real', \r\n\t            8482 : 'trade', \r\n\t            8501 : 'alefsym', \r\n\t            8592 : 'larr', \r\n\t            8593 : 'uarr', \r\n\t            8594 : 'rarr', \r\n\t            8595 : 'darr', \r\n\t            8596 : 'harr', \r\n\t            8629 : 'crarr', \r\n\t            8656 : 'lArr', \r\n\t            8657 : 'uArr', \r\n\t            8658 : 'rArr', \r\n\t            8659 : 'dArr', \r\n\t            8660 : 'hArr', \r\n\t            8704 : 'forall', \r\n\t            8706 : 'part', \r\n\t            8707 : 'exist', \r\n\t            8709 : 'empty', \r\n\t            8711 : 'nabla', \r\n\t            8712 : 'isin', \r\n\t            8713 : 'notin', \r\n\t            8715 : 'ni', \r\n\t            8719 : 'prod', \r\n\t            8721 : 'sum', \r\n\t            8722 : 'minus', \r\n\t            8727 : 'lowast', \r\n\t            8730 : 'radic', \r\n\t            8733 : 'prop', \r\n\t            8734 : 'infin', \r\n\t            8736 : 'ang', \r\n\t            8743 : 'and', \r\n\t            8744 : 'or', \r\n\t            8745 : 'cap', \r\n\t            8746 : 'cup', \r\n\t            8747 : 'int', \r\n\t            8756 : 'there4', \r\n\t            8764 : 'sim', \r\n\t            8773 : 'cong', \r\n\t            8776 : 'asymp', \r\n\t            8800 : 'ne', \r\n\t            8801 : 'equiv', \r\n\t            8804 : 'le', \r\n\t            8805 : 'ge', \r\n\t            8834 : 'sub', \r\n\t            8835 : 'sup', \r\n\t            8836 : 'nsub', \r\n\t            8838 : 'sube', \r\n\t            8839 : 'supe', \r\n\t            8853 : 'oplus', \r\n\t            8855 : 'otimes', \r\n\t            8869 : 'perp', \r\n\t            8901 : 'sdot', \r\n\t            8968 : 'lceil', \r\n\t            8969 : 'rceil', \r\n\t            8970 : 'lfloor', \r\n\t            8971 : 'rfloor', \r\n\t            9001 : 'lang', \r\n\t            9002 : 'rang', \r\n\t            9674 : 'loz', \r\n\t            9824 : 'spades', \r\n\t            9827 : 'clubs', \r\n\t            9829 : 'hearts', \r\n\t            9830 : 'diams', \r\n\t            338 : 'OElig', \r\n\t            339 : 'oelig', \r\n\t            352 : 'Scaron', \r\n\t            353 : 'scaron', \r\n\t            376 : 'Yuml', \r\n\t            710 : 'circ', \r\n\t            732 : 'tilde', \r\n\t            8194 : 'ensp', \r\n\t            8195 : 'emsp', \r\n\t            8201 : 'thinsp', \r\n\t            8204 : 'zwnj', \r\n\t            8205 : 'zwj', \r\n\t            8206 : 'lrm', \r\n\t            8207 : 'rlm', \r\n\t            8211 : 'ndash', \r\n\t            8212 : 'mdash', \r\n\t            8216 : 'lsquo', \r\n\t            8217 : 'rsquo', \r\n\t            8218 : 'sbquo', \r\n\t            8220 : 'ldquo', \r\n\t            8221 : 'rdquo', \r\n\t            8222 : 'bdquo', \r\n\t            8224 : 'dagger', \r\n\t            8225 : 'Dagger', \r\n\t            8240 : 'permil', \r\n\t            8249 : 'lsaquo', \r\n\t            8250 : 'rsaquo', \r\n\t            8364 : 'euro'\r\n\t        };\r\n\t    }\r\n\r\n\tfunction beautifyCode( code, reserved, skip_css )\r\n\t{\r\n\t\treserved = reserved || [\"abstract\", \"else\", \"instanceof\", \"super\", \"boolean\", \"enum\", \"int\", \"switch\", \"break\", \"export\", \"interface\", \"synchronized\", \"byte\", \"extends\", \"let\", \"this\", \"case\", \"false\", \"long\", \"throw\", \"catch\", \"final\", \"native\", \"throws\", \"char\", \"finally\", \"new\", \"transient\", \"class\", \"float\", \"null\", \"true\", \"const\", \"for\", \"package\", \"try\", \"continue\", \"function\", \"private\", \"typeof\", \"debugger\", \"goto\", \"protected\", \"var\", \"default\", \"if\", \"public\", \"void\", \"delete\", \"implements\", \"return\", \"volatile\", \"do\", \"import\", \"short\", \"while\", \"double\", \"in\", \"static\", \"with\"];\r\n\r\n\t\t//reserved words\r\n\t\tcode = code.replace(/\\b(\\w+)\\b/g, function(v) {\r\n\t\t\tif(reserved.indexOf(v) != -1)\r\n\t\t\t\treturn \"<span class='rsv'>\" + v + \"</span>\";\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\t\t//numbers\r\n\t\tcode = code.replace(/\\b([0-9]+)\\b/g, function(v) {\r\n\t\t\treturn \"<span class='num'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//obj.method\r\n\t\tcode = code.replace(/(\\w+\\.\\w+)/g, function(v) {\r\n\t\t\tvar t = v.split(\".\");\r\n\t\t\treturn \"<span class='obj'>\" + t[0] + \"</span>.<span class='prop'>\" + t[1] + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//function\r\n\t\tcode = code.replace(/(\\w+)\\(/g, function(v) {\r\n\t\t\treturn \"<span class='prop'>\" + v.substr(0, v.length - 1) + \"</span>(\";\r\n\t\t});\r\n\r\n\t\t//strings\r\n\t\tcode = code.replace(/(\\\"(\\\\.|[^\\\"])*\\\")/g, function(v) {\r\n\t\t\treturn \"<span class='str'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//comments \r\n\t\tcode = code.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, function(v) { ///(\\/\\/[a-zA-Z0-9\\?\\!\\(\\)_ ]*)/g\r\n\t\t\treturn \"<span class='cmnt'>\" + v.replace(/<[^>]*>/g, \"\") + \"</span>\";\r\n\t\t});\r\n\r\n\r\n\t\tif(!skip_css)\r\n\t\t\tcode = \"<style>.obj { color: #79B; } .prop { color: #B97; }\t.str,.num { color: #A79; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>\" + code;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tfunction beautifyJSON( code, skip_css )\r\n\t{\r\n\t\tif(typeof(code) == \"object\")\r\n\t\t\tcode = JSON.stringify(code);\r\n\r\n\t\tvar reserved = [\"false\", \"true\", \"null\"];\r\n\r\n\t\t//reserved words\r\n\t\tcode = code.replace(/(\\w+)/g, function(v) {\r\n\t\t\tif(reserved.indexOf(v) != -1)\r\n\t\t\t\treturn \"<span class='rsv'>\" + v + \"</span>\";\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\r\n\t\t//numbers\r\n\t\tcode = code.replace(/([0-9]+)/g, function(v) {\r\n\t\t\treturn \"<span class='num'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//obj.method\r\n\t\tcode = code.replace(/(\\w+\\.\\w+)/g, function(v) {\r\n\t\t\tvar t = v.split(\".\");\r\n\t\t\treturn \"<span class='obj'>\" + t[0] + \"</span>.<span class='prop'>\" + t[1] + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//strings\r\n\t\tcode = code.replace(/(\\\"(\\\\.|[^\\\"])*\\\")/g, function(v) {\r\n\t\t\treturn \"<span class='str'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//comments\r\n\t\tcode = code.replace(/(\\/\\/[a-zA-Z0-9\\?\\!\\(\\)_ ]*)/g, function(v) {\r\n\t\t\treturn \"<span class='cmnt'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\tif(!skip_css)\r\n\t\t\tcode = \"<style>.obj { color: #79B; } .prop { color: #B97; }\t.str { color: #A79; } .num { color: #B97; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>\" + code;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tfunction dataURItoBlob( dataURI ) {\r\n\t\tvar pos = dataURI.indexOf(\",\");\r\n\t\t//convert to binary\r\n\t    var byteString = atob( dataURI.substr(pos+1) ); \r\n\t\t//copy from string to array\r\n\t    var ab = new ArrayBuffer( byteString.length ); \r\n\t    var ia = new Uint8Array(ab);\r\n\t\tvar l = byteString.length;\r\n\t    for (var i = 0; i < l; i++) {\r\n\t        ia[i] = byteString.charCodeAt(i);\r\n\t    }\r\n\r\n\t\tvar mime = dataURI.substr(5,pos-5);\r\n\t\tmime = mime.substr(0, mime.length - 7); //strip \";base64\"\r\n\t    return new Blob([ab], { type: mime });\r\n\t}\r\n\r\n\treturn skylark.attach(\"intg.litegui\",LiteGUI);\r\n});\n//enclose in a scope\r\n\r\ndefine('skylark-litegui/Area',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\t/****************** AREA **************/\r\n\t/** An Area is am streched container.\r\n\t* Areas can be split several times horizontally or vertically to fit different colums or rows\r\n\t*\r\n\t* @class Area\r\n\t* @constructor\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction Area( options, legacy )\r\n\t{\r\n\t\t//for legacy code\r\n\t\tif( (options && options.constructor === String) || legacy )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Area legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\t/* the root element containing all sections */\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\troot.className = \"litearea\";\r\n\t\tif(options.id)\r\n\t\t\troot.id = options.id;\r\n\t\tif(options.className)\r\n\t\t\troot.className +=  \" \" + options.className;\r\n\r\n\t\tthis.root = root;\r\n\t\tthis.root.litearea = this; //dbl link\r\n\r\n\t\tvar width = options.width || \"100%\";\r\n\t\tvar height = options.height || \"100%\";\r\n\r\n\t\tif( width < 0 )\r\n\t\t\twidth = 'calc( 100% - '+Math.abs(width)+'px)';\r\n\t\tif( height < 0 )\r\n\t\t\theight = 'calc( 100% - '+ Math.abs(height)+'px)';\r\n\r\n\t\troot.style.width = width;\r\n\t\troot.style.height = height;\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\tvar that = this;\r\n\t\tthis._computed_size = [ this.root.offsetWidth, this.root.offserHeight ];\r\n\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif(options.content_id)\r\n\t\t\tcontent.id = options.content_id;\r\n\t\tcontent.className = \"liteareacontent\";\r\n\t\tcontent.style.width = \"100%\";\r\n\t\tcontent.style.height = \"100%\";\r\n\t\tthis.root.appendChild( content );\r\n\t\tthis.content = content;\r\n\r\n\t\tthis.split_direction = \"none\";\r\n\t\tthis.sections = [];\r\n\r\n\t\tif(options.autoresize)\r\n\t\t\tLiteGUI.bind( LiteGUI, \"resized\", function() { \r\n\t\t\t\tthat.onResize(); \r\n\t\t\t});\r\n\t}\r\n\r\n\tArea.VERTICAL = \"vertical\";\r\n\tArea.HORIZONTAL = \"horizontal\";\r\n\r\n\tArea.splitbar_size = 4;\r\n\r\n\t/* get container of the section */\r\n\tArea.prototype.getSection = function(num)\r\n\t{\r\n\t\tnum = num || 0;\r\n\t\tif(this.sections.length > num)\r\n\t\t\treturn this.sections[num];\r\n\t\treturn null;\r\n\t}\r\n\r\n\tArea.prototype.onResize = function(e)\r\n\t{\r\n\t\tvar computed_size = [ this.root.offsetWidth, this.root.offsetHeight ];\r\n\t\tif( e && this._computed_size && computed_size[0] == this._computed_size[0] && computed_size[1] == this._computed_size[1])\r\n\t\t\treturn;\r\n\r\n\t\tthis.sendResizeEvent(e);\r\n\t}\r\n\r\n\t//sends the resize event to all the sections\r\n\tArea.prototype.sendResizeEvent = function(e)\r\n\t{\r\n\t\tif(this.sections.length)\r\n\t\t\tfor(var i in this.sections)\r\n\t\t\t{\r\n\t\t\t\tvar section = this.sections[i];\r\n\t\t\t\tsection.onResize(e);\r\n\t\t\t}\r\n\t\telse //send it to the children\r\n\t\t{\r\n\t\t\tfor (var j = 0; j < this.root.childNodes.length; j++)\r\n\t\t\t{\r\n\t\t\t\tvar element = this.root.childNodes[j];\r\n\t\t\t\tif(element.litearea)\r\n\t\t\t\t\telement.litearea.onResize();\r\n\t\t\t\telse\r\n\t\t\t\t\tLiteGUI.trigger( element, \"resize\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//inner callback\r\n\t\tif( this.onresize )\r\n\t\t\tthis.onresize();\r\n\t}\r\n\r\n\tArea.prototype.getWidth = function()\r\n\t{\r\n\t\treturn this.root.offsetWidth;\r\n\t}\r\n\r\n\tArea.prototype.getHeight = function()\r\n\t{\r\n\t\treturn this.root.offsetHeight;\r\n\t}\r\n\r\n\tArea.prototype.isVisible = function()\r\n\t{\r\n\t\treturn this.root.style.display != \"none\";\t\r\n\t}\r\n\r\n\tArea.prototype.adjustHeight = function()\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t{\r\n\t\t\tconsole.error(\"Cannot adjust height of LiteGUI.Area without parent\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//check parent height\r\n\t\tvar h = this.root.parentNode.offsetHeight;\r\n\r\n\t\t//check position\r\n\t\tvar y = this.root.getClientRects()[0].top;\r\n\r\n\t\t//adjust height\r\n\t\tthis.root.style.height = \"calc( 100% - \" + y + \"px )\";\r\n\t}\r\n\r\n\tArea.prototype.split = function( direction, sizes, editable )\r\n\t{\r\n\t\tif( !direction || direction.constructor !== String )\r\n\t\t\tthrow (\"First parameter must be a string: 'vertical' or 'horizontal'\");\r\n\r\n\t\tif( !sizes )\r\n\t\t\tsizes = [\"50%\",null];\r\n\r\n\t\tif( direction != \"vertical\" && direction != \"horizontal\" )\r\n\t\t\tthrow (\"First parameter must be a string: 'vertical' or 'horizontal'\");\r\n\r\n\t\tif(this.sections.length)\r\n\t\t\tthrow \"cannot split twice\";\r\n\r\n\t\t//create areas\r\n\t\tvar area1 = new LiteGUI.Area({ content_id: this.content.id });\r\n\t\tarea1.root.style.display = \"inline-block\";\r\n\t\tvar area2 = new LiteGUI.Area();\r\n\t\tarea2.root.style.display = \"inline-block\";\r\n\r\n\t\tvar splitinfo = \"\";\r\n\t\tvar splitbar = null;\r\n\t\tvar dynamic_section = null;\r\n\t\tif(editable)\r\n\t\t{\r\n\t\t\tsplitinfo = \" - \" + (Area.splitbar_size + 2) +\"px\"; //2 px margin �?\r\n\t\t\tsplitbar = document.createElement(\"div\");\r\n\t\t\tsplitbar.className = \"litesplitbar \" + direction;\r\n\t\t\tif(direction == \"vertical\")\r\n\t\t\t\tsplitbar.style.height = Area.splitbar_size + \"px\";\r\n\t\t\telse\r\n\t\t\t\tsplitbar.style.width = Area.splitbar_size + \"px\";\r\n\t\t\tthis.splitbar = splitbar;\r\n\t\t\tsplitbar.addEventListener(\"mousedown\", inner_mousedown);\r\n\t\t}\r\n\r\n\t\tsizes = sizes || [\"50%\",null];\r\n\r\n\t\tif(direction == \"vertical\")\r\n\t\t{\r\n\t\t\tarea1.root.style.width = \"100%\";\r\n\t\t\tarea2.root.style.width = \"100%\";\r\n\r\n\t\t\tif(sizes[0] == null)\r\n\t\t\t{\r\n\t\t\t\tvar h = sizes[1];\r\n\t\t\t\tif(typeof(h) == \"number\")\r\n\t\t\t\t\th = sizes[1] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.height = \"-moz-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"-webkit-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = h;\r\n\t\t\t\tarea2.size = h;\r\n\t\t\t\tdynamic_section = area1;\r\n\t\t\t}\r\n\t\t\telse if(sizes[1] == null)\r\n\t\t\t{\r\n\t\t\t\tvar h = sizes[0];\r\n\t\t\t\tif(typeof(h) == \"number\")\r\n\t\t\t\t\th = sizes[0] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.height = h;\r\n\t\t\t\tarea1.size = h;\r\n\t\t\t\tarea2.root.style.height = \"-moz-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"-webkit-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tdynamic_section = area2;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar h1 = sizes[0];\r\n\t\t\t\tif(typeof(h1) == \"number\")\r\n\t\t\t\t\th1 = sizes[0] + \"px\";\r\n\t\t\t\tvar h2 = sizes[1];\r\n\t\t\t\tif(typeof(h2) == \"number\")\r\n\t\t\t\t\th2 = sizes[1] + \"px\";\r\n\t\t\t\tarea1.root.style.height = h1;\r\n\t\t\t\tarea1.size = h1;\r\n\t\t\t\tarea2.root.style.height = h2;\r\n\t\t\t\tarea2.size = h2;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse //horizontal\r\n\t\t{\r\n\t\t\tarea1.root.style.height = \"100%\";\r\n\t\t\tarea2.root.style.height = \"100%\";\r\n\r\n\t\t\tif(sizes[0] == null)\r\n\t\t\t{\r\n\t\t\t\tvar w = sizes[1];\r\n\t\t\t\tif(typeof(w) == \"number\")\r\n\t\t\t\t\tw = sizes[1] + \"px\";\r\n\t\t\t\tarea1.root.style.width = \"-moz-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"-webkit-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = w;\r\n\t\t\t\tarea2.size = sizes[1];\r\n\t\t\t\tdynamic_section = area1;\r\n\t\t\t}\r\n\t\t\telse if(sizes[1] == null)\r\n\t\t\t{\r\n\t\t\t\tvar w = sizes[0];\r\n\t\t\t\tif(typeof(w) == \"number\")\r\n\t\t\t\t\tw = sizes[0] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.width = w;\r\n\t\t\t\tarea1.size = w;\r\n\t\t\t\tarea2.root.style.width = \"-moz-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"-webkit-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tdynamic_section = area2;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar w1 = sizes[0];\r\n\t\t\t\tif(typeof(w1) == \"number\")\r\n\t\t\t\t\tw1 = sizes[0] + \"px\";\r\n\t\t\t\tvar w2 = sizes[1];\r\n\t\t\t\tif(typeof(w2) == \"number\")\r\n\t\t\t\t\tw2 = sizes[1] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.width = w1;\r\n\t\t\t\tarea1.size = w1;\r\n\t\t\t\tarea2.root.style.width = w2;\r\n\t\t\t\tarea2.size = w2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tarea1.root.removeChild( area1.content );\r\n\t\tarea1.root.appendChild( this.content );\r\n\t\tarea1.content = this.content;\r\n\r\n\t\tthis.root.appendChild( area1.root );\r\n\t\tif(splitbar)\r\n\t\t\tthis.root.appendChild( splitbar );\r\n\t\tthis.root.appendChild( area2.root );\r\n\r\n\t\tthis.sections = [area1, area2];\r\n\t\tthis.dynamic_section = dynamic_section;\r\n\t\tthis.direction = direction;\r\n\r\n\t\t//SPLITTER DRAGGER INTERACTION\r\n\t\tvar that = this;\r\n\t\tvar last_pos = [0,0];\r\n\t\tfunction inner_mousedown(e)\r\n\t\t{\r\n\t\t\tvar doc = that.root.ownerDocument;\r\n\t\t\tdoc.addEventListener(\"mousemove\",inner_mousemove);\r\n\t\t\tdoc.addEventListener(\"mouseup\",inner_mouseup);\r\n\t\t\tlast_pos[0] = e.pageX;\r\n\t\t\tlast_pos[1] = e.pageY;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_mousemove(e)\r\n\t\t{\r\n\t\t\tif(direction == \"horizontal\")\r\n\t\t\t{\r\n\t\t\t\tif (last_pos[0] != e.pageX)\r\n\t\t\t\t\tthat.moveSplit(last_pos[0] - e.pageX);\r\n\t\t\t}\r\n\t\t\telse if(direction == \"vertical\")\r\n\t\t\t{\r\n\t\t\t\tif (last_pos[1] != e.pageY)\r\n\t\t\t\t\tthat.moveSplit(e.pageY - last_pos[1]);\r\n\t\t\t}\r\n\r\n\t\t\tlast_pos[0] = e.pageX;\r\n\t\t\tlast_pos[1] = e.pageY;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tif(that.options.immediateResize || that.options.inmediateResize) //inmediate is for legacy...\r\n\t\t\t\tthat.onResize();\r\n\t\t}\r\n\r\n\t\tfunction inner_mouseup(e)\r\n\t\t{\r\n\t\t\tvar doc = that.root.ownerDocument;\r\n\t\t\tdoc.removeEventListener(\"mousemove\",inner_mousemove);\r\n\t\t\tdoc.removeEventListener(\"mouseup\",inner_mouseup);\r\n\t\t\tthat.onResize();\r\n\t\t}\r\n\t}\r\n\r\n\tArea.prototype.hide = function()\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t}\r\n\r\n\tArea.prototype.show = function()\r\n\t{\r\n\t\tthis.root.style.display = \"block\";\r\n\t}\r\n\r\n\tArea.prototype.showSection = function(num)\r\n\t{\r\n\t\tvar section = this.sections[num];\r\n\t\tvar size = 0;\r\n\r\n\t\tif( section && section.root.style.display != \"none\" )\r\n\t\t\treturn; //already visible\r\n\t\t\r\n\t\tif(this.direction == \"horizontal\")\r\n\t\t\tsize = section.root.style.width;\r\n\t\telse\r\n\t\t\tsize = section.root.style.height;\r\n\r\n\t\tif(size.indexOf(\"calc\") != -1)\r\n\t\t\tsize = \"50%\";\r\n\r\n\t\tfor(var i in this.sections)\r\n\t\t{\r\n\t\t\tvar section = this.sections[i];\r\n\r\n\t\t\tif(i == num)\r\n\t\t\t\tsection.root.style.display = \"inline-block\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.direction == \"horizontal\")\r\n\t\t\t\t\tsection.root.style.width = \"calc( 100% - \" + size + \" - 5px)\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.root.style.height = \"calc( 100% - \" + size + \" - 5px)\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.splitbar)\r\n\t\t\tthis.splitbar.style.display = \"inline-block\";\r\n\r\n\t\tthis.sendResizeEvent();\r\n\t}\r\n\r\n\tArea.prototype.hideSection = function(num)\r\n\t{\r\n\t\tfor(var i in this.sections)\r\n\t\t{\r\n\t\t\tvar section = this.sections[i];\r\n\r\n\t\t\tif(i == num)\r\n\t\t\t\tsection.root.style.display = \"none\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.direction == \"horizontal\")\r\n\t\t\t\t\tsection.root.style.width = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.root.style.height = \"100%\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.splitbar)\r\n\t\t\tthis.splitbar.style.display = \"none\";\r\n\r\n\t\tthis.sendResizeEvent();\r\n\t}\r\n\r\n\tArea.prototype.moveSplit = function(delta)\r\n\t{\r\n\t\tif(!this.sections) return;\r\n\r\n\t\tvar area1 = this.sections[0];\r\n\t\tvar area2 = this.sections[1];\r\n\t\tvar splitinfo = \" - \"+ Area.splitbar_size +\"px\";\r\n\r\n\t\tvar min_size = this.options.minSplitSize || 10;\r\n\r\n\t\tif(this.direction == \"horizontal\")\r\n\t\t{\r\n\r\n\t\t\tif (this.dynamic_section == area1)\r\n\t\t\t{\r\n\t\t\t\tvar size = (area2.root.offsetWidth + delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea1.root.style.width = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar size = (area1.root.offsetWidth - delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea2.root.style.width = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.direction == \"vertical\")\r\n\t\t{\r\n\t\t\tif (this.dynamic_section == area1)\r\n\t\t\t{\r\n\t\t\t\tvar size = (area2.root.offsetHeight - delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea1.root.style.height = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar size = (area1.root.offsetHeight + delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea2.root.style.height = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLiteGUI.trigger( this.root, \"split_moved\");\r\n\t\t//trigger split_moved event in all areas inside this area\r\n\t\tvar areas = this.root.querySelectorAll(\".litearea\");\r\n\t\tfor(var i = 0; i < areas.length; ++i)\r\n\t\t\tLiteGUI.trigger( areas[i], \"split_moved\" );\r\n\t}\r\n\r\n\tArea.prototype.addEventListener = function(a,b,c,d)\r\n\t{\r\n\t\treturn this.root.addEventListener(a,b,c,d);\r\n\t}\r\n\r\n\tArea.prototype.setAreaSize = function(area,size)\r\n\t{\r\n\t\tvar element = this.sections[1];\r\n\r\n\t\tvar splitinfo = \" - \"+Area.splitbar_size+\"px\";\r\n\t\telement.root.style.width = \"-moz-calc( 100% - \" + size + splitinfo + \" )\";\r\n\t\telement.root.style.width = \"-webkit-calc( 100% - \" + size + splitinfo + \" )\";\r\n\t\telement.root.style.width = \"calc( 100% - \" + size + splitinfo + \" )\";\r\n\t}\r\n\r\n\tArea.prototype.merge = function(main_section)\r\n\t{\r\n\t\tif(this.sections.length == 0) throw \"not splitted\";\r\n\r\n\t\tvar main = this.sections[main_section || 0];\r\n\r\n\t\tthis.root.appendChild( main.content );\r\n\t\tthis.content = main.content;\r\n\r\n\t\tthis.root.removeChild( this.sections[0].root );\r\n\t\tthis.root.removeChild( this.sections[1].root );\r\n\r\n\t\t/*\r\n\t\twhile(main.childNodes.length > 0)\r\n\t\t{\r\n\t\t\tvar e = main.childNodes[0];\r\n\t\t\tthis.root.appendChild(e);\r\n\t\t}\r\n\r\n\t\tthis.root.removeChild( this.sections[0].root );\r\n\t\tthis.root.removeChild( this.sections[1].root );\r\n\t\t*/\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis._computed_size = null;\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\tArea.prototype.add = function(v)\r\n\t{\r\n\t\tif(typeof(v) == \"string\")\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.innerHTML = v;\r\n\t\t\tv = element;\r\n\t\t}\r\n\r\n\t\tthis.content.appendChild( v.root || v );\r\n\t}\r\n\r\n\tArea.prototype.query = function(v)\r\n\t{\r\n\t\treturn this.root.querySelector(v);\r\n\t}\r\n\r\n\treturn LiteGUI.Area = Area;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Console',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\tfunction Console( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"div\");\r\n\t\tthis.root.className = \"liteconsole\";\r\n\t\tthis.root.innerHTML = \"<div class='log'></div><div class='foot'><input type='text'/></div>\";\r\n\r\n\t\tthis.log_element = this.root.querySelector('.log');\r\n\t\tthis.input = this.root.querySelector('input');\r\n\r\n\t\tthis.input.addEventListener(\"keydown\", this.processKeyDown.bind(this) );\r\n\t\tthis._prompt = options.prompt || \"]\";\r\n\r\n\t\tthis.onAutocomplete = null; //receives string, must return final string\r\n\t\tthis.onProcessCommand = null; //receives input value\r\n\r\n\t\tthis.history = [];\r\n\t\tthis._history_offset = 0;\r\n\t}\r\n\r\n\tConsole.prototype.processKeyDown = function(e)\r\n\t{\r\n\t\tif(this._input_blocked)\r\n\t\t\treturn;\r\n\r\n\t\tif(e.keyCode == 13) //return and exec\r\n\t\t{\r\n\t\t\tvar value = this.input.value;\r\n\t\t\tvar cmd = value.trim();\r\n\t\t\tthis.addMessage( this._prompt + cmd, \"me\",true);\r\n\t\t\tthis.input.value = \"\";\r\n\t\t\tthis.history.push(cmd);\r\n\t\t\tif(this.history.length > 10)\r\n\t\t\t\tthis.history.shift();\r\n\t\t\tif( this.onProcessCommand )\r\n\t\t\t\tthis.onProcessCommand( cmd );\r\n\t\t\tthis._history_offset = 0;\r\n\t\t}\r\n\t\telse if(e.keyCode == 38 || e.keyCode == 40) //up & down history\r\n\t\t{\r\n\t\t\tthis._history_offset += (e.keyCode == 38 ? -1 : 1);\r\n\t\t\tif(this._history_offset > 0)\r\n\t\t\t\tthis._history_offset = 0;\r\n\t\t\telse if(this._history_offset < -this.history.length)\r\n\t\t\t\tthis._history_offset = -this.history.length;\r\n\t\t\tvar pos = this.history.length + this._history_offset;\r\n\t\t\tif(pos < 0)\r\n\t\t\t\treturn;\r\n\t\t\tif( pos >= this.history.length)\r\n\t\t\t\tthis.input.value = \"\";\r\n\t\t\telse\r\n\t\t\t\tthis.input.value = this.history[ pos ];\r\n\t\t}\r\n\t\telse if(e.keyCode == 9) //tab autocompletion\r\n\t\t{\r\n\t\t\tif(this.onAutocomplete)\r\n\t\t\t\tthis.input.value = this.onAutocomplete( this.input.value );\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn;\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\tConsole.prototype.addMessage = function(text,className,as_text)\r\n\t{\r\n\t\tvar content = this.log_element;\r\n\t\tvar element = null; //contains the last message sent\r\n\r\n\t\tif(text && text.constructor === Array)\r\n\t\t{\r\n\t\t\tfor( var i = 0; i < text.length; ++i )\r\n\t\t\t\tadd( text[i] );\r\n\t\t}\r\n\t\telse if(text && text.constructor === Object)\r\n\t\t{\r\n\t\t\tadd( JSON.stringify(text,null,\"\"), this );\r\n\t\t}\r\n\t\telse\r\n\t\t\tadd( text, this );\r\n\r\n\t\tfunction add(txt, con)\r\n\t\t{\r\n\t\t\telement = document.createElement(\"pre\");\r\n\t\t\tif(as_text)\r\n\t\t\t\telement.innerText = txt;\r\n\t\t\telse\r\n\t\t\t\telement.innerHTML = txt;\r\n\t\t\telement.className = \"msg\";\r\n\t\t\tif(className)\r\n\t\t\t\telement.className += \" \" + className;\r\n\t\t\tcontent.appendChild(element);\r\n\t\t\tif( content.children.length > 1000 )\r\n\t\t\t\tcontent.removeChild( content.children[0] );\r\n\t\t}\r\n\r\n\t\tthis.log_element.scrollTop = 1000000;\r\n\t\telement.update = function(v)\r\n\t\t{\r\n\t\t\tthis.innerHTML = v;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tConsole.prototype.log = function()\r\n\t{\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tvar d = args.join(\",\");\r\n\t\treturn this.addMessage( d, \"msglog\" );\r\n\t}\r\n\r\n\tConsole.prototype.warn = function()\r\n\t{\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tvar d = args.join(\",\");\r\n\t\treturn this.addMessage( d, \"msgwarn\" );\r\n\t}\r\n\r\n\tConsole.prototype.error = function()\r\n\t{\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tvar d = args.join(\",\");\r\n\t\treturn this.addMessage( d, \"msgerror\" );\r\n\t}\r\n\r\n\tConsole.prototype.clear = function()\r\n\t{\r\n\t\tthis.log_element.innerHTML = \"\";\r\n\t}\r\n\r\n\treturn LiteGUI.Console = Console;\r\n\r\n});\ndefine('skylark-litegui/Dialog',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/****************** DIALOG **********************/\r\n\t/**\r\n\t* Dialog\r\n\t*\r\n\t* @class Dialog\r\n\t* @param {Object} options useful options are { title, width, height, closable, on_close, scroll }\r\n\t* @constructor\r\n\t*/\r\n\tfunction Dialog( options, legacy )\r\n\t{\r\n\t\tif( legacy || (options && options.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\tthis._ctor( options );\r\n\t}\r\n\r\n\tDialog.MINIMIZED_WIDTH = 200;\r\n\tDialog.title_height = \"20px\";\r\n\r\n\tDialog.getDialog = function( id )\r\n\t{\r\n\t\tvar element = document.getElementById( id );\t\t\r\n\t\tif(!element)\r\n\t\t\treturn null;\r\n\t\treturn element.dialog;\r\n\t}\r\n\r\n\tDialog.prototype._ctor = function( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar that = this;\r\n\t\tthis.width = options.width;\r\n\t\tthis.height = options.height;\r\n\t\tthis.minWidth = options.minWidth || 150;\r\n\t\tthis.minHeight = options.minHeight || 100;\r\n\t\tthis.content = options.content || \"\";\r\n\r\n\t\tvar panel = document.createElement(\"div\");\r\n\t\tif(options.id)\r\n\t\t\tpanel.id = options.id;\r\n\r\n\t\tpanel.className = \"litedialog \" + (options.className || \"\");\r\n\t\tpanel.data = this;\r\n\t\tpanel.dialog = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(options.title)\r\n\t\t{\r\n\t\t\tcode += \"<div class='panel-header'>\"+options.title+\"</div><div class='buttons'>\";\r\n\t\t\tif(options.minimize){\r\n\t\t\t\tcode += \"<button class='litebutton mini-button minimize-button'>-</button>\";\r\n\t\t\t\tcode += \"<button class='litebutton mini-button maximize-button' style='display:none'></button>\";\r\n\t\t\t}\r\n\t\t\tif(options.hide)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button hide-button'></button>\";\r\n\t\t\tif(options.detachable)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button detach-button'></button>\";\r\n\t\t\t\r\n\t\t\tif(options.close || options.closable)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button close-button'>\"+ LiteGUI.special_codes.close +\"</button>\";\r\n\t\t\tcode += \"</div>\";\r\n\t\t}\r\n\r\n\t\tcode += \"<div class='content'>\"+this.content+\"</div>\";\r\n\t\tcode += \"<div class='panel-footer'></div>\";\r\n\t\tpanel.innerHTML = code;\r\n\r\n\t\tthis.root = panel;\r\n\t\tthis.content = panel.querySelector(\".content\");\r\n\t\tthis.footer = panel.querySelector(\".panel-footer\");\r\n\r\n\t\tif(options.fullcontent)\r\n\t\t{\r\n\t\t\tthis.content.style.width = \"100%\";\t\t\r\n\t\t\tthis.content.style.height = options.title ? \"calc( 100% - \"+Dialog.title_height+\" )\" : \"100%\";\r\n\t\t}\r\n\r\n\t\tif(options.buttons)\r\n\t\t{\r\n\t\t\tfor(var i in options.buttons)\r\n\t\t\t\tthis.addButton(options.buttons[i].name, options.buttons[i]);\r\n\t\t}\r\n\r\n\t\t//if(options.scroll == false)\tthis.content.style.overflow = \"hidden\";\r\n\t\tif(options.scroll == true)\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\r\n\t\t//buttons *********************************\r\n\t\tvar close_button = panel.querySelector(\".close-button\");\r\n\t\tif(close_button)\r\n\t\t\tclose_button.addEventListener(\"click\", this.close.bind(this) );\r\n\r\n\t\tvar maximize_button = panel.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.addEventListener(\"click\", this.maximize.bind(this) );\r\n\r\n\t\tvar minimize_button = panel.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\r\n\t\t\tminimize_button.addEventListener(\"click\", this.minimize.bind(this) );\r\n\r\n\t\tvar hide_button = panel.querySelector(\".hide-button\");\r\n\t\tif(hide_button)\r\n\t\t\thide_button.addEventListener(\"click\", this.hide.bind(this) );\r\n\r\n\t\tvar detach_button = panel.querySelector(\".detach-button\");\r\n\t\tif(detach_button)\r\n\t\t\tdetach_button.addEventListener(\"click\", function() { that.detachWindow(); });\r\n\r\n\t\t//size, draggable, resizable, etc\r\n\t\tthis.enableProperties(options);\r\n\r\n\t\tthis.root.addEventListener(\"DOMNodeInsertedIntoDocument\", function(){ \r\n\t\t\tif( that.on_attached_to_DOM )\r\n\t\t\t\tthat.on_attached_to_DOM();\r\n\t\t\tif( that.on_resize )\r\n\t\t\t\tthat.on_resize();\r\n\t\t});\r\n\t\tthis.root.addEventListener(\"DOMNodeRemovedFromDocument\", function(){ \r\n\t\t\tif( that.on_detached_from_DOM )\r\n\t\t\t\tthat.on_detached_from_DOM();\r\n\t\t});\r\n\r\n\r\n\t\t//attach\r\n\t\tif(options.attach || options.parent)\r\n\t\t{\r\n\t\t\tvar parent = null;\r\n\t\t\tif(options.parent)\r\n\t\t\t\tparent = typeof(options.parent) == \"string\" ? document.querySelector(options.parent) : options.parent;\r\n\t\t\tif(!parent)\r\n\t\t\t\tparent = LiteGUI.root;\r\n\t\t\tparent.appendChild( this.root );\r\n\t\t\tthis.center();\r\n\t\t}\r\n\r\n\t\t//if(options.position) //not docked\r\n\t\t//\tthis.setPosition( options.position[0], options.position[1] );\r\n\t}\r\n\r\n\t/**\r\n\t* add widget or html to the content of the dialog\r\n\t* @method add\r\n\t*/\r\n\tDialog.prototype.add = function( litegui_item )\r\n\t{\r\n\t\tthis.content.appendChild( litegui_item.root || litegui_item );\r\n\t}\r\n\r\n\t//takes the info from the parent to \r\n\tDialog.prototype.enableProperties = function(options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar that = this;\r\n\r\n\t\tvar panel = this.root;\r\n\t\tpanel.style.position = \"absolute\";\r\n\t\t//panel.style.display = \"none\";\r\n\r\n\t\tpanel.style.minWidth = this.minWidth + \"px\";\r\n\t\tpanel.style.minHeight = this.minHeight + \"px\";\r\n\r\n\t\tif(this.width)\r\n\t\t\tpanel.style.width = this.width + \"px\";\r\n\r\n\t\tif(this.height)\r\n\t\t{\r\n\t\t\tif(typeof(this.height) == \"number\")\r\n\t\t\t{\r\n\t\t\t\tpanel.style.height = this.height + \"px\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.height.indexOf(\"%\") != -1)\r\n\t\t\t\t\tpanel.style.height = this.height;\r\n\t\t\t}\r\n\r\n\t\t\tthis.content.style.height = \"calc( \" + this.height + \"px - 24px )\";\r\n\t\t}\r\n\r\n\t\tpanel.style.boxShadow = \"0 0 3px black\";\r\n\r\n\t\tif(options.draggable)\r\n\t\t{\r\n\t\t\tthis.draggable = true;\r\n\t\t\tLiteGUI.draggable( panel, panel.querySelector(\".panel-header\"), function(){\r\n\t\t\t\tthat.bringToFront();\r\n\t\t\t},null, function(){\r\n\t\t\t\treturn !that.minimized;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(options.resizable)\r\n\t\t\tthis.setResizable();\r\n\t}\r\n\r\n\tDialog.prototype.setResizable = function()\r\n\t{\r\n\t\tif(this.resizable)\r\n\t\t\treturn;\r\n\r\n\t\tvar root = this.root;\r\n\t\tthis.resizable = true;\r\n\t\tvar footer = this.footer;\r\n\t\tfooter.style.minHeight = \"4px\";\r\n\t\tfooter.classList.add(\"resizable\");\r\n\r\n\t\tvar corner = document.createElement(\"div\");\r\n\t\tcorner.className = \"resizable-corner\";\r\n\t\tthis.root.appendChild( corner );\r\n\r\n\t\tfooter.addEventListener(\"mousedown\", inner_mouse);\r\n\t\tcorner.addEventListener(\"mousedown\", inner_mouse, true);\r\n\r\n\t\tvar mouse = [0,0];\r\n\t\tvar that = this;\r\n\r\n\t\tvar is_corner = false;\r\n\r\n\t\tfunction inner_mouse(e)\r\n\t\t{\r\n\t\t\t//console.log( getTime(), is_corner );\r\n\r\n\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.addEventListener(\"mousemove\", inner_mouse);\r\n\t\t\t\tdocument.body.addEventListener(\"mouseup\", inner_mouse);\r\n\t\t\t\tis_corner = this == corner;\r\n\t\t\t\tmouse[0] = e.pageX;\r\n\t\t\t\tmouse[1] = e.pageY;\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mousemove\")\r\n\t\t\t{\r\n\t\t\t\tvar rect = LiteGUI.getRect( root );\r\n\t\t\t\tvar w = rect.width;\r\n\t\t\t\tvar neww = w - (mouse[0] - e.pageX);\r\n\t\r\n\t\t\t\tvar h = rect.height;\r\n\t\t\t\tvar newh = h - (mouse[1] - e.pageY);\r\n\r\n\t\t\t\tif(is_corner)\r\n\t\t\t\t\troot.style.width = neww + \"px\";\r\n\t\t\t\troot.style.height = newh + \"px\";\r\n\r\n\t\t\t\tmouse[0] = e.pageX;\r\n\t\t\t\tmouse[1] = e.pageY;\r\n\t\t\t\tthat.content.style.height = \"calc( 100% - 24px )\";\r\n\r\n\t\t\t\tif(that.on_resize && (w != neww || h != newh) )\r\n\t\t\t\t\tthat.on_resize(e,neww,newh);\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mouseup\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", inner_mouse);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", inner_mouse);\r\n\t\t\t\tis_corner = false;\r\n\t\t\t}\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.dockTo = function( parent, dock_type )\r\n\t{\r\n\t\tif(!parent) return;\r\n\t\tvar panel = this.root;\r\n\r\n\t\tdock_type = dock_type || \"full\";\r\n\t\tparent = parent.content || parent;\r\n\r\n\t\tpanel.style.top = 0;\r\n\t\tpanel.style.left = 0;\r\n\r\n\t\tpanel.style.boxShadow = \"0 0 0\";\r\n\r\n\t\tif(dock_type == \"full\")\r\n\t\t{\r\n\t\t\tpanel.style.position = \"relative\";\r\n\t\t\tpanel.style.width = \"100%\";\r\n\t\t\tpanel.style.height = \"100%\";\r\n\t\t\tthis.content.style.width = \"100%\";\r\n\t\t\tthis.content.style.height = \"calc(100% - \"+ LiteGUI.Panel.title_height +\")\"; //title offset: 20px\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\t\t}\r\n\t\telse if(dock_type == 'left' || dock_type == 'right')\r\n\t\t{\r\n\t\t\tpanel.style.position = \"absolute\";\r\n\t\t\tpanel.style.top = 0;\r\n\t\t\tpanel.style[dock_type] = 0;\r\n\r\n\t\t\tpanel.style.width = this.width + \"px\";\r\n\t\t\tpanel.style.height = \"100%\";\r\n\t\t\tthis.content.style.height = \"calc(100% - \"+ LiteGUI.Panel.title_height +\")\";\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\r\n\t\t\tif(dock_type == 'right')\r\n\t\t\t{\r\n\t\t\t\tpanel.style.left = \"auto\";\r\n\t\t\t\tpanel.style.right = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(dock_type == 'bottom' || dock_type == 'top')\r\n\t\t{\r\n\t\t\tpanel.style.width = \"100%\";\r\n\t\t\tpanel.style.height = this.height + \"px\";\r\n\t\t\tif(dock_type == 'bottom')\r\n\t\t\t{\r\n\t\t\t\tpanel.style.bottom = 0;\r\n\t\t\t\tpanel.style.top = \"auto\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.draggable)\r\n\t\t{\r\n\t\t\tLiteGUI.draggable(panel);\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif(parent.content)\r\n\t\t\tparent.content.appendChild(panel);\r\n\t\telse if( typeof(parent) == \"string\")\r\n\t\t{\r\n\t\t\tparent = document.querySelector( parent );\r\n\t\t\tif(parent)\r\n\t\t\t\tparent.appendChild( panel )\r\n\t\t}\r\n\t\telse\r\n\t\t\tparent.appendChild( panel ); \r\n\t}\r\n\r\n\tDialog.prototype.addButton = function(name,options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tif( options.constructor === Function )\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.className = \"litebutton\";\r\n\r\n\t\tbutton.innerHTML = name;\r\n\t\tif(options.className)\r\n\t\t\tbutton.className += \" \" + options.className;\r\n\r\n\t\tthis.root.querySelector(\".panel-footer\").appendChild( button );\r\n\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback(this);\r\n\r\n\t\t\tif(options.close)\r\n\t\t\t\tthat.close();\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\t/**\r\n\t* destroys the dialog\r\n\t* @method close\r\n\t*/\r\n\tDialog.prototype.close = function() {\r\n\t\tLiteGUI.remove( this.root );\r\n\t\tLiteGUI.trigger( this, \"closed\", this);\r\n\t\tif(this.on_close)\r\n\t\t\tthis.on_close();\r\n\t\tif(this.onclose)\r\n\t\t\tconsole.warn(\"Dialog: Do not use onclose, use on_close instead\");\r\n\t\tif(this.dialog_window)\r\n\t\t{\r\n\t\t\tthis.dialog_window.close();\r\n\t\t\tthis.dialog_window = null;\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.highlight = function(time)\r\n\t{\r\n\t\ttime = time || 100;\r\n\t\tthis.root.style.outline = \"1px solid white\";\r\n\t\tvar doc = this.root.ownerDocument;\r\n\t\tvar w = doc.defaultView || doc.parentWindow;\r\n\t\tw.focus();\r\n\t\tsetTimeout( (function(){\r\n\t\t\tthis.root.style.outline = null;\r\n\t\t}).bind(this), time );\r\n\t}\r\n\r\n\tDialog.minimized = [];\r\n\r\n\tDialog.prototype.minimize = function() {\r\n\t\tif(this.minimized)\r\n\t\t\treturn;\r\n\r\n\t\tthis.minimized = true;\r\n\t\tthis.old_box = this.root.getBoundingClientRect();\r\n\r\n\t\tthis.root.querySelector(\".content\").style.display = \"none\";\r\n\t\t\r\n\t\tvar minimize_button = this.root.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\t\r\n\t\t\tminimize_button.style.display = \"none\";\r\n\r\n\t\tvar maximize_button = this.root.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.style.display = \"\";\r\n\r\n\t\tthis.root.style.width = LiteGUI.Dialog.MINIMIZED_WIDTH + \"px\";\r\n\r\n\t\tLiteGUI.bind( this, \"closed\", function() {\r\n\t\t\tLiteGUI.Dialog.minimized.splice( LiteGUI.Dialog.minimized.indexOf( this ), 1);\r\n\t\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\t\t});\r\n\r\n\t\tLiteGUI.Dialog.minimized.push( this );\r\n\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\r\n\t\tLiteGUI.trigger( this,\"minimizing\" );\r\n\t}\r\n\r\n\tDialog.arrangeMinimized = function()\r\n\t{\r\n\t\tfor(var i in LiteGUI.Dialog.minimized)\r\n\t\t{\r\n\t\t\tvar dialog = LiteGUI.Dialog.minimized[i];\r\n\t\t\tvar parent = dialog.root.parentNode;\r\n\t\t\tvar pos = parent.getBoundingClientRect().height - 20;\r\n\t\t\tdialog.root.style.left = LiteGUI.Dialog.MINIMIZED_WIDTH * i;\r\n\t\t\tdialog.root.style.top = pos + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.maximize = function() {\r\n\t\tif(!this.minimized)\r\n\t\t\treturn;\r\n\t\tthis.minimized = false;\r\n\r\n\t\tthis.root.querySelector(\".content\").style.display = \"\";\r\n\t\tLiteGUI.draggable(this.root);\r\n\t\tthis.root.style.left = this.old_box.left+\"px\";\r\n\t\tthis.root.style.top = this.old_box.top + \"px\";\r\n\t\tthis.root.style.width = this.old_box.width + \"px\";\r\n\t\tthis.root.style.height = this.old_box.height + \"px\";\r\n\r\n\t\tvar minimize_button = this.root.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\r\n\t\t\tminimize_button.style.display = \"\";\r\n\r\n\t\tvar maximize_button = this.root.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.style.display = \"none\";\r\n\r\n\t\tLiteGUI.Dialog.minimized.splice( LiteGUI.Dialog.minimized.indexOf( this ), 1);\r\n\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\t\tLiteGUI.trigger( this, \"maximizing\" );\r\n\t}\r\n\r\n\tDialog.prototype.makeModal = function()\r\n\t{\r\n\t\tLiteGUI.showModalBackground(true);\r\n\t\tLiteGUI.modalbg_div.appendChild( this.root ); //add panel\r\n\t\tthis.show();\r\n\t\tthis.center();\r\n\r\n\t\tLiteGUI.bind( this, \"closed\", inner );\r\n\r\n\t\tfunction inner(e)\r\n\t\t{\r\n\t\t\tLiteGUI.showModalBackground(false);\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.bringToFront = function()\r\n\t{\r\n\t\tvar parent = this.root.parentNode;\r\n\t\tparent.removeChild(this.root);\r\n\t\tparent.appendChild(this.root);\r\n\t}\r\n\r\n\t/**\r\n\t* shows a hidden dialog\r\n\t* @method show\r\n\t*/\r\n\tDialog.prototype.show = function( v, reference_element )\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t{\r\n\t\t\tif(!reference_element)\r\n\t\t\t\tLiteGUI.add( this );\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar doc = reference_element.ownerDocument;\r\n\t\t\t\tvar parent = doc.querySelector(\".litegui-wrap\") || doc.body;\r\n\t\t\t\tparent.appendChild( this.root );\r\n\t\t\t\tvar w = doc.defaultView || doc.parentWindow;\r\n\t\t\t\tw.focus();\r\n\t\t\t}\r\n\t\t\tthis.center();\r\n\t\t}\r\n\r\n\t\tif(!this.detach_window)\r\n\t\t{\r\n\t\t\tthis.root.style.display = \"\";\r\n\t\t\tLiteGUI.trigger( this, \"shown\" );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* hides the dialog\r\n\t* @method hide\r\n\t*/\r\n\tDialog.prototype.hide = function( v )\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t\tLiteGUI.trigger(this, \"hidden\");\r\n\t}\r\n\r\n\tDialog.prototype.fadeIn = function(time)\r\n\t{\r\n\t\ttime = time || 1000;\r\n\t\tthis.root.style.display = \"\";\r\n\t\tthis.root.style.opacity = 0;\r\n\t\tvar that = this;\r\n\t\tsetTimeout(function(){\r\n\t\t\tthat.root.style.transition = \"opacity \"+time+\"ms\";\r\n\t\t\tthat.root.style.opacity = 1;\r\n\t\t},100);\r\n\t}\r\n\r\n\tDialog.prototype.setPosition = function(x,y)\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t\tconsole.warn(\"LiteGUI.Dialog: Cannot set position of dialog if it is not in the DOM\");\r\n\t\tthis.root.position = \"absolute\";\r\n\t\tthis.root.style.left = x + \"px\";\r\n\t\tthis.root.style.top = y + \"px\";\r\n\t}\r\n\r\n\tDialog.prototype.setSize = function( w, h )\r\n\t{\r\n\t\tthis.root.style.width = typeof(w) == \"number\" ? w + \"px\" : w;\r\n\t\tthis.root.style.height = typeof(h) == \"number\" ? h + \"px\" : h;\r\n\t}\r\n\r\n\tDialog.prototype.setTitle = function(text)\r\n\t{\r\n\t\tif(!this.header)\r\n\t\t\treturn;\r\n\t\tthis.header.innerHTML = text;\r\n\t}\r\n\r\n\tDialog.prototype.center = function()\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t\treturn;\r\n\r\n\t\tthis.root.position = \"absolute\";\r\n\t\tvar width = this.root.offsetWidth;\r\n\t\tvar height = this.root.offsetHeight;\r\n\t\tvar parent_width = this.root.parentNode.offsetWidth;\r\n\t\tvar parent_height = this.root.parentNode.offsetHeight;\r\n\t\tthis.root.style.left = Math.floor(( parent_width - width ) * 0.5) + \"px\";\r\n\t\tthis.root.style.top = Math.floor(( parent_height - height ) * 0.5) + \"px\";\r\n\t}\r\n\r\n\t/**\r\n\t* Adjust the size of the dialog to the size of the content\r\n\t* @method adjustSize\r\n\t* @param {number} margin\r\n\t*/\r\n\tDialog.prototype.adjustSize = function( margin, skip_timeout )\r\n\t{\r\n\t\tmargin = margin || 0;\r\n\t\tthis.content.style.height = \"auto\";\r\n\r\n\t\tif(this.content.offsetHeight == 0 && !skip_timeout) //happens sometimes if the dialog is not yet visible\r\n\t\t{\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout( function(){ that.adjustSize( margin, true ); }, 1 );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar extra = 0;\r\n\t\tvar footer = this.root.querySelector(\".panel-footer\");\r\n\t\tif(footer)\r\n\t\t\textra += footer.offsetHeight;\r\n\r\n\t\tvar width = this.content.offsetWidth;\r\n\t\tvar height = this.content.offsetHeight + 20 + margin + extra;\r\n\r\n\t\tthis.setSize( width, height );\r\n\t}\r\n\r\n\tDialog.prototype.clear = function()\r\n\t{\r\n\t\tthis.content.innerHTML = \"\";\r\n\t}\r\n\r\n\tDialog.prototype.detachWindow = function( on_complete, on_close )\r\n\t{\r\n\t\tif(this.dialog_window)\r\n\t\t\treturn;\r\n\r\n\t\t//create window\r\n\t\tvar rect = this.root.getClientRects()[0];\r\n\t\tvar w = rect.width;\r\n\t\tvar h = rect.height;\r\n\t\tvar title = \"Window\";\r\n\t\tvar header = this.root.querySelector(\".panel-header\");\r\n\t\tif(header)\r\n\t\t\ttitle = header.textContent;\r\n\r\n\t\tvar dialog_window = window.open(\"\",\"\",\"width=\"+w+\", height=\"+h+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\tdialog_window.document.write( \"<head><title>\"+title+\"</title>\" );\r\n\t\tthis.dialog_window = dialog_window;\r\n\r\n\t\t//transfer style\r\n\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\tdialog_window.document.write( styles[i].outerHTML );\r\n\t\tdialog_window.document.write( \"</head><body></body>\" );\r\n\t\tdialog_window.document.close();\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t//closing event\r\n\t\tdialog_window.onbeforeunload = function(){\r\n\t\t\tvar index = LiteGUI.windows.indexOf( dialog_window );\r\n\t\t\tif(index != -1)\r\n\t\t\t\tLiteGUI.windows.splice( index, 1 );\r\n\t\t\tif(on_close)\r\n\t\t\t\ton_close();\r\n\t\t}\r\n\r\n\t\t//move the content there\r\n\t\tdialog_window.document.body.appendChild( this.content );\r\n\t\tthis.root.style.display = \"none\"; //hide\r\n\t\tthis._old_height = this.content.style.height;\r\n\t\tthis.content.style.height = \"100%\";\r\n\r\n\t\tLiteGUI.windows.push( dialog_window );\r\n\r\n\t\tif(on_complete)\r\n\t\t\ton_complete();\r\n\r\n\t\treturn dialog_window;\t\t\r\n\t}\r\n\r\n\tDialog.prototype.reattachWindow = function( on_complete )\r\n\t{\r\n\t\tif(!this.dialog_window)\r\n\t\t\treturn;\r\n\r\n\t\tthis.root.appendChild( this.content );\r\n\t\tthis.root.style.display = \"\"; //show\r\n\t\tthis.content.style.height = this._old_height;\r\n\t\tdelete this._old_height;\r\n\t\tthis.dialog_window.close();\r\n\t\tvar index = LiteGUI.windows.indexOf( this.dialog_window );\r\n\t\tif(index != -1)\r\n\t\t\tLiteGUI.windows.splice( index, 1 );\r\n\t\tthis.dialog_window = null;\r\n\t}\r\n\r\n\r\n\t//*********************************************\r\n\r\n\tDialog.showAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.show();\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.hideAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.hide();\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.closeAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.close();\r\n\t\t}\r\n\t}\r\n\r\n\treturn LiteGUI.Dialog = Dialog;\r\n});\ndefine('skylark-litegui/Dragger',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/***** DRAGGER **********/\r\n\tfunction Dragger(value, options)\r\n\t{\r\n\t\tif(value === null || value === undefined)\r\n\t\t\tvalue = 0;\r\n\t\telse if(value.constructor === String)\r\n\t\t\tvalue = parseFloat(value);\r\n\t\telse if(value.constructor !== Number)\r\n\t\t\tvalue = 0;\r\n\r\n\t\tthis.value = value;\r\n\t\tvar that = this;\r\n\t\tvar precision = options.precision != undefined ? options.precision : 3; //num decimals\r\n\r\n\t\tthis.options = options || {};\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"dragger \" + (options.extraclass ? options.extraclass : \"\");\r\n\t\tthis.root = element;\r\n\r\n\t\tvar wrap = document.createElement(\"span\");\r\n\t\twrap.className = \"inputfield \" + (options.extraclass ? options.extraclass : \"\") + (options.full ? \" full\" : \"\");\r\n\t\tif(options.disabled)\r\n\t\twrap.className += \" disabled\";\r\n\t\telement.appendChild(wrap);\r\n\r\n\t\tvar dragger_class = options.dragger_class || \"full\";\r\n\r\n\t\tvar input = document.createElement(\"input\");\r\n\t\tinput.className = \"text number \" + (dragger_class ? dragger_class : \"\");\r\n\t\tinput.value = value.toFixed( precision ) + (options.units ? options.units : \"\");\r\n\t\tinput.tabIndex = options.tab_index;\r\n\t\tthis.input = input;\r\n\t\telement.input = input;\r\n\r\n\t\tif(options.disabled)\r\n\t\t\tinput.disabled = true;\r\n\t\tif(options.tab_index)\r\n\t\t\tinput.tabIndex = options.tab_index;\r\n\t\twrap.appendChild(input);\r\n\r\n\t\tinput.addEventListener(\"keydown\",function(e) {\r\n\t\t\tif(e.keyCode == 38)\r\n\t\t\t\tinner_inc(1,e);\r\n\t\t\telse if(e.keyCode == 40)\r\n\t\t\t\tinner_inc(-1,e);\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tvar dragger = document.createElement(\"div\");\r\n\t\tdragger.className = \"drag_widget\";\r\n\t\tif(options.disabled)\r\n\t\t\tdragger.className += \" disabled\";\r\n\r\n\t\twrap.appendChild(dragger);\r\n\t\telement.dragger = dragger;\r\n\r\n\t\tdragger.addEventListener(\"mousedown\",inner_down);\r\n\t\tinput.addEventListener(\"wheel\",inner_wheel,false);\r\n\t\tinput.addEventListener(\"mousewheel\",inner_wheel,false);\r\n\r\n\t\tvar doc_binded = null;\r\n\r\n\t\tfunction inner_down(e)\r\n\t\t{\r\n\t\t\tdoc_binded = input.ownerDocument;\r\n\r\n\t\t\tdoc_binded.removeEventListener(\"mousemove\", inner_move);\r\n\t\t\tdoc_binded.removeEventListener(\"mouseup\", inner_up);\r\n\r\n\t\t\tif(!options.disabled)\r\n\t\t\t{\r\n\t\t\t\tif(element.requestPointerLock)\r\n\t\t\t\t\telement.requestPointerLock();\r\n\t\t\t\tdoc_binded.addEventListener(\"mousemove\", inner_move);\r\n\t\t\t\tdoc_binded.addEventListener(\"mouseup\", inner_up);\r\n\r\n\t\t\t\tdragger.data = [e.screenX, e.screenY];\r\n\r\n\t\t\t\tLiteGUI.trigger( element,\"start_dragging\");\r\n\t\t\t}\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_move(e)\r\n\t\t{\r\n\t\t\tvar deltax = e.screenX - dragger.data[0];\r\n\t\t\tvar deltay = dragger.data[1] - e.screenY;\r\n\t\t\tvar diff = [ deltax, deltay ];\r\n\t\t\tif(e.movementX !== undefined)\r\n\t\t\t\tdiff = [e.movementX, -e.movementY]\r\n\t\t\t//console.log(e);\r\n\t\t\tdragger.data = [e.screenX, e.screenY];\r\n\t\t\tvar axis = options.horizontal ? 0 : 1;\r\n\t\t\tinner_inc( diff[axis], e );\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tfunction inner_wheel(e)\r\n\t\t{\r\n\t\t\t//console.log(\"wheel!\");\r\n\t\t\tif(document.activeElement !== this)\r\n\t\t\t\treturn;\r\n\t\t\tvar delta = e.wheelDelta !== undefined ? e.wheelDelta : (e.deltaY ? -e.deltaY/3 : 0);\r\n\t\t\tinner_inc( delta > 0 ? 1 : -1, e );\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_up(e)\r\n\t\t{\r\n\t\t\tLiteGUI.trigger(element, \"stop_dragging\");\r\n\t\t\tvar doc = doc_binded || document;\r\n\t\t\tdoc_binded = null;\r\n\t\t\tdoc.removeEventListener(\"mousemove\", inner_move);\r\n\t\t\tdoc.removeEventListener(\"mouseup\", inner_up);\r\n\t\t\tif(doc.exitPointerLock)\r\n\t\t\t\tdoc.exitPointerLock();\r\n\t\t\tLiteGUI.trigger(dragger,\"blur\");\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tfunction inner_inc(v,e)\r\n\t\t{\r\n\t\t\tif(!options.linear)\r\n\t\t\t\tv = v > 0 ? Math.pow(v,1.2) : Math.pow( Math.abs(v), 1.2) * -1;\r\n\t\t\tvar scale = (options.step ? options.step : 1.0);\r\n\t\t\tif(e && e.shiftKey)\r\n\t\t\t\tscale *= 10;\r\n\t\t\telse if(e && e.ctrlKey)\r\n\t\t\t\tscale *= 0.1;\r\n\t\t\tvar value = parseFloat( input.value ) + v * scale;\r\n\t\t\tif(options.max != null && value > options.max)\r\n\t\t\t\tvalue = options.max;\r\n\t\t\tif(options.min != null && value < options.min)\r\n\t\t\t\tvalue = options.min;\r\n\r\n\t\t\tinput.value = value.toFixed( precision );\r\n\t\t\t//input.value = ((value * 1000)<<0) / 1000; //remove ugly decimals\r\n\t\t\tif(options.units)\r\n\t\t\t\tinput.value += options.units;\r\n\t\t\tLiteGUI.trigger(input,\"change\");\r\n\t\t}\r\n\t}\r\n\r\n\tDragger.prototype.setRange = function(min,max)\r\n\t{\r\n\t\tthis.options.min = min;\r\n\t\tthis.options.max = max;\r\n\t}\r\n\r\n\tDragger.prototype.setValue = function(v, skip_event) { \r\n\t\tv = parseFloat(v);\r\n\t\tthis.value = v;\r\n\t\tif(this.options.precision)\r\n\t\t\tv = v.toFixed(this.options.precision);\r\n\t\tif(this.options.units)\r\n\t\t\tv += this.options.units;\r\n\t\tthis.input.value = v;\r\n\t\tif(!skip_event)\r\n\t\t\tLiteGUI.trigger( this.input, \"change\" );\r\n\t}\r\n\r\n\tDragger.prototype.getValue = function()\r\n\t{\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\treturn LiteGUI.Dragger = Dragger;\r\n});\ndefine('skylark-litegui/Inspector',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/**\r\n\t* Inspector allows to create a list of widgets easily, it also provides methods to create the widgets automatically.<br/>\r\n\t* Every widget is created calling the function add followed by the widget name, p.e. addSlider or addVector3 or addNumber.<br/>\r\n\t* Widgets always receive three parameters:<br/>\r\n\t* - name: String that defines the name at that it will be shown in the left side of the widget.<br/>\r\n\t* - value: the value that will be displayed in the widget.<br/>\r\n\t* - options: Object containing all the values .<br/>\r\n\t*\r\n\t* @class Inspector\r\n\t* @param {Object} options object with a set of options { <br/>\r\n\t\twidth: total width <br/>\r\n\t\theight: total height <br/>\r\n\t\twidgets_width: width of every widget (used mostly in horizontal inspectors) <br/>\r\n\t\tname_width: width of the name part of widgets <br/>\r\n\t\tfull: set to true if you want the inspector to use all the parent width and height <br/>\r\n\t\twidgets_per_row: number of widgets per row, default is 1 but you can change it if you want to pack several widgets in a row (useful for small widgets like checkboxes) <br/>\r\n\t\tone_line: widgets are place one next to the other horizontaly <br/>\r\n\t\tonchange: callback to call when something changes <br/>\r\n\t   } <br/>\r\n\r\n\t\tDependencies: \r\n\t\t\t- jscolor.js\r\n\r\n\t* @constructor\r\n\t*/\r\n\r\n\tfunction Inspector( options )\r\n\t{\r\n\t\t//for legacy code\r\n\t\tif(options && options.constructor === String)\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = arguments[1] || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tthis.root = document.createElement(\"DIV\");\r\n\t\tthis.root.className = \"inspector \" + ( options.full ? \"full\" : \"\") + (options.className || \"\");\r\n\t\tif(options.one_line)\r\n\t\t{\r\n\t\t\tthis.one_line = true;\r\n\t\t\tthis.root.className += \" one_line\";\r\n\t\t}\r\n\r\n\t\tif(options.id)\r\n\t\t\tthis.root.id = options.id;\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis.values = {};\r\n\t\tthis.widgets = [];\r\n\t\tthis.widgets_by_name = {};\r\n\t\tthis.row_number = 0; //used to detect if element is even (cannot use CSS, special cases everywhere)\r\n\r\n\t\tthis.addContainer(); //add empty container\r\n\t\tthis.tab_index = Math.floor(Math.random() * 10000);\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\t\tif(!options.one_line)\r\n\t\t\t\tthis.root.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\tif(options.name_width)\r\n\t\t\tthis.name_width = options.name_width;\r\n\t\tif(options.widgets_width)\r\n\t\t\tthis.widgets_width = options.widgets_width;\r\n\r\n\t\tif(options.noscroll)\r\n\t\t\tthis.root.style.overflow = \"hidden\";\r\n\r\n\t\tif(options.onchange)\r\n\t\t\tthis.onchange = options.onchange;\r\n\r\n\t\tif(options.parent)\r\n\t\t\tthis.appendTo(options.parent);\r\n\r\n\t\tthis.className = this.root.className;\r\n\r\n\t\tthis.widgets_per_row = options.widgets_per_row || 1;\r\n\t}\r\n\r\n\tInspector.prototype.getValues = function()\r\n\t{\r\n\t\tvar r = {};\r\n\t\tfor(var i in this.widgets_by_name)\r\n\t\t\tr[i] = this.widgets_by_name[i].getValue();\r\n\t\treturn r;\r\n\t}\r\n\r\n\tInspector.prototype.setValues = function(v)\r\n\t{\r\n\t\tfor(var i in v)\r\n\t\t\tif( this.widgets_by_name[i] )\r\n\t\t\t\tthis.widgets_by_name[i].setValue( v[i] );\r\n\t}\r\n\r\n\t//append the inspector to a parent\r\n\tInspector.prototype.appendTo = function( parent, at_front )\r\n\t{\r\n\t\tif(!parent)\r\n\t\t\treturn;\r\n\t\tif(parent.constructor === String)\r\n\t\t\tparent = document.querySelector(parent);\r\n\t\tif(!parent)\r\n\t\t\treturn;\r\n\t\tif( at_front )\r\n\t\t\tparent.insertBefore( this.root, parent.firstChild );\r\n\t\telse\r\n\t\t\tparent.appendChild( this.root );\r\n\t}\r\n\r\n\t/**\r\n\t* Removes all the widgets inside the inspector\r\n\t* @method clear\r\n\t*/\r\n\tInspector.prototype.clear = function()\r\n\t{\r\n\t\tpurgeElement( this.root, true ); //hack, but doesnt seem to work\r\n\r\n\t\twhile(this.root.hasChildNodes())\r\n\t\t\tthis.root.removeChild( this.root.lastChild );\r\n\r\n\t\tthis.root.className = this.className;\r\n\r\n\t\tthis.row_number = 0;\r\n\t\tthis.values = {};\r\n\t\tthis.widgets = [];\r\n\t\tthis.widgets_by_name = {};\r\n\t\tthis.sections = [];\r\n\t\tthis.current_section = null;\r\n\t\tthis._current_container = null;\r\n\t\tthis._current_container_stack = null;\r\n\t\tthis.addContainer();\r\n\t}\r\n\r\n\t/**\r\n\t* Tryes to refresh (calls on_refresh)\r\n\t* @method refresh\r\n\t*/\r\n\tInspector.prototype.refresh = function()\r\n\t{\r\n\t\tif(this.on_refresh)\r\n\t\t\tthis.on_refresh();\r\n\t}\r\n\r\n\t// Append widget to this inspector (TODO: rename to appendWidget)\r\n\t// + widget_parent\r\n\t// + replace\r\n\tInspector.prototype.append = function( widget, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = options.widget_parent || this._current_container || this.root;\r\n\r\n\t\tif(options.replace)\r\n\t\t\toptions.replace.parentNode.replaceChild( widget, options.replace );\r\n\t\telse\r\n\t\t{\r\n\t\t\twidget.section = this.current_section;\r\n\t\t\troot.appendChild( widget );\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.prototype.pushContainer = function( container )\r\n\t{\r\n\t\tif( !this._current_container_stack )\r\n\t\t\tthis._current_container_stack = [ container ];\r\n\t\telse\r\n\t\t{\r\n\t\t\tif( this._current_container_stack.indexOf( container ) != -1 )\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"Container already in the stack\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._current_container_stack.push( container );\r\n\t\t}\r\n\r\n\t\tthis._current_container = container;\r\n\t}\r\n\r\n\tInspector.prototype.isContainerInStack = function( container )\r\n\t{\r\n\t\tif(!this._current_container_stack)\r\n\t\t\treturn false;\r\n\t\tif( this._current_container_stack.indexOf( container ) != -1 )\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tInspector.prototype.popContainer = function( container )\r\n\t{\r\n\t\tthis.row_number = 0;\r\n\t\tif(this._current_container_stack && this._current_container_stack.length)\r\n\t\t{\r\n\t\t\tif(container)\r\n\t\t\t{\r\n\t\t\t\tvar aux = this._current_container_stack.pop();\r\n\t\t\t\twhile(aux && aux != container)\r\n\t\t\t\t\taux = this._current_container_stack.pop();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._current_container_stack.pop();\r\n\t\t\t}\r\n\t\t\tthis._current_container = this._current_container_stack[ this._current_container_stack.length - 1 ];\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._current_container = null;\r\n\t}\r\n\r\n\tInspector.prototype.setup = function(info)\r\n\t{\r\n\t\tfor(var i in info)\r\n\t\t{\r\n\t\t\tvar w = info[i];\r\n\t\t\tvar widget = this.add( w.type, w.name, w.value, w.options );\r\n\t\t}\r\n\t}\r\n\r\n\t/**  Returns the widget given the name\r\n\t*\r\n\t* @method getWidget\r\n\t* @param {String} name the name of the widget supplied when creating it or the number of the widget\r\n\t* @return {Object} widget object\r\n\t*/\r\n\tInspector.prototype.getWidget = function( name )\r\n\t{\r\n\t\tif( name !== null && name.constructor === Number )\r\n\t\t\treturn this.widgets[ name ];\r\n\t\treturn this.widgets_by_name[ name ];\r\n\t}\r\n\r\n\t/**  Given an instance it shows all the attributes\r\n\t*\r\n\t* @method inspectInstance\r\n\t* @param {Object} instance the instance that you want to inspect, attributes will be collected from this object\r\n\t* @param {Array} properties an array with all the names of the properties you want to inspect, \r\n\t*\t\t  if not specified then it calls getProperties, othewise collect them and tries to guess the type\r\n\t* @param {Object} properties_info_example it overwrites the info about properties found in the object (in case the automaticaly guessed type is wrong)\r\n\t* @param {Array} properties_to_skip this properties will be ignored\r\n\t*/\r\n\tInspector.prototype.inspectInstance = function( instance, properties, properties_info_example, properties_to_skip ) \r\n\t{\r\n\t\tif(!instance)\r\n\t\t\treturn;\r\n\r\n\t\tif( !properties )\r\n\t\t{\tif( instance.getProperties )\r\n\t\t\t\tproperties = instance.getProperties();\r\n\t\t\telse\r\n\t\t\t\tproperties = this.collectProperties( instance );\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t}\r\n\r\n\t\tvar classObject = instance.constructor;\r\n\t\tif(!properties_info_example && classObject.properties)\r\n\t\t\tproperties_info_example = classObject.properties;\r\n\r\n\t\t//Properties info contains  name:type for every property\r\n\t\t//Must be cloned to ensure there is no overlap between widgets reusing the same container\r\n\t\tvar properties_info = {};\r\n\r\n\t\tif( instance.getInspectorProperties )\r\n\t\t\tproperties_info = instance.getInspectorProperties();\r\n\t\telse\r\n\t\t{\r\n\t\t\t//add to properties_info the ones that are not specified \r\n\t\t\tfor(var i in properties)\r\n\t\t\t{\r\n\t\t\t\tif( properties_info_example && properties_info_example[i] )\r\n\t\t\t\t{\r\n\t\t\t\t\t//clone\r\n\t\t\t\t\tproperties_info[i] = inner_clone( properties_info_example[i] );\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar v = properties[i];\r\n\r\n\t\t\t\tif(classObject[\"@\" + i]) //guess from class object info\r\n\t\t\t\t{\r\n\t\t\t\t\tvar shared_options = classObject[\"@\" + i];\r\n\t\t\t\t\tif( shared_options && shared_options.widget === null)\r\n\t\t\t\t\t\tcontinue; //skip\r\n\t\t\t\t\tproperties_info[i] = inner_clone( shared_options );\r\n\t\t\t\t}\r\n\t\t\t\telse if(instance[\"@\" + i]) //guess from instance info\r\n\t\t\t\t\tproperties_info[i] = instance[\"@\" + i];\r\n\t\t\t\telse if(v === null || v === undefined) //are you sure?\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tswitch( v.constructor )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase Number: properties_info[i] = { type: \"number\", step: 0.1 }; break;\r\n\t\t\t\t\t\tcase String: properties_info[i] = { type: \"string\" }; break;\r\n\t\t\t\t\t\tcase Boolean: properties_info[i] = { type: \"boolean\" }; break;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif( v && (v.constructor === Array || v.constructor.BYTES_PER_ELEMENT) ) //Array or typed_array\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar is_number = v[0] != null && v[0].constructor === Number;\r\n\t\t\t\t\t\t\t\tswitch(v.length)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcase 2: properties_info[i] = { type: is_number ? \"vec2\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tcase 3: properties_info[i] = { type: is_number ? \"vec3\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tcase 4: properties_info[i] = { type: is_number ? \"vec4\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tdefault: \r\n\t\t\t\t\t\t\t\t\t\tproperties_info[i] = { type: \"Array\" }; break;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(properties_to_skip)\r\n\t\t\tfor(var i in properties_to_skip)\r\n\t\t\t\tdelete properties_info[ properties_to_skip[i] ];\r\n\r\n\t\t//allows to establish the order of the properties in the inspector\r\n\t\tif(classObject.properties_order)\r\n\t\t{\r\n\t\t\tvar sorted_properties = {};\r\n\t\t\tfor(var i in classObject.properties_order)\r\n\t\t\t{\r\n\t\t\t\tvar name = classObject.properties_order[i];\r\n\t\t\t\tif( properties_info[ name ] )\r\n\t\t\t\t\tsorted_properties[ name ] = properties_info[ name ];\r\n\t\t\t\telse\r\n\t\t\t\t\tconsole.warn(\"property not found in instance:\", name );\r\n\t\t\t}\r\n\t\t\tfor(var i in properties_info) //add the missing ones at the end (should this be optional?)\r\n\t\t\t{\r\n\t\t\t\tif( !sorted_properties[i] )\r\n\t\t\t\t\tsorted_properties[i] = properties_info[i];\r\n\t\t\t}\r\n\t\t\tproperties_info = sorted_properties;\r\n\t\t}\r\n\r\n\r\n\t\t//showAttributes doesnt return anything but just in case...\r\n\t\treturn this.showProperties( instance, properties_info );\r\n\r\n\t\t//basic cloner\r\n\t\tfunction inner_clone(original, target)\r\n\t\t{\r\n\t\t\ttarget = target || {};\r\n\t\t\tfor(var j in original)\r\n\t\t\t\ttarget[j] = original[j];\r\n\t\t\treturn target;\r\n\t\t}\r\n\t}\r\n\r\n\t/**  extract all attributes from an instance (enumerable properties that are not function and a name starting with alphabetic character)\r\n\t*\r\n\t* @method collectPropertier\r\n\t* @param {Object} instance extract enumerable and public (name do not start with '_' ) properties from an object\r\n\t* return {Object} object with \"name\" : value for every property\r\n\t**/\r\n\tInspector.prototype.collectProperties = function( instance )\r\n\t{\r\n\t\tvar properties = {};\r\n\r\n\t\tfor(var i in instance)\r\n\t\t{\r\n\t\t\tif(i[0] == \"_\" || i[0] == \"@\" || i.substr(0,6) == \"jQuery\") //skip vars with _ (they are private)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar v = instance[i];\r\n\t\t\tif ( v && v.constructor == Function && !instance.constructor[\"@\" + i])\r\n\t\t\t\tcontinue;\r\n\t\t\tproperties[i] = v;\r\n\t\t}\r\n\t\treturn properties;\r\n\t}\r\n\r\n\t/** Adds the widgets for the properties specified in properties_info of instance, it will create callback and callback_update\r\n\t*\r\n\t* @method showProperties\r\n\t* @param {Object} instance the instance that you want to inspect\r\n\t* @param {Object} properties_info object containing   \"property_name\" :{ type: value, widget:..., min:..., max:... }  or just \"property\":\"type\"\r\n\t* @param {Array} properties_to_skip this properties will be ignored\r\n\t*/\r\n\tInspector.prototype.showProperties = function( instance, properties_info ) \r\n\t{\r\n\t\t//for every enumerable property create widget\r\n\t\tfor(var i in properties_info)\r\n\t\t{\r\n\t\t\tvar varname = i;\r\n\t\t\tvar options = properties_info[i];\r\n\t\t\tif(!options)\r\n\t\t\t\tcontinue;\r\n\t\t\tif(options.constructor === String) //it allows to just specify the type\r\n\t\t\t\toptions = { type: options };\r\n\t\t\tif(options.name)\r\n\t\t\t\tvarname = options.name;\r\n\t\t\tif(!options.callback) //generate default callback to modify data\r\n\t\t\t{\r\n\t\t\t\tvar o = { instance: instance, name: varname, options: options };\r\n\t\t\t\tif(options.type == \"function\")\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\toptions.callback = Inspector.assignValue.bind( o );\r\n\r\n\t\t\t}\r\n\t\t\tif(!options.callback_update) //generate default refresh\r\n\t\t\t{\r\n\t\t\t\tvar o = { instance: instance, name: varname };\r\n\t\t\t\toptions.callback_update = (function(){ return this.instance[ this.name ]; }).bind(o);\r\n\t\t\t}\r\n\r\n\t\t\toptions.instance = instance;\r\n\t\t\toptions.varname = varname;\r\n\r\n\t\t\tvar type = options.widget || options.type || \"string\";\r\n\r\n\t\t\t//used to hook stuff on special occasions\r\n\t\t\tif( this.on_addProperty )\r\n\t\t\t\tthis.on_addProperty( type, instance, varname, instance[varname], options );\r\n\t\t\tthis.add( type, varname, instance[varname], options );\r\n\t\t}\r\n\r\n\t\t//extra widgets inserted by the object (stored in the constructor)\r\n\t\tif(instance.constructor.widgets)\r\n\t\t\tfor(var i in instance.constructor.widgets)\r\n\t\t\t{\r\n\t\t\t\tvar w = instance.constructor.widgets[i];\r\n\t\t\t\tthis.add( w.widget, w.name, w.value, w );\r\n\t\t\t}\r\n\r\n\t\t//used to add extra widgets at the end\r\n\t\tif(instance.onShowProperties)\r\n\t\t\tinstance.onShowProperties(this);\r\n\t\tif(instance.constructor.onShowProperties)\r\n\t\t\tinstance.constructor.onShowProperties(instance, this);\r\n\t}\r\n\r\n\t/**\r\n\t* Tryes to assigns a value to the instance stored in this.instance\r\n\t* @method assignValue\r\n\t*/\r\n\tInspector.assignValue = function(value)\r\n\t{\r\n\t\tvar instance = this.instance;\r\n\t\tvar current_value = instance[ this.name ];\r\n\r\n\t\tif(current_value == null || value == null || this.options.type == \"enum\")\r\n\t\t\tinstance[this.name] = value;\r\n\t\telse if(typeof(current_value) == \"number\")\r\n\t\t\tinstance[this.name] = parseFloat(value);\r\n\t\telse if(typeof(current_value) == \"string\")\r\n\t\t\tinstance[this.name] = value;\r\n\t\telse if( value && value.length && current_value && current_value.length && \r\n\t\t\t( !Object.getOwnPropertyDescriptor( instance, this.name ) || !Object.getOwnPropertyDescriptor( instance, this.name ).set ) &&  //no setters\r\n\t\t\t( !Object.getOwnPropertyDescriptor( instance.__proto__, this.name ) || !Object.getOwnPropertyDescriptor( instance.__proto__, this.name ).set ) ) \r\n\t\t{\r\n\t\t\tfor(var i = 0; i < value.length; ++i)\r\n\t\t\t\tcurrent_value[i] = value[i];\r\n\t\t}\r\n\t\telse\r\n\t\t\tinstance[ this.name ] = value;\r\n\t}\r\n\r\n\t/**\r\n\t* Used by all widgets to create the container of one widget\r\n\t* @method createWidget\r\n\t* @param {string} name the string to show at the left side of the widget, if null this element wont be created and the value part will use the full width\r\n\t* @param {string} content the string with the html of the elements that conform the interactive part of the widget\r\n\t* @param {object} options some generic options that any widget could have:\r\n\t* - widget_name: the name used to store this widget in the widgets_by_name container, if omited the parameter name is used\r\n\t* - width: the width of the widget (if omited it will use the Inspector widgets_width, otherwise 100%\r\n\t* - name_width: the width of the name part of the widget, if not specified it will use Inspector name_width, otherwise css default\r\n\t* - content_width: the width of the widget content area\r\n\t* - pre_title: string to append to the left side of the name, this is helpful if you want to add icons with behaviour when clicked\r\n\t* - title: string to replace the name, sometimes you want to supply a different name than the one you want to show (this is helpful to retrieve values from an inspector)\r\n\t*/\r\n\tInspector.prototype.createWidget = function( name, content, options ) \r\n\t{\r\n\t\toptions = options || {};\r\n\t\tcontent = (content === undefined || content === null) ? \"\" : content;\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"widget \" + (options.className || \"\");\r\n\t\telement.inspector = this;\r\n\t\telement.options = options;\r\n\t\telement.name = name;\r\n\t\t\r\n\t\tthis.row_number += this.widgets_per_row;\r\n\t\tif(this.row_number % 2 == 0)\r\n\t\t\telement.className += \" even\";\r\n\r\n\t\tvar width = options.width || this.widgets_width;\r\n\t\tif( width )\r\n\t\t{\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS( width );\r\n\t\t\tif(!element.style.width)\r\n\t\t\t\telement.style.width = \"calc(\" + LiteGUI.sizeToCSS( width ) + \")\";\r\n\t\t\telement.style.minWidth = \"auto\";\r\n\t\t}\r\n\t\tvar height = options.height || this.height;\r\n\t\tif( height )\r\n\t\t{\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( height );\r\n\t\t\tif(!element.style.height)\r\n\t\t\t\telement.style.height = \"calc(\" + LiteGUI.sizeToCSS( height ) + \")\";\r\n\t\t\telement.style.minHeight = \"auto\";\r\n\t\t}\r\n\r\n\t\t//store widgets \r\n\t\tthis.widgets.push( element );\r\n\t\tif(options.widget_name || name)\r\n\t\t\tthis.widgets_by_name[ options.widget_name || name ] = element;\r\n\r\n\t\tif(this.widgets_per_row != 1)\r\n\t\t{\r\n\t\t\tif(!options.width)\r\n\t\t\t\telement.style.width = (100 / this.widgets_per_row).toFixed(2) + \"%\";\r\n\t\t\telement.style.display = \"inline-block\";\r\n\t\t}\r\n\r\n\t\tvar namewidth = \"\";\r\n\t\tvar contentwidth = \"\";\r\n\t\tif( (name !== undefined && name !== null) && (this.name_width || options.name_width) && !this.one_line)\r\n\t\t{\r\n\t\t\tvar w = LiteGUI.sizeToCSS( options.name_width || this.name_width );\r\n\t\t\tnamewidth = \"style='width: calc(\" + w + \" - 0px); width: -webkit-calc(\" + w + \" - 0px); width: -moz-calc(\" + w + \" - 0px); '\"; //hack \r\n\t\t\tcontentwidth = \"style='width: calc( 100% - \" + w + \"); width: -webkit-calc(100% - \" + w + \"); width: -moz-calc( 100% - \" + w + \"); '\";\r\n\t\t}\r\n\r\n\t\tif(options.name_width)\r\n\t\t\tnamewidth = \"style='width: \"+ LiteGUI.sizeToCSS(options.name_width)+\" '\";\r\n\t\tif(options.content_width)\r\n\t\t\tcontentwidth = \"style='width: \"+ LiteGUI.sizeToCSS(options.content_width)+\" '\";\r\n\r\n\t\tvar code = \"\";\r\n\t\tvar pretitle = \"\";\r\n\t\tvar filling = this.one_line ? \"\" : \"<span class='filling'></span>\";\r\n\r\n\t\tif(options.pretitle)\r\n\t\t\tpretitle = options.pretitle;\r\n\r\n\t\tvar content_class = \"wcontent \";\r\n\t\tvar title = name;\r\n\t\tif(options.title)\r\n\t\t\ttitle = options.title;\r\n\t\tif( name === null || name === undefined )\r\n\t\t\tcontent_class += \" full\";\r\n\t\telse if(name === \"\") //three equals because 0 == \"\" \r\n\t\t\tcode += \"<span class='wname' title='\"+title+\"' \"+namewidth+\">\"+ pretitle +\"</span>\";\r\n\t\telse\r\n\t\t\tcode += \"<span class='wname' title='\"+title+\"' \"+namewidth+\">\"+ pretitle + name + filling + \"</span>\";\r\n\r\n\t\tif( content.constructor === String || content.constructor === Number || content.constructor === Boolean )\r\n\t\t\telement.innerHTML = code + \"<span class='info_content \"+content_class+\"' \"+contentwidth+\">\"+content+\"</span>\";\r\n\t\telse\r\n\t\t{\r\n\t\t\telement.innerHTML = code + \"<span class='info_content \"+content_class+\"' \"+contentwidth+\"></span>\";\r\n\t\t\tvar content_element = element.querySelector(\"span.info_content\");\r\n\t\t\tif(content_element)\r\n\t\t\t\tcontent_element.appendChild( content );\r\n\t\t}\r\n\r\n\t\telement.content = element.querySelector(\"span.info_content\");\r\n\t\telement.remove = function() { \r\n\t\t\tif( this.parentNode ) \r\n\t\t\t\tthis.parentNode.removeChild( this );\r\n\t\t};\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//calls callback, triggers wchange, calls onchange in Inspector\r\n\tInspector.onWidgetChange = function( element, name, value, options, expand_value, event )\r\n\t{\r\n\t\tvar section = element.section; //this.current_section\r\n\r\n\t\tif(!options.skip_wchange)\r\n\t\t{\r\n\t\t\tif(section)\r\n\t\t\t\tLiteGUI.trigger( section, \"wbeforechange\", value );\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", value );\r\n\t\t}\r\n\r\n\t\t//assign and launch callbacks\r\n\t\tthis.values[ name ] = value;\r\n\t\tvar r = undefined;\r\n\t\tif(options.callback)\r\n\t\t{\r\n\t\t\tif(expand_value)\r\n\t\t\t\tr = options.callback.apply( element, value );\r\n\t\t\telse\r\n\t\t\t\tr = options.callback.call( element, value, event );\r\n\t\t}\r\n\r\n\t\tif(!options.skip_wchange)\r\n\t\t{\r\n\t\t\tif(section)\r\n\t\t\t\tLiteGUI.trigger( section, \"wchange\", value, element );\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", value, element );\r\n\t\t}\r\n\r\n\t\tif(this.onchange) \r\n\t\t\tthis.onchange(name, value, element);\r\n\t\treturn r;\r\n\t}\r\n\r\n\t//must be lowercase\r\n\tInspector.widget_constructors = {\r\n\t\t\"null\": 'addNull', //use for special cases\r\n\t\ttitle: 'addTitle',\r\n\t\tinfo: 'addInfo',\r\n\t\t\"default\": 'addDefault', //it guesses\r\n\t\tnumber: 'addNumber',\r\n\t\tslider: 'addSlider',\r\n\t\tstring: 'addString',\r\n\t\ttext: 'addString',\r\n\t\ttextarea: 'addTextarea',\r\n\t\tcolor: 'addColor',\r\n\t\t\"boolean\": 'addCheckbox', \r\n\t\tcheckbox: 'addCheckbox',\r\n\t\ticon: 'addIcon',\r\n\t\tvec2: 'addVector2',\r\n\t\tvector2: 'addVector2',\r\n\t\tvec3: 'addVector3',\r\n\t\tvector3: 'addVector3',\r\n\t\tvec4: 'addVector4',\r\n\t\tvector4: 'addVector4',\r\n\t\t\"enum\": 'addCombo',\r\n\t\tdropdown: 'addCombo',\r\n\t\tcombo: 'addCombo',\r\n\t\tbutton: 'addButton',\r\n\t\tbuttons: 'addButtons',\r\n\t\tfile: 'addFile',\r\n\t\tline: 'addLine',\r\n\t\tlist: 'addList',\r\n\t\ttree: 'addTree',\r\n\t\tdatatree: 'addDataTree',\r\n\t\tpad: 'addPad',\r\n\t\tarray: 'addArray',\r\n\t\tseparator: 'addSeparator'\r\n\t};\r\n\r\n\r\n\tInspector.registerWidget = function(name, callback)\r\n\t{\r\n\t\tvar func_name = \"add\" + name.charAt(0).toUpperCase() + name.slice(1);\r\n\t\tInspector.prototype[func_name] = callback;\r\n\t\tInspector.widget_constructors[name] = func_name;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Adds a widgete to the inspector, its a way to provide the widget type from a string\r\n\t* @method add\r\n\t* @param {string} type string specifying the name of the widget to use (check Inspector.widget_constructors for a complete list)\r\n\t* @param {string} name the string to show at the left side of the widget, if null this element wont be created and the value part will use the full width\r\n\t* @param {string} value the value to assign to the widget\r\n\t* @param {object} options: some generic options that any widget could have:\r\n\t* - type: overwrites the type\r\n\t* - callback: function to call when the user interacts with the widget and changes the value\r\n\t* [For a bigger list check createWidget and every widget in particular]\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.add = function( type, name, value, options )\r\n\t{\r\n\t\tif(!type)\r\n\t\t\tthrow(\"Inspector: no type specified\");\r\n\r\n\t\t//type could be an object with every parameter contained inside\r\n\t\tif( arguments.length == 1 && typeof(type) == \"object\" )\r\n\t\t{\r\n\t\t\toptions = type;\r\n\t\t\ttype = options.type;\r\n\t\t\tname = options.name;\r\n\t\t\tvalue = options.value;\r\n\t\t}\r\n\r\n\t\tvar func = LiteGUI.Inspector.widget_constructors[type.toLowerCase()];\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector do not have a widget called\",type);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif( func.constructor === String )\r\n\t\t\tfunc = LiteGUI.Inspector.prototype[func];\r\n\t\tif( !func )\r\n\t\t\treturn;\r\n\t\tif( func.constructor !== Function )\r\n\t\t\treturn;\r\n\r\n\t\tif( options && options.constructor === Function )\r\n\t\t\toptions = { callback: options };\r\n\t\t\r\n\t\treturn func.call( this, name,value, options );\r\n\t}\r\n\r\n\tInspector.prototype.getValue = function(name)\r\n\t{\r\n\t\treturn this.values[name];\r\n\t}\r\n\r\n\r\n\tInspector.prototype.applyOptions = function( element, options )\r\n\t{\r\n\t\tif(!element || !options)\r\n\t\t\treturn;\r\n\r\n\t\tif(options.className)\r\n\t\t\telement.className += \" \" + options.className;\r\n\t\tif(options.id)\r\n\t\t\telement.id = options.id;\r\n\t\tif(options.width)\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Creates a line\r\n\t* @method addSeparator\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addSeparator = function()\r\n\t{\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"separator\";\r\n\t\tthis.append(element);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//used when you want to skip the widget of an object\r\n\tInspector.prototype.addNull = function(name,value, options)\r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//used when you dont know which widget to use\r\n\tInspector.prototype.addDefault = function( name, value, options)\r\n\t{\r\n\t\tif(value === null || value === undefined) //can we guess it from the current value?\r\n\t\t\treturn null;\r\n\r\n\t\tif( value.constructor === Boolean )\r\n\t\t\treturn this.addCheckbox( name, value, options );\r\n\t\telse if( value.constructor === String )\r\n\t\t\treturn this.addString( name, value, options );\r\n\t\telse if( value.constructor === Number )\r\n\t\t\treturn this.addNumber( name, value, options );\r\n\t\telse if( value.length == 4)\r\n\t\t\treturn this.addVector4( name, value, options );\r\n\t\telse if( value.length == 3)\r\n\t\t\treturn this.addVector3( name, value, options );\r\n\t\telse if( value.length == 2)\r\n\t\t\treturn this.addVector2( name, value, options );\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Widget to edit strings\r\n\t* @method addString\r\n\t* @param {string} name \r\n\t* @param {string} value\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - focus: true if you want the cursor to be here\r\n\t* - password: true if you want to hide the string \r\n\t* - immediate: calls the callback once every keystroke\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the widget changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addString = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar inputtype = \"text\";\r\n\t\tif(options.password) \r\n\t\t\tinputtype = \"password\";\r\n\t\tvar focus = options.focus ? \"autofocus\" : \"\";\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full \"+(options.disabled?\"disabled\":\"\")+\"'><input type='\"+inputtype+\"' tabIndex='\"+this.tab_index+\"' \"+focus+\" class='text string' value='\"+value+\"' \"+(options.disabled?\"disabled\":\"\")+\"/></span>\", options);\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\r\n\t\tif(options.placeHolder)\r\n\t\t\tinput.setAttribute(\"placeHolder\",options.placeHolder);\r\n\r\n\t\tif(options.align == \"right\")\r\n\t\t{\r\n\t\t\tinput.style.direction = \"rtl\";\r\n\t\t\t//input.style.textAlign = \"right\";\r\n\t\t}\r\n\r\n\t\tinput.addEventListener( options.immediate ? \"keyup\" : \"change\", function(e) { \r\n\t\t\tvar r = Inspector.onWidgetChange.call(that, element, name, e.target.value, options);\r\n\t\t\tif(r !== undefined)\r\n\t\t\t\tthis.value = r;\r\n\t\t});\r\n\r\n\t\tif(options.callback_enter)\r\n\t\t\tinput.addEventListener( \"keydown\" , function(e) { \r\n\t\t\t\tif(e.keyCode == 13)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar r = Inspector.onWidgetChange.call(that, element, name, e.target.value, options);\r\n\t\t\t\t\toptions.callback_enter();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis.tab_index += 1;\r\n\r\n\t\telement.setIcon = function(img)\r\n\t\t{\r\n\t\t\tif(!img)\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"\";\r\n\t\t\t\tinput.style.paddingLeft = \"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"transparent url('\"+img+\"') no-repeat left 4px center\";\r\n\t\t\t\tinput.style.paddingLeft = \"1.7em\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.icon)\r\n\t\t\telement.setIcon( options.icon );\r\n\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined )\r\n\t\t\t\treturn;\r\n\t\t\tif(v === input.value)\r\n\t\t\t\treturn;\r\n\t\t\tinput.value = v; \r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger(input, \"change\" );\r\n\t\t};\r\n\t\telement.getValue = function() { return input.value; };\r\n\t\telement.focus = function() { this.querySelector(\"input\").focus(); };\r\n\t\telement.disable = function() { input.disabled = true; };\r\n\t\telement.enable = function() { input.disabled = false; };\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit strings, but it adds a button behind (useful to search values somewhere in case the user do not remember the name)\r\n\t* @method addStringButton\r\n\t* @param {string} name \r\n\t* @param {string} value the string to show\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - disabled: shows the widget disabled\r\n\t* - button: string to show inside the button, default is \"...\"\r\n\t* - callback: function to call when the string is edited\r\n\t* - callback_button: function to call when the button is pressed\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addStringButton = function( name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tif(value === undefined)\r\n\t\t\tvalue = \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget( name, \"<span class='inputfield button'><input type='text' tabIndex='\"+this.tab_index+\"' class='text string' value='' \"+(options.disabled?\"disabled\":\"\")+\"/></span><button class='micro'>\"+(options.button || \"...\")+\"</button>\", options);\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\t\tinput.value = value;\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\t\t\tvar r = Inspector.onWidgetChange.call(that,element,name,e.target.value, options);\r\n\t\t\tif(r !== undefined)\r\n\t\t\t\tthis.value = r;\r\n\t\t});\r\n\r\n\t\tif( options.disabled )\r\n\t\t\tinput.setAttribute(\"disabled\",\"disabled\");\r\n\r\n\t\telement.setIcon = function(img)\r\n\t\t{\r\n\t\t\tif(!img)\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"\";\r\n\t\t\t\tinput.style.paddingLeft = \"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"transparent url('\"+img+\"') no-repeat left 4px center\";\r\n\t\t\t\tinput.style.paddingLeft = \"1.7em\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.icon)\r\n\t\t\telement.setIcon( options.icon );\r\n\r\n\t\tvar button = element.querySelector(\".wcontent button\");\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tif(options.callback_button)\r\n\t\t\t\toptions.callback_button.call( element, input.value, e );\r\n\t\t});\r\n\r\n\t\tif(options.button_width)\r\n\t\t{\r\n\t\t\tbutton.style.width = LiteGUI.sizeToCSS( options.button_width );\r\n\t\t\tvar inputfield = element.querySelector(\".inputfield\");\r\n\t\t\tinputfield.style.width = \"calc( 100% - \" + button.style.width + \" - 6px)\";\r\n\t\t}\r\n\r\n\r\n\t\tthis.tab_index += 1;\r\n\t\tthis.append(element,options);\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tinput.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger(input, \"change\" );\r\n\t\t};\r\n\t\telement.disable = function() { input.disabled = true; button.disabled = true; };\r\n\t\telement.enable = function() { input.disabled = false; button.disabled = false; };\r\n\t\telement.getValue = function() { return input.value; };\r\n\t\telement.focus = function() { LiteGUI.focus(input); };\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit strings with multiline support\r\n\t* @method addTextarea\r\n\t* @param {string} name \r\n\t* @param {string} value\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - focus: true if you want the cursor to be here\r\n\t* - password: true if you want to hide the string \r\n\t* - immediate: calls the callback once every keystroke\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the widget changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addTextarea = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield textarea \"+(options.disabled?\"disabled\":\"\")+\"'><textarea tabIndex='\"+this.tab_index+\"' \"+(options.disabled?\"disabled\":\"\")+\"></textarea></span>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar textarea = element.querySelector(\".wcontent textarea\");\r\n\t\ttextarea.value = value;\r\n\t\ttextarea.addEventListener( options.immediate ? \"keyup\" : \"change\", function(e) { \r\n\t\t\tInspector.onWidgetChange.call(that,element,name,e.target.value, options, false, e);\r\n\t\t});\r\n\t\tif(options.callback_keydown)\r\n\t\t\ttextarea.addEventListener( \"keydown\", options.callback_keydown );\r\n\r\n\t\tif(options.height)\r\n\t\t\ttextarea.style.height = \"calc( \" + LiteGUI.sizeToCSS( options.height ) + \" - 5px )\";\r\n\t\t\t//textarea.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tthis.append(element,options);\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tif(v == textarea.value)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\ttextarea.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger( textarea,\"change\" );\r\n\t\t};\r\n\t\telement.getValue = function(v) { \r\n\t\t\treturn textarea.value;\r\n\t\t}\r\n\t\telement.focus = function() { LiteGUI.focus(textarea); };\r\n\t\telement.disable = function() { textarea.disabled = true;};\r\n\t\telement.enable = function() { textarea.disabled = false;};\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addNumber\r\n\t* @param {string} name \r\n\t* @param {number} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addNumber = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || 0;\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\t\tthis.append(element,options);\r\n\r\n\t\toptions.extraclass = \"full\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\t//options.dragger_class = \"full\";\r\n\t\toptions.full = true;\r\n\t\toptions.precision = options.precision !== undefined ? options.precision : 2;\r\n\t\toptions.step = options.step === undefined ? (options.precision == 0 ? 1 : 0.1) : options.step;\r\n\r\n\t\tthis.tab_index++;\r\n\t\t\r\n\t\tvar dragger = null;\r\n\t\t\r\n\t\tdragger = new LiteGUI.Dragger(value, options);\r\n\t\tdragger.root.style.width = \"calc( 100% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger.root );\r\n\t\tdragger.root.addEventListener(\"start_dragging\", inner_before_change.bind(options) );\r\n\t\telement.dragger = dragger;\r\n\r\n\t\tif( options.disabled )\r\n\t\t\tdragger.input.setAttribute(\"disabled\",\"disabled\");\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) \r\n\t\t\t\tthis.callback_before.call(element);\r\n\t\t}\r\n\r\n\t\tvar input = element.querySelector(\"input\");\r\n\t\t\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", e.target.value );\r\n\r\n\t\t\tthat.values[name] = e.target.value;\r\n\t\t\t//Inspector.onWidgetChange.call(that,this,name,ret, options);\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar ret = options.callback.call( element, parseFloat( e.target.value) ); \r\n\t\t\t\tif( typeof(ret) == \"number\")\r\n\t\t\t\t\tthis.value = ret;\r\n\t\t\t}\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", e.target.value );\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,e.target.value,element);\r\n\t\t});\r\n\r\n\t\telement.setValue = function( v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tv = parseFloat(v);\r\n\t\t\tif(options.precision)\r\n\t\t\t\tv = v.toFixed( options.precision );\r\n\t\t\tv += (options.units || \"\");\r\n\t\t\tif(input.value == v)\r\n\t\t\t\treturn;\r\n\t\t\tinput.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger( input,\"change\" );\r\n\t\t};\r\n\r\n\t\telement.setRange = function(min,max) { dragger.setRange(min,max); }\r\n\t\telement.getValue = function() { return parseFloat( input.value ); };\r\n\t\telement.focus = function() { LiteGUI.focus(input); };\r\n\t\telement.disable = function() { input.disabled = true;};\r\n\t\telement.enable = function() { input.disabled = false;};\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector2\r\n\t* @param {string} name \r\n\t* @param {vec2} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector2 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step ||0.1;\r\n\t\t//options.dragger_class = \"medium\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar wcontent = element.querySelector(\".wcontent\");\r\n\r\n\t\tvar dragger1 = new LiteGUI.Dragger(value[0], options);\r\n\t\tdragger1.root.style.marginLeft = 0;\r\n\t\tdragger1.root.style.width = \"calc( 50% - 1px )\";\r\n\t\twcontent.appendChild( dragger1.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger2 = new LiteGUI.Dragger(value[1], options);\r\n\t\tdragger2.root.style.width = \"calc( 50% - 1px )\";\r\n\t\twcontent.appendChild( dragger2.root );\r\n\t\telement.draggers = [dragger1,dragger2];\r\n\r\n\t\tLiteGUI.bind( dragger1.root ,\"start_dragging\", inner_before_change.bind(options) );\r\n\t\tLiteGUI.bind( dragger2.root, \"start_dragging\", inner_before_change.bind(options) );\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) this.callback_before(e);\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener( \"change\" , function(e) { \r\n\r\n\t\t\t//gather all three parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\t\r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 2)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", [r] );\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tif(dragger1.getValue() != v[0])\r\n\t\t\t\tdragger1.setValue(v[0],true);\r\n\t\t\tif(dragger2.getValue() != v[1])\r\n\t\t\t\tdragger2.setValue(v[1],skip_event); //last one triggers the event\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { dragger1.setRange(min,max); dragger2.setRange(min,max); }\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector3\r\n\t* @param {string} name \r\n\t* @param {vec3} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector3 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step || 0.1;\r\n\t\t//options.dragger_class = \"mini\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger1 = new LiteGUI.Dragger(value[0], options );\r\n\t\tdragger1.root.style.marginLeft = 0;\r\n\t\tdragger1.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger1.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger2 = new LiteGUI.Dragger(value[1], options );\r\n\t\tdragger2.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger2.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger3 = new LiteGUI.Dragger(value[2], options );\r\n\t\tdragger3.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger3.root );\r\n\t\telement.draggers = [dragger1,dragger2,dragger3];\r\n\r\n\t\tdragger1.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\t\tdragger2.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\t\tdragger3.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) this.callback_before();\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener(\"change\", function(e) { \r\n\t\t\t//gather all three parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element,r ); \r\n\t\t\t\t\r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 3)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event ) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tdragger1.setValue(v[0],true);\r\n\t\t\tdragger2.setValue(v[1],true);\r\n\t\t\tdragger3.setValue(v[2],skip_event); //last triggers\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { dragger1.setRange(min,max); dragger2.setRange(min,max); dragger3.setRange(min,max); }\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector4\r\n\t* @param {string} name \r\n\t* @param {vec4} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector4 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget( name,\"\", options );\r\n\r\n\t\toptions.step = options.step || 0.1;\r\n\t\t//options.dragger_class = \"mini\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar draggers = element.draggers = [];\r\n\r\n\t\tfor(var i = 0; i < 4; i++)\r\n\t\t{\r\n\t\t\tvar dragger = new LiteGUI.Dragger(value[i], options );\r\n\t\t\tdragger.root.style.marginLeft = 0;\r\n\t\t\tdragger.root.style.width = \"calc( 25% - 1px )\";\r\n\t\t\telement.querySelector(\".wcontent\").appendChild( dragger.root );\r\n\t\t\toptions.tab_index = this.tab_index;\r\n\t\t\tthis.tab_index++;\r\n\t\t\tdragger.root.addEventListener(\"start_dragging\", inner_before_change.bind(options) );\r\n\t\t\tdraggers.push(dragger);\r\n\t\t}\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before)\r\n\t\t\t\tthis.callback_before();\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener(\"change\", function(e) { \r\n\t\t\t//gather all parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 4)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event ) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tfor(var i = 0; i < draggers.length; i++)\r\n\t\t\t\tdraggers[i].setValue(v[i],skip_event);\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { for(var i in draggers) { draggers[i].setRange(min,max); } }\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers using a rectangular pad where you can drag horizontaly and verticaly a handler\r\n\t* @method addPad\r\n\t* @param {string} name \r\n\t* @param {vec2} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - minx: minimum x value accepted\r\n\t* - miny: minimum y value accepted\r\n\t* - max: maximum value accepted\r\n\t* - maxx: maximum x value accepted\r\n\t* - maxy: maximum y value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* - background: url of image to use as background (it will be streched)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addPad = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step ||0.1;\r\n\t\t//options.dragger_class = \"medium\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar minx = options.minx || options.min || 0;\r\n\t\tvar miny = options.miny || options.min || 0;\r\n\t\tvar maxx = options.maxx || options.max || 1;\r\n\t\tvar maxy = options.maxy || options.max || 1;\r\n\r\n\t\tvar wcontent = element.querySelector(\".wcontent\");\r\n\r\n\t\tvar pad = document.createElement(\"div\");\r\n\t\tpad.className = \"litepad\";\r\n\t\twcontent.appendChild( pad );\r\n\t\tpad.style.width = \"100%\";\r\n\t\tpad.style.height = \"100px\";\r\n\t\tif (options.background)\r\n\t\t{\r\n\t\t\tpad.style.backgroundImage = \"url('\" + options.background + \"')\";\r\n\t\t\tpad.style.backgroundSize = \"100%\";\r\n\t\t\tpad.style.backgroundRepeat = \"no-repeat\";\r\n\t\t}\r\n\r\n\t\tvar handler = document.createElement(\"div\");\r\n\t\thandler.className = \"litepad-handler\";\r\n\t\tpad.appendChild( handler );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragging = false;\r\n\r\n\t\tpad._onMouseEvent = function(e)\r\n\t\t{\r\n\t\t\tvar b = pad.getBoundingClientRect();\r\n\t\t\te.mousex = e.pageX - b.left;\r\n\t\t\te.mousey = e.pageY - b.top;\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.addEventListener(\"mousemove\", pad._onMouseEvent );\r\n\t\t\t\tdocument.body.addEventListener(\"mouseup\", pad._onMouseEvent );\r\n\t\t\t\tdragging = true;\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mousemove\")\r\n\t\t\t{\r\n\t\t\t\tvar x = e.mousex / (b.width);\r\n\t\t\t\tvar y = e.mousey / (b.height);\r\n\r\n\t\t\t\tx = x * (maxx - minx) + minx;\r\n\t\t\t\ty = y * (maxy - miny) + minx;\r\n\r\n\t\t\t\tvar r = [x,y];\r\n\r\n\t\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\t\telement.setValue(r);\r\n\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\t\tif( new_val && new_val.length >= 2)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\t\telement.setValue( new_val );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\t\tif(that.onchange)\r\n\t\t\t\t\tthat.onchange(name,r,element);\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mouseup\")\r\n\t\t\t{\r\n\t\t\t\tdragging = false;\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", pad._onMouseEvent );\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", pad._onMouseEvent );\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tpad.addEventListener(\"mousedown\", pad._onMouseEvent );\r\n\r\n\t\telement.setValue = function(v,skip_event)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar b = pad.getBoundingClientRect();\r\n\t\t\tvar x = (v[0] - minx) / (maxx - minx);\r\n\t\t\tvar y = (v[1] - miny) / (maxy - miny);\r\n\t\t\tx = Math.max( 0, Math.min( x, 1 ) ); //clamp\r\n\t\t\ty = Math.max( 0, Math.min( y, 1 ) );\r\n\r\n\t\t\t//handler.style.left = (x * (b.width - 10)) + \"px\";\r\n\t\t\t//handler.style.top = (y * (b.height - 10)) + \"px\";\r\n\t\t\tvar w = ((b.width - 10) / b.width) * 100;\r\n\t\t\tvar h = ((b.height - 10) / b.height) * 100;\r\n\t\t\thandler.style.left = (x * w).toFixed(1) + \"%\";\r\n\t\t\thandler.style.top = (y * h).toFixed(1) + \"%\";\r\n\r\n\t\t\t//if(!skip_event)\r\n\t\t\t//\tLiteGUI.trigger(this,\"change\");\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue( value );\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to show plain information in HTML (not interactive)\r\n\t* @method addInfo\r\n\t* @param {string} name \r\n\t* @param {string} value HTML code\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - className: to specify a classname of the content\r\n\t* - height: to specify a height\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addInfo = function( name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = (value === undefined || value === null) ? \"\" : value;\r\n\t\tvar element = null;\r\n\t\tif(name != null)\r\n\t\t\telement = this.createWidget( name, value, options);\r\n\t\telse\r\n\t\t{\r\n\t\t\telement = document.createElement(\"div\");\r\n\t\t\tif(options.className)\r\n\t\t\t\telement.className = options.className;\r\n\t\t\tif(value.nodeName !== undefined)\r\n\t\t\t{\r\n\t\t\t\telement.innerHTML = \"<span class='winfo'></span>\";\r\n\t\t\t\telement.childNodes[0].appendChild( value );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\telement.innerHTML = \"<span class='winfo'>\"+value+\"</span>\";\r\n\t\t}\r\n\r\n\t\tvar info = element.querySelector(\".winfo\") || element.querySelector(\".wcontent\");\r\n\r\n\t\tif(options.callback)\r\n\t\t\telement.addEventListener(\"click\",options.callback.bind(element));\r\n\r\n\t\telement.setValue = function(v) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tif(info)\r\n\t\t\t\tinfo.innerHTML = v;\r\n\t\t};\r\n\r\n\t\tvar content = element.querySelector(\"span.info_content\");\r\n\t\tif(!content)\r\n\t\t\tcontent = element.querySelector(\".winfo\");\r\n\r\n\t\tif(options.width)\r\n\t\t{\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS(options.width);\r\n\t\t\telement.style.display = \"inline-block\";\r\n\t\t\tif(!name)\r\n\t\t\t\tinfo.style.margin = \"2px\";\r\n\t\t}\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\tcontent.style.height = LiteGUI.sizeToCSS(options.height);\r\n\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\telement.scrollToBottom = function(){\r\n\t\t\tcontent.scrollTop = content.offsetTop;\r\n\t\t}\r\n\r\n\t\telement.add = function(e)\r\n\t\t{\r\n\t\t\tcontent.appendChild(e);\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a number using a slider\r\n\t* @method addSlider\r\n\t* @param {string} name \r\n\t* @param {number} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - min: min value\r\n\t* - max: max value\r\n\t* - step: increments when dragging\r\n\t* - callback: function to call once the value changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addSlider = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tif(options.min === undefined)\r\n\t\t\toptions.min = 0;\r\n\r\n\t\tif(options.max === undefined)\r\n\t\t\toptions.max = 1;\r\n\r\n\t\tif(options.step === undefined)\r\n\t\t\toptions.step = 0.01;\r\n\r\n\t\tvar that = this;\r\n\t\tif(value === undefined || value === null)\r\n\t\t\tvalue = 0;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full'>\\\r\n\t\t\t\t\t<input tabIndex='\"+this.tab_index+\"' type='text' class='slider-text fixed liteslider-value' value='' /><span class='slider-container'></span></span>\", options);\r\n\r\n\t\tvar slider_container = element.querySelector(\".slider-container\");\r\n\r\n\t\tvar slider = new LiteGUI.Slider(value,options);\r\n\t\tslider_container.appendChild(slider.root);\r\n\r\n\t\t//Text change -> update slider\r\n\t\tvar skip_change = false; //used to avoid recursive loops\r\n\t\tvar text_input = element.querySelector(\".slider-text\");\r\n\t\ttext_input.value = value;\r\n\t\ttext_input.addEventListener('change', function(e) {\r\n\t\t\tif(skip_change)\r\n\t\t\t\treturn;\r\n\t\t\tvar v = parseFloat( this.value );\r\n\t\t\tvalue = v;\r\n\t\t\tslider.setValue( v );\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,v, options );\r\n\t\t});\r\n\r\n\t\t//Slider change -> update Text\r\n\t\tslider.onChange = function(value) {\r\n\t\t\ttext_input.value = value;\r\n\t\t\tInspector.onWidgetChange.call( that, element, name, value, options);\r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function(v,skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tslider.setValue(v,skip_event);\r\n\t\t};\r\n\t\telement.getValue = function() { \r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a boolean value using a checkbox\r\n\t* @method addCheckbox\r\n\t* @param {string} name \r\n\t* @param {boolean} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - label: text to show, otherwise it shows on/off\r\n\t* - label_on: text to show when on\r\n\t* - label_off: text to show when off\r\n\t* - callback: function to call once the value changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addCheckbox = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tvalue = !!value;\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar label_on = options.label_on || options.label || \"on\";\r\n\t\tvar label_off = options.label_off || options.label || \"off\";\r\n\t\tvar label = (value ? label_on : label_off);\r\n\t\t\r\n\t\t//var element = this.createWidget(name,\"<span class='inputfield'><span class='fixed flag'>\"+(value ? \"on\" : \"off\")+\"</span><span tabIndex='\"+this.tab_index+\"'class='checkbox \"+(value?\"on\":\"\")+\"'></span></span>\", options );\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield'><span tabIndex='\"+this.tab_index+\"' class='fixed flag checkbox \"+(value ? \"on\" : \"off\")+\"'>\"+label+\"</span></span>\", options );\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar checkbox = element.querySelector(\".wcontent .checkbox\");\r\n\t\tcheckbox.addEventListener(\"keypress\", function(e) { \r\n\t\t\tif(e.keyCode == 32)\r\n\t\t\t\tLiteGUI.trigger(this, \"click\");\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"click\", function() {\r\n\t\t\tvalue = !value;\r\n\t\t\telement.querySelector(\"span.flag\").innerHTML = value ? label_on : label_off;\r\n\t\t\tif(value)\r\n\t\t\t\tcheckbox.classList.add(\"on\");\r\n\t\t\telse\r\n\t\t\t\tcheckbox.classList.remove(\"on\");\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,value, options);\r\n\t\t});\r\n\t\t\r\n\t\telement.getValue = function() { \r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v,skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tif(\tthat.values[name] != v && !skip_event)\r\n\t\t\t\tLiteGUI.trigger( checkbox, \"click\" ); \r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a set of boolean values using checkboxes\r\n\t* @method addFlags\r\n\t* @param {Object} value object that contains all the booleans \r\n\t* @param {Object} optional object with extra flags to insert\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addFlags = function(flags, force_flags, options)\r\n\t{\r\n\t\tvar f = {};\r\n\t\tfor(var i in flags)\r\n\t\t\tf[i] = flags[i];\r\n\t\tif(force_flags)\r\n\t\t\tfor(var i in force_flags)\r\n\t\t\t\tif( typeof(f[i]) == \"undefined\" )\r\n\t\t\t\t\tf[i] = ( force_flags[i] ? true : false );\r\n\r\n\t\tfor(var i in f)\r\n\t\t{\r\n\t\t\tvar flag_options = {};\r\n\t\t\tfor(var j in options)\r\n\t\t\t\tflag_options[j] = options[j];\r\n\r\n\t\t\tflag_options.callback = (function(j) {\r\n\t\t\t\t\treturn function(v) { \r\n\t\t\t\t\t\tflags[j] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t})(i);\r\n\r\n\t\t\tthis.addCheckbox(i, f[i], flag_options );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit an enumeration using a combobox\r\n\t* @method addCombo\r\n\t* @param {string} name \r\n\t* @param {*} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - values: a list with all the possible values, it could be an array, or an object, in case of an object, the key is the string to show, the value is the value to assign\r\n\t* - disabled: true to disable\r\n\t* - callback: function to call once an items is clicked\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addCombo = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\t//value = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full inputcombo \"+(options.disabled?\"disabled\":\"\")+\"'></span>\", options);\r\n\t\telement.options = options;\r\n\r\n\t\tvar values = options.values || [];\r\n\t\tif(values.constructor === Function)\r\n\t\t\tvalues = options.values();\r\n\r\n\t\t/*\r\n\t\tif(!values)\r\n\t\t\tvalues = [];\r\n\r\n\t\tvar index = 0;\r\n\t\tfor(var i in values)\r\n\t\t{\r\n\t\t\tvar item_value = values[i];\r\n\t\t\tvar item_index = values.constructor === Array ? index : i;\r\n\t\t\tvar item_title = values.constructor === Array ? item_value : i;\r\n\t\t\tif(item_value && item_value.title)\r\n\t\t\t\titem_title = item_value.title;\r\n\t\t\tcode += \"<option value='\"+item_index+\"' \"+( item_value == value ? \" selected\":\"\")+\" data-index='\"+item_index+\"'>\" + item_title + \"</option>\";\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\tvar code = \"<select tabIndex='\"+this.tab_index+\"' \"+(options.disabled?\"disabled\":\"\")+\" class='\"+(options.disabled?\"disabled\":\"\")+\"'></select>\";\r\n\t\telement.querySelector(\"span.inputcombo\").innerHTML = code;\r\n\t\tsetValues(values);\r\n\t\t\r\n\t\tvar stop_event = false; //used internally\r\n\r\n\t\tvar select = element.querySelector(\".wcontent select\");\r\n\t\tselect.addEventListener(\"change\", function(e) { \r\n\t\t\tvar index = e.target.value;\r\n\t\t\tvalue = values[index];\r\n\t\t\tif(stop_event)\r\n\t\t\t\treturn;\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,value, options );\r\n\t\t});\r\n\r\n\t\telement.getValue = function()\r\n\t\t{\r\n\t\t\treturn value;\t\t\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tvar select = element.querySelector(\"select\");\r\n\t\t\tvar items = select.querySelectorAll(\"option\");\r\n\t\t\tvar index =  -1;\r\n\t\t\tif(values.constructor === Array)\r\n\t\t\t\tindex = values.indexOf(v);\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//search the element index in the values\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor(var i in values)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(values[j] == v)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tindex = j;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(index == -1)\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\tstop_event = skip_event;\r\n\r\n\t\t\tfor(var i in items)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(!item || !item.dataset) //weird bug\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tif( parseFloat(item.dataset[\"index\"]) == index )\r\n\t\t\t\t{\r\n\t\t\t\t\titem.setAttribute(\"selected\", true);\r\n\t\t\t\t\tselect.selectedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\titem.removeAttribute(\"selected\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop_event = false;\r\n\t\t};\r\n\r\n\t\tfunction setValues(v, selected){\r\n\t\t\tif(!v)\r\n\t\t\t\tv = [];\r\n\t\t\tvalues = v;\r\n\t\t\tif(selected)\r\n\t\t\t\tvalue = selected;\r\n\t\t\tvar code = \"\";\r\n\t\t\tvar index = 0;\r\n\t\t\tfor(var i in values)\r\n\t\t\t{\r\n\t\t\t\tvar item_value = values[i];\r\n\t\t\t\tvar item_index = values.constructor === Array ? index : i;\r\n\t\t\t\tvar item_title = values.constructor === Array ? item_value : i;\r\n\t\t\t\tif(item_value && item_value.title)\r\n\t\t\t\t\titem_title = item_value.title;\r\n\t\t\t\tcode += \"<option value='\"+item_index+\"' \"+( item_value == value ? \" selected\":\"\")+\" data-index='\"+item_index+\"'>\" + item_title + \"</option>\";\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telement.querySelector(\"select\").innerHTML = code;\r\n\t\t}\r\n\r\n\t\telement.setOptionValues = setValues;\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addComboButtons = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"\";\r\n\t\tif(options.values)\r\n\t\t\tfor(var i in options.values)\r\n\t\t\t\tcode += \"<button class='wcombobutton \"+(value == options.values[i] ? \"selected\":\"\")+\"' data-name='options.values[i]'>\" + options.values[i] + \"</button>\";\r\n\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tvar buttons = element.querySelectorAll( \".wcontent button\" );\r\n\t\tLiteGUI.bind( buttons, \"click\", function(e) { \r\n\r\n\t\t\tvar buttonname = e.target.innerHTML;\r\n\t\t\tthat.values[name] = buttonname;\r\n\r\n\t\t\tvar elements = element.querySelectorAll(\".selected\");\r\n\t\t\tfor(var i = 0; i < elements.length; ++i)\r\n\t\t\t\telements[i].classList.remove(\"selected\");\r\n\t\t\tthis.classList.add(\"selected\");\r\n\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,buttonname, options );\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addTags = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || [];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"<select>\";\r\n\t\tif(options.values)\r\n\t\t\tfor(var i in options.values)\r\n\t\t\t\tcode += \"<option>\" + options.values[i] + \"</option>\";\r\n\r\n\t\tcode += \"</select><div class='wtagscontainer inputfield'></div>\";\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full'>\"+code+\"</span>\", options);\r\n\t\telement.tags = {};\r\n\r\n\t\t//add default tags\r\n\t\tfor(var i in options.value)\r\n\t\t\tinner_addtag(options.value[i]);\r\n\r\n\t\t//combo change\r\n\t\tvar select_element = element.querySelector(\".wcontent select\");\r\n\t\tselect_element.addEventListener(\"change\", function(e) { \r\n\t\t\tinner_addtag(e.target.value);\r\n\t\t});\r\n\r\n\t\tfunction inner_addtag(tagname)\r\n\t\t{\r\n\t\t\tif( element.tags[tagname] )\r\n\t\t\t\treturn; //repeated tags no\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", element.tags);\r\n\r\n\t\t\telement.tags[tagname] = true;\r\n\r\n\t\t\tvar tag = document.createElement(\"div\");\r\n\t\t\ttag.data = tagname;\r\n\t\t\ttag.className = \"wtag\";\r\n\t\t\ttag.innerHTML = tagname+\"<span class='close'>X</span>\";\r\n\r\n\t\t\ttag.querySelector(\".close\").addEventListener(\"click\", function(e) {\r\n\t\t\t\tvar tagname = this.parentNode.data;\r\n\t\t\t\tdelete element.tags[tagname];\r\n\t\t\t\tLiteGUI.remove(this.parentNode);\r\n\t\t\t\tLiteGUI.trigger( element, \"wremoved\", tagname );\r\n\t\t\t\tInspector.onWidgetChange.call(that,element,name,element.tags, options);\r\n\t\t\t});\r\n\r\n\t\t\telement.querySelector(\".wtagscontainer\").appendChild(tag);\r\n\r\n\t\t\tthat.values[name] = element.tags;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element, element.tags ); \r\n\t\t\tLiteGUI.trigger( element, \"wchange\", element.tags);\r\n\t\t\tLiteGUI.trigger( element, \"wadded\", tagname);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name, element.tags, element);\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to select from a list of items\r\n\t* @method addList\r\n\t* @param {string} name \r\n\t* @param {*} value [Array or Object]\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - multiselection: allow multiple selection\r\n\t* - callback: function to call once an items is clicked\r\n\t* - selected: the item selected\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addList = function(name, values, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar that = this;\r\n\t\t\r\n\t\tvar list_height = \"\";\r\n\t\tif(options.height)\r\n\t\t\tlist_height = \"style='height: 100%; overflow: auto;'\";\r\n\t\t\t//height = \"style='height: \"+options.height+\"px; overflow: auto;'\";\r\n\r\n\t\tvar code = \"<ul class='lite-list' \"+list_height+\" tabIndex='\"+this.tab_index+\"'><ul>\";\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full \"+(options.disabled?\"disabled\":\"\")+\"' style='height: 100%;'>\"+code+\"</span>\", options);\r\n\r\n\t\tvar infocontent = element.querySelector(\".info_content\");\r\n\t\tinfocontent.style.height = \"100%\";\r\n\r\n\t\tvar list_element = element.querySelector(\".lite-list\");\r\n\r\n\t\tvar inputfield = element.querySelector(\".inputfield\");\r\n\t\tinputfield.style.height = \"100%\";\r\n\t\tinputfield.style.paddingBottom = \"0.2em\";\r\n\r\n\t\tvar ul_elements = element.querySelectorAll(\"ul\");\r\n\t\tfor(var i = 0; i < ul_elements.length; ++i)\r\n\t\t{\r\n\t\t\tvar ul = ul_elements[i];\r\n\t\t\tul.addEventListener(\"focus\",function() { \r\n\t\t\t\tdocument.addEventListener(\"keydown\",inner_key,true);\r\n\t\t\t});\r\n\t\t\tul.addEventListener(\"blur\",function() {\r\n\t\t\t\tdocument.removeEventListener(\"keydown\",inner_key,true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction inner_key(e)\r\n\t\t{\r\n\t\t\tvar selected = element.querySelector(\"li.selected\");\r\n\t\t\tif( !selected )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.keyCode == 13) //intro\r\n\t\t\t{\r\n\t\t\t\tif(!selected)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar value = values[ selected.dataset[\"pos\"] ];\r\n\t\t\t\tif(options.callback_dblclick)\r\n\t\t\t\t\toptions.callback_dblclick.call(that,value);\r\n\t\t\t}\r\n\t\t\telse if(e.keyCode == 40) //arrow down\r\n\t\t\t{\r\n\t\t\t\tvar next = selected.nextSibling;\r\n\t\t\t\tif(next)\r\n\t\t\t\t\tLiteGUI.trigger(next, \"click\");\r\n\t\t\t\tif(selected.scrollIntoViewIfNeeded)\r\n\t\t\t\t\tselected.scrollIntoViewIfNeeded({block: \"end\", behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t\telse if(e.keyCode == 38) //arrow up\r\n\t\t\t{\r\n\t\t\t\tvar prev = selected.previousSibling;\r\n\t\t\t\tif(prev)\r\n\t\t\t\t\tLiteGUI.trigger(prev,\"click\");\r\n\t\t\t\tif(selected.scrollIntoViewIfNeeded)\r\n\t\t\t\t\tselected.scrollIntoViewIfNeeded({block: \"end\", behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction inner_item_click(e) { \r\n\r\n\t\t\tif(options.multiselection)\r\n\t\t\t\tthis.classList.toggle(\"selected\");\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//batch action, jquery...\r\n\t\t\t\tvar lis = element.querySelectorAll(\"li\");\r\n\t\t\t\tfor(var i = 0; i < lis.length; ++i)\r\n\t\t\t\t\tlis[i].classList.remove(\"selected\");\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\t}\r\n\r\n\t\t\tvar value = values[ this.dataset[\"pos\"] ];\r\n\t\t\t//if(options.callback) options.callback.call(element,value); //done in onWidgetChange\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,value, options);\r\n\t\t\tLiteGUI.trigger(element, \"wadded\", value );\r\n\t\t}\r\n\r\n\t\tfunction inner_item_dblclick(e) { \r\n\t\t\tvar value = values[ this.dataset[\"pos\"] ];\r\n\t\t\tif(options.callback_dblclick)\r\n\t\t\t\toptions.callback_dblclick.call(that,value);\r\n\t\t}\r\n\r\n\t\telement.updateItems = function( new_values, item_selected )\r\n\t\t{\r\n\t\t\titem_selected = item_selected || options.selected;\r\n\t\t\tvar code = \"\";\r\n\t\t\tvalues = new_values;\r\n\t\t\tvar ul = this.querySelector(\"ul\");\r\n\t\t\tul.innerHTML = \"\";\r\n\r\n\t\t\tif(values)\r\n\t\t\t\tfor(var i in values)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar\tvalue = values[i];\r\n\t\t\t\t\tvar li_element = insert_item( value, item_selected, i );\r\n\t\t\t\t\tul.appendChild( li_element );\r\n\t\t\t\t}\r\n\r\n\t\t\t//ul.innerHTML = code;\r\n\t\t\tLiteGUI.bind( ul.querySelectorAll(\"li\"), \"click\", inner_item_click );\r\n\t\t}\r\n\r\n\t\tfunction insert_item( value, selected, index )\r\n\t\t{\r\n\t\t\tvar item_index = index; //to reference it\r\n\t\t\tvar item_title = index; //to show in the list\r\n\t\t\tselected = !!selected;\r\n\r\n\t\t\tvar item_style = null;\r\n\t\t\tvar icon = \"\";\r\n\t\t\tif( value != null )\r\n\t\t\t{\r\n\t\t\t\tif( value.constructor === String || value.constructor === Number || value.constructor === Boolean )\r\n\t\t\t\t{\r\n\t\t\t\t\titem_title = String(value);\r\n\t\t\t\t}\r\n\t\t\t\telse if( value )\r\n\t\t\t\t{\r\n\t\t\t\t\titem_title = value.content || value.title || value.name || index;\r\n\t\t\t\t\titem_style = value.style;\r\n\t\t\t\t\tif(value.icon)\r\n\t\t\t\t\t\ticon = \"<img src='\"+value.icon+\"' class='icon' /> \";\r\n\t\t\t\t\tif(value.selected)\r\n\t\t\t\t\t\tselected = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item_name = item_title;\r\n\t\t\titem_name = item_name.replace(/<(?:.|\\n)*?>/gm, ''); //remove html tags that could break the html\r\n\r\n\t\t\tvar li_element = document.createElement(\"li\");\r\n\t\t\tli_element.classList.add( 'item-' + LiteGUI.safeName(item_index) );\r\n\t\t\tif( selected )\r\n\t\t\t\tli_element.classList.add( 'selected' );\r\n\t\t\tli_element.dataset[\"name\"] = item_name;\r\n\t\t\tli_element.dataset[\"pos\"] = item_index;\r\n\t\t\tli_element.value = value;\r\n\t\t\tif(item_style)\r\n\t\t\t\tli_element.setAttribute(\"style\", item_style );\r\n\t\t\tli_element.innerHTML = icon + item_title;\r\n\t\t\tli_element.addEventListener( \"click\", inner_item_click );\r\n\t\t\tif(options.callback_dblclick)\r\n\t\t\t\tli_element.addEventListener( \"dblclick\", inner_item_dblclick );\r\n\t\t\treturn li_element;\r\n\t\t}\r\n\r\n\t\telement.addItem = function( value, selected, name )\r\n\t\t{\r\n\t\t\tif(values.constructor !== Array)\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"cannot add item to list of object, only array\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvalues.push( value );\r\n\t\t\tvar ul = this.querySelector(\"ul\");\r\n\t\t\tvar li_element = insert_item( value, selected);\r\n\t\t\tul.appendChild( li_element );\r\n\t\t}\r\n\r\n\t\telement.removeItem = function(name)\r\n\t\t{\r\n\t\t\tvar items = element.querySelectorAll(\".wcontent li\");\r\n\t\t\tfor(var i = 0; i < items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif(items[i].dataset[\"name\"] == name)\r\n\t\t\t\t\tLiteGUI.remove( items[i] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.updateItems( values, options.selected );\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.getSelected = function()\r\n\t\t{\r\n\t\t\tvar r = [];\r\n\t\t\tvar selected = this.querySelectorAll(\"ul li.selected\");\r\n\t\t\tfor(var i = 0; i < selected.length; ++i)\r\n\t\t\t\tr.push( selected[i].dataset[\"name\"] );\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\telement.getByIndex = function(num)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\treturn items[num];\r\n\t\t}\r\n\t\telement.getIndex = element.getByIndex; //legacy\r\n\r\n\t\telement.selectIndex = function( num, add_to_selection )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(i == num)\r\n\t\t\t\t\titem.classList.add(\"selected\");\r\n\t\t\t\telse if(!add_to_selection)\r\n\t\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t\treturn items[num];\r\n\t\t}\r\n\r\n\t\telement.deselectIndex = function( num )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar item = items[num];\r\n\t\t\tif(item)\r\n\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\telement.scrollToIndex = function(num)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar item = items[num];\r\n\t\t\tif(!item)\r\n\t\t\t\treturn;\r\n\t\t\tthis.scrollTop = item.offsetTop;\r\n\t\t}\r\n\r\n\t\telement.selectAll = function()\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif( item.classList.contains(\"selected\") )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.deselectAll = function()\r\n\t\t{\r\n\t\t\t//there has to be a more efficient way to do this\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif( !item.classList.contains(\"selected\") )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tthis.updateItems(v);\r\n\t\t}\r\n\r\n\t\telement.getNumberOfItems = function()\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\treturn items.length;\r\n\t\t}\r\n\r\n\t\telement.filter = function( callback, case_sensitive )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar use_string = false;\r\n\r\n\t\t\tif( callback && callback.constructor === String )\r\n\t\t\t{\r\n\t\t\t\tvar needle = callback;\r\n\t\t\t\tif( case_sensitive )\r\n\t\t\t\t\tneedle.toLowerCase();\r\n\t\t\t\tuse_string = true;\r\n\t\t\t\tcallback = function(v){ return ( (case_sensitive ? v : v.toLowerCase()).indexOf(needle) != -1); };\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(!callback)\r\n\t\t\t\t{\r\n\t\t\t\t\titem.style.display = \"\";\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = item.value;\r\n\t\t\t\tif(use_string && value != null && value.constructor !== String)\r\n\t\t\t\t\tvalue = item.innerHTML;\r\n\r\n\t\t\t\tif( !callback( value, item, item.classList.contains(\"selected\") ) )\r\n\t\t\t\t\titem.style.display = \"none\";\r\n\t\t\t\telse\r\n\t\t\t\t\titem.style.display = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.selectByFilter = function(callback)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tvar r = callback( item.value, item, item.classList.contains(\"selected\") );\r\n\t\t\t\tif( r === true )\r\n\t\t\t\t\titem.classList.add(\"selected\");\r\n\t\t\t\telse if( r === false )\r\n\t\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.height) \r\n\t\t\telement.scrollTop = 0;\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addButton = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = options.button_text || value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar button_classname = \"\";\r\n\t\tif(name === null)\r\n\t\t\tbutton_classname = \"single\";\r\n\t\tif(options.micro)\r\n\t\t\tbutton_classname += \" micro\";\r\n\r\n\t\tvar attrs = \"\";\r\n\t\tif(options.disabled)\r\n\t\t\tattrs = \"disabled='disabled'\";\r\n\r\n\t\tvar title = options.title || \"\";\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<button tabIndex='\"+ this.tab_index + \"' \"+attrs+\"></button>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar button = element.querySelector(\"button\");\r\n\t\tbutton.setAttribute(\"title\",title);\r\n\t\tbutton.className = \"litebutton \" + button_classname;\r\n\t\tbutton.innerHTML = value;\r\n\t\tbutton.addEventListener(\"click\", function(event) {\r\n\t\t\tInspector.onWidgetChange.call( that, element, name, this.innerHTML, options, false, event);\r\n\t\t\tLiteGUI.trigger( button, \"wclick\", value );\r\n\t\t});\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.wclick = function(callback) { \r\n\t\t\tif(!options.disabled)\r\n\t\t\t\tLiteGUI.bind(this, \"wclick\", callback ); \r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tbutton.innerHTML = v;\r\n\t\t}\r\n\r\n\t\telement.disable = function() { button.disabled = true; };\r\n\t\telement.enable = function() { button.disabled = false; };\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addButtons = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\t//var w = \"calc(\"+(100/value.length).toFixed(3)+\"% - \"+Math.floor(16/value.length)+\"px);\";\r\n\t\tvar w = \"calc( \" + (100/value.length).toFixed(3) + \"% - 4px )\";\r\n\t\tvar style = \"width:\"+w+\"; width: -moz-\"+w+\"; width: -webkit-\"+w+\"; margin: 2px;\";\r\n\t\tif(value && typeof(value) == \"object\")\r\n\t\t{\r\n\t\t\tfor(var i in value)\r\n\t\t\t{\r\n\t\t\t\tvar title = \"\";\r\n\t\t\t\tif( options.title && options.title.constructor === Array)\r\n\t\t\t\t\ttitle = options.title[i] || \"\";\r\n\t\t\t\tcode += \"<button class='litebutton' title='\"+title+\"' tabIndex='\"+this.tab_index+\"' style='\"+style+\"'>\"+value[i]+\"</button>\";\r\n\t\t\t\tthis.tab_index++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tvar buttons = element.querySelectorAll(\"button\");\r\n\t\tfor(var i = 0; i < buttons.length; ++i)\r\n\t\t{\r\n\t\t\tvar button = buttons[i];\r\n\t\t\tbutton.addEventListener(\"click\", function(evt) {\r\n\t\t\t\tInspector.onWidgetChange.call(that, element, name, this.innerHTML, options, null, evt);\r\n\t\t\t\tLiteGUI.trigger( element, \"wclick\",this.innerHTML );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addIcon = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar img_url = options.image;\r\n\t\tvar width = options.width || options.size || 20;\r\n\t\tvar height = options.height || options.size || 20;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='icon' \"+(options.title ? \"title='\"+options.title+\"'\" : \"\" )+\" tabIndex='\"+ this.tab_index + \"'></span>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar content = element.querySelector(\"span.wcontent\");\r\n\t\tvar icon = element.querySelector(\"span.icon\");\r\n\r\n\t\tvar x = options.x || 0;\r\n\t\tif(options.index)\r\n\t\t\tx = options.index * -width;\r\n\t\tvar y = value ? height : 0;\r\n\r\n\t\telement.style.minWidth = element.style.width = (width) + \"px\";\r\n\t\telement.style.margin = \"0 2px\"; element.style.padding = \"0\";\r\n\t\tcontent.style.margin = \"0\"; content.style.padding = \"0\";\r\n\r\n\t\ticon.style.display = \"inline-block\"\r\n\t\ticon.style.cursor = \"pointer\";\r\n\t\ticon.style.width = width + \"px\";\r\n\t\ticon.style.height = height + \"px\";\r\n\t\ticon.style.backgroundImage = \"url('\"+img_url+\"')\";\r\n\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\r\n\t\ticon.addEventListener(\"mousedown\", function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvalue = !value;\r\n\t\t\tvar ret = Inspector.onWidgetChange.call(that,element,name, value, options);\r\n\t\t\tLiteGUI.trigger( element, \"wclick\", value);\r\n\r\n\t\t\tif(ret !== undefined)\r\n\t\t\t\tvalue = ret;\r\n\r\n\t\t\tvar y = value ? height : 0;\r\n\t\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\r\n\t\t\tif(options.toggle === false) //blink\r\n\t\t\t\tsetTimeout( function(){ icon.style.backgroundPosition = x + \"px 0px\"; value = false; },200 );\r\n\r\n\t\t});\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function(v, skip_event ) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tvar y = value ? height : 0;\r\n\t\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tInspector.onWidgetChange.call(that,element,name, value, options);\r\n\t\t};\r\n\t\telement.getValue = function() { return value; };\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addColor = function( name, value, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || [0.0,0.0,0.0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"<input tabIndex='\"+this.tab_index+\"' id='colorpicker-\"+name+\"' class='color' value='\"+(value[0]+\",\"+value[1]+\",\"+value[2])+\"' \"+(options.disabled?\"disabled\":\"\")+\"/>\";\r\n\t\tthis.tab_index++;\r\n\r\n\t\tif(options.show_rgb)\r\n\t\t\tcode += \"<span class='rgb-color'>\"+Inspector.parseColor(value)+\"</span>\";\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tthis.append(element,options); //add now or jscolor dont work\r\n\r\n\t\t//create jsColor \r\n\t\tvar input_element = element.querySelector(\"input.color\");\r\n\t\tvar myColor = null;\r\n\r\n\t\tif( window.jscolor )\r\n\t\t{\r\n\r\n\t\t\t//SHOWS CONTEXTUAL MENU\r\n\t\t\t//block focusing\r\n\t\t\t/*\r\n\t\t\tinput_element.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\t\tif(e.button != 2) //right button\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t//create the context menu\r\n\t\t\t\tvar contextmenu = new LiteGUI.ContextMenu( [\"Copy in HEX\",\"Copy in RGBA\"], { event: e, callback: inner_action });\r\n\t\t\t\te.preventDefault(); \r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tinput_element.addEventListener(\"focus\", block_focus , true);\r\n\t\t\t\tsetTimeout(function(){ input_element.removeEventListener(\"focus\", block_focus , true);},1000);\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},true);\t\r\n\r\n\t\t\tfunction block_focus(e)\r\n\t\t\t{\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfunction inner_action(v)\r\n\t\t\t{\r\n\t\t\t\tif(v == \"Copy in HEX\")\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.toClipboard( \"in HEX\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.toClipboard( \"in RGB\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tmyColor = new jscolor.color(input_element);\r\n\t\t\tmyColor.pickerFaceColor = \"#333\";\r\n\t\t\tmyColor.pickerBorderColor = \"black\";\r\n\t\t\tmyColor.pickerInsetColor = \"#222\";\r\n\t\t\tmyColor.rgb_intensity = 1.0;\r\n\r\n\t\t\tif(options.disabled) \r\n\t\t\t\tmyColor.pickerOnfocus = false; //this doesnt work\r\n\r\n\t\t\tif( value.constructor !== String && value.length && value.length > 2)\r\n\t\t\t{\r\n\t\t\t\tvar intensity = 1.0;\r\n\t\t\t\tmyColor.fromRGB(value[0]*intensity,value[1]*intensity,value[2]*intensity);\r\n\t\t\t\tmyColor.rgb_intensity = intensity;\r\n\t\t\t}\r\n\r\n\t\t\t//update values in rgb format\r\n\t\t\tinput_element.addEventListener(\"change\", function(e) { \r\n\t\t\t\tvar rgbelement = element.querySelector(\".rgb-color\");\r\n\t\t\t\tif(rgbelement)\r\n\t\t\t\t\trgbelement.innerHTML = LiteGUI.Inspector.parseColor(myColor.rgb);\r\n\t\t\t});\r\n\r\n\t\t\tmyColor.onImmediateChange = function() \r\n\t\t\t{\r\n\t\t\t\tvar v = [ myColor.rgb[0] * myColor.rgb_intensity, myColor.rgb[1] * myColor.rgb_intensity, myColor.rgb[2] * myColor.rgb_intensity ];\r\n\t\t\t\t//Inspector.onWidgetChange.call(that,element,name,v, options);\r\n\t\t\t\tvar event_data = [v.concat(), myColor.toString()];\r\n\t\t\t\tLiteGUI.trigger( element, \"wbeforechange\", event_data );\r\n\t\t\t\tthat.values[name] = v;\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback.call( element, v.concat(), \"#\" + myColor.toString(), myColor );\r\n\t\t\t\tLiteGUI.trigger( element, \"wchange\", event_data );\r\n\t\t\t\tif(that.onchange) that.onchange(name, v.concat(), element);\r\n\t\t\t}\r\n\r\n\t\t\t//alpha dragger\r\n\t\t\toptions.step = options.step || 0.01;\r\n\t\t\toptions.dragger_class = \"nano\";\r\n\r\n\t\t\tvar dragger = new LiteGUI.Dragger(1, options);\r\n\t\t\telement.querySelector('.wcontent').appendChild(dragger.root);\r\n\t\t\tdragger.input.addEventListener(\"change\", function(e)\r\n\t\t\t{\r\n\t\t\t\tvar v = parseFloat( this.value );\r\n\t\t\t\tmyColor.rgb_intensity = v;\r\n\t\t\t\tif (myColor.onImmediateChange)\r\n\t\t\t\t\tmyColor.onImmediateChange();\r\n\t\t\t});\r\n\r\n\t\t\telement.setValue = function(value,skip_event) { \r\n\t\t\t\tmyColor.fromRGB(value[0],value[1],value[2]);\r\n\t\t\t\tif(!skip_event)\r\n\t\t\t\t\tLiteGUI.trigger( dragger.input, \"change\" ); \r\n\t\t\t};\r\n\r\n\t\t\telement.getValue = function() { \r\n\t\t\t\treturn value;\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tinput_element.addEventListener(\"change\", function(e) { \r\n\t\t\t\tvar rgbelement = element.querySelector(\".rgb-color\");\r\n\t\t\t\tif(rgbelement)\r\n\t\t\t\t\trgbelement.innerHTML = LiteGUI.Inspector.parseColor(myColor.rgb);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addFile = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'></span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='\"+value+\"'/>\", options);\r\n\t\tvar content = element.querySelector(\".wcontent\");\r\n\t\tcontent.style.position = \"relative\";\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\t\tvar filename_element = element.querySelector(\".wcontent .filename\");\r\n\t\tif(value)\r\n\t\t\tfilename_element.innerText = value.name;\r\n\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\t\t\tif(!e.target.files.length)\r\n\t\t\t{\r\n\t\t\t\t//nothing\r\n\t\t\t\tfilename_element.innerText = \"\";\r\n\t\t\t\tInspector.onWidgetChange.call(that, element, name, null, options);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar url = null;\r\n\t\t\t//var data = { url: url, filename: e.target.value, file: e.target.files[0], files: e.target.files };\r\n\t\t\tvar file = e.target.files[0];\r\n\t\t\tfile.files = e.target.files;\r\n\t\t\tif( options.generate_url )\r\n\t\t\t\tfile.url = URL.createObjectURL( e.target.files[0] );\r\n\t\t\tfilename_element.innerText = file.name;\r\n\r\n\t\t\tif(options.read_file)\r\n\t\t\t{\r\n\t\t\t\t var reader = new FileReader();\r\n\t\t\t\t reader.onload = function(e2){\r\n\t\t\t\t\tfile.data = e2.target.result;\r\n\t\t\t\t\tInspector.onWidgetChange.call( that, element, name, file, options );\r\n\t\t\t\t }\r\n\t\t\t\t if( options.read_file == \"binary\" )\r\n\t\t\t\t\t reader.readAsArrayBuffer( file );\r\n\t\t\t\t else if( options.read_file == \"data_url\" )\r\n\t\t\t\t\t reader.readAsDataURL( file );\r\n\t\t\t\t else\r\n\t\t\t\t\t reader.readAsText( file );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tInspector.onWidgetChange.call( that, element, name, file, options );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addLine = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<span class='line-editor'></span>\", options);\r\n\t\telement.style.width = \"100%\";\r\n\r\n\t\tvar line_editor = new LiteGUI.LineEditor(value,options);\r\n\t\telement.querySelector(\"span.line-editor\").appendChild(line_editor);\r\n\r\n\t\tLiteGUI.bind( line_editor, \"change\", function(e) { \r\n\t\t\tLiteGUI.trigger(element, \"wbeforechange\",[e.target.value]);\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element,e.target.value );\r\n\t\t\tLiteGUI.trigger(element, \"wchange\",[e.target.value]);\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,e.target.value, options);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addTree = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = this.createWidget(name,\"<div class='wtree inputfield full'></div>\", options);\r\n\t\t\r\n\t\tvar tree_root = element.querySelector(\".wtree\");\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\ttree_root.style.height = typeof(options.height) == \"number\" ? options.height + \"px\" : options.height;\r\n\t\t\ttree_root.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\tvar current = value;\r\n\r\n\t\tvar tree = element.tree = new LiteGUI.Tree( value, options.tree_options );\r\n\t\ttree.onItemSelected = function(node, data) {\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element, node, data);\r\n\t\t};\r\n\r\n\t\ttree_root.appendChild(tree.root);\r\n\r\n\t\telement.setValue = function(v) { \r\n\t\t\ttree.updateTree(v);\r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addDataTree = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = this.createWidget(name,\"<div class='wtree'></div>\", options);\r\n\t\t\r\n\t\tvar node = element.querySelector(\".wtree\");\r\n\t\tvar current = value;\r\n\r\n\t\tinner_recursive(node,value);\r\n\r\n\t\tfunction inner_recursive( root_node, value)\r\n\t\t{\r\n\t\t\tfor(var i in value)\r\n\t\t\t{\r\n\t\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\t\te.className = \"treenode\";\r\n\t\t\t\tif( typeof( value[i] ) == \"object\" )\r\n\t\t\t\t{\r\n\t\t\t\t\te.innerHTML = \"<span class='itemname'>\" + i + \"</span><span class='itemcontent'></span>\";\r\n\t\t\t\t\tinner_recursive( e.querySelector(\".itemcontent\"), value[i] );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\te.innerHTML = \"<span class='itemname'>\" + i + \"</span><span class='itemvalue'>\" + value[i] + \"</span>\";\r\n\t\t\t\troot_node.appendChild(e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit an array of values of a certain type\r\n\t* @method addArray\r\n\t* @param {string} name \r\n\t* @param {Array} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - data_type: the type of every value inside the array\r\n\t* - data_options: options for the widgets of every item in the array\r\n\t* - max_items: max number of items to show from the array, default is 100\r\n\t* - callback: function to call once an items inside the array has changed\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addArray = function( name, value, options )\r\n\t{\r\n\t\tvar that = this;\r\n\r\n\t\tif( !value || value.constructor !== Array )\r\n\t\t{\r\n\t\t\tconsole.error(\"Inspector: Array widget value must be a valid array\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar type = options.data_type || \"string\";\r\n\t\tvar max_items = options.max_items || 100;\r\n\t\tvar container = null;\r\n\r\n\t\t//length widget\r\n\t\tthis.widgets_per_row = 3;\r\n\t\tthis.addInfo(name,null,{ name_width: \"100%\", width: \"100% - 160px\"});\r\n\t\tvar length_widget = this.addString( \"length\", value.length || \"0\", { width: 100, callback: function(v){ \r\n\t\t\tvar v = parseInt(v);\r\n\t\t\tif(value < 0)\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue.length = v;\r\n\t\t\trefresh.call( container );\r\n\t\t}});\r\n\r\n\t\tthis.addButtons( null,[\"+\",\"-\"], { width: 60, callback: function(v){\r\n\t\t\tif(v == \"+\")\r\n\t\t\t\tvalue.length = value.length + 1;\r\n\t\t\telse if(value.length > 0)\r\n\t\t\t\tvalue.length = value.length - 1;\r\n\t\t\tlength_widget.setValue( value.length );\r\n\t\t\trefresh.call( container );\r\n\t\t}});\r\n\r\n\t\tthis.widgets_per_row = 1;\r\n\t\tcontainer = this.addContainer( name, options );\r\n\t\tcontainer.value = value;\r\n\r\n\t\trefresh.call( container );\r\n\r\n\t\tfunction refresh()\r\n\t\t{\r\n\t\t\tvar container = this;\r\n\t\t\tvar value = container.value;\r\n\t\t\tvar size = Math.min( value.length, max_items );\r\n\r\n\t\t\tthat.widgets_per_row += 1;\r\n\t\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\t\tfor(var i = 0; i < size; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar v = null;\r\n\t\t\t\tif (value[i] !== undefined)\r\n\t\t\t\t\tv = value[i];\r\n\t\t\t\tvar row = document.createElement(\"div\");\r\n\t\t\t\trow.className = \"array-row\";\r\n\t\t\t\trow.innerHTML = \"<span class='row-index'>\" + i + \"</span><span class='row-cell'></span><button style='width: 30px;' class='litebutton single row-trash'><img src='imgs/mini-icon-trash.png'/></button>\";\r\n\t\t\t\tcontainer.appendChild(row);\r\n\r\n\t\t\t\tvar widget_row_container = row.querySelector('.row-cell');\r\n\t\t\t\t\r\n\t\t\t\tvar item_options = { widget_parent: widget_row_container, callback: assign.bind({value: this.value, index: i}) };\r\n\t\t\t\tif(options.data_options)\r\n\t\t\t\t\tfor(var j in options.data_options)\r\n\t\t\t\t\t\titem_options[j] = options.data_options[j];\r\n\t\t\t\tvar w = that.add( type, null, v, item_options );\r\n\r\n\t\t\t\t/*\r\n\t\t\t\tthat.addButton(null,\"<img src='imgs/mini-icon-trash.png'/>\", {  widget_parent: container, index: i, width: 30, callback: function(){\r\n\t\t\t\t\tif( value && value.length > (this.options.index-1))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue.splice( this.options.index,1 );\r\n\t\t\t\t\t\tlength_widget.setValue( value.length, true );\r\n\t\t\t\t\t\trefresh.call( container );\r\n\t\t\t\t\t}\r\n\t\t\t\t}});\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tthat.widgets_per_row -= 1;\r\n\t\t}\r\n\r\n\t\tfunction assign(v)\r\n\t\t{\r\n\t\t\tthis.value[ this.index ] = v;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( container, this.value, this.index );\r\n\t\t\t//todo: trigger change\r\n\t\t}\r\n\r\n\t\tcontainer.setValue = function(v)\r\n\t\t{\r\n\t\t\tthis.value = v;\r\n\t\t\trefresh.call(container);\r\n\t\t}\r\n\r\n\t\tcontainer.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.value = v;\r\n\t\t}\r\n\r\n\t\t//this.append(element,options);\r\n\t\treturn container;\r\n\t}\r\n\r\n\t//***** containers ********/\r\n\t//creates an empty container but it is not set active\r\n\tInspector.prototype.addContainer = function(name, options)\r\n\t{\r\n\t\tif(name && name.constructor !== String)\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector.addContainer first parameter must be a string with the name\");\r\n\t\tvar element = this.startContainer(null,options);\r\n\t\tthis.endContainer();\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//creates an empty container and sets its as active\r\n\tInspector.prototype.startContainer = function(name, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wcontainer\";\r\n\t\tthis.applyOptions(element, options);\r\n\t\tthis.row_number = 0;\r\n\r\n\t\tthis.append( element );\r\n\t\tthis.pushContainer( element );\r\n\r\n\t\tif(options.widgets_per_row)\r\n\t\t\tthis.widgets_per_row = options.widgets_per_row;\r\n\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\t\telement.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\telement.refresh = function()\r\n\t\t{\r\n\t\t\tif(element.on_refresh)\r\n\t\t\t\telement.on_refresh.call(this, element);\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.endContainer = function(name, options)\r\n\t{\r\n\t\tthis.popContainer();\r\n\t}\r\n\r\n\t//it is like a group but they cant be nested inside containers\r\n\tInspector.prototype.addSection = function( name, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tvar that = this;\r\n\r\n\t\tif(this.current_section)\r\n\t\t\tthis.current_section.end();\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wsection\";\r\n\t\tif(!name) \r\n\t\t\telement.className += \" notitle\";\r\n\t\tif(options.className)\r\n\t\t\telement.className += \" \" + options.className;\r\n\t\tif(options.collapsed)\r\n\t\t\telement.className += \" collapsed\";\r\n\r\n\t\tif(options.id)\r\n\t\t\telement.id = options.id;\r\n\t\tif(options.instance)\r\n\t\t\telement.instance = options.instance;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(name)\r\n\t\t\tcode += \"<div class='wsectiontitle'>\"+(options.no_collapse ? \"\" : \"<span class='switch-section-button'></span>\")+name+\"</div>\";\r\n\t\tcode += \"<div class='wsectioncontent'></div>\";\r\n\t\telement.innerHTML = code;\r\n\r\n\t\t//append to inspector\r\n\t\telement._last_container_stack = this._current_container_stack.concat();\r\n\t\t//this.append( element ); //sections are added to the root, not to the current container\r\n\t\tthis.root.appendChild( element );\r\n\t\tthis.sections.push( element );\r\n\r\n\t\telement.sectiontitle = element.querySelector(\".wsectiontitle\");\r\n\r\n\t\tif(name)\r\n\t\t\telement.sectiontitle.addEventListener(\"click\",function(e) {\r\n\t\t\t\tif(e.target.localName == \"button\") \r\n\t\t\t\t\treturn;\r\n\t\t\t\telement.classList.toggle(\"collapsed\");\r\n\t\t\t\tvar seccont = element.querySelector(\".wsectioncontent\");\r\n\t\t\t\tseccont.style.display = seccont.style.display === \"none\" ? null : \"none\";\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback.call( element, !element.classList.contains(\"collapsed\") );\r\n\t\t\t});\r\n\r\n\t\tif(options.collapsed)\r\n\t\t\telement.querySelector(\".wsectioncontent\").style.display = \"none\";\r\n\r\n\t\tthis.setCurrentSection( element );\r\n\r\n\t\tif(options.widgets_per_row)\r\n\t\t\tthis.widgets_per_row = options.widgets_per_row;\r\n\r\n\t\telement.refresh = function()\r\n\t\t{\r\n\t\t\tif(element.on_refresh)\r\n\t\t\t\telement.on_refresh.call(this, element);\r\n\t\t}\r\n\r\n\t\telement.end = function()\r\n\t\t{\r\n\t\t\tif(that.current_section != this)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthat._current_container_stack = this._last_container_stack;\r\n\t\t\tthat._current_container = null;\r\n\r\n\t\t\tvar content = this.querySelector(\".wsectioncontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\treturn;\r\n\t\t\tif( that.isContainerInStack( content ) )\r\n\t\t\t\tthat.popContainer( content );\r\n\t\t\tthat.current_section = null;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//change current section (allows to add widgets to previous sections)\r\n\tInspector.prototype.setCurrentSection = function( section )\r\n\t{\r\n\t\tif( this.current_section == section )\r\n\t\t\treturn;\r\n\r\n\t\tthis.current_section = section;\r\n\r\n\t\tvar parent = section.parentNode;\r\n\t\tthis.popContainer( parent ); //go back till that container\r\n\r\n\t\tvar content = section.querySelector(\".wsectioncontent\");\r\n\t\tthis.pushContainer( content );\r\n\t}\r\n\r\n\tInspector.prototype.getCurrentSection = function()\r\n\t{\r\n\t\tfor(var i = this._current_container_stack.length - 1; i >= 0; --i)\r\n\t\t{\r\n\t\t\tvar container = this._current_container_stack[i];\r\n\t\t\tif(container.classList.contains(\"wsectioncontent\"))\r\n\t\t\t\treturn container.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tInspector.prototype.endCurrentSection = function()\r\n\t{\r\n\t\tif(this.current_section)\r\n\t\t\tthis.current_section.end();\r\n\t}\r\n\r\n\t//A container of widgets with a title \r\n\tInspector.prototype.beginGroup = function( name, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wgroup\";\r\n\t\tname = name || \"\";\r\n\t\telement.innerHTML = \"<div class='wgroupheader \"+ (options.title ? \"wtitle\" : \"\") +\"'><span class='switch-section-button'></span>\"+name+\"</div>\";\r\n\t\telement.group = true;\r\n\r\n\t\tvar content = document.createElement(\"DIV\");\r\n\t\tcontent.className = \"wgroupcontent\";\r\n\t\tif(options.collapsed)\r\n\t\t\tcontent.style.display = \"none\";\r\n\r\n\t\tif( options.height )\r\n\t\t\tcontent.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tif( options.scrollable )\r\n\t\t\tcontent.style.overflow = \"auto\";\r\n\r\n\t\telement.appendChild( content );\r\n\r\n\t\tvar collapsed = options.collapsed || false;\r\n\t\tvar header = element.querySelector(\".wgroupheader\");\r\n\t\tif(collapsed)\r\n\t\t\theader.classList.add(\"collapsed\");\r\n\t\theader.addEventListener(\"click\", function(e) { \r\n\t\t\tvar style = element.querySelector(\".wgroupcontent\").style;\r\n\t\t\tstyle.display = style.display === \"none\" ? \"\" : \"none\";\r\n\t\t\tcollapsed = !collapsed;\r\n\t\t\tif(collapsed)\r\n\t\t\t\theader.classList.add(\"collapsed\");\r\n\t\t\telse\r\n\t\t\t\theader.classList.remove(\"collapsed\");\r\n\t\t\t//element.querySelector(\".switch-section-button\").innerHTML = (collapsed ? \"+\" : \"-\");\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\r\n\t\tthis.append( element, options );\r\n\t\tthis.pushContainer( content );\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.endGroup = function()\r\n\t{\r\n\t\tdo\r\n\t\t{\r\n\t\t\tthis.popContainer();\r\n\t\t}\r\n\t\twhile( this._current_container && !this._current_container.classList.contains(\"wgroupcontent\") )\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a title bar in the widgets list to help separate widgets\r\n\t* @method addTitle\r\n\t* @param {string} title \r\n\t* @param {Object} options\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addTitle = function(title,options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\tvar code = \"<span class='wtitle'><span class='text'>\"+title+\"</span>\";\r\n\t\tif(options.help)\r\n\t\t{\r\n\t\t\tcode += \"<span class='help'><div class='help-content'>\"+options.help+\"</div></span>\";\r\n\t\t}\r\n\t\tcode += \"</span>\";\r\n\t\telement.innerHTML = code;\r\n\t\telement.setValue = function(v) { \r\n\t\t\tthis.querySelector(\".text\").innerHTML = v;\r\n\t\t};\r\n\t\tthis.row_number = 0;\r\n\t\tthis.append(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\r\n\tInspector.prototype.scrollTo = function( id )\r\n\t{\r\n\t\tvar element = this.root.querySelector(\"#\" + id );\r\n\t\tif(!element)\r\n\t\t\treturn;\r\n\t\tvar top = this.root.offsetTop;\r\n\t\tvar delta = element.offsetTop - top;\r\n\t\tthis.root.parentNode.parentNode.scrollTop = delta;\r\n\t}\r\n\r\n\tInspector.prototype.processOptions = function(options)\r\n\t{\r\n\t\tif(typeof(options) == \"function\")\r\n\t\t\toptions = { callback: options };\r\n\t\treturn options || {};\r\n\t}\r\n\r\n\tInspector.prototype.processElement = function(element, options)\r\n\t{\r\n\t\tif(options.callback_update && element.setValue)\r\n\t\t{\r\n\t\t\telement.on_update = function(){\r\n\t\t\t\tthis.setValue( options.callback_update.call(this), true );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.prototype.updateWidgets = function()\r\n\t{\r\n\t\tfor(var i = 0; i < this.widgets.length; ++i)\r\n\t\t{\r\n\t\t\tvar widget = this.widgets[i];\r\n\t\t\tif(widget.on_update)\r\n\t\t\t\twidget.on_update( widget );\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.parseColor = function(color)\r\n\t{\r\n\t\treturn \"<span style='color: #FAA'>\" + color[0].toFixed(2) + \"</span>,<span style='color: #AFA'>\" + color[1].toFixed(2) + \"</span>,<span style='color: #AAF'>\" + color[2].toFixed(2) + \"</span>\";\r\n\t}\r\n\r\n\treturn LiteGUI.Inspector = Inspector;\r\n\r\n});\ndefine('skylark-litegui/Menubar',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/************** MENUBAR ************************/\r\n\tfunction Menubar(id, options)\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.menu = [];\r\n\t\tthis.panels = [];\r\n\r\n\t\tthis.root = document.createElement(\"div\");\r\n\t\tthis.root.id = id;\r\n\t\tthis.root.className = \"litemenubar\";\r\n\r\n\t\tthis.content = document.createElement(\"ul\");\r\n\t\tthis.root.appendChild( this.content );\r\n\r\n\t\tthis.is_open = false;\r\n\t\tthis.auto_open = options.auto_open || false;\r\n\t\tthis.sort_entries = options.sort_entries || false;\r\n\t}\r\n\r\n\tMenubar.closing_time = 500;\r\n\r\n\tMenubar.prototype.clear = function()\r\n\t{\r\n\t\tthis.content.innerHTML = \"\";\r\n\t\tthis.menu = [];\r\n\t\tthis.panels = [];\r\n\t}\r\n\r\n\tMenubar.prototype.attachToPanel = function(panel)\r\n\t{\r\n\t\tpanel.content.insertBefore( this.root, panel.content.firstChild );\r\n\t}\r\n\r\n\tMenubar.prototype.add = function( path, data )\r\n\t{\r\n\t\tdata = data || {};\r\n\r\n\t\tif( typeof(data) == \"function\" )\r\n\t\t\tdata = { callback: data };\r\n\r\n\t\tvar prev_length = this.menu.length;\r\n\r\n\t\tvar tokens = path.split(\"/\");\r\n\t\tvar current_token = 0;\r\n\t\tvar current_pos = 0;\r\n\t\tvar menu = this.menu;\r\n\t\tvar last_item = null;\r\n\r\n\t\twhile( menu )\r\n\t\t{\r\n\t\t\tif(current_token > 5)\r\n\t\t\t\tthrow(\"Error: Menubar too deep\");\r\n\t\t\t//token not found in this menu, create it\r\n\t\t\tif( menu.length == current_pos )\r\n\t\t\t{\r\n\t\t\t\tvar v = { parent: last_item, children: [] };\r\n\t\t\t\tlast_item = v;\r\n\t\t\t\tif(current_token == tokens.length - 1)\r\n\t\t\t\t\tv.data = data;\r\n\r\n\t\t\t\tv.disable = function() { if( this.data ) this.data.disabled = true; }\r\n\t\t\t\tv.enable = function() { if( this.data ) delete this.data.disabled; }\r\n\r\n\t\t\t\tv.name = tokens[ current_token ];\r\n\t\t\t\tmenu.push( v );\r\n\t\t\t\tcurrent_token++;\r\n\t\t\t\tif( current_token == tokens.length )\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tv.children = [];\r\n\t\t\t\tmenu = v.children;\r\n\t\t\t\tcurrent_pos = 0;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//token found in this menu, get inside for next token\r\n\t\t\tif( menu[ current_pos ] && tokens[ current_token ] == menu[ current_pos ].name )\r\n\t\t\t{\r\n\t\t\t\tif(current_token < tokens.length - 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tlast_item = menu[ current_pos ];\r\n\t\t\t\t\tmenu = menu[ current_pos ].children;\r\n\t\t\t\t\tcurrent_pos = 0;\r\n\t\t\t\t\tcurrent_token++;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\telse //last token\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.warn(\"Warning: Adding menu that already exists: \" + path );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcurrent_pos++;\r\n\t\t}\r\n\r\n\t\tif(prev_length != this.menu.length)\r\n\t\t\tthis.updateMenu();\r\n\t};\r\n\r\n\tMenubar.prototype.remove = function( path )\r\n\t{\r\n\t\tvar menu = this.findMenu( path );\r\n\t\tif(!menu)\r\n\t\t\treturn;\r\n\t\tif(!menu.parent || !menu.parent.children)\r\n\t\t\treturn console.warn(\"menu without parent?\");\r\n\t\t\r\n\t\tvar index = menu.parent.children.indexOf( menu );\r\n\t\tif(index != -1)\r\n\t\t\tmenu.parent.children.splice( index, 1 );\r\n\t},\r\n\r\n\tMenubar.prototype.separator = function( path, order )\r\n\t{\r\n\t\tvar menu = this.findMenu( path );\r\n\t\tif(!menu)\r\n\t\t\treturn;\r\n\t\tmenu.children.push( {separator: true, order: order || 10 } );\r\n\t}\r\n\r\n\t//returns the menu entry that matches this path\r\n\tMenubar.prototype.findMenu = function( path )\r\n\t{\r\n\t\tvar tokens = path.split(\"/\");\r\n\t\tvar current_token = 0;\r\n\t\tvar current_pos = 0;\r\n\t\tvar menu = this.menu;\r\n\r\n\t\twhile( menu )\r\n\t\t{\r\n\t\t\t//no more tokens, return last found menu\r\n\t\t\tif(current_token == tokens.length)\r\n\t\t\t\treturn menu;\r\n\r\n\t\t\t//this menu doesnt have more entries\r\n\t\t\tif(menu.length <= current_pos)\r\n\t\t\t\treturn null;\r\n\r\n\t\t\tif(tokens[ current_token ] == \"*\")\r\n\t\t\t\treturn menu[ current_pos ].children;\r\n\r\n\t\t\t//token found in this menu, get inside for next token\r\n\t\t\tif( tokens[ current_token ] == menu[ current_pos ].name )\r\n\t\t\t{\r\n\t\t\t\tif(current_token == tokens.length - 1) //last token\r\n\t\t\t\t{\r\n\t\t\t\t\treturn menu[ current_pos ];\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmenu = menu[ current_pos ].children;\r\n\t\t\t\t\tcurrent_pos = 0;\r\n\t\t\t\t\tcurrent_token++;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//check next entry in this menu\r\n\t\t\tcurrent_pos++;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//update top main menu\r\n\tMenubar.prototype.updateMenu = function()\r\n\t{\r\n\t\tvar that = this;\r\n\r\n\t\tthis.content.innerHTML = \"\";\r\n\t\tfor(var i in this.menu)\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"li\");\r\n\t\t\telement.innerHTML = \"<span class='icon'></span><span class='name'>\" + this.menu[i].name + \"</span>\";\r\n\t\t\tthis.content.appendChild(element);\r\n\t\t\telement.data = this.menu[i];\r\n\t\t\tthis.menu[i].element = element;\r\n\r\n\t\t\t/* ON CLICK TOP MAIN MENU ITEM */\r\n\t\t\telement.addEventListener(\"click\", function(e) {\r\n\t\t\t\tvar item = this.data;\r\n\r\n\t\t\t\tif(item.data && item.data.callback && typeof(item.data.callback) == \"function\")\r\n\t\t\t\t\titem.data.callback(item.data);\r\n\r\n\t\t\t\tif(!that.is_open)\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.is_open = true;\r\n\t\t\t\t\tthat.showMenu( item, e, this );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.is_open = false;\r\n\t\t\t\t\tthat.hidePanels();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.addEventListener(\"mouseover\", function(e) {\r\n\t\t\t\tthat.hidePanels();\r\n\t\t\t\tif(that.is_open || that.auto_open)\r\n\t\t\t\t\tthat.showMenu( this.data, e, this );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tMenubar.prototype.hidePanels = function() {\r\n\t\tif(!this.panels.length)\r\n\t\t\treturn;\r\n\r\n\t\tfor(var i in this.panels)\r\n\t\t\tLiteGUI.remove(this.panels[i]);\r\n\t\tthis.panels = [];\r\n\t}\r\n\r\n\t//Create the panel with the drop menu\r\n\tMenubar.prototype.showMenu = function(menu, e, root, is_submenu) {\r\n\r\n\t\tif(!is_submenu)\r\n\t\t\tthis.hidePanels();\r\n\r\n\t\tif(!menu.children || !menu.children.length)\r\n\t\t\treturn;\r\n\r\n\t\tvar that = this;\r\n\t\tif(that.closing_by_leave)\r\n\t\t\tclearInterval(that.closing_by_leave);\r\n\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litemenubar-panel\";\r\n\r\n\t\tvar sorted_entries = [];\r\n\t\tfor(var i in menu.children)\r\n\t\t\tsorted_entries.push(menu.children[i]);\r\n\r\n\t\tif(this.sort_entries)\r\n\t\t\tsorted_entries.sort(function(a,b) {\r\n\t\t\t\tvar a_order = 10;\r\n\t\t\t\tvar b_order = 10;\r\n\t\t\t\tif(a && a.data && a.data.order != null) a_order = a.data.order;\r\n\t\t\t\tif(a && a.separator && a.order != null) a_order = a.order;\r\n\t\t\t\tif(b && b.data && b.data.order != null) b_order = b.data.order;\r\n\t\t\t\tif(b && b.separator && b.order != null) b_order = b.order;\r\n\t\t\t\treturn a_order - b_order;\r\n\t\t\t});\r\n\r\n\t\tfor(var i in sorted_entries)\r\n\t\t{\r\n\t\t\tvar item = document.createElement(\"p\");\r\n\t\t\tvar menu_item = sorted_entries[i];\r\n\r\n\t\t\titem.className = 'litemenu-entry ' + ( item.children ? \" submenu\" : \"\" );\r\n\t\t\tvar has_submenu = menu_item.children && menu_item.children.length;\r\n\r\n\t\t\tif(has_submenu)\r\n\t\t\t\titem.classList.add(\"has_submenu\");\r\n\r\n\t\t\tif(menu_item && menu_item.name)\r\n\t\t\t\titem.innerHTML = \"<span class='icon'></span><span class='name'>\" + menu_item.name + (has_submenu ? \"<span class='more'>+</span>\":\"\") + \"</span>\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\titem.classList.add(\"separator\");\r\n\t\t\t\t//item.innerHTML = \"<span class='separator'></span>\";\r\n\t\t\t}\r\n\r\n\t\t\titem.data = menu_item;\r\n\r\n\t\t\t//check if it has to show the item being 'checked'\r\n\t\t\tif( item.data.data )\r\n\t\t\t{\r\n\t\t\t\tvar data = item.data.data;\r\n\r\n\t\t\t\tvar checked = (data.type == \"checkbox\" && data.instance && data.property && data.instance[ data.property ] == true) || \r\n\t\t\t\t\tdata.checkbox == true ||\r\n\t\t\t\t\t(data.instance && data.property && data.hasOwnProperty(\"value\") && data.instance[data.property] == data.value) ||\r\n\t\t\t\t\t(typeof( data.isChecked ) == \"function\" && data.isChecked.call(data.instance, data) );\r\n\r\n\t\t\t\tif(checked)\r\n\t\t\t\t\titem.className += \" checked\";\r\n\r\n\t\t\t\tif(data.disabled)\r\n\t\t\t\t\titem.className += \" disabled\";\r\n\t\t\t}\r\n\r\n\t\t\t/* ON CLICK SUBMENU ITEM */\r\n\t\t\titem.addEventListener(\"click\",function(){\r\n\t\t\t\tvar item = this.data;\r\n\t\t\t\tif(item.data)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(item.data.disabled)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t//to change variables directly\r\n\t\t\t\t\tif(item.data.instance && item.data.property)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif( item.data.type == \"checkbox\" )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.data.instance[item.data.property] = !item.data.instance[item.data.property];\r\n\t\t\t\t\t\t\tif(\titem.data.instance[item.data.property] )\r\n\t\t\t\t\t\t\t\tthis.classList.add(\"checked\");\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.classList.remove(\"checked\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if( item.data.hasOwnProperty(\"value\") )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.data.instance[item.data.property] = item.data.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//to have a checkbox behaviour\r\n\t\t\t\t\tif(item.data.checkbox != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titem.data.checkbox = !item.data.checkbox;\r\n\t\t\t\t\t\tif(\titem.data.checkbox )\r\n\t\t\t\t\t\t\tthis.classList.add(\"checked\");\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthis.classList.remove(\"checked\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//execute a function\r\n\t\t\t\t\tif(item.data.callback && typeof(item.data.callback) == \"function\")\r\n\t\t\t\t\t\titem.data.callback(item.data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//more menus\r\n\t\t\t\tif(item.children && item.children.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.showMenu( item, e, this, true );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.is_open = false;\r\n\t\t\t\t\tthat.hidePanels();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\titem.addEventListener(\"mouseenter\",function(e){\r\n\t\t\t\t/*\r\n\t\t\t\tif( that.auto_open && this.classList.contains(\"has_submenu\") )\r\n\t\t\t\t\tLiteGUI.trigger( this, \"click\" );\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\r\n\t\t\telement.appendChild( item );\r\n\t\t}\r\n\r\n\t\telement.addEventListener(\"mouseleave\",function(e){\r\n\t\t\r\n\t\t\tif(that.closing_by_leave)\r\n\t\t\t\tclearInterval(that.closing_by_leave);\r\n\r\n\t\t\tthat.closing_by_leave = setTimeout( function() { \r\n\t\t\t\tthat.is_open = false;\r\n\t\t\t\tthat.hidePanels();\r\n\t\t\t},LiteGUI.Menubar.closing_time);\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"mouseenter\",function(e){\r\n\t\t\tif(that.closing_by_leave)\r\n\t\t\t\tclearInterval(that.closing_by_leave);\r\n\t\t\tthat.closing_by_leave = null;\r\n\t\t});\r\n\r\n\t\t//compute X and Y for menu\r\n\t\tvar box = root.getBoundingClientRect();\r\n\t\telement.style.left = box.left + ( is_submenu ? 200 : 0 ) + \"px\";\r\n\t\telement.style.top = box.top + box.height + ( is_submenu ? -20 : 10 ) + \"px\";\r\n\t\t/* animation, not working well, flickers\r\n\t\telement.style.opacity = \"0.1\";\r\n\t\telement.style.transform = \"translate(0,-10px)\";\r\n\t\telement.style.transition = \"all 0.2s\";\r\n\t\tsetTimeout( function(){ \r\n\t\t\telement.style.opacity = \"1\"; \r\n\t\t\telement.style.transform = \"translate(0,0)\";\r\n\t\t},1);\r\n\t\t*/\r\n\r\n\t\tthis.panels.push(element);\r\n\t\tdocument.body.appendChild( element );\r\n\t}\r\n\r\n\treturn LiteGUI.Menubar = Menubar;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Panel',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/****************** PANEL **************/\r\n\tfunction Panel(id, options)\r\n\t{\r\n\t\tthis._ctor(id,options);\r\n\t}\r\n\r\n\tPanel.title_height = \"20px\";\r\n\r\n\tPanel.prototype._ctor = function(id, options)\r\n\t{\r\n\t\tif(!options && id && id.constructor !== String)\r\n\t\t{\r\n\t\t\toptions = id;\r\n\t\t\tid = null;\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.content = options.content || \"\";\r\n\r\n\t\tvar root = this.root = document.createElement(\"div\");\r\n\t\tif(id)\r\n\t\t\troot.id = id;\r\n\r\n\t\troot.className = \"litepanel \" + (options.className || \"\");\r\n\t\troot.data = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(options.title)\r\n\t\t\tcode += \"<div class='panel-header'>\"+options.title+\"</div>\";\r\n\t\tcode += \"<div class='content'>\"+this.content+\"</div>\";\r\n\t\tcode += \"<div class='panel-footer'></div>\";\r\n\t\troot.innerHTML = code;\r\n\r\n\t\tif(options.title)\r\n\t\t\tthis.header = this.root.querySelector(\".panel-header\");\r\n\r\n\t\tthis.content = this.root.querySelector(\".content\");\r\n\t\tthis.footer = this.root.querySelector(\".panel-footer\");\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tif(options.position)\r\n\t\t{\r\n\t\t\tthis.root.style.position = \"absolute\";\r\n\t\t\tthis.root.style.left = LiteGUI.sizeToCSS( options.position[0] );\r\n\t\t\tthis.root.style.top = LiteGUI.sizeToCSS( options.position[1] );\r\n\t\t}\r\n\r\n\t\t//if(options.scroll == false)\tthis.content.style.overflow = \"hidden\";\r\n\t\tif(options.scroll == true)\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\t}\r\n\r\n\tPanel.prototype.add = function( litegui_item )\r\n\t{\r\n\t\tthis.content.appendChild( litegui_item.root );\r\n\t}\r\n\r\n\tPanel.prototype.clear = function()\r\n\t{\r\n\t\twhile (this.content.firstChild)\r\n\t\t\tthis.content.removeChild(this.content.firstChild);\r\n\t}\r\n\r\n\treturn LiteGUI.Panel = Panel;\r\n});\n//enclose in a scope\r\n\r\ndefine('skylark-litegui/Split',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\t/****************** AREA **************/\r\n\t/** An Area is am streched container.\r\n\t* Areas can be split several times horizontally or vertically to fit different colums or rows\r\n\t*\r\n\t* @class Area\r\n\t* @constructor\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction Area( options, legacy )\r\n\t{\r\n\t\t//for legacy code\r\n\t\tif( (options && options.constructor === String) || legacy )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Area legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\t/* the root element containing all sections */\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\troot.className = \"litearea\";\r\n\t\tif(options.id)\r\n\t\t\troot.id = options.id;\r\n\t\tif(options.className)\r\n\t\t\troot.className +=  \" \" + options.className;\r\n\r\n\t\tthis.root = root;\r\n\t\tthis.root.litearea = this; //dbl link\r\n\r\n\t\tvar width = options.width || \"100%\";\r\n\t\tvar height = options.height || \"100%\";\r\n\r\n\t\tif( width < 0 )\r\n\t\t\twidth = 'calc( 100% - '+Math.abs(width)+'px)';\r\n\t\tif( height < 0 )\r\n\t\t\theight = 'calc( 100% - '+ Math.abs(height)+'px)';\r\n\r\n\t\troot.style.width = width;\r\n\t\troot.style.height = height;\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\tvar that = this;\r\n\t\tthis._computed_size = [ this.root.offsetWidth, this.root.offserHeight ];\r\n\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif(options.content_id)\r\n\t\t\tcontent.id = options.content_id;\r\n\t\tcontent.className = \"liteareacontent\";\r\n\t\tcontent.style.width = \"100%\";\r\n\t\tcontent.style.height = \"100%\";\r\n\t\tthis.root.appendChild( content );\r\n\t\tthis.content = content;\r\n\r\n\t\tthis.split_direction = \"none\";\r\n\t\tthis.sections = [];\r\n\r\n\t\tif(options.autoresize)\r\n\t\t\tLiteGUI.bind( LiteGUI, \"resized\", function() { \r\n\t\t\t\tthat.onResize(); \r\n\t\t\t});\r\n\t}\r\n\r\n\tArea.VERTICAL = \"vertical\";\r\n\tArea.HORIZONTAL = \"horizontal\";\r\n\r\n\tArea.splitbar_size = 4;\r\n\r\n\t/* get container of the section */\r\n\tArea.prototype.getSection = function(num)\r\n\t{\r\n\t\tnum = num || 0;\r\n\t\tif(this.sections.length > num)\r\n\t\t\treturn this.sections[num];\r\n\t\treturn null;\r\n\t}\r\n\r\n\tArea.prototype.onResize = function(e)\r\n\t{\r\n\t\tvar computed_size = [ this.root.offsetWidth, this.root.offsetHeight ];\r\n\t\tif( e && this._computed_size && computed_size[0] == this._computed_size[0] && computed_size[1] == this._computed_size[1])\r\n\t\t\treturn;\r\n\r\n\t\tthis.sendResizeEvent(e);\r\n\t}\r\n\r\n\t//sends the resize event to all the sections\r\n\tArea.prototype.sendResizeEvent = function(e)\r\n\t{\r\n\t\tif(this.sections.length)\r\n\t\t\tfor(var i in this.sections)\r\n\t\t\t{\r\n\t\t\t\tvar section = this.sections[i];\r\n\t\t\t\tsection.onResize(e);\r\n\t\t\t}\r\n\t\telse //send it to the children\r\n\t\t{\r\n\t\t\tfor (var j = 0; j < this.root.childNodes.length; j++)\r\n\t\t\t{\r\n\t\t\t\tvar element = this.root.childNodes[j];\r\n\t\t\t\tif(element.litearea)\r\n\t\t\t\t\telement.litearea.onResize();\r\n\t\t\t\telse\r\n\t\t\t\t\tLiteGUI.trigger( element, \"resize\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//inner callback\r\n\t\tif( this.onresize )\r\n\t\t\tthis.onresize();\r\n\t}\r\n\r\n\tArea.prototype.getWidth = function()\r\n\t{\r\n\t\treturn this.root.offsetWidth;\r\n\t}\r\n\r\n\tArea.prototype.getHeight = function()\r\n\t{\r\n\t\treturn this.root.offsetHeight;\r\n\t}\r\n\r\n\tArea.prototype.isVisible = function()\r\n\t{\r\n\t\treturn this.root.style.display != \"none\";\t\r\n\t}\r\n\r\n\tArea.prototype.adjustHeight = function()\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t{\r\n\t\t\tconsole.error(\"Cannot adjust height of LiteGUI.Area without parent\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//check parent height\r\n\t\tvar h = this.root.parentNode.offsetHeight;\r\n\r\n\t\t//check position\r\n\t\tvar y = this.root.getClientRects()[0].top;\r\n\r\n\t\t//adjust height\r\n\t\tthis.root.style.height = \"calc( 100% - \" + y + \"px )\";\r\n\t}\r\n\r\n\tArea.prototype.split = function( direction, sizes, editable )\r\n\t{\r\n\t\tif( !direction || direction.constructor !== String )\r\n\t\t\tthrow (\"First parameter must be a string: 'vertical' or 'horizontal'\");\r\n\r\n\t\tif( !sizes )\r\n\t\t\tsizes = [\"50%\",null];\r\n\r\n\t\tif( direction != \"vertical\" && direction != \"horizontal\" )\r\n\t\t\tthrow (\"First parameter must be a string: 'vertical' or 'horizontal'\");\r\n\r\n\t\tif(this.sections.length)\r\n\t\t\tthrow \"cannot split twice\";\r\n\r\n\t\t//create areas\r\n\t\tvar area1 = new LiteGUI.Area({ content_id: this.content.id });\r\n\t\tarea1.root.style.display = \"inline-block\";\r\n\t\tvar area2 = new LiteGUI.Area();\r\n\t\tarea2.root.style.display = \"inline-block\";\r\n\r\n\t\tvar splitinfo = \"\";\r\n\t\tvar splitbar = null;\r\n\t\tvar dynamic_section = null;\r\n\t\tif(editable)\r\n\t\t{\r\n\t\t\tsplitinfo = \" - \" + (Area.splitbar_size + 2) +\"px\"; //2 px margin ¿?\r\n\t\t\tsplitbar = document.createElement(\"div\");\r\n\t\t\tsplitbar.className = \"litesplitbar \" + direction;\r\n\t\t\tif(direction == \"vertical\")\r\n\t\t\t\tsplitbar.style.height = Area.splitbar_size + \"px\";\r\n\t\t\telse\r\n\t\t\t\tsplitbar.style.width = Area.splitbar_size + \"px\";\r\n\t\t\tthis.splitbar = splitbar;\r\n\t\t\tsplitbar.addEventListener(\"mousedown\", inner_mousedown);\r\n\t\t}\r\n\r\n\t\tsizes = sizes || [\"50%\",null];\r\n\r\n\t\tif(direction == \"vertical\")\r\n\t\t{\r\n\t\t\tarea1.root.style.width = \"100%\";\r\n\t\t\tarea2.root.style.width = \"100%\";\r\n\r\n\t\t\tif(sizes[0] == null)\r\n\t\t\t{\r\n\t\t\t\tvar h = sizes[1];\r\n\t\t\t\tif(typeof(h) == \"number\")\r\n\t\t\t\t\th = sizes[1] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.height = \"-moz-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"-webkit-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = h;\r\n\t\t\t\tarea2.size = h;\r\n\t\t\t\tdynamic_section = area1;\r\n\t\t\t}\r\n\t\t\telse if(sizes[1] == null)\r\n\t\t\t{\r\n\t\t\t\tvar h = sizes[0];\r\n\t\t\t\tif(typeof(h) == \"number\")\r\n\t\t\t\t\th = sizes[0] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.height = h;\r\n\t\t\t\tarea1.size = h;\r\n\t\t\t\tarea2.root.style.height = \"-moz-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"-webkit-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tdynamic_section = area2;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar h1 = sizes[0];\r\n\t\t\t\tif(typeof(h1) == \"number\")\r\n\t\t\t\t\th1 = sizes[0] + \"px\";\r\n\t\t\t\tvar h2 = sizes[1];\r\n\t\t\t\tif(typeof(h2) == \"number\")\r\n\t\t\t\t\th2 = sizes[1] + \"px\";\r\n\t\t\t\tarea1.root.style.height = h1;\r\n\t\t\t\tarea1.size = h1;\r\n\t\t\t\tarea2.root.style.height = h2;\r\n\t\t\t\tarea2.size = h2;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse //horizontal\r\n\t\t{\r\n\t\t\tarea1.root.style.height = \"100%\";\r\n\t\t\tarea2.root.style.height = \"100%\";\r\n\r\n\t\t\tif(sizes[0] == null)\r\n\t\t\t{\r\n\t\t\t\tvar w = sizes[1];\r\n\t\t\t\tif(typeof(w) == \"number\")\r\n\t\t\t\t\tw = sizes[1] + \"px\";\r\n\t\t\t\tarea1.root.style.width = \"-moz-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"-webkit-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = w;\r\n\t\t\t\tarea2.size = sizes[1];\r\n\t\t\t\tdynamic_section = area1;\r\n\t\t\t}\r\n\t\t\telse if(sizes[1] == null)\r\n\t\t\t{\r\n\t\t\t\tvar w = sizes[0];\r\n\t\t\t\tif(typeof(w) == \"number\")\r\n\t\t\t\t\tw = sizes[0] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.width = w;\r\n\t\t\t\tarea1.size = w;\r\n\t\t\t\tarea2.root.style.width = \"-moz-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"-webkit-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tdynamic_section = area2;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar w1 = sizes[0];\r\n\t\t\t\tif(typeof(w1) == \"number\")\r\n\t\t\t\t\tw1 = sizes[0] + \"px\";\r\n\t\t\t\tvar w2 = sizes[1];\r\n\t\t\t\tif(typeof(w2) == \"number\")\r\n\t\t\t\t\tw2 = sizes[1] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.width = w1;\r\n\t\t\t\tarea1.size = w1;\r\n\t\t\t\tarea2.root.style.width = w2;\r\n\t\t\t\tarea2.size = w2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tarea1.root.removeChild( area1.content );\r\n\t\tarea1.root.appendChild( this.content );\r\n\t\tarea1.content = this.content;\r\n\r\n\t\tthis.root.appendChild( area1.root );\r\n\t\tif(splitbar)\r\n\t\t\tthis.root.appendChild( splitbar );\r\n\t\tthis.root.appendChild( area2.root );\r\n\r\n\t\tthis.sections = [area1, area2];\r\n\t\tthis.dynamic_section = dynamic_section;\r\n\t\tthis.direction = direction;\r\n\r\n\t\t//SPLITTER DRAGGER INTERACTION\r\n\t\tvar that = this;\r\n\t\tvar last_pos = [0,0];\r\n\t\tfunction inner_mousedown(e)\r\n\t\t{\r\n\t\t\tvar doc = that.root.ownerDocument;\r\n\t\t\tdoc.addEventListener(\"mousemove\",inner_mousemove);\r\n\t\t\tdoc.addEventListener(\"mouseup\",inner_mouseup);\r\n\t\t\tlast_pos[0] = e.pageX;\r\n\t\t\tlast_pos[1] = e.pageY;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_mousemove(e)\r\n\t\t{\r\n\t\t\tif(direction == \"horizontal\")\r\n\t\t\t{\r\n\t\t\t\tif (last_pos[0] != e.pageX)\r\n\t\t\t\t\tthat.moveSplit(last_pos[0] - e.pageX);\r\n\t\t\t}\r\n\t\t\telse if(direction == \"vertical\")\r\n\t\t\t{\r\n\t\t\t\tif (last_pos[1] != e.pageY)\r\n\t\t\t\t\tthat.moveSplit(e.pageY - last_pos[1]);\r\n\t\t\t}\r\n\r\n\t\t\tlast_pos[0] = e.pageX;\r\n\t\t\tlast_pos[1] = e.pageY;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tif(that.options.immediateResize || that.options.inmediateResize) //inmediate is for legacy...\r\n\t\t\t\tthat.onResize();\r\n\t\t}\r\n\r\n\t\tfunction inner_mouseup(e)\r\n\t\t{\r\n\t\t\tvar doc = that.root.ownerDocument;\r\n\t\t\tdoc.removeEventListener(\"mousemove\",inner_mousemove);\r\n\t\t\tdoc.removeEventListener(\"mouseup\",inner_mouseup);\r\n\t\t\tthat.onResize();\r\n\t\t}\r\n\t}\r\n\r\n\tArea.prototype.hide = function()\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t}\r\n\r\n\tArea.prototype.show = function()\r\n\t{\r\n\t\tthis.root.style.display = \"block\";\r\n\t}\r\n\r\n\tArea.prototype.showSection = function(num)\r\n\t{\r\n\t\tvar section = this.sections[num];\r\n\t\tvar size = 0;\r\n\r\n\t\tif( section && section.root.style.display != \"none\" )\r\n\t\t\treturn; //already visible\r\n\t\t\r\n\t\tif(this.direction == \"horizontal\")\r\n\t\t\tsize = section.root.style.width;\r\n\t\telse\r\n\t\t\tsize = section.root.style.height;\r\n\r\n\t\tif(size.indexOf(\"calc\") != -1)\r\n\t\t\tsize = \"50%\";\r\n\r\n\t\tfor(var i in this.sections)\r\n\t\t{\r\n\t\t\tvar section = this.sections[i];\r\n\r\n\t\t\tif(i == num)\r\n\t\t\t\tsection.root.style.display = \"inline-block\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.direction == \"horizontal\")\r\n\t\t\t\t\tsection.root.style.width = \"calc( 100% - \" + size + \" - 5px)\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.root.style.height = \"calc( 100% - \" + size + \" - 5px)\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.splitbar)\r\n\t\t\tthis.splitbar.style.display = \"inline-block\";\r\n\r\n\t\tthis.sendResizeEvent();\r\n\t}\r\n\r\n\tArea.prototype.hideSection = function(num)\r\n\t{\r\n\t\tfor(var i in this.sections)\r\n\t\t{\r\n\t\t\tvar section = this.sections[i];\r\n\r\n\t\t\tif(i == num)\r\n\t\t\t\tsection.root.style.display = \"none\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.direction == \"horizontal\")\r\n\t\t\t\t\tsection.root.style.width = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.root.style.height = \"100%\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.splitbar)\r\n\t\t\tthis.splitbar.style.display = \"none\";\r\n\r\n\t\tthis.sendResizeEvent();\r\n\t}\r\n\r\n\tArea.prototype.moveSplit = function(delta)\r\n\t{\r\n\t\tif(!this.sections) return;\r\n\r\n\t\tvar area1 = this.sections[0];\r\n\t\tvar area2 = this.sections[1];\r\n\t\tvar splitinfo = \" - \"+ Area.splitbar_size +\"px\";\r\n\r\n\t\tvar min_size = this.options.minSplitSize || 10;\r\n\r\n\t\tif(this.direction == \"horizontal\")\r\n\t\t{\r\n\r\n\t\t\tif (this.dynamic_section == area1)\r\n\t\t\t{\r\n\t\t\t\tvar size = (area2.root.offsetWidth + delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea1.root.style.width = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar size = (area1.root.offsetWidth - delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea2.root.style.width = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.direction == \"vertical\")\r\n\t\t{\r\n\t\t\tif (this.dynamic_section == area1)\r\n\t\t\t{\r\n\t\t\t\tvar size = (area2.root.offsetHeight - delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea1.root.style.height = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar size = (area1.root.offsetHeight + delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea2.root.style.height = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLiteGUI.trigger( this.root, \"split_moved\");\r\n\t\t//trigger split_moved event in all areas inside this area\r\n\t\tvar areas = this.root.querySelectorAll(\".litearea\");\r\n\t\tfor(var i = 0; i < areas.length; ++i)\r\n\t\t\tLiteGUI.trigger( areas[i], \"split_moved\" );\r\n\t}\r\n\r\n\tArea.prototype.addEventListener = function(a,b,c,d)\r\n\t{\r\n\t\treturn this.root.addEventListener(a,b,c,d);\r\n\t}\r\n\r\n\tArea.prototype.setAreaSize = function(area,size)\r\n\t{\r\n\t\tvar element = this.sections[1];\r\n\r\n\t\tvar splitinfo = \" - \"+Area.splitbar_size+\"px\";\r\n\t\telement.root.style.width = \"-moz-calc( 100% - \" + size + splitinfo + \" )\";\r\n\t\telement.root.style.width = \"-webkit-calc( 100% - \" + size + splitinfo + \" )\";\r\n\t\telement.root.style.width = \"calc( 100% - \" + size + splitinfo + \" )\";\r\n\t}\r\n\r\n\tArea.prototype.merge = function(main_section)\r\n\t{\r\n\t\tif(this.sections.length == 0) throw \"not splitted\";\r\n\r\n\t\tvar main = this.sections[main_section || 0];\r\n\r\n\t\tthis.root.appendChild( main.content );\r\n\t\tthis.content = main.content;\r\n\r\n\t\tthis.root.removeChild( this.sections[0].root );\r\n\t\tthis.root.removeChild( this.sections[1].root );\r\n\r\n\t\t/*\r\n\t\twhile(main.childNodes.length > 0)\r\n\t\t{\r\n\t\t\tvar e = main.childNodes[0];\r\n\t\t\tthis.root.appendChild(e);\r\n\t\t}\r\n\r\n\t\tthis.root.removeChild( this.sections[0].root );\r\n\t\tthis.root.removeChild( this.sections[1].root );\r\n\t\t*/\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis._computed_size = null;\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\tArea.prototype.add = function(v)\r\n\t{\r\n\t\tif(typeof(v) == \"string\")\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.innerHTML = v;\r\n\t\t\tv = element;\r\n\t\t}\r\n\r\n\t\tthis.content.appendChild( v.root || v );\r\n\t}\r\n\r\n\tArea.prototype.query = function(v)\r\n\t{\r\n\t\treturn this.root.querySelector(v);\r\n\t}\r\n\r\n\treturn LiteGUI.Area = Area;\r\n\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Table',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\tfunction Table( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"table\");\r\n\t\tthis.root.classList.add(\"litetable\");\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.column_fields = [];\r\n\t\tthis.rows = [];\r\n\t\tthis.data = [];\r\n\r\n\t\tthis._must_update_header = true;\r\n\r\n\t\tif(options.colums)\r\n\t\t\tthis.setColumns(options.colums);\r\n\r\n\t\tif(options.scrollable)\r\n\t\t\tthis.root.style.overflow = \"auto\";\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\r\n\t\tif(options.columns)\r\n\t\t\tthis.setColumns( options.columns );\r\n\r\n\t\tif(options.rows)\r\n\t\t\tthis.setRows( options.data );\r\n\t}\r\n\r\n\tTable.prototype.setRows = function( data, reuse )\r\n\t{\r\n\t\tthis.data = data;\r\n\t\tthis.updateContent( reuse );\r\n\t}\r\n\r\n\tTable.prototype.addRow = function( row, skip_add )\r\n\t{\r\n\t\tvar tr = document.createElement(\"tr\");\r\n\r\n\t\t//create cells\r\n\t\tfor(var j = 0; j < this.column_fields.length; ++j)\r\n\t\t{\r\n\t\t\tvar td = document.createElement(\"td\");\r\n\r\n\t\t\tvar value = null;\r\n\r\n\t\t\tif(row.constructor === Array )\r\n\t\t\t\tvalue = row[ j ];\r\n\t\t\telse //object\r\n\t\t\t\tvalue = row[ this.column_fields[j] ];\r\n\t\t\tif(value === undefined)\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\ttd.innerHTML = value;\r\n\r\n\t\t\tvar column = this.columns[j];\r\n\t\t\tif(column === undefined)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tif(column.className)\r\n\t\t\t\ttd.className = column.className;\r\n\t\t\tif(column.width)\r\n\t\t\t\ttd.style.width = column.width;\r\n\t\t\ttr.appendChild( td );\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild( tr );\r\n\t\tthis.rows.push( tr );\r\n\t\tif(!skip_add)\r\n\t\t\tthis.data.push( row );\r\n\r\n\t\treturn tr;\r\n\t}\r\n\r\n\tTable.prototype.updateRow = function( index, row )\r\n\t{\r\n\t\tthis.data[ index ] = row;\r\n\r\n\t\tvar tr = this.rows[index];\r\n\t\tif(!tr)\r\n\t\t\treturn;\r\n\r\n\t\tvar cells = tr.querySelectorAll(\"td\");\r\n\t\tfor(var j = 0; j < cells.length; ++j)\r\n\t\t{\r\n\t\t\tvar column = this.columns[j];\r\n\r\n\t\t\tvar value = null;\r\n\r\n\t\t\tif(row.constructor === Array )\r\n\t\t\t\tvalue = row[ j ];\r\n\t\t\telse\r\n\t\t\t\tvalue = row[ column.field ];\r\n\r\n\t\t\tif(value === undefined)\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tcells[j].innerHTML = value;\r\n\t\t}\r\n\t\treturn tr;\r\n\t}\r\n\r\n\tTable.prototype.updateCell = function( row, cell, data )\r\n\t{\r\n\t\tvar tr = this.rows[ row ];\r\n\t\tif(!tr)\r\n\t\t\treturn;\r\n\t\tvar cell = tr.childNodes[cell];\r\n\t\tif(!cell)\r\n\t\t\treturn;\r\n\t\tcell.innerHTML = data;\r\n\t\treturn cell;\r\n\t}\r\n\r\n\r\n\tTable.prototype.setColumns = function( columns )\r\n\t{\r\n\t\tthis.columns.length = 0;\r\n\t\tthis.column_fields.length = 0;\r\n\r\n\t\tvar avg_width = ((Math.floor(100 / columns.length)).toFixed(1)) + \"%\";\r\n\r\n\t\tvar rest = [];\r\n\r\n\t\tfor(var i = 0; i < columns.length; ++i)\r\n\t\t{\r\n\t\t\tvar c = columns[i];\r\n\r\n\t\t\tif( c === null || c === undefined )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t//allow to pass just strings or numbers instead of objects\r\n\t\t\tif( c.constructor === String || c.constructor === Number )\r\n\t\t\t\tc = { name: String(c) };\r\n\r\n\t\t\tvar column = {\r\n\t\t\t\tname: c.name || \"\",\r\n\t\t\t\twidth: LiteGUI.sizeToCSS(c.width || avg_width),\r\n\t\t\t\tfield: (c.field || c.name || \"\").toLowerCase(),\r\n\t\t\t\tclassName: c.className\r\n\t\t\t};\r\n\r\n\t\t\t//last\r\n\t\t\tif(i == columns.length - 1)\r\n\t\t\t\tcolumn.width = \" calc( 100% - ( \" + rest.join(\" + \") + \" ) )\";\r\n\t\t\telse\r\n\t\t\t\trest.push( column.width );\r\n\r\n\t\t\tthis.columns.push( column );\r\n\t\t\tthis.column_fields.push( column.field );\r\n\t\t}\r\n\r\n\t\tthis._must_update_header = true;\r\n\t\tthis.updateContent();\r\n\t}\r\n\r\n\tTable.prototype.updateContent = function( reuse )\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\r\n\t\t//update header\r\n\t\tif(this._must_update_header)\r\n\t\t{\r\n\t\t\tthis.header = document.createElement(\"tr\");\r\n\t\t\tfor(var i = 0; i < this.columns.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar column = this.columns[i];\r\n\t\t\t\tvar th = document.createElement(\"th\");\r\n\t\t\t\tth.innerHTML = column.name;\r\n\t\t\t\tif(column.width)\r\n\t\t\t\t\tth.style.width = column.width;\r\n\t\t\t\tcolumn.th = th;\r\n\t\t\t\tthis.header.appendChild( th );\r\n\t\t\t}\r\n\t\t\tthis._must_update_header = false;\r\n\t\t}\r\n\t\tthis.root.appendChild( this.header );\r\n\r\n\t\tif(!this.data)\r\n\t\t\treturn;\r\n\r\n\t\tif(this.data.length != this.rows.length)\r\n\t\t\treuse = false;\r\n\r\n\t\tif(reuse)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < this.rows.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar data_row = this.data[i];\r\n\t\t\t\tvar tr = this.updateRow( i, data_row );\r\n\t\t\t\tthis.root.appendChild( tr );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.rows.length = 0;\r\n\r\n\t\t\t//create rows\r\n\t\t\tfor(var i = 0; i < this.data.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar row = this.data[i];\r\n\t\t\t\tthis.addRow( row, true );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\treturn LiteGUI.Table = Table;\r\n\r\n\r\n});\n/**************  ***************************/\r\ndefine('skylark-litegui/Tabs',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\r\n\t/**\r\n\t* Widget that contains several tabs and their content\r\n\t* Options:\r\n\t* - mode: \"vertical\",\"horizontal\"\r\n\t* - size\r\n\t* - width,height\r\n\t* - autoswitch: allow autoswitch (switch when mouse over)\r\n\t* @class Tabs\r\n\t* @constructor\r\n\t*/\r\n\tfunction Tabs( options, legacy )\r\n\t{\r\n\t\tif( legacy || (options && options.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Tabs legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tthis.options = options;\r\n\r\n\t\tvar mode = this.mode = options.mode || \"horizontal\";\r\n\r\n\t\tvar root = document.createElement(\"DIV\");\r\n\t\tif(options.id) \r\n\t\t\troot.id = options.id;\r\n\t\troot.data = this;\r\n\t\troot.className = \"litetabs \" + mode;\r\n\t\tthis.root = root;\r\n\t\tthis.root.tabs = this;\r\n\r\n\t\tthis.current_tab = null; //current tab array [id, tab, content]\r\n\r\n\t\tif(mode == \"horizontal\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t\tthis.root.style.height = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.root.style.height = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(mode == \"vertical\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t\tthis.root.style.width = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.root.style.width = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = options.width.constructor === Number ? options.width.toFixed(0) + \"px\" : options.width;\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = options.height.constructor === Number ? options.height.toFixed(0) + \"px\" : options.height;\r\n\r\n\t\t//container of tab elements\r\n\t\tvar list = document.createElement(\"UL\");\r\n\t\tlist.className = \"wtabcontainer\";\r\n\t\tif(mode == \"vertical\")\r\n\t\t\tlist.style.width = LiteGUI.Tabs.tabs_width + \"px\";\r\n\t\telse\r\n\t\t\tlist.style.height = LiteGUI.Tabs.tabs_height + \"px\";\r\n\r\n\t\t//allows to use the wheel to see hidden tabs\r\n\t\tlist.addEventListener(\"wheel\", onMouseWheel);\r\n\t\tlist.addEventListener(\"mousewheel\", onMouseWheel);\r\n\t\tfunction onMouseWheel(e){\r\n\t\t\tif(e.deltaY)\r\n\t\t\t\tlist.scrollLeft += e.deltaY;\r\n\t\t}\r\n\r\n\t\tthis.list = list;\r\n\t\tthis.root.appendChild(this.list);\r\n\t\tthis.tabs_root = list;\r\n\r\n\t\tthis.tabs = {};\r\n\t\tthis.tabs_by_index = [];\r\n\t\tthis.selected = null;\r\n\r\n\t\tthis.onchange = options.callback;\r\n\r\n\t\tif(options.parent)\r\n\t\t\tthis.appendTo(options.parent);\r\n\t}\r\n\r\n\tTabs.tabs_width = 64;\r\n\tTabs.tabs_height = 26;\r\n\r\n\tTabs.prototype.show = function()\r\n\t{\r\n\t\tthis.root.style.display = \"block\";\r\n\t}\r\n\r\n\tTabs.prototype.hide = function()\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Returns the currently selected tab in the form of a tab object\r\n\t* @method getCurrentTab\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getCurrentTab = function()\r\n\t{\r\n\t\tif(!this.current_tab)\r\n\t\t\treturn null;\r\n\t\treturn this.tabs[ this.current_tab[0] ];\r\n\t}\r\n\r\n\tTabs.prototype.getCurrentTabId = function()\r\n\t{\r\n\t\treturn this.current_tab[0];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the last tab pressed before this one. used to know from which tab we come\r\n\t* @method getCurrentTab\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getPreviousTab = function()\r\n\t{\r\n\t\tif(!this.previous_tab)\r\n\t\t\treturn null;\r\n\t\treturn this.tabs[ this.previous_tab[0] ];\r\n\t}\r\n\r\n\tTabs.prototype.appendTo = function(parent, at_front)\r\n\t{\r\n\t\tif(at_front)\r\n\t\t\tparent.prepend(this.root);\r\n\t\telse\r\n\t\t\tparent.appendChild(this.root);\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a tab given its id\r\n\t* @method getTab\r\n\t* @param {String} id tab id\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getTab = function(id)\r\n\t{\r\n\t\treturn this.tabs[id];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a tab given its index in the tabs list\r\n\t* @method getTabByIndex\r\n\t* @param {Number} index\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getTabByIndex = function(index)\r\n\t{\r\n\t\treturn this.tabs_by_index[index];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns how many tabs there is\r\n\t* @method getNumOfTabs\r\n\t* @return {number} number of tabs\r\n\t*/\r\n\tTabs.prototype.getNumOfTabs = function()\r\n\t{\r\n\t\tvar num = 0;\r\n\t\tfor(var i in this.tabs)\r\n\t\t\tnum++;\r\n\t\treturn num;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the content HTML element of a tab\r\n\t* @method getTabContent\r\n\t* @param {String} id\r\n\t* @return {HTMLEntity} content\r\n\t*/\r\n\tTabs.prototype.getTabContent = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(tab)\r\n\t\t\treturn tab.content;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the index of a tab (the position in the tabs list)\r\n\t* @method getTabIndex\r\n\t* @param {String} id\r\n\t* @return {number} index\r\n\t*/\r\n\tTabs.prototype.getTabIndex = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn -1;\r\n\t\tfor(var i = 0; i < this.list.childNodes.length; i++)\r\n\t\t\tif( this.list.childNodes[i] == tab.tab )\r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Create a new tab, where id is a unique identifier\r\n\t* @method addTab\r\n\t* @param {String} id could be null then a random id is generated\r\n\t* @param {Object} options { \r\n\t*\ttitle: tab text, \r\n\t*\tcallback: called when selected, \r\n\t*\tcallback_leave: callback when leaving, \r\n\t*   callback_context: on right click on tab\r\n\t*   callback_canopen: used to block if this tab can be opened or not (if it returns true then yes)\r\n\t*\tcontent: HTML content, \r\n\t*   closable: if it can be closed (callback is onclose), \r\n\t*\ttab_width: size of the tab,\r\n\t*\ttab_className: classes for the tab element,\r\n\t*\tid: content id,\r\n\t*\tsize: full means all,\r\n\t*\tmode: \"vertical\" or \"horizontal\",\r\n\t*\tbutton: if it is a button tab, not a selectable tab\r\n\t*\t}\r\n\t* @param {bool} skip_event prevent dispatching events\r\n\t* @return {Object} an object containing { id, tab, content }\r\n\t*/\r\n\tTabs.prototype.addTab = function( id, options, skip_event )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tif(typeof(options) == \"function\")\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tif(id === undefined || id === null)\r\n\t\t\tid = \"rand_\" + ((Math.random() * 1000000)|0);\r\n\r\n\t\t//the tab element\r\n\t\tvar element = document.createElement(\"LI\");\r\n\t\tvar safe_id = id.replace(/ /gi,\"_\");\r\n\t\telement.className = \"wtab wtab-\" + safe_id + \" \";\r\n\t\t//if(options.selected) element.className += \" selected\";\r\n\t\telement.dataset[\"id\"] = id;\r\n\t\telement.innerHTML = \"<span class='tabtitle'>\" + (options.title || id) + \"</span>\";\r\n\r\n\t\tif(options.button)\r\n\t\t\telement.className += \"button \";\r\n\t\tif(options.tab_className)\r\n\t\t\telement.className += options.tab_className;\r\n\t\tif(options.bigicon)\r\n\t\t\telement.innerHTML = \"<img class='tabbigicon' src='\" + options.bigicon+\"'/>\" + element.innerHTML;\r\n\t\tif(options.closable)\r\n\t\t{\r\n\t\t\telement.innerHTML += \"<span class='tabclose'>\" + LiteGUI.special_codes.close + \"</span>\";\r\n\t\t\telement.querySelector(\"span.tabclose\").addEventListener(\"click\", function(e) { \r\n\t\t\t\tthat.removeTab(id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t},true);\r\n\t\t}\r\n\t\t//WARNING: do not modify element.innerHTML or events will be lost\r\n\r\n\t\tif( options.index !== undefined )\r\n\t\t{\r\n\t\t\tvar after = this.list.childNodes[options.index];\r\n\t\t\tif(after)\r\n\t\t\t\tthis.list.insertBefore(element,after);\r\n\t\t\telse\r\n\t\t\t\tthis.list.appendChild(element);\r\n\t\t}\r\n\t\telse if( this.plus_tab )\r\n\t\t\tthis.list.insertBefore( element, this.plus_tab );\r\n\t\telse\r\n\t\t\tthis.list.appendChild(element);\r\n\r\n\t\tif(options.tab_width)\r\n\t\t{\r\n\t\t\telement.style.width = options.tab_width.constructor === Number ? ( options.tab_width.toFixed(0) + \"px\" ) : options.tab_width;\r\n\t\t\telement.style.minWidth = \"0\";\r\n\t\t}\r\n\r\n\t\tif(this.options.autoswitch)\r\n\t\t{\r\n\t\t\telement.classList.add(\"autoswitch\");\r\n\t\t\telement.addEventListener(\"dragenter\",function(e){\r\n\t\t\t\t//console.log(\"Enter\",this.dataset[\"id\"]);\r\n\t\t\t\tif(that._timeout_mouseover)\r\n\t\t\t\t\tclearTimeout(that._timeout_mouseover);\r\n\t\t\t\tthat._timeout_mouseover = setTimeout((function(){\r\n\t\t\t\t\tLiteGUI.trigger(this,\"click\");\r\n\t\t\t\t\tthat._timeout_mouseover = null;\r\n\t\t\t\t}).bind(this),500);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\telement.addEventListener(\"dragleave\",function(e){\r\n\t\t\t\t//console.log(\"Leave\",this.dataset[\"id\"]);\r\n\t\t\t\tif(that._timeout_mouseover)\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(that._timeout_mouseover);\r\n\t\t\t\t\tthat._timeout_mouseover = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t//the content of the tab\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif(options.id)\r\n\t\t\tcontent.id = options.id;\r\n\r\n\t\tcontent.className = \"wtabcontent \" + \"wtabcontent-\" + safe_id + \" \" + (options.className || \"\");\r\n\t\tcontent.dataset[\"id\"] = id;\r\n\t\tcontent.style.display = \"none\";\r\n\r\n\t\t//adapt height\r\n\t\tif(this.mode == \"horizontal\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent.style.width = \"100%\";\r\n\t\t\t\t\tcontent.style.height = \"calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.height = \"-moz-calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.height = \"-webkit-calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\t//content.style.height = \"-webkit-calc( 90% )\"; //minus title\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent.style.height = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.mode == \"vertical\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent.style.height = \"100%\";\r\n\t\t\t\t\tcontent.style.width = \"calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.width = \"-moz-calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.width = \"-webkit-calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\t//content.style.height = \"-webkit-calc( 90% )\"; //minus title\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent.style.width = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//overwrite\r\n\t\tif(options.width !== undefined )\r\n\t\t\tcontent.style.width = typeof(options.width) === \"string\" ? options.width : options.width + \"px\";\r\n\t\tif(options.height !== undefined )\r\n\t\t\tcontent.style.height = typeof(options.height) === \"string\" ? options.height : options.height + \"px\";\r\n\r\n\t\t//add content\r\n\t\tif(options.content)\r\n\t\t{\r\n\t\t\tif (typeof(options.content) == \"string\")\r\n\t\t\t\tcontent.innerHTML = options.content;\r\n\t\t\telse\r\n\t\t\t\tcontent.appendChild(options.content);\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild(content);\r\n\r\n\t\t//when clicked\r\n\t\tif(!options.button)\r\n\t\t\telement.addEventListener(\"click\", Tabs.prototype.onTabClicked );\r\n\t\telse\r\n\t\t\telement.addEventListener(\"click\", function(e){ \r\n\t\t\t\tvar tab_id = this.dataset[\"id\"];\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback( tab_id, e );\r\n\t\t\t});\r\n\r\n\t\telement.options = options;\r\n\t\telement.tabs = this;\r\n\r\n\t\tvar title = element.querySelector(\"span.tabtitle\");\r\n\r\n\t\t//tab object\r\n\t\tvar tab_info = {\r\n\t\t\tid: id,\r\n\t\t\ttab: element,\r\n\t\t\tcontent: content,\r\n\t\t\ttitle: title,\r\n\t\t\tadd: function(v) { this.content.appendChild(v.root || v); },\r\n\t\t\tsetTitle: function( title )\t{ this.title.innerHTML = title; },\r\n\t\t\tclick: function(){ LiteGUI.trigger( this.tab, \"click\" ); },\r\n\t\t\tdestroy: function(){ that.removeTab(this.id) }\r\n\t\t};\r\n\r\n\t\tif(options.onclose)\r\n\t\t\ttab_info.onclose = options.onclose;\r\n\t\tthis.tabs[ id ] = tab_info;\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\r\n\t\t//context menu\r\n\t\telement.addEventListener(\"contextmenu\", (function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\t\t\te.preventDefault(); \r\n\t\t\tif(options.callback_context)\r\n\t\t\t\toptions.callback_context.call(tab_info);\r\n\t\t\treturn false;\r\n\t\t}).bind(this));\r\n\r\n\t\tif ( options.selected == true || this.selected == null )\r\n\t\t\tthis.selectTab( id, options.skip_callbacks );\r\n\r\n\t\treturn tab_info;\r\n\t}\r\n\r\n\tTabs.prototype.addPlusTab = function( callback )\r\n\t{\r\n\t\tif(this.plus_tab)\r\n\t\t\tconsole.warn(\"There is already a plus tab created in this tab widget\");\r\n\t\tthis.plus_tab = this.addTab( \"plus_tab\", { title: \"+\", tab_width: 20, button: true, callback: callback, skip_callbacks: true });\r\n\t}\r\n\r\n\tTabs.prototype.addButtonTab = function( id, title, callback )\r\n\t{\r\n\t\treturn this.addTab( id, { title: title, tab_width: 20, button: true, callback: callback, skip_callbacks: true });\r\n\t}\r\n\r\n\t//this is tab\r\n\tTabs.prototype.onTabClicked = function(e)\r\n\t{\r\n\t\t//skip if already selected\r\n\t\tif( this.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\tif(!this.parentNode)\r\n\t\t\treturn; //this could happend if it gets removed while being clicked (not common)\r\n\r\n\t\tvar options = this.options;\r\n\t\tvar tabs = this.parentNode.parentNode.tabs;\r\n\t\tif(!tabs)\r\n\t\t\tthrow(\"tabs not found\");\r\n\t\tvar that = tabs;\r\n\r\n\t\t//check if this tab is available\r\n\t\tif(options.callback_canopen && options.callback_canopen() == false)\r\n\t\t\treturn;\r\n\r\n\t\t//launch leaving current tab event\r\n\t\tif( that.current_tab && \r\n\t\t\tthat.current_tab[0] != tab_id && \r\n\t\t\tthat.current_tab[2] && \r\n\t\t\tthat.current_tab[2].callback_leave)\r\n\t\t\t\tthat.current_tab[2].callback_leave( that.current_tab[0], that.current_tab[1], that.current_tab[2] );\r\n\r\n\t\tvar tab_id = this.dataset[\"id\"];\r\n\t\tvar tab_content = null;\r\n\r\n\t\t//iterate tab labels\r\n\t\tfor(var i in that.tabs)\r\n\t\t{\r\n\t\t\tvar tab_info = that.tabs[i];\r\n\t\t\tif( i == tab_id )\r\n\t\t\t{\r\n\t\t\t\ttab_info.selected = true;\r\n\t\t\t\ttab_info.content.style.display = \"\";\r\n\t\t\t\ttab_content = tab_info.content;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdelete tab_info.selected;\r\n\t\t\t\ttab_info.content.style.display = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar list = that.list.querySelectorAll(\"li.wtab\");\r\n\t\tfor(var i = 0; i < list.length; ++i)\r\n\t\t\tlist[i].classList.remove(\"selected\");\r\n\t\tthis.classList.add(\"selected\");\r\n\r\n\t\t//change tab\r\n\t\tthat.previous_tab = that.current_tab;\r\n\t\tthat.current_tab = [tab_id, tab_content, options];\r\n\r\n\t\tif(e) //user clicked\r\n\t\t{\r\n\t\t\t//launch callback\r\n\t\t\tif(options.callback) \r\n\t\t\t\toptions.callback(tab_id, tab_content,e);\r\n\r\n\t\t\tLiteGUI.trigger(that,\"wchange\",[tab_id, tab_content]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange( tab_id, tab_content );\r\n\t\t}\r\n\r\n\t\t//change afterwards in case the user wants to know the previous one\r\n\t\tthat.selected = tab_id;\r\n\t}\r\n\r\n\tTabs.prototype.selectTab = function( id, skip_events )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\r\n\t\tif( id.constructor != String )\r\n\t\t\tid = id.id; //in case id is the object referencing the tab\r\n\r\n\t\tvar tabs = this.list.querySelectorAll(\"li.wtab\");\r\n\t\tfor(var i = 0; i < tabs.length; i++)\r\n\t\t\tif( id == tabs[i].dataset[\"id\"] )\r\n\t\t\t{\r\n\t\t\t\tthis.onTabClicked.call( tabs[i], !skip_events );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t}\r\n\r\n\tTabs.prototype.setTabVisibility = function(id, v)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\ttab.tab.style.display = v ? \"none\" : null;\r\n\t\ttab.content.style.display = v ? \"none\" : null;\r\n\t}\r\n\r\n\tTabs.prototype.recomputeTabsByIndex = function()\r\n\t{\r\n\t\tthis.tabs_by_index = [];\r\n\r\n\t\tfor(var i in this.tabs)\r\n\t\t{\r\n\t\t\tvar tab = this.tabs[i];\r\n\r\n\t\t\t//compute index\r\n\t\t\tvar index = 0;\r\n\t\t\tvar child = tab.tab;\r\n\t\t\twhile( (child = child.previousSibling) != null ) \r\n\t\t\t\tindex++;\r\n\r\n\t\t\tthis.tabs_by_index[index] = tab;\r\n\t\t}\r\n\t}\r\n\r\n\tTabs.prototype.removeTab = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t{\r\n\t\t\tconsole.warn( \"tab not found: \" + id );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(tab.onclose)\r\n\t\t\ttab.onclose(tab);\r\n\r\n\t\tif(tab.tab.parentNode)\r\n\t\t\ttab.tab.parentNode.removeChild( tab.tab );\r\n\t\tif(tab.content.parentNode)\r\n\t\t\ttab.content.parentNode.removeChild( tab.content );\r\n\t\tdelete this.tabs[id];\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\t}\r\n\r\n\tTabs.prototype.removeAllTabs = function( keep_plus )\r\n\t{\r\n\t\tvar tabs = [];\r\n\t\tfor(var i in this.tabs)\r\n\t\t\ttabs.push( this.tabs[i] );\r\n\r\n\t\tfor(var i in tabs)\r\n\t\t{\r\n\t\t\tvar tab = tabs[i];\r\n\t\t\tif(tab == this.plus_tab && keep_plus)\r\n\t\t\t\tcontinue;\r\n\t\t\tif(tab.tab.parentNode)\r\n\t\t\t\ttab.tab.parentNode.removeChild( tab.tab );\r\n\t\t\tif(tab.content.parentNode)\r\n\t\t\t\ttab.content.parentNode.removeChild( tab.content );\r\n\t\t\tdelete this.tabs[ tab.id ];\r\n\t\t}\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\t}\r\n\r\n\tTabs.prototype.clear = function()\r\n\t{\r\n\t\tthis.removeAllTabs();\r\n\t}\r\n\r\n\tTabs.prototype.hideTab = function(id)\r\n\t{\r\n\t\tthis.setTabVisibility(id, false);\r\n\t}\r\n\r\n\tTabs.prototype.showTab = function(id)\r\n\t{\r\n\t\tthis.setTabVisibility(id, true);\r\n\t}\r\n\r\n\tTabs.prototype.transferTab = function(id, target_tabs, index)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\ttarget_tabs.tabs[id] = tab;\r\n\r\n\t\tif(index !== undefined)\r\n\t\t\ttarget_tabs.list.insertBefore(tab.tab, target_tabs.list.childNodes[index]);\r\n\t\telse\r\n\t\t\ttarget_tabs.list.appendChild(tab.tab);\r\n\t\ttarget_tabs.root.appendChild(tab.content);\r\n\t\tdelete this.tabs[id];\r\n\r\n\t\tvar newtab = null;\r\n\t\tfor(var i in this.tabs)\r\n\t\t{\r\n\t\t\tnewtab = i;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(newtab)\r\n\t\t\tthis.selectTab(newtab);\r\n\r\n\t\ttab.tab.classList.remove(\"selected\");\r\n\t\ttarget_tabs.selectTab(id);\r\n\t}\r\n\r\n\tTabs.prototype.detachTab = function(id, on_complete, on_close )\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\tvar index = this.getTabIndex( id );\r\n\r\n\t\t//create window\r\n\t\tvar w = 800;\r\n\t\tvar h = 600;\r\n\t\tvar tab_window = window.open(\"\",\"\",\"width=\"+w+\", height=\"+h+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\ttab_window.document.write( \"<head><title>\"+id+\"</title>\" );\r\n\r\n\t\t//transfer style\r\n\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\ttab_window.document.write( styles[i].outerHTML );\r\n\t\ttab_window.document.write( \"</head><body></body>\" );\r\n\t\ttab_window.document.close();\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t//transfer content after a while so the window is propertly created\r\n\t\tvar newtabs = new LiteGUI.Tabs(null, this.options );\r\n\t\ttab_window.tabs = newtabs;\r\n\r\n\t\t//closing event\r\n\t\ttab_window.onbeforeunload = function(){\r\n\t\t\tnewtabs.transferTab( id, that, index);\r\n\t\t\tif(on_close)\r\n\t\t\t\ton_close();\r\n\t\t}\r\n\r\n\t\t//move the content there\r\n\t\tnewtabs.list.style.height = \"20px\";\r\n\t\ttab_window.document.body.appendChild(newtabs.root);\r\n\t\tthat.transferTab(id, newtabs);\r\n\t\tnewtabs.tabs[id].tab.classList.add(\"selected\");\r\n\t\tthis.recomputeTabsByIndex();\r\n\r\n\t\tif(on_complete)\r\n\t\t\ton_complete();\r\n\r\n\t\treturn tab_window;\r\n\t}\r\n\r\n\r\n\treturn LiteGUI.Tabs = Tabs;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Tree',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\r\n/**\r\n* To create interactive trees (useful for folders or hierarchies).<br>\r\n* Options are:<br>\r\n*\t+ allow_multiselection: allow to select multiple elements using the shift key<br>\r\n*\t+ allow_rename: double click to rename items in the tree<br>\r\n*\t+ allow_drag: drag elements around<br>\r\n*\t+ height<br>\r\n* Item data should be in the next format:<br>\r\n* {<br>\r\n*    id: unique_identifier,<br>\r\n*    content: what to show in the HTML (if omited id will be shown)<br>\r\n*\t children: []  array with another object with the same structure<br>\r\n*\t className: class<br>\r\n*    precontent: HTML inserted before the content<br>\r\n*\t visible: boolean, to hide it<br>\r\n*\t dataset: dataset for the element<br>\r\n*\t onDragData: callback in case the user drags this item somewhere else<br>\r\n* }<br>\r\n* To catch events use tree.root.addEventListener(...)<br>\r\n* item_selected : receive { item: node, data: node.data }<br>\r\n* item_dblclicked<br>\r\n* item_renamed<br>\r\n* item_moved<br>\r\n*\r\n* @class Tree\r\n* @constructor\r\n*/\r\n\r\n\t/*********** LiteTree *****************************/\r\n\tfunction Tree( data, options, legacy )\r\n\t{\r\n\t\tif(legacy || (data && data.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = data;\r\n\t\t\tdata = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Tree legacy parameter, use data as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\tthis.root = root;\r\n\t\tif(options.id)\r\n\t\t\troot.id = options.id;\r\n\r\n\t\troot.className = \"litetree\";\r\n\t\tthis.tree = data;\r\n\t\tvar that = this;\r\n\t\toptions = options || {allow_rename: false, allow_drag: true, allow_multiselection: false};\r\n\t\tthis.options = options;\r\n\t\tthis.indent_offset = options.indent_offset || 0;\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = typeof(options.height) == \"string\" ? options.height : Math.round(options.height) + \"px\";\r\n\r\n        this.collapsed_depth = 3;\r\n        if(options.collapsed_depth != null)\r\n            this.collapsed_depth = options.collapsed_depth;\r\n\r\n\t\t//bg click\r\n\t\troot.addEventListener(\"click\", function(e){\r\n\t\t\tif(e.srcElement != that.root)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(that.onBackgroundClicked)\r\n\t\t\t\tthat.onBackgroundClicked(e,that);\r\n\t\t});\r\n\r\n\t\t//bg click right mouse\r\n\t\troot.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tif(that.onContextMenu) \r\n\t\t\t\tthat.onContextMenu(e);\r\n\t\t\te.preventDefault(); \r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\t\tvar root_item = this.createAndInsert(data, options, null);\r\n\t\tif(!root_item)\r\n\t\t\tthrow(\"Error in LiteGUI.Tree, createAndInsert returned null\");\r\n\t\troot_item.className += \" root_item\";\r\n\t\t//this.root.appendChild(root_item);\r\n\t\tthis.root_item = root_item;\r\n\t}\r\n\r\n\tTree.INDENT = 20;\r\n\r\n\r\n\t/**\r\n\t* update tree with new data (old data will be thrown away)\r\n\t* @method updateTree\r\n\t* @param {object} data\r\n\t*/\r\n\tTree.prototype.updateTree = function( data )\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\t\tvar root_item = this.createAndInsert( data, this.options, null );\r\n\t\tif(root_item)\r\n\t\t{\r\n\t\t\troot_item.className += \" root_item\";\r\n\t\t\tthis.root_item = root_item;\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.root_item = null;\r\n\t}\r\n\r\n\t/**\r\n\t* update tree with new data (old data will be thrown away)\r\n\t* @method insertItem\r\n\t* @param {object} data\r\n\t* @param {string} parent_id\r\n\t* @param {number} position index in case you want to add it before the last position\r\n\t* @param {object} options\r\n\t* @return {DIVElement}\r\n\t*/\r\n\tTree.prototype.insertItem = function( data, parent_id, position, options)\r\n\t{\r\n\t\tif(!parent_id)\r\n\t\t{\r\n\t\t\tvar root = this.root.childNodes[0];\r\n\t\t\tif(root)\r\n\t\t\t\tparent_id = root.dataset[\"item_id\"];\r\n\t\t}\r\n\r\n\t\tvar element = this.createAndInsert( data, options, parent_id, position );\r\n\r\n\t\t//update parent collapse button\r\n\t\tif(parent_id)\r\n\t\t\tthis._updateListBox( this._findElement(parent_id) ); //no options here, this is the parent\r\n\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tTree.prototype.createAndInsert = function( data, options, parent_id, element_index )\r\n\t{\r\n\t\t//find parent\r\n\t\tvar parent_element_index = -1;\r\n\t\tif(parent_id)\r\n\t\t\tparent_element_index = this._findElementIndex( parent_id );\r\n\t\telse if(parent_id === undefined)\r\n\t\t\tparent_element_index = 0; //root\r\n\r\n\t\tvar parent = null;\r\n\t\tvar child_level = 0;\r\n\r\n\t\t//find level\r\n\t\tif(parent_element_index != -1)\r\n\t\t{\r\n\t\t\tparent = this.root.childNodes[ parent_element_index ];\r\n\t\t\tchild_level = parseInt( parent.dataset[\"level\"] ) + 1;\r\n\t\t}\r\n\r\n\t\t//create\r\n\t\tvar element = this.createTreeItem( data, options, child_level );\r\n\t\tif(!element) //error creating element\r\n\t\t\treturn;\r\n\r\n\t\telement.parent_id = parent_id;\r\n\r\n\t\t//check\r\n\t\tvar existing_item = this.getItem( element.dataset[\"item_id\"] );\r\n\t\tif( existing_item )\r\n\t\t\tconsole.warn(\"There another item with the same ID in this tree\");\r\n\r\n\t\t//insert\r\n\t\tif(parent_element_index == -1)\r\n\t\t\tthis.root.appendChild( element );\r\n\t\telse\r\n\t\t\tthis._insertInside( element, parent_element_index, element_index );\r\n\r\n\t\t//compute visibility according to parents\r\n\t\tif( parent && !this._isNodeChildrenVisible( parent_id ) )\r\n\t\t\telement.classList.add(\"hidden\");\r\n\r\n\t\t//children\r\n\t\tif(data.children)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < data.children.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tthis.createAndInsert( data.children[i], options, data.id );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//update collapse button\r\n\t\tthis._updateListBox( element, options, child_level );\r\n\r\n\t\tif(options && options.selected)\r\n\t\t\tthis.markAsSelected( element, true );\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//element to add, position of the parent node, position inside children, the depth level\r\n\tTree.prototype._insertInside = function( element, parent_index, offset_index, level )\r\n\t{\r\n\t\tvar parent = this.root.childNodes[ parent_index ];\r\n\t\tif(!parent)\r\n\t\t\tthrow(\"No parent node found, index: \" + parent_index +\", nodes: \" + this.root.childNodes.length );\r\n\r\n\t\tvar parent_level = parseInt( parent.dataset[\"level\"] );\r\n\t\tvar child_level = level !== undefined ? level : parent_level + 1;\r\n\r\n\t\tvar indent = element.querySelector(\".indentblock\");\r\n\t\tif(indent)\r\n\t\t\tindent.style.paddingLeft = ((child_level + this.indent_offset) * Tree.INDENT ) + \"px\"; //inner padding\r\n\t\t\r\n\t\telement.dataset[\"level\"] = child_level;\r\n\r\n\t\t//under level nodes\r\n\t\tfor( var j = parent_index+1; j < this.root.childNodes.length; ++j )\r\n\t\t{\r\n\t\t\tvar new_childNode = this.root.childNodes[j];\r\n\t\t\tif( !new_childNode.classList || !new_childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\t\t\tvar current_level = parseInt( new_childNode.dataset[\"level\"] );\r\n\r\n\t\t\tif( current_level == child_level && offset_index)\r\n\t\t\t{\r\n\t\t\t\toffset_index--;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//last position\r\n\t\t\tif( current_level < child_level || (offset_index === 0 && current_level === child_level) )\r\n\t\t\t{\r\n\t\t\t\tthis.root.insertBefore( element, new_childNode );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//ended\r\n\t\tthis.root.appendChild( element );\r\n\t}\r\n\r\n\r\n\tTree.prototype._isNodeChildrenVisible = function( id )\r\n\t{\r\n\t\tvar node = this.getItem( id );\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\t\tif( node.classList.contains(\"hidden\") )\r\n\t\t\treturn false;\r\n\r\n\t\t//check listbox\r\n\t\tvar listbox = node.querySelector(\".listbox\");\r\n\t\tif(!listbox)\r\n\t\t\treturn true;\r\n\t\tif(listbox.getValue() == \"closed\")\r\n\t\t\treturn false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tTree.prototype._findElement = function( id )\r\n\t{\r\n\t\tif( !id || id.constructor !== String)\r\n\t\t\tthrow(\"findElement param must be string with item id\");\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\t\t\tif( childNode.classList.contains(\"ltreeitem-\" + id) )\r\n\t\t\t\treturn childNode;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tTree.prototype._findElementIndex = function( id )\r\n\t{\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(typeof(id) === \"string\")\r\n\t\t\t{\r\n\t\t\t\tif(childNode.dataset[\"item_id\"] === id)\r\n\t\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\telse if( childNode === id )\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tTree.prototype._findElementLastChildIndex = function( start_index )\r\n\t{\r\n\t\tif(start_index == -1)\r\n\t\t\treturn -1;\r\n\r\n\t\tvar level = parseInt( this.root.childNodes[ start_index ].dataset[\"level\"] );\r\n\r\n\t\tfor(var i = start_index+1; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar current_level = parseInt( childNode.dataset[\"level\"] );\r\n\t\t\tif( current_level == level )\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t//returns child elements (you can control levels)\r\n\tTree.prototype._findChildElements = function( id, only_direct )\r\n\t{\r\n\t\tvar parent_index = this._findElementIndex( id );\r\n\t\tif(parent_index == -1)\r\n\t\t\treturn;\r\n\r\n\t\tvar parent = this.root.childNodes[ parent_index ];\r\n\t\tvar parent_level = parseInt( parent.dataset[\"level\"] );\r\n\r\n\t\tvar result = [];\r\n\r\n\t\tfor(var i = parent_index + 1; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar current_level = parseInt( childNode.dataset[\"level\"] );\r\n\t\t\tif(only_direct && current_level > (parent_level + 1) )\r\n\t\t\t\tcontinue;\r\n\t\t\tif(current_level <= parent_level)\r\n\t\t\t\treturn result;\r\n\r\n\t\t\tresult.push( childNode );\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tTree.prototype.createTreeItem = function( data, options, level )\r\n\t{\r\n\t\tif(data === null || data === undefined)\r\n\t\t{\r\n\t\t\tconsole.error(\"Tree item cannot be null\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = options || this.options;\r\n\r\n\t\tvar root = document.createElement(\"li\");\r\n\t\troot.className = \"ltreeitem\";\r\n\t\tvar that = this;\r\n\r\n\t\t//ids are not used because they could collide, classes instead\r\n\t\tif(data.id)\r\n\t\t{\r\n\t\t\tvar safe_id = data.id.replace(/\\s/g,\"_\");\r\n\t\t\troot.className += \" ltreeitem-\" + safe_id;\r\n\t\t\troot.dataset[\"item_id\"] = data.id;\r\n\t\t}\r\n\r\n\t\tif(data.dataset)\r\n\t\t\tfor(var i in data.dataset)\r\n\t\t\t\troot.dataset[i] = data.dataset[i];\r\n\r\n\t\tdata.DOM = root; //double link\r\n\t\troot.data = data;\r\n\r\n\t\tif(level !== undefined)\r\n\t\t{\r\n\t\t\troot.dataset[\"level\"] = level;\r\n\t\t\troot.classList.add(\"ltree-level-\" + level);\r\n\t\t}\r\n\r\n\t\tvar title_element = document.createElement(\"div\");\r\n\t\ttitle_element.className = \"ltreeitemtitle\";\r\n\t\tif(data.className)\r\n\t\t\ttitle_element.className += \" \" + data.className;\r\n\r\n\t\ttitle_element.innerHTML = \"<span class='precontent'></span><span class='indentblock'></span><span class='collapsebox'></span><span class='incontent'></span><span class='postcontent'></span>\";\r\n\r\n\t\tvar content = data.content || data.id || \"\";\r\n\t\ttitle_element.querySelector(\".incontent\").innerHTML = content;\r\n\r\n\t\tif(data.precontent)\r\n\t\t\ttitle_element.querySelector(\".precontent\").innerHTML = data.precontent;\r\n\r\n\t\tif(data.postcontent)\r\n\t\t\ttitle_element.querySelector(\".postcontent\").innerHTML = data.postcontent;\r\n\r\n\t\tif(data.dataset)\r\n\t\t\tfor(var i in data.dataset)\r\n\t\t\t\troot.dataset[i] = data.dataset[i];\r\n\r\n\t\troot.appendChild( title_element );\r\n\t\troot.title_element = title_element;\r\n\r\n\t\tif(data.visible === false)\r\n\t\t\troot.style.display = \"none\";\r\n\r\n\t\t//var row = root.querySelector(\".ltreeitemtitle .incontent\");\r\n\t\tvar row = root;\r\n\t\trow.addEventListener(\"click\", onNodeSelected );\r\n\t\trow.addEventListener(\"dblclick\",onNodeDblClicked );\r\n\t\trow.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\tvar item = this;\r\n\t\t\te.preventDefault(); \r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(that.onItemContextMenu)\r\n\t\t\t\treturn that.onItemContextMenu(e, { item: item, data: item.data} );\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tfunction onNodeSelected(e)\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t//var title = this.parentNode;\r\n\t\t\t//var item = title.parentNode;\r\n\t\t\tvar node = this;\r\n\t\t\tvar title = node.title_element;\r\n\r\n\t\t\tif(title._editing) \r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.ctrlKey && that.options.allow_multiselection)\r\n\t\t\t{\r\n\t\t\t\t//check if selected\r\n\t\t\t\tif( that.isNodeSelected( node ) )\r\n\t\t\t\t{\r\n\t\t\t\t\tnode.classList.remove(\"selected\");\r\n\t\t\t\t\tLiteGUI.trigger(that, \"item_remove_from_selection\", { item: node, data: node.data} );\r\n\t\t\t\t\tLiteGUI.trigger(that.root, \"item_remove_from_selection\", { item: node, data: node.data} ); //LEGACY\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//mark as selected\r\n\t\t\t\tthat.markAsSelected( node, true );\r\n\t\t\t\tLiteGUI.trigger(that, \"item_add_to_selection\", { item: node, data: node.data} );\r\n\t\t\t\tLiteGUI.trigger(that.root, \"item_add_to_selection\", { item: node, data: node.data} ); //LEGACY\r\n\t\t\t\tvar r = false;\r\n\t\t\t\tif(data.callback) \r\n\t\t\t\t\tr = data.callback.call(that,node);\r\n\r\n\t\t\t\tif(!r && that.onItemAddToSelection)\r\n\t\t\t\t\tthat.onItemAddToSelection(node.data, node);\r\n\t\t\t}\r\n\t\t\tif(e.shiftKey && that.options.allow_multiselection)\r\n\t\t\t{\r\n\t\t\t\t//select from current selection till here\r\n\t\t\t\t//current\r\n\t\t\t\tvar last_item = that.getSelectedItem();\r\n\t\t\t\tif(!last_item)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif(last_item === node)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar nodeList = Array.prototype.slice.call( last_item.parentNode.children );\r\n\t\t\t\tvar last_index = nodeList.indexOf( last_item );\r\n\t\t\t\tvar current_index = nodeList.indexOf( node );\r\n\r\n\t\t\t\tvar items = current_index > last_index ? nodeList.slice( last_index, current_index ) : nodeList.slice( current_index, last_index );\r\n\t\t\t\tfor( var i = 0; i < items.length; ++i )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\t//console.log(item);\r\n\t\t\t\t\t//mark as selected\r\n\t\t\t\t\tthat.markAsSelected( item, true );\r\n\t\t\t\t\tLiteGUI.trigger( that, \"item_add_to_selection\", { item: item, data: item.data } );\r\n\t\t\t\t\tLiteGUI.trigger( that.root, \"item_add_to_selection\", { item: item, data: item.data } ); //LEGACY\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//mark as selected\r\n\t\t\t\tthat.markAsSelected( node );\r\n\r\n\t\t\t\tthat._skip_scroll = true; //avoid scrolling while user clicks something\r\n\t\t\t\tLiteGUI.trigger( that, \"item_selected\", { item: node, data: node.data } );\r\n\t\t\t\tLiteGUI.trigger( that.root, \"item_selected\", { item: node, data: node.data } ); //LEGACY\r\n\t\t\t\tvar r = false;\r\n\t\t\t\tif(data.callback) \r\n\t\t\t\t\tr = data.callback.call(that,node);\r\n\r\n\t\t\t\tif(!r && that.onItemSelected)\r\n\t\t\t\t\tthat.onItemSelected(node.data, node);\r\n\t\t\t\tthat._skip_scroll = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onNodeDblClicked(e)\r\n\t\t{\r\n\t\t\tvar node = this; //this.parentNode;\r\n\t\t\tvar title = node.title_element.querySelector(\".incontent\");\r\n\r\n\t\t\tLiteGUI.trigger( that, \"item_dblclicked\", node );\r\n\t\t\tLiteGUI.trigger( that.root, \"item_dblclicked\", node ); //LEGACY\r\n\r\n\t\t\tif(!title._editing && that.options.allow_rename)\r\n\t\t\t{\r\n\t\t\t\ttitle._editing = true;\r\n\t\t\t\ttitle._old_name = title.innerHTML;\r\n\t\t\t\tvar that2 = title;\r\n\t\t\t\ttitle.innerHTML = \"<input type='text' value='\" + title.innerHTML + \"' />\";\r\n\t\t\t\tvar input = title.querySelector(\"input\");\r\n\r\n\t\t\t\t//loose focus when renaming\r\n\t\t\t\tinput.addEventListener(\"blur\",function(e) { \r\n\t\t\t\t\tvar new_name = e.target.value;\r\n\t\t\t\t\tsetTimeout(function() { that2.innerHTML = new_name; },1); //bug fix, if I destroy input inside the event, it produce a NotFoundError\r\n\t\t\t\t\t//item.node_name = new_name;\r\n\t\t\t\t\tdelete that2._editing;\r\n\t\t\t\t\tLiteGUI.trigger( that.root, \"item_renamed\", { old_name: that2._old_name, new_name: new_name, item: node, data: node.data } );\r\n\t\t\t\t\tdelete that2._old_name;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//finishes renaming\r\n\t\t\t\tinput.addEventListener(\"keydown\", function(e) {\r\n\t\t\t\t\tif(e.keyCode != 13)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tthis.blur();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//set on focus\r\n\t\t\t\tinput.focus();\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t//dragging element on tree\r\n\t\tvar draggable_element = title_element;\r\n\t\tif(this.options.allow_drag)\r\n\t\t{\r\n\t\t\tdraggable_element.draggable = true;\r\n\r\n\t\t\t//starts dragging this element\r\n\t\t\tdraggable_element.addEventListener(\"dragstart\", function(ev) {\r\n\t\t\t\t//this.removeEventListener(\"dragover\", on_drag_over ); //avoid being drag on top of himself\r\n\t\t\t\t//ev.dataTransfer.setData(\"node-id\", this.parentNode.id);\r\n\t\t\t\tev.dataTransfer.setData(\"item_id\", this.parentNode.dataset[\"item_id\"]);\r\n\t\t\t\tif(!data.onDragData)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar drag_data =\tdata.onDragData();\r\n\t\t\t\tif(drag_data)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i in drag_data)\r\n\t\t\t\t\t\tev.dataTransfer.setData(i,drag_data[i]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar count = 0;\r\n\r\n\t\t//something being dragged entered\r\n\t\tdraggable_element.addEventListener(\"dragenter\", function (ev)\r\n\t\t{\r\n\t\t\tev.preventDefault();\r\n\t\t\tif(data.skipdrag)\r\n\t\t\t\treturn false;\r\n\t\t\t\r\n\t\t\tif(count == 0)\r\n\t\t\t\ttitle_element.classList.add(\"dragover\");\r\n\t\t\tcount++;\r\n\t\t});\r\n\r\n\t\tdraggable_element.addEventListener(\"dragleave\", function (ev)\r\n\t\t{\r\n\t\t\tev.preventDefault();\r\n\t\t\t//console.log(data.id);\r\n\t\t\tcount--;\r\n\t\t\tif(count == 0)\r\n\t\t\t\ttitle_element.classList.remove(\"dragover\");\r\n\t\t\t//if(ev.srcElement == this) return;\r\n\t\t});\r\n\r\n\t\t//test if allows to drag stuff on top?\r\n\t\tdraggable_element.addEventListener(\"dragover\", on_drag_over );\r\n\t\tfunction on_drag_over(ev)\r\n\t\t{\r\n\t\t\tev.preventDefault();\r\n\t\t}\r\n\r\n\t\tdraggable_element.addEventListener(\"drop\", function (ev)\r\n\t\t{\r\n\t\t\ttitle_element.classList.remove(\"dragover\");\r\n\t\t\tev.preventDefault();\r\n\t\t\tif(data.skipdrag)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item_id = ev.dataTransfer.getData(\"item_id\");\r\n\r\n\t\t\t//var data = ev.dataTransfer.getData(\"Text\");\r\n\t\t\tif(!item_id)\r\n\t\t\t{\r\n\t\t\t\tLiteGUI.trigger( that.root, \"drop_on_item\", { item: this, event: ev });\r\n\t\t\t\tif( that.onDropItem )\r\n\t\t\t\t\tthat.onDropItem( ev, this.parentNode.data );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//try\r\n\t\t\t{\r\n\t\t\t\tvar parent_id = this.parentNode.dataset[\"item_id\"];\r\n\r\n\t\t\t\tif( !that.onMoveItem || (that.onMoveItem && that.onMoveItem( that.getItem( item_id ), that.getItem( parent_id ) ) != false))\r\n\t\t\t\t{\r\n\t\t\t\t\tif( that.moveItem( item_id, parent_id ) )\r\n\t\t\t\t\t\tLiteGUI.trigger( that.root, \"item_moved\", { item: that.getItem( item_id ), parent_item: that.getItem( parent_id ) } );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tcatch (err)\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"Error: \" + err );\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif( that.onDropItem )\r\n\t\t\t\tthat.onDropItem( ev, this.parentNode.data );\r\n\t\t});\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* remove from the tree the items that do not have a name that matches the string\r\n\t* @method filterByName\r\n\t* @param {string} name\r\n\t*/\r\n\tTree.prototype.filterByName = function(name)\r\n\t{\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i]; //ltreeitem\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar content = childNode.querySelector(\".incontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar str = content.innerHTML.toLowerCase();\r\n\r\n\t\t\tif(!name || str.indexOf( name.toLowerCase() ) != -1)\r\n\t\t\t{\r\n\t\t\t\tif( childNode.data && childNode.data.visible !== false )\r\n\t\t\t\t\tchildNode.classList.remove(\"filtered\");\r\n\t\t\t\tvar indent = childNode.querySelector(\".indentblock\");\r\n\t\t\t\tif(indent)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(name)\r\n\t\t\t\t\t\tindent.style.paddingLeft = 0;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tindent.style.paddingLeft = paddingLeft = ( (parseInt(childNode.dataset[\"level\"]) + this.indent_offset) * Tree.INDENT) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tchildNode.classList.add(\"filtered\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\r\n\t/**\r\n\t* remove from the tree the items that do not have a name that matches the string\r\n\t* @method filterByName\r\n\t* @param {string} name\r\n\t*/\r\n\tTree.prototype.filterByRule = function( callback_to_filter, param )\r\n\t{\r\n\t\tif(!callback_to_filter)\r\n\t\t\tthrow(\"filterByRule requires a callback\");\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i]; //ltreeitem\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar content = childNode.querySelector(\".incontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif( callback_to_filter( childNode.data, content, param ) )\r\n\t\t\t{\r\n\t\t\t\tif( childNode.data && childNode.data.visible !== false )\r\n\t\t\t\t\tchildNode.classList.remove(\"filtered\");\r\n\t\t\t\tvar indent = childNode.querySelector(\".indentblock\");\r\n\t\t\t\tif(indent)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(name)\r\n\t\t\t\t\t\tindent.style.paddingLeft = 0;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tindent.style.paddingLeft = paddingLeft = ( (parseInt(childNode.dataset[\"level\"]) + this.indent_offset) * LiteGUI.Tree.INDENT) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tchildNode.classList.add(\"filtered\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\r\n\r\n\t/**\r\n\t* get the item with that id, returns the HTML element\r\n\t* @method getItem\r\n\t* @param {string} id\r\n\t* @return {Object}\r\n\t*/\r\n\tTree.prototype.getItem = function( id )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn null;\r\n\r\n\t\tif( id.classList ) //if it is already a node\r\n\t\t\treturn id;\r\n\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(childNode.dataset[\"item_id\"] === id)\r\n\t\t\t\treturn childNode;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t/*\r\n\t\tvar safe_id = id.replace(/\\s/g,\"_\");\r\n\t\tvar node = this.root.querySelector(\".ltreeitem-\"+safe_id);\r\n\t\tif(!node) \r\n\t\t\treturn null;\r\n\t\tif( !node.classList.contains(\"ltreeitem\") )\r\n\t\t\tthrow(\"this node is not a tree item\");\r\n\t\treturn node;\r\n\t\t*/\r\n\t}\r\n\r\n\t/**\r\n\t* in case an item is collapsed, it expands it to show children\r\n\t* @method expandItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.expandItem = function(id, parents)\r\n\t{\r\n\t\tvar item = this.getItem(id);\r\n\t\tif(!item)\r\n\t\t\treturn;\r\n\r\n\t\tif(!item.listbox)\r\n\t\t\treturn;\r\n\r\n\t\titem.listbox.setValue(true); //this propagates changes\r\n\r\n\t\tif(!parents)\r\n\t\t\treturn;\r\n\r\n\t\tvar parent = this.getParent( item );\r\n\t\tif(parent)\r\n\t\t\tthis.expandItem(parent,parents);\r\n\t}\r\n\r\n\t/**\r\n\t* in case an item is expanded, it collapses it to hide children\r\n\t* @method collapseItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.collapseItem = function(id)\r\n\t{\r\n\t\tvar item = this.getItem(id);\r\n\t\tif(!item)\r\n\t\t\treturn;\r\n\r\n\t\tif(!item.listbox)\r\n\t\t\treturn;\r\n\r\n\t\tlistbox.setValue(false);  //this propagates changes\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Tells you if the item its out of the view due to the scrolling\r\n\t* @method isInsideArea\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.isInsideArea = function( id )\r\n\t{\r\n\t\tvar item = id.constructor === String ? this.getItem(id) : id;\r\n\t\tif(!item)\r\n\t\t\treturn false;\r\n\r\n\t\tvar rects = this.root.getClientRects();\r\n\t\tif(!rects.length)\r\n\t\t\treturn false;\r\n\t\tvar r = rects[0];\r\n\t\tvar h = r.height;\r\n\t\tvar y = item.offsetTop;\r\n\r\n\t\tif( this.root.scrollTop < y && y < (this.root.scrollTop + h) )\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t* Scrolls to center this item\r\n\t* @method scrollToItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.scrollToItem = function(id)\r\n\t{\r\n\t\tvar item = id.constructor === String ? this.getItem(id) : id;\r\n\t\tif(!item)\r\n\t\t\treturn;\r\n\r\n\t\tvar container = this.root.parentNode;\r\n\r\n\t\tif(!container)\r\n\t\t\treturn;\r\n\r\n\t\tvar rect = container.getBoundingClientRect();\r\n\t\tif(!rect)\r\n\t\t\treturn;\r\n\t\tvar h = rect.height;\r\n\t\tvar x = ( parseInt( item.dataset[\"level\"] ) + this.indent_offset) * Tree.INDENT + 50;\r\n\r\n\t\tcontainer.scrollTop = item.offsetTop - (h * 0.5)|0;\r\n\t\tif( rect.width * 0.75 < x )\r\n\t\t\tcontainer.scrollLeft = x;\r\n\t\telse\r\n\t\t\tcontainer.scrollLeft = 0;\r\n\t}\r\n\r\n\t/**\r\n\t* mark item as selected\r\n\t* @method setSelectedItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.setSelectedItem = function( id, scroll, send_event )\r\n\t{\r\n\t\tif(!id)\r\n\t\t{\r\n\t\t\t//clear selection\r\n\t\t\tthis.unmarkAllAsSelected();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node) //not found\r\n\t\t\treturn null;\r\n\r\n\t\t//already selected\r\n\t\tif( node.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\tthis.markAsSelected(node);\r\n\t\tif( scroll && !this._skip_scroll )\r\n\t\t\tthis.scrollToItem(node);\r\n\r\n\t\t//expand parents\r\n\t\tthis.expandItem( node, true );\r\n\r\n\t\tif(send_event)\r\n\t\t\tLiteGUI.trigger( node, \"click\" );\r\n\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t* adds item to selection (multiple selection)\r\n\t* @method addItemToSelection\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.addItemToSelection = function( id )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node) //not found\r\n\t\t\treturn null;\r\n\r\n\t\tthis.markAsSelected(node, true);\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t* remove item from selection (multiple selection)\r\n\t* @method removeItemFromSelection\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.removeItemFromSelection = function( id )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node) //not found\r\n\t\t\treturn null;\r\n\t\tnode.classList.remove(\"selected\");\r\n\t}\r\n\r\n\t/**\r\n\t* returns the first selected item (its HTML element)\r\n\t* @method getSelectedItem\r\n\t* @return {HTML}\r\n\t*/\r\n\tTree.prototype.getSelectedItem = function()\r\n\t{\r\n\t\treturn this.root.querySelector(\".ltreeitem.selected\");\r\n\t}\r\n\r\n\t/**\r\n\t* returns an array with the selected items (its HTML elements)\r\n\t* @method getSelectedItems\r\n\t* @return {HTML}\r\n\t*/\r\n\tTree.prototype.getSelectedItems = function()\r\n\t{\r\n\t\treturn this.root.querySelectorAll(\".ltreeitem.selected\");\r\n\t}\r\n\r\n\t/**\r\n\t* returns if an item is selected\r\n\t* @method isItemSelected\r\n\t* @param {string} id\r\n\t* @return {bool}\r\n\t*/\r\n\tTree.prototype.isItemSelected = function(id)\r\n\t{\r\n\t\tvar node = this.getItem( id );\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\t\treturn this.isNodeSelected(node);\r\n\t}\r\n\r\n\t/**\r\n\t* returns the children of an item\r\n\t* @method getChildren\r\n\t* @param {string} id could be string or node directly\r\n\t* @param {bool} [only_direct=false] to get only direct children\r\n\t* @return {Array}\r\n\t*/\r\n\tTree.prototype.getChildren = function(id, only_direct )\r\n\t{\r\n\t\tif( id && id.constructor !== String && id.dataset )\r\n\t\t\tid = id.dataset[\"item_id\"];\r\n\t\treturn this._findChildElements( id, only_direct );\r\n\t}\r\n\r\n\t/**\r\n\t* returns the parent of a item\r\n\t* @method getParent\r\n\t* @param {string} id\r\n\t* @return {HTML}\r\n\t*/\r\n\tTree.prototype.getParent = function(id_or_node)\r\n\t{\r\n\t\tvar element = this.getItem( id_or_node );\r\n\t\tif(element)\r\n\t\t\treturn this.getItem( element.parent_id );\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t* returns an array with all the ancestors\r\n\t* @method getAncestors\r\n\t* @param {string} id\r\n\t* @return {Array}\r\n\t*/\r\n\tTree.prototype.getAncestors = function( id_or_node, result )\r\n\t{\r\n\t\tresult = result || [];\r\n\t\tvar element = this.getItem( id_or_node );\r\n\t\tif(element)\r\n\t\t{\r\n\t\t\tresult.push( element );\r\n\t\t\treturn this.getAncestors( element.parent_id, result );\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t* returns an array with all the ancestors\r\n\t* @method getAncestors\r\n\t* @param {string} id\r\n\t* @return {Array}\r\n\t*/\r\n\tTree.prototype.isAncestor = function( child, node )\r\n\t{\r\n\t\tvar element = this.getItem( child );\r\n\t\tif(!element)\r\n\t\t\treturn false;\r\n\t\tvar dest = this.getItem( node );\r\n\t\tvar parent = this.getItem( element.parent_id );\r\n\t\tif(!parent)\r\n\t\t\treturn false;\r\n\t\tif(parent == dest)\r\n\t\t\treturn true;\r\n\t\treturn this.isAncestor( parent, node );\r\n\t}\r\n\r\n\t/**\r\n\t* move item with id to be child of parent_id\r\n\t* @method moveItem\r\n\t* @param {string} id\r\n\t* @param {string} parent_id\r\n\t* @return {bool}\r\n\t*/\r\n\tTree.prototype.moveItem = function( id, parent_id )\r\n\t{\r\n\t\tif(id === parent_id)\r\n\t\t\treturn false;\r\n\r\n\t\tvar node = this.getItem( id );\r\n\t\tvar parent = this.getItem( parent_id );\r\n\r\n\t\tif( this.isAncestor( parent, node ) )\r\n\t\t\treturn false;\r\n\r\n\t\tvar parent_index = this._findElementIndex( parent );\r\n\t\tvar parent_level = parseInt( parent.dataset[\"level\"] );\r\n\t\tvar old_parent = this.getParent( node );\r\n\t\tif(!old_parent)\r\n\t\t{\r\n\t\t\tconsole.error(\"node parent not found by id, maybe id has changed\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar old_parent_level = parseInt( old_parent.dataset[\"level\"] );\r\n\t\tvar level_offset = parent_level - old_parent_level;\r\n\r\n\t\tif(!parent || !node)\r\n\t\t\treturn false;\r\n\r\n\t\tif(parent == old_parent)\r\n\t\t\treturn false;\r\n\r\n\t\t//replace parent info\r\n\t\tnode.parent_id = parent_id;\r\n\r\n\t\t//get all children and subchildren and reinsert them in the new level\r\n\t\tvar children = this.getChildren( node );\r\n\t\tif(children)\r\n\t\t{\r\n\t\t\tchildren.unshift( node ); //add the node at the beginning\r\n\r\n\t\t\t//remove all children\r\n\t\t\tfor(var i = 0; i < children.length; i++)\r\n\t\t\t\tchildren[i].parentNode.removeChild( children[i] );\r\n\r\n\t\t\t//update levels\r\n\t\t\tfor(var i = 0; i < children.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar child = children[i];\r\n\t\t\t\tvar new_level = parseInt(child.dataset[\"level\"]) + level_offset;\r\n\t\t\t\tchild.dataset[\"level\"] = new_level;\r\n\t\t\t}\r\n\r\n\t\t\t//reinsert\r\n\t\t\tparent_index = this._findElementIndex( parent ); //update parent index\r\n\t\t\tvar last_index = this._findElementLastChildIndex( parent_index );\r\n\t\t\tif(last_index == -1)\r\n\t\t\t\tlast_index = 0;\r\n\t\t\tfor(var i = 0; i < children.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar child = children[i];\r\n\t\t\t\tthis._insertInside( child, parent_index, last_index + i - 1, parseInt( child.dataset[\"level\"] ) );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//update collapse button\r\n\t\tthis._updateListBox( parent );\r\n\t\tif(old_parent)\r\n\t\t\tthis._updateListBox( old_parent );\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* remove item with given id\r\n\t* @method removeItem\r\n\t* @param {string} id\r\n\t* @return {bool}\r\n\t*/\r\n\tTree.prototype.removeItem = function( id_or_node, remove_children )\r\n\t{\r\n\t\tvar node = id_or_node;\r\n\t\tif(typeof(id_or_node) == \"string\")\r\n\t\t\tnode = this.getItem( id_or_node );\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\r\n\t\t//get parent\r\n\t\tvar parent = this.getParent( node );\r\n\r\n\t\t//get all descendants\r\n\t\tvar child_nodes = null;\r\n\t\tif(remove_children)\r\n\t\t\tchild_nodes = this.getChildren( node );\r\n\r\n\t\t//remove html element\r\n\t\tthis.root.removeChild( node );\r\n\r\n\t\t//remove all children\r\n\t\tif( child_nodes )\r\n\t\t{\r\n\t\t\tfor( var i = 0; i < child_nodes.length; i++ )\r\n\t\t\t\tthis.root.removeChild( child_nodes[i] );\r\n\t\t}\r\n\r\n\t\t//update parent collapse button\r\n\t\tif(parent)\r\n\t\t\tthis._updateListBox( parent );\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* update a given item with new data\r\n\t* @method updateItem\r\n\t* @param {string} id\r\n\t* @param {object} data\r\n\t*/\r\n\tTree.prototype.updateItem = function(id, data)\r\n\t{\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\r\n\t\tnode.data = data;\r\n\t\tif(data.id)\r\n\t\t\tnode.id = data.id; //this updateItemId ?\r\n\t\tif(data.content)\r\n\t\t{\r\n\t\t\t//node.title_element.innerHTML = \"<span class='precontent'></span><span class='incontent'>\" +  + \"</span><span class='postcontent'></span>\";\r\n\t\t\tvar incontent = node.title_element.querySelector(\".incontent\");\r\n\t\t\tincontent.innerHTML = data.content;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* update a given item id and the link with its children\r\n\t* @method updateItemId\r\n\t* @param {string} old_id\r\n\t* @param {string} new_id\r\n\t*/\r\n\tTree.prototype.updateItemId = function(old_id, new_id)\r\n\t{\r\n\t\tvar node = this.getItem(old_id);\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\r\n\t\tvar children = this.getChildren( old_id, true );\r\n\t\tnode.id = new_id;\r\n\r\n\t\tfor(var i = 0; i < children.length; ++i)\r\n\t\t{\r\n\t\t\tvar child = children[i];\r\n\t\t\tchild.parent_id = new_id;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* clears all the items\r\n\t* @method clear\r\n\t* @param {bool} keep_root if you want to keep the root item\r\n\t*/\r\n\tTree.prototype.clear = function(keep_root)\r\n\t{\r\n\t\tif(!keep_root)\r\n\t\t{\r\n\t\t\tthis.root.innerHTML = \"\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar items = this.root.querySelectorAll(\".ltreeitem\");\r\n\t\tfor(var i = 1; i < items.length; i++)\r\n\t\t{\r\n\t\t\tvar item = items[i];\r\n\t\t\tthis.root.removeChild( item );\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tTree.prototype.getNodeByIndex = function(index)\r\n\t{\r\n\t\tvar items = this.root.querySelectorAll(\".ltreeitem\");\r\n\t\treturn items[index];\r\n\t}\r\n\r\n\t//private ********************************\r\n\r\n\tTree.prototype.unmarkAllAsSelected = function()\r\n\t{\r\n\t\tthis.root.classList.remove(\"selected\");\r\n\t\tvar selected_array = this.root.querySelectorAll(\".ltreeitem.selected\");\r\n\t\tif(selected_array)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < selected_array.length; i++)\r\n\t\t\t\tselected_array[i].classList.remove(\"selected\");\r\n\t\t}\r\n\t\tvar semiselected = this.root.querySelectorAll(\".ltreeitem.semiselected\");\r\n\t\tfor(var i = 0; i < semiselected.length; i++)\r\n\t\t\tsemiselected[i].classList.remove(\"semiselected\");\r\n\t}\r\n\r\n\tTree.prototype.isNodeSelected = function( node )\r\n\t{\r\n\t\t//already selected\r\n\t\tif( node.classList.contains(\"selected\") ) \r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tTree.prototype.markAsSelected = function( node, add_to_existing_selection )\r\n\t{\r\n\t\t//already selected\r\n\t\tif( node.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\t//clear old selection\r\n\t\tif(!add_to_existing_selection)\r\n\t\t\tthis.unmarkAllAsSelected();\r\n\r\n\t\t//mark as selected (it was node.title_element?)\r\n\t\tnode.classList.add(\"selected\");\r\n\r\n\t\t//go up and semiselect\r\n\t\tvar parent = this.getParent( node );\r\n\t\tvar visited = [];\r\n\t\twhile(parent && visited.indexOf(parent) == -1)\r\n\t\t{\r\n\t\t\tparent.classList.add(\"semiselected\");\r\n\t\t\tvisited.push( parent );\r\n\t\t\tparent = this.getParent( parent );\r\n\t\t}\r\n\t\t/*\r\n\t\tvar parent = node.parentNode.parentNode; //two elements per level\r\n\t\twhile(parent && parent.classList.contains(\"ltreeitem\"))\r\n\t\t{\r\n\t\t\tparent.title_element.classList.add(\"semiselected\");\r\n\t\t\tparent = parent.parentNode.parentNode;\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\t//updates the widget to collapse\r\n\tTree.prototype._updateListBox = function( node, options, current_level )\r\n\t{\r\n\t\tif(!node)\r\n\t\t\treturn;\r\n\r\n\t\tvar that = this;\r\n\r\n\t\tif(!node.listbox)\r\n\t\t{\r\n\t\t\tvar pre = node.title_element.querySelector(\".collapsebox\");\r\n\t\t\tvar box = LiteGUI.createLitebox(true, function(e) { \r\n\t\t\t\tthat.onClickBox(e, node);\r\n\t\t\t\tLiteGUI.trigger( that.root, \"item_collapse_change\", { item: node, data: box.getValue() } );\r\n\t\t\t});\r\n\t\t\tbox.stopPropagation = true;\r\n\t\t\tbox.setEmpty(true);\r\n\t\t\tpre.appendChild(box);\r\n\t\t\tnode.listbox = box;\r\n\t\t}\r\n\r\n\t\tif( (options && options.collapsed) || current_level >= this.collapsed_depth )\r\n\t\t\tnode.listbox.collapse();\r\n\r\n\t\tvar child_elements = this.getChildren( node.dataset[\"item_id\"] );\r\n\t\tif(!child_elements)\r\n\t\t\treturn; //null\r\n\r\n\t\tif(child_elements.length)\r\n\t\t\tnode.listbox.setEmpty(false);\r\n\t\telse\r\n\t\t\tnode.listbox.setEmpty(true);\r\n\t}\r\n\r\n\tTree.prototype.onClickBox = function(e, node)\r\n\t{\r\n\t\tvar children = this.getChildren( node );\r\n\r\n\t\tif(!children)\r\n\t\t\treturn;\r\n\r\n\t\t//update children visibility\r\n\t\tfor(var i = 0; i < children.length; ++i)\r\n\t\t{\r\n\t\t\tvar child = children[i];\r\n\t\t\t\r\n\t\t\tvar child_parent = this.getParent( child );\r\n\t\t\tvar visible = true;\r\n\t\t\tif( child_parent )\r\n\t\t\t\tvisible = this._isNodeChildrenVisible(child_parent);\r\n\t\t\tif(visible)\r\n\t\t\t\tchild.classList.remove(\"hidden\");\r\n\t\t\telse\r\n\t\t\t\tchild.classList.add(\"hidden\");\r\n\t\t}\r\n\t}\r\n\r\n\treturn LiteGUI.Tree = Tree;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/widgets',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\r\n\tfunction Button( value, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tif(typeof(options) === \"function\")\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litegui button\";\r\n\r\n\t\tthis.root = element;\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.className = \"litebutton\";\r\n\t\tthis.content = button;\r\n\t\telement.appendChild(button);\r\n\r\n\t\tbutton.innerHTML = value;\t\t\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tthat.click();\r\n\t\t});\r\n\r\n\t\tthis.click = function()\r\n\t\t{\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call(that);\r\n\t\t}\r\n\t}\r\n\r\n\tLiteGUI.Button = Button;\r\n\r\n\t/**\r\n\t* SearchBox \r\n\t*\r\n\t* @class SearchBox\r\n\t* @constructor\r\n\t* @param {*} value\r\n\t* @param {Object} options\r\n\t*/\r\n\r\n\tfunction SearchBox( value, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litegui searchbox\";\r\n\t\tvar placeholder = (options.placeholder != null ? options.placeholder : \"Search\");\r\n\t\telement.innerHTML = \"<input value='\"+value+\"' placeholder='\"+ placeholder +\"'/>\";\r\n\t\tthis.input = element.querySelector(\"input\");\r\n\t\tthis.root = element;\r\n\t\tvar that = this;\r\n\r\n\t\tthis.input.onchange = function(e) { \r\n\t\t\tvar value = e.target.value;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call(that,value);\r\n\t\t};\r\n\t}\r\n\r\n\tSearchBox.prototype.setValue = function(v) { this.input.value = v; this.input.onchange(); };\r\n\tSearchBox.prototype.getValue = function() { return this.input.value; };\r\n\r\n\tLiteGUI.SearchBox = SearchBox;\r\n\r\n\r\n\t/**\r\n\t* ContextMenu \r\n\t*\r\n\t* @class ContextMenu \r\n\t* @constructor\r\n\t* @param {Array} values (allows object { title: \"Nice text\", callback: function ... })\r\n\t* @param {Object} options [optional] Some options:\\\r\n\t* - title: title to show on top of the menu\r\n\t* - callback: function to call when an option is clicked, it receives the item information\r\n\t* - ignore_item_callbacks: ignores the callback inside the item, it just calls the options.callback \r\n\t* - event: you can pass a MouseEvent, this way the ContextMenu appears in that position\r\n\t*/\r\n\tfunction ContextMenu( values, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tthis.options = options;\r\n\t\tvar that = this;\r\n\r\n\t\t//to link a menu with its parent\r\n\t\tif(options.parentMenu)\r\n\t\t{\r\n\t\t\tif( options.parentMenu.constructor !== this.constructor )\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"parentMenu must be of class ContextMenu, ignoring it\");\r\n\t\t\t\toptions.parentMenu = null;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.parentMenu = options.parentMenu;\r\n\t\t\t\tthis.parentMenu.lock = true;\r\n\t\t\t\tthis.parentMenu.current_submenu = this;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( options.event && options.event.constructor.name !== \"MouseEvent\" && options.event.constructor.name !== \"PointerEvent\" && options.event.constructor.name !== \"CustomEvent\" )\r\n\t\t{\r\n\t\t\tconsole.error(\"Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it.\");\r\n\t\t\toptions.event = null;\r\n\t\t}\r\n\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\troot.className = \"litecontextmenu litemenubar-panel\";\r\n\t\troot.style.minWidth = 100;\r\n\t\troot.style.minHeight = 100;\r\n\t\troot.style.pointerEvents = \"none\";\r\n\t\tsetTimeout( function() { root.style.pointerEvents = \"auto\"; },100); //delay so the mouse up event is not caugh by this element\r\n\r\n\t\t//this prevents the default context browser menu to open in case this menu was created when pressing right button \r\n\t\troot.addEventListener(\"mouseup\", function(e){ \r\n\t\t\te.preventDefault(); return true; \r\n\t\t}, true);\r\n\t\troot.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\t\t\te.preventDefault(); \r\n\t\t\treturn false;\r\n\t\t},true);\r\n\r\n\t\troot.addEventListener(\"mousedown\", function(e){ \r\n\t\t\tif(e.button == 2)\r\n\t\t\t{\r\n\t\t\t\tthat.close();\r\n\t\t\t\te.preventDefault(); return true; \r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\r\n\t\tthis.root = root;\r\n\r\n\t\t//title\r\n\t\tif(options.title)\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.className = \"litemenu-title\";\r\n\t\t\telement.innerHTML = options.title;\r\n\t\t\troot.appendChild(element);\r\n\t\t}\r\n\r\n\t\t//entries\r\n\t\tvar num = 0;\r\n\t\tfor(var i in values)\r\n\t\t{\r\n\t\t\tvar name = values.constructor == Array ? values[i] : i;\r\n\t\t\tif( name != null && name.constructor !== String )\r\n\t\t\t\tname = name.content === undefined ? String(name) : name.content;\r\n\t\t\tvar value = values[i];\r\n\t\t\tthis.addItem( name, value, options );\r\n\t\t\tnum++;\r\n\t\t}\r\n\r\n\t\t//close on leave\r\n\t\troot.addEventListener(\"mouseleave\", function(e) {\r\n\t\t\tif(that.lock)\r\n\t\t\t\treturn;\r\n\t\t\tif(root.closing_timer)\r\n\t\t\t\tclearTimeout( root.closing_timer );\r\n\t\t\troot.closing_timer = setTimeout( that.close.bind(that, e), 500 );\r\n\t\t\t//that.close(e);\r\n\t\t});\r\n\r\n\t\troot.addEventListener(\"mouseenter\", function(e) {\r\n\t\t\tif(root.closing_timer)\r\n\t\t\t\tclearTimeout( root.closing_timer );\r\n\t\t});\r\n\r\n\t\tfunction on_mouse_wheel(e)\r\n\t\t{\r\n\t\t\tvar pos = parseInt( root.style.top );\r\n\t\t\troot.style.top = (pos + e.deltaY * 0.1).toFixed() + \"px\";\r\n\t\t\te.preventDefault();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\troot.addEventListener(\"wheel\", on_mouse_wheel, true);\r\n\t\troot.addEventListener(\"mousewheel\", on_mouse_wheel, true);\r\n\r\n\r\n\t\t//insert before checking position\r\n\t\tvar root_document = document;\r\n\t\tif(options.event)\r\n\t\t\troot_document = options.event.target.ownerDocument; \r\n\r\n\t\tif(!root_document)\r\n\t\t\troot_document = document;\r\n\t\troot_document.body.appendChild(root);\r\n\r\n\t\t//compute best position\r\n\t\tvar left = options.left || 0;\r\n\t\tvar top = options.top || 0;\r\n\t\tif(options.event)\r\n\t\t{\r\n\t\t\tif( options.event.constructor.name !== \"MouseEvent\" && options.event.constructor.name !== \"PointerEvent\" && options.event.constructor.name !== \"CustomEvent\" )\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"Event passed to ContextMenu is not of type MouseEvent\");\r\n\t\t\t\toptions.event = null;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tleft = (options.event.pageX - 10);\r\n\t\t\t\ttop = (options.event.pageY - 10);\r\n\t\t\t\tif(options.title)\r\n\t\t\t\t\ttop -= 20;\r\n\r\n\t\t\t\tif(options.parentMenu)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar rect = options.parentMenu.root.getBoundingClientRect();\r\n\t\t\t\t\tleft = rect.left + rect.width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar body_rect = document.body.getBoundingClientRect();\r\n\t\t\t\tvar root_rect = root.getBoundingClientRect();\r\n\r\n\t\t\t\tif(left > (body_rect.width - root_rect.width - 10))\r\n\t\t\t\t\tleft = (body_rect.width - root_rect.width - 10);\r\n\t\t\t\tif(top > (body_rect.height - root_rect.height - 10))\r\n\t\t\t\t\ttop = (body_rect.height - root_rect.height - 10);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\troot.style.left = left + \"px\";\r\n\t\troot.style.top = top  + \"px\";\r\n\t}\r\n\r\n\tContextMenu.prototype.addItem = function( name, value, options )\r\n\t{\r\n\t\tvar that = this;\r\n\t\toptions = options || {};\r\n\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litemenu-entry submenu\";\r\n\r\n\t\tvar disabled = false;\r\n\r\n\t\tif(value === null)\r\n\t\t{\r\n\t\t\telement.classList.add(\"separator\");\r\n\t\t\t//element.innerHTML = \"<hr/>\"\r\n\t\t\t//continue;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\telement.innerHTML = value && value.title ? value.title : name;\r\n\t\t\telement.value = value;\r\n\r\n\t\t\tif(value)\r\n\t\t\t{\r\n\t\t\t\tif(value.disabled)\r\n\t\t\t\t{\r\n\t\t\t\t\tdisabled = true;\r\n\t\t\t\t\telement.classList.add(\"disabled\");\r\n\t\t\t\t}\r\n\t\t\t\tif(value.submenu || value.has_submenu)\r\n\t\t\t\t\telement.classList.add(\"has_submenu\");\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof(value) == \"function\")\r\n\t\t\t{\r\n\t\t\t\telement.dataset[\"value\"] = name;\r\n\t\t\t\telement.onclick_callback = value;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\telement.dataset[\"value\"] = value;\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild(element);\r\n\t\tif(!disabled)\r\n\t\t\telement.addEventListener(\"click\", inner_onclick);\r\n\t\tif(options.autoopen)\r\n\t\t\telement.addEventListener(\"mouseenter\", inner_over);\r\n\r\n\t\tfunction inner_over(e)\r\n\t\t{\r\n\t\t\tvar value = this.value;\r\n\t\t\tif(!value || !value.has_submenu)\r\n\t\t\t\treturn;\r\n\t\t\tinner_onclick.call(this,e);\r\n\t\t}\r\n\r\n\t\t//menu option clicked\r\n\t\tfunction inner_onclick(e) {\r\n\t\t\tvar value = this.value;\r\n\t\t\tvar close_parent = true;\r\n\r\n\t\t\tif(that.current_submenu)\r\n\t\t\t\tthat.current_submenu.close(e);\r\n\r\n\t\t\t//global callback\r\n\t\t\tif(options.callback) \r\n\t\t\t{\r\n\t\t\t\tvar r = options.callback.call(that, value, options, e );\r\n\t\t\t\tif(r === true)\r\n\t\t\t\t\tclose_parent = false;\r\n\t\t\t}\r\n\r\n\t\t\t//special cases\r\n\t\t\tif(value)\r\n\t\t\t{\r\n\t\t\t\tif (value.callback && !options.ignore_item_callbacks && value.disabled !== true )  //item callback\r\n\t\t\t\t{\r\n\t\t\t\t\tvar r = value.callback.call( this, value, options, e, that );\r\n\t\t\t\t\tif(r === true)\r\n\t\t\t\t\t\tclose_parent = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(value.submenu)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!value.submenu.options)\r\n\t\t\t\t\t\tthrow(\"ContextMenu submenu needs options\");\r\n\t\t\t\t\tvar submenu = new LiteGUI.ContextMenu( value.submenu.options, {\r\n\t\t\t\t\t\tcallback: value.submenu.callback,\r\n\t\t\t\t\t\tevent: e,\r\n\t\t\t\t\t\tparentMenu: that,\r\n\t\t\t\t\t\tignore_item_callbacks: value.submenu.ignore_item_callbacks,\r\n\t\t\t\t\t\ttitle: value.submenu.title,\r\n\t\t\t\t\t\tautoopen: options.autoopen\r\n\t\t\t\t\t});\r\n\t\t\t\t\tclose_parent = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(close_parent && !that.lock)\r\n\t\t\t\tthat.close();\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tContextMenu.prototype.close = function(e, ignore_parent_menu)\r\n\t{\r\n\t\tif(this.root.parentNode)\r\n\t\t\tthis.root.parentNode.removeChild( this.root );\r\n\t\tif(this.parentMenu && !ignore_parent_menu)\r\n\t\t{\r\n\t\t\tthis.parentMenu.lock = false;\r\n\t\t\tthis.parentMenu.current_submenu = null;\r\n\t\t\tif( e === undefined )\r\n\t\t\t\tthis.parentMenu.close();\r\n\t\t\telse if( e && !LiteGUI.isCursorOverElement( e, this.parentMenu.root) )\r\n\t\t\t\tLiteGUI.trigger( this.parentMenu.root, \"mouseleave\", e );\r\n\t\t}\r\n\t\tif(this.current_submenu)\r\n\t\t\tthis.current_submenu.close(e, true);\r\n\t\tif(this.root.closing_timer)\r\n\t\t\tclearTimeout( this.root.closing_timer );\r\n\t}\r\n\r\n\t//returns the top most menu\r\n\tContextMenu.prototype.getTopMenu = function()\r\n\t{\r\n\t\tif( this.options.parentMenu )\r\n\t\t\treturn this.options.parentMenu.getTopMenu();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tContextMenu.prototype.getFirstEvent = function()\r\n\t{\r\n\t\tif( this.options.parentMenu )\r\n\t\t\treturn this.options.parentMenu.getFirstEvent();\r\n\t\treturn this.options.event;\r\n\t}\r\n\r\n\tLiteGUI.ContextMenu = ContextMenu;\r\n\tLiteGUI.ContextualMenu = ContextMenu; //LEGACY: REMOVE\r\n\r\n\r\n\tfunction Checkbox( value, on_change)\r\n\t{\r\n\t\tvar that = this;\r\n\t\tthis.value = value;\r\n\r\n\t\tvar root = this.root = document.createElement(\"span\");\r\n\t\troot.className = \"litecheckbox inputfield\";\r\n\t\troot.dataset[\"value\"] = value;\r\n\r\n\t\tvar element = this.element = document.createElement(\"span\");\r\n\t\telement.className = \"fixed flag checkbox \"+(value ? \"on\" : \"off\");\r\n\t\troot.appendChild( element );\r\n\t\t\r\n\t\troot.addEventListener(\"click\", onClick.bind(this) );\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\tthis.setValue( this.root.dataset[\"value\"] != \"true\" );\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\tthis.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(this.value === v)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif( this.root.dataset[\"value\"] == v.toString())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.root.dataset[\"value\"] = v;\r\n\t\t\tif(v)\r\n\t\t\t{\r\n\t\t\t\tthis.element.classList.remove(\"off\");\r\n\t\t\t\tthis.element.classList.add(\"on\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.element.classList.remove(\"on\");\r\n\t\t\t\tthis.element.classList.add(\"off\");\r\n\t\t\t}\r\n\t\t\tvar old_value = this.value;\r\n\t\t\tthis.value = v;\r\n\r\n\t\t\tif(on_change)\r\n\t\t\t\ton_change( v, old_value );\r\n\t\t}\r\n\r\n\t\tthis.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.value;\r\n\t\t\t//return this.root.dataset[\"value\"] == \"true\";\r\n\t\t}\r\n\t}\t\r\n\r\n\tLiteGUI.Checkbox = Checkbox;\r\n\r\n\r\n\t//the tiny box to expand the children of a node\r\n\tfunction createLitebox(state, on_change)\r\n\t{\r\n\t\tvar element = document.createElement(\"span\");\r\n\t\telement.className = \"listbox \" + (state ? \"listopen\" : \"listclosed\");\r\n\t\telement.innerHTML = state ? \"&#9660;\" : \"&#9658;\";\r\n\t\telement.dataset[\"value\"] = state ? \"open\" : \"closed\";\r\n\t\telement.addEventListener(\"click\", onClick );\r\n\t\telement.on_change_callback = on_change;\r\n\r\n\t\telement.setEmpty = function(v)\r\n\t\t{\r\n\t\t\tif(v)\r\n\t\t\t\tthis.classList.add(\"empty\");\r\n\t\t\telse\r\n\t\t\t\tthis.classList.remove(\"empty\");\r\n\t\t}\r\n\r\n\t\telement.expand = function()\r\n\t\t{\r\n\t\t\tthis.setValue(true);\r\n\t\t}\r\n\r\n\t\telement.collapse = function()\r\n\t\t{\r\n\t\t\tthis.setValue(false);\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(this.dataset[\"value\"] == (v ? \"open\" : \"closed\"))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(!v)\r\n\t\t\t{\r\n\t\t\t\tthis.dataset[\"value\"] = \"closed\";\r\n\t\t\t\tthis.innerHTML = \"&#9658;\";\r\n\t\t\t\tthis.classList.remove(\"listopen\");\r\n\t\t\t\tthis.classList.add(\"listclosed\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.dataset[\"value\"] = \"open\";\r\n\t\t\t\tthis.innerHTML = \"&#9660;\";\r\n\t\t\t\tthis.classList.add(\"listopen\");\r\n\t\t\t\tthis.classList.remove(\"listclosed\");\r\n\t\t\t}\r\n\r\n\t\t\tif(on_change)\r\n\t\t\t\ton_change( this.dataset[\"value\"] );\r\n\t\t}\r\n\r\n\t\telement.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.dataset[\"value\"];\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\t//console.log(\"CLICK\");\r\n\t\t\tvar box = e.target;\r\n\t\t\tbox.setValue( this.dataset[\"value\"] == \"open\" ? false : true );\r\n\t\t\tif(this.stopPropagation)\r\n\t\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\t\r\n\r\n\tLiteGUI.createLitebox = createLitebox;\r\n\r\n\t/**\r\n\t* List \r\n\t*\r\n\t* @class List\r\n\t* @constructor\r\n\t* @param {String} id\r\n\t* @param {Array} values\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction List( id, items, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = this.root = document.createElement(\"ul\");\r\n\t\troot.id = id;\r\n\t\troot.className = \"litelist\";\r\n\t\tthis.items = [];\r\n\t\tvar that = this;\r\n\r\n\t\tthis.callback = options.callback;\r\n\r\n\t\t//walk over every item in the list\r\n\t\tfor(var i in items)\r\n\t\t{\r\n\t\t\tvar item = document.createElement(\"li\");\r\n\t\t\titem.className = \"list-item\";\r\n\t\t\titem.data = items[i];\r\n\t\t\titem.dataset[\"value\"] = items[i];\r\n\r\n\t\t\tvar content = \"\";\r\n\t\t\tif(typeof(items[i]) == \"string\")\r\n\t\t\t\tcontent = items[i] + \"<span class='arrow'></span>\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcontent = (items[i].name || items[i].title || \"\") + \"<span class='arrow'></span>\";\r\n\t\t\t\tif(items[i].id)\r\n\t\t\t\t\titem.id = items[i].id;\r\n\t\t\t}\r\n\t\t\titem.innerHTML = content;\r\n\r\n\t\t\titem.addEventListener(\"click\", function() {\r\n\r\n\t\t\t\tvar list = root.querySelectorAll(\".list-item.selected\");\r\n\t\t\t\tfor(var j = 0; j < list.length; ++j)\r\n\t\t\t\t\tlist[j].classList.remove(\"selected\");\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\t\tLiteGUI.trigger( that.root, \"wchanged\", this );\r\n\t\t\t\tif(that.callback)\r\n\t\t\t\t\tthat.callback( this.data  );\r\n\t\t\t});\r\n\r\n\t\t\troot.appendChild(item);\r\n\t\t}\r\n\r\n\r\n\t\tif(options.parent)\r\n\t\t{\r\n\t\t\tif(options.parent.root)\r\n\t\t\t\toptions.parent.root.appendChild( root );\r\n\t\t\telse\r\n\t\t\t\toptions.parent.appendChild( root );\r\n\t\t}\r\n\t}\r\n\r\n\tList.prototype.getSelectedItem = function()\r\n\t{\r\n\t\treturn this.root.querySelector(\".list-item.selected\");\r\n\t}\r\n\r\n\tList.prototype.setSelectedItem = function( name )\r\n\t{\r\n\t\tvar items = this.root.querySelectorAll(\".list-item\");\r\n\t\tfor(var i = 0; i < items.length; i++)\r\n\t\t{\r\n\t\t\tvar item = items[i];\r\n\t\t\tif(item.data == name)\r\n\t\t\t{\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tLiteGUI.List = List;\r\n\r\n\t/**\r\n\t* Slider \r\n\t*\r\n\t* @class Slider\r\n\t* @constructor\r\n\t* @param {Number} value\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction Slider(value, options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar root = this.root = document.createElement(\"div\");\r\n\t\tvar that = this;\r\n\t\tthis.value = value;\r\n\t\troot.className = \"liteslider\";\r\n\r\n\t\tthis.setValue = function(value, skip_event)\r\n\t\t{\r\n\t\t\t//var width = canvas.getClientRects()[0].width;\r\n\t\t\tvar min = options.min || 0.0;\r\n\t\t\tvar max = options.max || 1.0;\r\n\t\t\tif(value < min) value = min;\r\n\t\t\telse if(value > max) value = max;\r\n\t\t\tvar range = max - min;\r\n\t\t\tvar norm = (value - min) / range;\r\n\t\t\tvar percentage = (norm*100).toFixed(1) + \"%\";\r\n\t\t\tvar percentage2 = (norm*100+2).toFixed(1) + \"%\";\r\n\t\t\troot.style.background = \"linear-gradient(to right, #999 \" + percentage + \", #FC0 \"+percentage2+\", #333 \" + percentage2 + \")\";\r\n\r\n\t\t\tif(value != this.value)\r\n\t\t\t{\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tif(!skip_event)\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.trigger(this.root, \"change\", value );\r\n\t\t\t\t\tif(this.onChange)\r\n\t\t\t\t\t\tthis.onChange( value );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction setFromX(x)\r\n\t\t{\r\n\t\t\tvar rect = root.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn;\r\n\t\t\tvar width = rect.width;\r\n\t\t\tvar norm = x / width;\r\n\t\t\tvar min = options.min || 0.0;\r\n\t\t\tvar max = options.max || 1.0;\r\n\t\t\tvar range = max - min;\r\n\t\t\tthat.setValue( range * norm + min );\r\n\t\t}\r\n\r\n\t\tvar doc_binded = null;\r\n\r\n\t\troot.addEventListener(\"mousedown\", function(e) {\r\n\t\t\tvar mouseX, mouseY;\r\n\t\t\tif(e.offsetX) { mouseX = e.offsetX; mouseY = e.offsetY; }\r\n\t\t\telse if(e.layerX) { mouseX = e.layerX; mouseY = e.layerY; }\t\r\n\t\t\tsetFromX(mouseX);\r\n\t\t\tdoc_binded = root.ownerDocument;\r\n\t\t\tdoc_binded.addEventListener(\"mousemove\", onMouseMove );\r\n\t\t\tdoc_binded.addEventListener(\"mouseup\", onMouseUp );\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tfunction onMouseMove(e)\r\n\t\t{\r\n\t\t\tvar rect = root.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn;\r\n\t\t\tvar x = e.x === undefined ? e.pageX : e.x;\r\n\t\t\tvar mouseX = x - rect.left;\r\n\t\t\tsetFromX(mouseX);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction onMouseUp(e)\r\n\t\t{\r\n\t\t\tvar doc = doc_binded || document;\r\n\t\t\tdoc_binded = null;\r\n\t\t\tdoc.removeEventListener(\"mousemove\", onMouseMove );\r\n\t\t\tdoc.removeEventListener(\"mouseup\", onMouseUp );\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.setValue(value);\r\n\t}\r\n\r\n\tLiteGUI.Slider = Slider;\r\n\r\n\t/**\r\n\t* LineEditor \r\n\t*\r\n\t* @class LineEditor\r\n\t* @constructor\r\n\t* @param {Number} value\r\n\t* @param {Object} options\r\n\t*/\r\n\r\n\tfunction LineEditor(value, options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"curve \" + (options.extraclass ? options.extraclass : \"\");\r\n\t\telement.style.minHeight = \"50px\";\r\n\t\telement.style.width = options.width || \"100%\";\r\n\r\n\t\telement.bgcolor = options.bgcolor || \"#222\";\r\n\t\telement.pointscolor = options.pointscolor || \"#5AF\";\r\n\t\telement.linecolor = options.linecolor || \"#444\";\r\n\r\n\t\telement.value = value || [];\r\n\t\telement.xrange = options.xrange || [0,1]; //min,max\r\n\t\telement.yrange = options.yrange || [0,1]; //min,max\r\n\t\telement.defaulty = options.defaulty != null ? options.defaulty : 0.5;\r\n\t\telement.no_trespassing = options.no_trespassing || false;\r\n\t\telement.show_samples = options.show_samples || 0;\r\n\t\telement.options = options;\r\n\t\telement.style.minWidth = \"50px\";\r\n\t\telement.style.minHeight = \"20px\";\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tcanvas.width = options.width || 200;\r\n\t\tcanvas.height = options.height || 50;\r\n\t\telement.appendChild( canvas );\r\n\t\telement.canvas = canvas;\r\n\r\n\t\telement.addEventListener(\"mousedown\",onmousedown);\r\n\r\n\t\telement.getValueAt = function(x)\r\n\t\t{\r\n\t\t\tif(x < element.xrange[0] || x > element.xrange[1])\r\n\t\t\t\treturn element.defaulty;\r\n\r\n\t\t\tvar last = [ element.xrange[0], element.defaulty ];\r\n\t\t\tvar f = 0;\r\n\t\t\tfor(var i = 0; i < element.value.length; i += 1)\r\n\t\t\t{\r\n\t\t\t\tvar v = element.value[i];\r\n\t\t\t\tif(x == v[0]) return v[1];\r\n\t\t\t\tif(x < v[0])\r\n\t\t\t\t{\r\n\t\t\t\t\tf = (x - last[0]) / (v[0] - last[0]);\r\n\t\t\t\t\treturn last[1] * (1-f) + v[1] * f;\r\n\t\t\t\t}\r\n\t\t\t\tlast = v;\r\n\t\t\t}\r\n\r\n\t\t\tv = [ element.xrange[1], element.defaulty ];\r\n\t\t\tf = (x - last[0]) / (v[0] - last[0]);\r\n\t\t\treturn last[1] * (1-f) + v[1] * f;\r\n\t\t}\r\n\r\n\t\telement.resample = function(samples)\r\n\t\t{\r\n\t\t\tvar r = [];\r\n\t\t\tvar dx = (element.xrange[1] - element.xrange[0]) / samples;\r\n\t\t\tfor(var i = element.xrange[0]; i <= element.xrange[1]; i += dx)\r\n\t\t\t{\r\n\t\t\t\tr.push( element.getValueAt(i) );\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\telement.addValue = function(v)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < element.value; i++)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tif(value[0] < v[0]) continue;\r\n\t\t\t\telement.value.splice(i,0,v);\r\n\t\t\t\tredraw();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\telement.value.push(v);\r\n\t\t\tredraw();\r\n\t\t}\r\n\r\n\t\t//value to canvas\r\n\t\tfunction convert(v)\r\n\t\t{\r\n\t\t\treturn [ canvas.width * ( (element.xrange[1] - element.xrange[0]) * v[0] + element.xrange[0]),\r\n\t\t\t\tcanvas.height * ((element.yrange[1] - element.yrange[0]) * v[1] + element.yrange[0])];\r\n\t\t}\r\n\r\n\t\t//canvas to value\r\n\t\tfunction unconvert(v)\r\n\t\t{\r\n\t\t\treturn [(v[0] / canvas.width - element.xrange[0]) / (element.xrange[1] - element.xrange[0]),\r\n\t\t\t\t\t(v[1] / canvas.height - element.yrange[0]) / (element.yrange[1] - element.yrange[0])];\r\n\t\t}\r\n\r\n\t\tvar selected = -1;\r\n\r\n\t\telement.redraw = function()\r\n\t\t{\r\n\t\t\tvar rect = canvas.parentNode.getBoundingClientRect();\r\n\t\t\tif(rect && canvas.width != rect.width && rect.width && rect.width < 1000)\r\n\t\t\t\tcanvas.width = rect.width;\r\n\t\t\tif(rect && canvas.height != rect.height && rect.height && rect.height < 1000)\r\n\t\t\t\tcanvas.height = rect.height;\r\n\r\n\t\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\tctx.translate(0,canvas.height);\r\n\t\t\tctx.scale(1,-1);\r\n\r\n\t\t\tctx.fillStyle = element.bgcolor;\r\n\t\t\tctx.fillRect(0,0,canvas.width,canvas.height);\r\n\r\n\t\t\tctx.strokeStyle = element.linecolor;\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\t//draw line\r\n\t\t\tvar pos = convert([element.xrange[0],element.defaulty]);\r\n\t\t\tctx.moveTo( pos[0], pos[1] );\r\n\r\n\t\t\tfor(var i in element.value)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tpos = convert(value);\r\n\t\t\t\tctx.lineTo( pos[0], pos[1] );\r\n\t\t\t}\r\n\r\n\t\t\tpos = convert([element.xrange[1],element.defaulty]);\r\n\t\t\tctx.lineTo( pos[0], pos[1] );\r\n\t\t\tctx.stroke();\r\n\r\n\t\t\t//draw points\r\n\t\t\tfor(var i = 0; i < element.value.length; i += 1)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tpos = convert(value);\r\n\t\t\t\tif(selected == i)\r\n\t\t\t\t\tctx.fillStyle = \"white\";\r\n\t\t\t\telse\r\n\t\t\t\t\tctx.fillStyle = element.pointscolor;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc( pos[0], pos[1], selected == i ? 4 : 2, 0, Math.PI * 2);\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\r\n\t\t\tif(element.show_samples)\r\n\t\t\t{\r\n\t\t\t\tvar samples = element.resample(element.show_samples);\r\n\t\t\t\tctx.fillStyle = \"#888\";\r\n\t\t\t\tfor(var i = 0; i < samples.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar value = [ i * ((element.xrange[1] - element.xrange[0]) / element.show_samples) + element.xrange[0], samples[i] ];\r\n\t\t\t\t\tpos = convert(value);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc( pos[0], pos[1], 2, 0, Math.PI * 2);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar last_mouse = [0,0];\r\n\t\tfunction onmousedown(evt)\r\n\t\t{\r\n\t\t\tdocument.addEventListener(\"mousemove\",onmousemove);\r\n\t\t\tdocument.addEventListener(\"mouseup\",onmouseup);\r\n\r\n\t\t\tvar rect = canvas.getBoundingClientRect();\r\n\t\t\tvar mousex = evt.clientX - rect.left;\r\n\t\t\tvar mousey = evt.clientY - rect.top;\r\n\r\n\t\t\tselected = computeSelected(mousex,canvas.height-mousey);\r\n\r\n\t\t\tif(selected == -1)\r\n\t\t\t{\r\n\t\t\t\tvar v = unconvert([mousex,canvas.height-mousey]);\r\n\t\t\t\telement.value.push(v);\r\n\t\t\t\tsortValues();\r\n\t\t\t\tselected = element.value.indexOf(v);\r\n\t\t\t}\r\n\r\n\t\t\tlast_mouse = [mousex,mousey];\r\n\t\t\telement.redraw();\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\r\n\t\tfunction onmousemove(evt)\r\n\t\t{\r\n\t\t\tvar rect = canvas.getBoundingClientRect();\r\n\t\t\tvar mousex = evt.clientX - rect.left;\r\n\t\t\tvar mousey = evt.clientY - rect.top;\r\n\r\n\t\t\tif(mousex < 0) mousex = 0;\r\n\t\t\telse if(mousex > canvas.width) mousex = canvas.width;\r\n\t\t\tif(mousey < 0) mousey = 0;\r\n\t\t\telse if(mousey > canvas.height) mousey = canvas.height;\r\n\r\n\t\t\t//dragging to remove\r\n\t\t\tif( selected != -1 && distance( [evt.clientX - rect.left, evt.clientY - rect.top], [mousex,mousey] ) > canvas.height * 0.5 )\r\n\t\t\t{\r\n\t\t\t\telement.value.splice(selected,1);\r\n\t\t\t\tonmouseup(evt);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar dx = last_mouse[0] - mousex;\r\n\t\t\tvar dy = last_mouse[1] - mousey;\r\n\t\t\tvar delta = unconvert([-dx,dy]);\r\n\t\t\tif(selected != -1)\r\n\t\t\t{\r\n\t\t\t\tvar minx = element.xrange[0];\r\n\t\t\t\tvar maxx = element.xrange[1];\r\n\r\n\t\t\t\tif(element.no_trespassing)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(selected > 0) minx = element.value[selected-1][0];\r\n\t\t\t\t\tif(selected < (element.value.length-1) ) maxx = element.value[selected+1][0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar v = element.value[selected];\r\n\t\t\t\tv[0] += delta[0];\r\n\t\t\t\tv[1] += delta[1];\r\n\t\t\t\tif(v[0] < minx) v[0] = minx;\r\n\t\t\t\telse if(v[0] > maxx) v[0] = maxx;\r\n\t\t\t\tif(v[1] < element.yrange[0]) v[1] = element.yrange[0];\r\n\t\t\t\telse if(v[1] > element.yrange[1]) v[1] = element.yrange[1];\r\n\t\t\t}\r\n\r\n\t\t\tsortValues();\r\n\t\t\telement.redraw();\r\n\t\t\tlast_mouse[0] = mousex;\r\n\t\t\tlast_mouse[1] = mousey;\r\n\t\t\tonchange();\r\n\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\r\n\t\tfunction onmouseup(evt)\r\n\t\t{\r\n\t\t\tselected = -1;\r\n\t\t\telement.redraw();\r\n\t\t\tdocument.removeEventListener(\"mousemove\",onmousemove);\r\n\t\t\tdocument.removeEventListener(\"mouseup\",onmouseup);\r\n\t\t\tonchange();\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\r\n\t\tfunction onresize(e)\r\n\t\t{\r\n\t\t\telement.redraw();\r\n\t\t}\r\n\t\t\r\n\t\tfunction onchange()\r\n\t\t{\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call(element,element.value);\r\n\t\t\telse\r\n\t\t\t\tLiteGUI.trigger(element,\"change\");\r\n\t\t}\r\n\r\n\t\tfunction distance(a,b) { return Math.sqrt( Math.pow(b[0]-a[0],2) + Math.pow(b[1]-a[1],2) ); };\r\n\r\n\t\tfunction computeSelected(x,y)\r\n\t\t{\r\n\t\t\tvar min_dist = 100000;\r\n\t\t\tvar max_dist = 8; //pixels\r\n\t\t\tvar selected = -1;\r\n\t\t\tfor(var i=0; i < element.value.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tvar pos = convert(value);\r\n\t\t\t\tvar dist = distance([x,y],pos);\r\n\t\t\t\tif(dist < min_dist && dist < max_dist)\r\n\t\t\t\t{\r\n\t\t\t\t\tmin_dist = dist;\r\n\t\t\t\t\tselected = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selected;\r\n\t\t}\r\n\r\n\t\tfunction sortValues()\r\n\t\t{\r\n\t\t\tvar v = null;\r\n\t\t\tif(selected != -1)\r\n\t\t\t\tv = element.value[selected];\r\n\t\t\telement.value.sort(function(a,b) { return a[0] - b[0]; });\r\n\t\t\tif(v)\r\n\t\t\t\tselected = element.value.indexOf(v);\r\n\t\t}\r\n\t\t\r\n\t\telement.redraw();\r\n\t\treturn element;\r\n\t}\r\n\r\n\tLiteGUI.LineEditor = LineEditor;\r\n\r\n\r\n\tfunction ComplexList( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"div\");\r\n\t\tthis.root.className = \"litecomplexlist\";\r\n\r\n\t\tthis.item_code = options.item_code || \"<div class='listitem'><span class='tick'><span>\"+LiteGUI.special_codes.tick+\"</span></span><span class='title'></span><button class='trash'>\"+LiteGUI.special_codes.close+\"</button></div>\";\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\r\n\t\tthis.selected = null;\r\n\t\tthis.onItemSelected = null;\r\n\t\tthis.onItemToggled = null;\r\n\t\tthis.onItemRemoved = null;\r\n\t}\r\n\r\n\tComplexList.prototype.addTitle = function( text )\r\n\t{\r\n\t\tvar elem = LiteGUI.createElement(\"div\",\".listtitle\",text);\r\n\t\tthis.root.appendChild( elem );\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tComplexList.prototype.addHTML = function( html, on_click )\r\n\t{\r\n\t\tvar elem = LiteGUI.createElement(\"div\",\".listtext\", html );\r\n\t\tif(on_click)\r\n\t\t\telem.addEventListener(\"mousedown\", on_click);\r\n\t\tthis.root.appendChild( elem );\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tComplexList.prototype.clear = function()\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\t}\r\n\r\n\tComplexList.prototype.addItem = function( item, text, is_enabled, can_be_removed )\r\n\t{\r\n\t\tvar title = text || item.content || item.name;\r\n\t\tvar elem = LiteGUI.createListItem( this.item_code, { \".title\": title } );\r\n\t\telem.item = item;\r\n\r\n\t\tif(is_enabled)\r\n\t\t\telem.classList.add(\"enabled\");\r\n\r\n\t\tif(!can_be_removed)\r\n\t\t\telem.querySelector(\".trash\").style.display = \"none\";\r\n\r\n\t\tvar that = this;\r\n\t\telem.addEventListener(\"mousedown\", function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.setSelected(true);\r\n\t\t\tif(that.onItemSelected)\r\n\t\t\t\tthat.onItemSelected( item, elem );\r\n\t\t});\r\n\t\telem.querySelector(\".tick\").addEventListener(\"mousedown\",  function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\telem.classList.toggle(\"enabled\");\r\n\t\t\tif(that.onItemToggled)\r\n\t\t\t\tthat.onItemToggled( item, elem, elem.classList.contains(\"enabled\"));\r\n\t\t});\r\n\r\n\t\telem.querySelector(\".trash\").addEventListener(\"mousedown\",function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tif(that.onItemRemoved)\r\n\t\t\t\tthat.onItemRemoved( item, elem );\r\n\t\t});\r\n\r\n\t\telem.setContent = function(v, is_html){\r\n\t\t\tif(is_html)\r\n\t\t\t\telem.querySelector(\".title\").innerHTML = v;\r\n\t\t\telse\r\n\t\t\t\telem.querySelector(\".title\").innerText = v;\r\n\t\t}\r\n\r\n\t\telem.toggleEnabled = function(v){\r\n\t\t\telem.classList.toggle(\"enabled\");\r\n\t\t}\r\n\r\n\t\telem.setSelected = function(v)\r\n\t\t{\r\n\t\t\tLiteGUI.removeClass( that.root, \"selected\" );\r\n\t\t\tif(v)\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\telse\r\n\t\t\t\tthis.classList.remove(\"selected\");\r\n\t\t\tthat.selected = elem.item;\r\n\t\t}\r\n\r\n\t\telem.show = function() { this.style.display = \"\"; }\r\n\t\telem.hide = function() { this.style.display = \"none\"; }\r\n\r\n\t\tthis.root.appendChild( elem );\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tLiteGUI.ComplexList = ComplexList;\r\n\r\n\treturn LiteGUI;\r\n});\ndefine('skylark-litegui/main',[\r\n\t\"./litegui\",\r\n\t\"./Area\",\r\n\t\"./Console\",\r\n\t\"./Dialog\",\r\n\t\"./Dragger\",\r\n\t\"./Inspector\",\r\n\t\"./Menubar\",\r\n\t\"./Panel\",\r\n\t\"./Split\",\r\n\t\"./Table\",\r\n\t\"./Tabs\",\r\n\t\"./Tree\",\r\n\t\"./widgets\"\r\n],function(LiteGUI){\r\n\treturn LiteGUI;\r\n});\ndefine('skylark-litegui', ['skylark-litegui/main'], function (main) { return main; });\n\n"]}
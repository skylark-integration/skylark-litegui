{"version":3,"sources":["skylark-litegui-all.js"],"names":["define","obj1","path","obj2","split","length","ns","i","name","Error","_attach","root","attach","obj","skylark","main","LiteGUI","content","panels","windows","undo_steps","modalbg_div","mainmenu","init","options","width","height","this","setWindowSize","container","document","getElementById","body","wrapped","createElement","style","position","overflow","appendChild","classList","contains","window","addEventListener","e","maximizeWindow","className","modalbg","display","menubar","createMenubar","gui_callback","close","trigger","element","event_name","params","origin","evt","createEvent","initCustomEvent","srcElement","dispatchEvent","__events","bind","event","callback","constructor","String","querySelectorAll","NodeList","Array","inner","dummy","widget","Object","defineProperty","enumerable","configurable","writable","value","unbind","removeEventListener","removeClass","elem","selector","class_name","list","remove","add","litegui_element","elements","parentNode","removeChild","getById","id","Menubar","w","h","boxShadow","setCursor","cursor","isCursorOverElement","left","pageX","top","pageY","rect","getBoundingClientRect","getRect","toClipboard","object","force_local","JSON","stringify","input","in_clipboard","queryCommandSupported","type","opacity","select","execCommand","console","log","err","warn","_safe_cliboard","localStorage","setItem","getLocalClipboard","data","getItem","parse","addCSS","code","innerHTML","getElementsByTagName","requireCSS","url","on_complete","link","rel","href","shift","media","head","onload","request","dataType","mimeType","xhr","XMLHttpRequest","open","responseType","overrideMimeType","nocache","setRequestHeader","load","response","status","error","LEvent","xmlparser","DOMParser","parseFromString","success","call","onerror","FormData","append","send","requestText","on_error","requestJSON","requestBinary","requireScript","on_progress","version","total","loaded_scripts","script","num","src","original_src","async","push","requireScriptSerial","addScript","newDiv","tag","id_class","events","t","substr","v","setAttribute","createListItem","values","childNodes","subelem","querySelector","innerText","createButton","undefined","getParents","parentElement","nodeType","Node","ELEMENT_NODE","newWindow","title","new_window","write","styles","outerHTML","scripts","showModalBackground","showMessage","dialog","Dialog","noclose","addButton","makeModal","popup","min_height","show","alert","confirm","paddingBottom","buttons","dataset","focus","prompt","textinput","textarea","keyCode","which","choice","choices","downloadURL","filename","download","click","downloadFile","file","File","Blob","URL","createObjectURL","setTimeout","revokeObjectURL","getUrlVars","hash","vars","hashes","location","slice","indexOf","getUrlVar","blur","draggable","dragger","on_start","on_finish","on_is_draggable","inner_mouse","getClientRects","x","y","stopPropagation","preventDefault","prev_x","clientX","prev_y","clientY","deltax","deltay","cloneObject","target","o","isFunction","Float32Array","apply","isArray","set","safeName","str","replace","special_codes","navicon","refresh","gear","open_folder","tick","trash","htmlEncode","html_code","htmlDecode","unicode_character","sizeToCSS","Math","abs","getElementWindow","doc","ownerDocument","defaultView","parentWindow","createDropArea","callback_drop","callback_enter","callback_exit","onDragEvent","onDrop","r","stopImmediatePropagation","prototype","eval_code","match","tpl","re","exec","Function","escapeHtmlEntities","text","c","entityTable","charCodeAt","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","Area","legacy","litearea","that","_computed_size","offsetWidth","offserHeight","content_id","split_direction","sections","autoresize","onResize","VERTICAL","HORIZONTAL","splitbar_size","getSection","computed_size","offsetHeight","sendResizeEvent","section","j","onresize","getWidth","getHeight","isVisible","adjustHeight","direction","sizes","editable","area1","area2","splitinfo","splitbar","dynamic_section","inner_mousemove","inner_mouseup","last_pos","size","h1","h2","w1","w2","moveSplit","immediateResize","inmediateResize","hide","showSection","hideSection","delta","min_size","minSplitSize","areas","a","b","d","setAreaSize","area","merge","main_section","query","Console","log_element","processKeyDown","_prompt","onAutocomplete","onProcessCommand","history","_history_offset","_input_blocked","cmd","trim","addMessage","pos","as_text","txt","con","children","scrollTop","update","args","arguments","join","clear","_ctor","MINIMIZED_WIDTH","title_height","getDialog","minWidth","minHeight","panel","minimize","detachable","closable","footer","fullcontent","scroll","close_button","maximize_button","maximize","minimize_button","hide_button","detach_button","detachWindow","enableProperties","on_attached_to_DOM","on_resize","on_detached_from_DOM","parent","center","litegui_item","bringToFront","minimized","resizable","setResizable","corner","mouse","is_corner","neww","newh","dockTo","dock_type","Panel","right","bottom","button","on_close","onclose","dialog_window","highlight","time","outline","old_box","splice","arrangeMinimized","reference_element","detach_window","fadeIn","transition","setPosition","setSize","setTitle","header","parent_width","parent_height","floor","adjustSize","margin","skip_timeout","extra","textContent","onbeforeunload","index","_old_height","reattachWindow","showAll","dialogs","hideAll","closeAll","Dragger","parseFloat","Number","precision","extraclass","wrap","full","disabled","dragger_class","toFixed","units","tabIndex","tab_index","inner_inc","doc_binded","inner_move","inner_up","requestPointerLock","screenX","screenY","inner_wheel","diff","movementX","movementY","axis","horizontal","activeElement","wheelDelta","deltaY","exitPointerLock","linear","pow","scale","step","shiftKey","ctrlKey","max","min","setRange","setValue","skip_event","getValue","Inspector","one_line","widgets","widgets_by_name","row_number","addContainer","random","name_width","widgets_width","noscroll","onchange","appendTo","widgets_per_row","getValues","setValues","at_front","insertBefore","firstChild","purgeElement","hasChildNodes","lastChild","current_section","_current_container","_current_container_stack","on_refresh","widget_parent","replaceChild","pushContainer","isContainerInStack","popContainer","aux","pop","setup","info","getWidget","inspectInstance","instance","properties","properties_info_example","properties_to_skip","getProperties","collectProperties","classObject","properties_info","getInspectorProperties","inner_clone","shared_options","Boolean","BYTES_PER_ELEMENT","is_number","properties_order","sorted_properties","showProperties","original","varname","assignValue","callback_update","on_addProperty","onShowProperties","current_value","getOwnPropertyDescriptor","__proto__","createWidget","inspector","widget_name","namewidth","contentwidth","content_width","pretitle","filling","content_class","content_element","onWidgetChange","expand_value","skip_wchange","widget_constructors","null","default","number","slider","string","color","boolean","checkbox","icon","vec2","vector2","vec3","vector3","vec4","vector4","enum","dropdown","combo","line","tree","datatree","pad","array","separator","registerWidget","func_name","charAt","toUpperCase","func","toLowerCase","applyOptions","addSeparator","addNull","addDefault","addCheckbox","addString","addNumber","addVector4","addVector3","addVector2","processOptions","inputtype","password","placeHolder","align","immediate","setIcon","img","background","paddingLeft","disable","enable","processElement","addStringButton","callback_button","button_width","inputfield","addTextarea","callback_keydown","callback_before","ret","wcontent","dragger1","marginLeft","dragger2","inner_before_change","draggers","inputs","elems","new_val","dragger3","addPad","minx","miny","maxx","maxy","backgroundImage","backgroundSize","backgroundRepeat","handler","_onMouseEvent","mousex","mousey","addInfo","nodeName","scrollToBottom","offsetTop","addSlider","slider_container","Slider","text_input","onChange","label_on","label","label_off","addFlags","flags","force_flags","f","flag_options","addCombo","stop_event","selected","item_value","item_index","item_title","items","item","selectedIndex","removeAttribute","setOptionValues","addComboButtons","buttonname","addTags","tags","inner_addtag","select_element","tagname","addList","list_height","infocontent","ul_elements","ul","inner_key","callback_dblclick","next","nextSibling","scrollIntoViewIfNeeded","block","behavior","prev","previousSibling","inner_item_click","multiselection","toggle","lis","inner_item_dblclick","insert_item","item_style","item_name","li_element","updateItems","new_values","item_selected","addItem","removeItem","getSelected","getByIndex","getIndex","selectIndex","add_to_selection","deselectIndex","scrollToIndex","selectAll","deselectAll","getNumberOfItems","filter","case_sensitive","use_string","needle","selectByFilter","button_text","button_classname","micro","attrs","wclick","addButtons","addIcon","img_url","image","padding","backgroundPosition","addColor","show_rgb","parseColor","input_element","myColor","jscolor","pickerFaceColor","pickerBorderColor","pickerInsetColor","rgb_intensity","pickerOnfocus","fromRGB","rgbelement","rgb","onImmediateChange","event_data","concat","toString","addFile","filename_element","files","generate_url","read_file","reader","FileReader","e2","result","readAsArrayBuffer","readAsDataURL","readAsText","addLine","line_editor","LineEditor","addTree","tree_root","Tree","tree_options","onItemSelected","node","updateTree","addDataTree","inner_recursive","root_node","addArray","data_type","max_items","length_widget","parseInt","row","widget_row_container","item_options","assign","data_options","startContainer","endContainer","addSection","end","collapsed","no_collapse","_last_container_stack","sectiontitle","localName","seccont","setCurrentSection","getCurrentSection","endCurrentSection","beginGroup","group","scrollable","endGroup","addTitle","help","scrollTo","on_update","updateWidgets","menu","is_open","auto_open","sort_entries","closing_time","attachToPanel","prev_length","tokens","current_token","current_pos","last_item","updateMenu","findMenu","order","hidePanels","showMenu","is_submenu","closing_by_leave","clearInterval","sorted_entries","sort","a_order","b_order","menu_item","has_submenu","checked","property","hasOwnProperty","isChecked","box","Split","vertical","n","Table","columns","column_fields","rows","_must_update_header","colums","setColumns","setRows","reuse","updateContent","addRow","skip_add","tr","td","column","updateRow","cells","field","updateCell","cell","avg_width","rest","th","data_row","Tabs","mode","tabs","current_tab","onMouseWheel","scrollLeft","tabs_width","tabs_height","tabs_root","tabs_by_index","getCurrentTab","getCurrentTabId","getPreviousTab","previous_tab","prepend","getTab","getTabByIndex","getNumOfTabs","getTabContent","tab","getTabIndex","addTab","safe_id","tab_className","bigicon","removeTab","after","plus_tab","tab_width","autoswitch","_timeout_mouseover","clearTimeout","tab_id","onTabClicked","tab_info","destroy","recomputeTabsByIndex","callback_context","selectTab","skip_callbacks","addPlusTab","addButtonTab","callback_canopen","callback_leave","tab_content","skip_events","setTabVisibility","child","removeAllTabs","keep_plus","hideTab","showTab","transferTab","target_tabs","newtab","detachTab","tab_window","newtabs","allow_rename","allow_drag","allow_multiselection","indent_offset","round","collapsed_depth","onBackgroundClicked","onContextMenu","root_item","createAndInsert","INDENT","insertItem","parent_id","_updateListBox","_findElement","element_index","parent_element_index","_findElementIndex","child_level","createTreeItem","existing_item","_insertInside","_isNodeChildrenVisible","markAsSelected","parent_index","offset_index","level","parent_level","indent","new_childNode","current_level","listbox","childNode","_findElementLastChildIndex","start_index","_findChildElements","only_direct","DOM","title_element","precontent","postcontent","visible","_editing","isNodeSelected","onItemAddToSelection","getSelectedItem","nodeList","last_index","current_index","_skip_scroll","_old_name","that2","new_name","old_name","onItemContextMenu","draggable_element","ev","dataTransfer","setData","onDragData","drag_data","count","skipdrag","item_id","getData","onDropItem","onMoveItem","moveItem","parent_item","filterByName","filterByRule","callback_to_filter","param","expandItem","parents","getParent","collapseItem","isInsideArea","rects","scrollToItem","setSelectedItem","send_event","unmarkAllAsSelected","addItemToSelection","removeItemFromSelection","getSelectedItems","isItemSelected","getChildren","id_or_node","getAncestors","isAncestor","dest","old_parent","old_parent_level","level_offset","unshift","new_level","remove_children","child_nodes","updateItem","incontent","updateItemId","old_id","new_id","keep_root","getNodeByIndex","selected_array","semiselected","add_to_existing_selection","visited","pre","createLitebox","onClickBox","setEmpty","collapse","child_elements","child_parent","SearchBox","placeholder","ContextMenu","parentMenu","lock","current_submenu","pointerEvents","on_mouse_wheel","closing_timer","root_document","body_rect","root_rect","List","ComplexList","item_code","onItemToggled","onItemRemoved","Button","inner_onclick","close_parent","ignore_item_callbacks","submenu","autoopen","onclick_callback","ignore_parent_menu","getTopMenu","getFirstEvent","ContextualMenu","Checkbox","on_change","old_value","state","on_change_callback","expand","setFromX","norm","range","percentage","percentage2","onMouseMove","mouseX","onMouseUp","offsetX","offsetY","layerX","layerY","bgcolor","pointscolor","linecolor","xrange","yrange","defaulty","no_trespassing","show_samples","canvas","convert","unconvert","onmousemove","onmouseup","min_dist","dist","distance","computeSelected","sortValues","last_mouse","redraw","getValueAt","last","resample","samples","dx","addValue","ctx","getContext","setTransform","translate","fillStyle","fillRect","strokeStyle","beginPath","moveTo","lineTo","stroke","arc","PI","fill","dy","sqrt","addHTML","html","on_click","is_enabled","can_be_removed",".title","setSelected","setContent","is_html","toggleEnabled"],"mappings":"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,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,SACAC,IAAA,OACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,SACAC,IAAA,QACAC,IAAA,OACAC,IAAA,OACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,UACAC,IAAA,OACAC,IAAA,MACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,SACAC,IAAA,KACAC,IAAA,KACAC,IAAA,KACAC,IAAA,UACAC,IAAA,KACAC,IAAA,MACAC,IAAA,QACAC,IAAA,MACAC,IAAA,UACAC,IAAA,MACAC,IAAA,MACAC,IAAA,MACAC,IAAA,QACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,QACAC,IAAA,UACAC,IAAA,OACAC,IAAA,MACAC,IAAA,QACAC,IAAA,OACAC,IAAA,QACAC,IAAA,SACAC,IAAA,KACAC,IAAA,KACAC,IAAA,KACAC,IAAA,UACAC,IAAA,KACAC,IAAA,MACAC,IAAA,SACAC,IAAA,QACAC,IAAA,MACAC,IAAA,UACAC,IAAA,MACAC,IAAA,MACAC,IAAA,MACAC,IAAA,QACAC,IAAA,WACAC,IAAA,QACAC,IAAA,MACAC,KAAA,OACAC,KAAA,SACAC,KAAA,QACAC,KAAA,QACAC,KAAA,QACAC,KAAA,QACAC,KAAA,SACAC,KAAA,QACAC,KAAA,OACAC,KAAA,QACAC,KAAA,UACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,QACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,OACAC,KAAA,SACAC,KAAA,OACAC,KAAA,QACAC,KAAA,QACAC,KAAA,QACAC,KAAA,OACAC,KAAA,QACAC,KAAA,KACAC,KAAA,OACAC,KAAA,MACAC,KAAA,QACAC,KAAA,SACAC,KAAA,QACAC,KAAA,OACAC,KAAA,QACAC,KAAA,MACAC,KAAA,MACAC,KAAA,KACAC,KAAA,MACAC,KAAA,MACAC,KAAA,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","file":"../skylark-litegui-all.js","sourcesContent":["define('skylark-langx-ns/_attach',[],function(){\r\n    return  function attach(obj1,path,obj2) {\r\n        if (typeof path == \"string\") {\r\n            path = path.split(\".\");//[path]\r\n        };\r\n        var length = path.length,\r\n            ns=obj1,\r\n            i=0,\r\n            name = path[i++];\r\n\r\n        while (i < length) {\r\n            ns = ns[name] = ns[name] || {};\r\n            name = path[i++];\r\n        }\r\n\r\n        if (ns[name]) {\r\n            if (obj2) {\r\n                throw new Error(\"This namespace already exists:\" + path);\r\n            }\r\n\r\n        } else {\r\n            ns[name] = obj2 || {};\r\n        }\r\n        return ns[name];\r\n    }\r\n});\ndefine('skylark-langx-ns/ns',[\r\n    \"./_attach\"\r\n], function(_attach) {\r\n    var root = {\r\n    \tattach : function(path,obj) {\r\n    \t\treturn _attach(root,path,obj);\r\n    \t}\r\n    };\r\n    return root;\r\n});\r\n\ndefine('skylark-langx-ns/main',[\r\n\t\"./ns\"\r\n],function(skylark){\r\n\treturn skylark;\r\n});\ndefine('skylark-langx-ns', ['skylark-langx-ns/main'], function (main) { return main; });\n\n\r\n/**\r\n* Core namespace of LiteGUI library, it holds some useful functions\r\n*\r\n* @class LiteGUI\r\n* @constructor\r\n*/\r\n\r\ndefine('skylark-litegui/litegui',[\r\n\t\"skylark-langx-ns\"\r\n],function(skylark){\r\n\r\n\r\n\tvar LiteGUI = {\r\n\t\troot: null,\r\n\t\tcontent: null,\r\n\r\n\t\tpanels: {},\r\n\t\twindows: [], //windows opened by the GUI (we need to know about them to close them once the app closes)\r\n\r\n\t\t//undo\r\n\t\tundo_steps: [],\r\n\r\n\t\t//used for blacken when a modal dialog is shown\r\n\t\tmodalbg_div: null,\r\n\r\n\t\t//the top menu\r\n\t\tmainmenu: null,\r\n\r\n\t\t/**\r\n\t\t* initializes the lib, must be called\r\n\t\t* @method init\r\n\t\t* @param {object} options some options are container, menubar, \r\n\t\t*/\r\n\t\tinit: function(options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\tif(options.width && options.height)\r\n\t\t\t\tthis.setWindowSize(options.width,options.height);\r\n\r\n\t\t\t//choose main container\r\n\t\t\tthis.container = null;\r\n\t\t\tif( options.container )\r\n\t\t\t\tthis.container = document.getElementById(options.container);\r\n\t\t\tif(!this.container )\r\n\t\t\t\tthis.container = document.body;\r\n\r\n\t\t\tif( options.wrapped )\r\n\t\t\t{\r\n\t\t\t\t//create litegui root element\r\n\t\t\t\tvar root = document.createElement(\"div\");\r\n\t\t\t\troot.style.position = \"relative\";\r\n\t\t\t\troot.style.overflow = \"hidden\";\r\n\t\t\t\tthis.root = root;\r\n\t\t\t\tthis.container.appendChild( root );\r\n\r\n\t\t\t\t//content: the main container for everything\r\n\t\t\t\tvar content = document.createElement(\"div\");\r\n\t\t\t\tthis.content = content;\r\n\t\t\t\tthis.root.appendChild(content);\r\n\r\n\t\t\t\t//maximize\r\n\t\t\t\tif( this.root.classList.contains(\"fullscreen\") )\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.addEventListener(\"resize\", function(e) { \r\n\t\t\t\t\t\tLiteGUI.maximizeWindow();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.root = this.content = this.container;\r\n\r\n\t\t\tthis.root.className = \"litegui-wrap fullscreen\";\r\n\t\t\tthis.content.className = \"litegui-maincontent\";\r\n\r\n\t\t\t//create modal dialogs container\r\n\t\t\tvar modalbg = this.modalbg_div = document.createElement(\"div\");\r\n\t\t\tthis.modalbg_div.className = \"litemodalbg\";\r\n\t\t\tthis.root.appendChild(this.modalbg_div);\r\n\t\t\tmodalbg.style.display = \"none\";\r\n\r\n\t\t\t//create menubar\r\n\t\t\tif(options.menubar)\r\n\t\t\t\tthis.createMenubar();\r\n\r\n\t\t\t//called before anything\r\n\t\t\tif(options.gui_callback)\r\n\t\t\t\toptions.gui_callback();\r\n\r\n\t\t\t//external windows\r\n\t\t\twindow.addEventListener(\"beforeunload\", function(e) {\r\n\t\t\t\tfor(var i in LiteGUI.windows)\r\n\t\t\t\t\tLiteGUI.windows[i].close();\r\n\t\t\t\tLiteGUI.windows = [];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Triggers a simple event in an object (similar to jQuery.trigger)\r\n\t\t* @method trigger\r\n\t\t* @param {Object} element could be an HTMLEntity or a regular object\r\n\t\t* @param {String} event_name the type of the event\r\n\t\t* @param {*} params it will be stored in e.detail\r\n\t\t* @param {*} origin it will be stored in e.srcElement\r\n\t\t*/\r\n\t\ttrigger: function(element, event_name, params, origin)\r\n\t\t{\r\n\t\t\tvar evt = document.createEvent( 'CustomEvent' );\r\n\t\t\tevt.initCustomEvent( event_name, true,true, params ); //canBubble, cancelable, detail\r\n\t\t\tevt.srcElement = origin;\r\n\t\t\tif( element.dispatchEvent )\r\n\t\t\t\telement.dispatchEvent( evt );\r\n\t\t\telse if( element.__events )\r\n\t\t\t\telement.__events.dispatchEvent( evt );\r\n\t\t\t//else nothing seems binded here so nothing to do\r\n\t\t\treturn evt;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Binds an event in an object (similar to jQuery.bind)\r\n\t\t* If the element is not an HTML entity a new one is created, attached to the object (as non-enumerable, called __events) and used\r\n\t\t* @method trigger\r\n\t\t* @param {Object} element could be an HTMLEntity, a regular object, a query string or a regular Array of entities\r\n\t\t* @param {String} event the string defining the event\r\n\t\t* @param {Function} callback where to call\r\n\t\t*/\r\n\t\tbind: function( element, event, callback )\r\n\t\t{\r\n\t\t\tif(!element)\r\n\t\t\t\tthrow(\"Cannot bind to null\");\r\n\t\t\tif(!event)\r\n\t\t\t\tthrow(\"Event bind missing\");\r\n\t\t\tif(!callback)\r\n\t\t\t\tthrow(\"Bind callback missing\");\r\n\r\n\t\t\tif(element.constructor === String)\r\n\t\t\t\telement = document.querySelectorAll( element );\r\n\t\t\t\t\r\n\t\t\tif(element.constructor === NodeList || element.constructor === Array)\r\n\t\t\t{\r\n\t\t\t\tfor(var i = 0; i < element.length; ++i)\r\n\t\t\t\t\tinner( element[i] );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tinner( element );\r\n\r\n\t\t\tfunction inner( element )\r\n\t\t\t{\r\n\t\t\t\tif(element.addEventListener)\r\n\t\t\t\t\telement.addEventListener(event, callback);\r\n\t\t\t\telse if(element.__events)\r\n\t\t\t\t\telement.__events.addEventListener( event, callback );\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t//create a dummy HTMLentity so we can use it to bind HTML events\r\n\t\t\t\t\tvar dummy = document.createElement(\"span\");\r\n\t\t\t\t\tdummy.widget = element; //double link\r\n\t\t\t\t\tObject.defineProperty( element, \"__events\", {\r\n\t\t\t\t\t\tenumerable: false,\r\n\t\t\t\t\t\tconfigurable: false,\r\n\t\t\t\t\t\twritable: false,\r\n\t\t\t\t\t\tvalue: dummy\r\n\t\t\t\t\t});\r\n\t\t\t\t\telement.__events.addEventListener( event, callback );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Unbinds an event in an object (similar to jQuery.unbind)\r\n\t\t* @method unbind\r\n\t\t* @param {Object} element could be an HTMLEntity or a regular object\r\n\t\t* @param {String} event the string defining the event\r\n\t\t* @param {Function} callback where to call\r\n\t\t*/\r\n\t\tunbind: function(element, event, callback)\r\n\t\t{\r\n\t\t\tif( element.removeEventListener )\r\n\t\t\t\telement.removeEventListener( event, callback );\r\n\t\t\telse if( element.__events && element.__events.removeEventListener )\r\n\t\t\t\telement.__events.removeEventListener( event, callback );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* removes a class \r\n\t\t* @method removeClass\r\n\t\t* @param {HTMLElement} root\r\n\t\t* @param {String} selector\r\n\t\t* @param {String} class_name\r\n\t\t*/\r\n\t\tremoveClass: function( elem, selector, class_name ){\r\n\t\t\tif(!class_name)\r\n\t\t\t{\r\n\t\t\t\tclass_name = selector;\r\n\t\t\t\tselector = \".\" + selector;\r\n\t\t\t}\r\n\t\t\tvar list = (elem || document).querySelectorAll( selector );\r\n\t\t\tfor(var i = 0; i < list.length; ++i)\r\n\t\t\t\tlist[i].classList.remove(class_name);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Appends litegui widget to the global interface\r\n\t\t* @method add\r\n\t\t* @param {Object} litegui_element\r\n\t\t*/\r\n\t\tadd: function( litegui_element )\r\n\t\t{\r\n\t\t\tthis.content.appendChild( litegui_element.root || litegui_element );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Remove from the interface, it is is an HTML element it is removed from its parent, if it is a widget the same.\r\n\t\t* @method remove\r\n\t\t* @param {Object} litegui_element it also supports HTMLentity, selector string or Array of elements\r\n\t\t*/\r\n\t\tremove: function( element )\r\n\t\t{\r\n\t\t\tif(!element)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif( element.constructor === String ) //selector\r\n\t\t\t{\r\n\t\t\t\tvar elements = document.querySelectorAll( element );\r\n\t\t\t\tfor(var i = 0; i < elements.length; ++i)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar element = elements[i];\r\n\t\t\t\t\tif(element && element.parentNode)\r\n\t\t\t\t\t\telement.parentNode.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif( element.constructor === Array || element.constructor === NodeList ) \r\n\t\t\t{\r\n\t\t\t\tfor(var i = 0; i < element.length; ++i)\r\n\t\t\t\t\tLiteGUI.remove( element[i] );\r\n\t\t\t}\r\n\t\t\telse if( element.root && element.root.parentNode ) //ltiegui widget\r\n\t\t\t\telement.root.parentNode.removeChild( element.root );\r\n\t\t\telse if( element.parentNode ) //regular HTML entity\r\n\t\t\t\telement.parentNode.removeChild( element );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* wrapper of document.getElementById\r\n\t\t* @method getById\r\n\t\t* @param {String} id\r\n\t\t* return {HTMLEntity}\r\n\t\t**/\r\n\t\tgetById: function(id)\r\n\t\t{\r\n\t\t\treturn document.getElementById(id);\r\n\t\t},\r\n\r\n\t\tcreateMenubar: function()\r\n\t\t{\r\n\t\t\tthis.menubar = new LiteGUI.Menubar(\"mainmenubar\");\r\n\t\t\tthis.add( this.menubar );\r\n\t\t},\r\n\r\n\t\tsetWindowSize: function(w,h)\r\n\t\t{\r\n\t\t\tvar style = this.root.style;\r\n\r\n\t\t\tif(w && h)\r\n\t\t\t{\r\n\t\t\t\tstyle.width = w+\"px\";\r\n\t\t\t\tstyle.height = h + \"px\";\r\n\t\t\t\tstyle.boxShadow = \"0 0 4px black\"\r\n\t\t\t\tthis.root.classList.remove(\"fullscreen\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif( this.root.classList.contains(\"fullscreen\") )\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.root.classList.add(\"fullscreen\");\r\n\t\t\t\tstyle.width = \"100%\";\r\n\t\t\t\tstyle.height = \"100%\";\r\n\t\t\t\tstyle.boxShadow = \"0 0 0\";\r\n\t\t\t}\r\n\t\t\tLiteGUI.trigger( LiteGUI, \"resized\");\r\n\t\t},\r\n\r\n\t\tmaximizeWindow: function()\r\n\t\t{\r\n\t\t\tthis.setWindowSize();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Change cursor\r\n\t\t* @method setCursor\r\n\t\t* @param {String} cursor\r\n\t\t**/\r\n\t\tsetCursor: function( name )\r\n\t\t{\r\n\t\t\tthis.root.style.cursor = name;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Test if the cursor is inside an element\r\n\t\t* @method setCursor\r\n\t\t* @param {String} cursor\r\n\t\t**/\r\n\t\tisCursorOverElement: function( event, element )\r\n\t\t{\r\n\t\t\tvar left = event.pageX;\r\n\t\t\tvar top = event.pageY;\r\n\t\t\tvar rect = element.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn false;\r\n\t\t\tif(top > rect.top && top < (rect.top + rect.height) &&\r\n\t\t\t\tleft > rect.left && left < (rect.left + rect.width) )\r\n\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetRect: function(element)\r\n\t\t{\r\n\t\t\treturn element.getBoundingClientRect();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Copy a string to the clipboard (it needs to be invoqued from a click event)\r\n\t\t* @method toClipboard\r\n\t\t* @param {String} data\r\n\t\t* @param {Boolean} force_local force to store the data in the browser clipboard (this one can be read back)\r\n\t\t**/\r\n\t\ttoClipboard: function( object, force_local )\r\n\t\t{\r\n\t\t\tif(object && object.constructor !== String )\r\n\t\t\t\tobject = JSON.stringify( object );\r\n\r\n\t\t\tvar input = null;\r\n\t\t\tvar in_clipboard = false;\r\n\t\t\tif( !force_local )\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tvar copySupported = document.queryCommandSupported('copy');\r\n\t\t\t\tinput = document.createElement(\"input\");\r\n\t\t\t\tinput.type = \"text\";\r\n\t\t\t\tinput.style.opacity = 0;\r\n\t\t\t\tinput.value = object;\r\n\t\t\t\tdocument.body.appendChild( input );\r\n\t\t\t\tinput.select();\r\n\t\t\t\tin_clipboard = document.execCommand('copy');\r\n\t\t\t\tconsole.log( in_clipboard ? \"saved to clipboard\" : \"problem saving to clipboard\");\r\n\t\t\t\tdocument.body.removeChild( input );\r\n\t\t\t} catch (err) {\r\n\t\t\t\tif(input)\r\n\t\t\t\t\tdocument.body.removeChild( input );\r\n\t\t\t\tconsole.warn('Oops, unable to copy using the true clipboard');\r\n\t\t\t}\r\n\r\n\t\t\t//old system\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis._safe_cliboard = null;\r\n\t\t\t\tlocalStorage.setItem(\"litegui_clipboard\", object );\r\n\t\t\t}\r\n\t\t\tcatch (err)\r\n\t\t\t{\r\n\t\t\t\tthis._safe_cliboard = object;\r\n\t\t\t\tconsole.warn(\"cliboard quota excedeed\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Reads from the secondary clipboard (only can read if the data was stored using the toClipboard)\r\n\t\t* @method getLocalClipboard\r\n\t\t* @return {String} clipboard\r\n\t\t**/\r\n\t\tgetLocalClipboard: function()\r\n\t\t{\r\n\t\t\tvar data = localStorage.getItem(\"litegui_clipboard\");\r\n\t\t\tif(!data && this._safe_cliboard)\r\n\t\t\t\tdata = this._safe_cliboard;\r\n\t\t\tif(!data) \r\n\t\t\t\treturn null;\r\n\t\t\tif(data[0] == \"{\")\r\n\t\t\t\treturn JSON.parse( data );\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Insert some CSS code to the website\r\n\t\t* @method addCSS\r\n\t\t* @param {String|Object} code it could be a string with CSS rules, or an object with the style syntax.\r\n\t\t**/\r\n\t\taddCSS: function(code)\r\n\t\t{\r\n\t\t\tif(!code)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(code.constructor === String)\r\n\t\t\t{\r\n\t\t\t\tvar style = document.createElement('style');\r\n\t\t\t\tstyle.type = 'text/css';\r\n\t\t\t\tstyle.innerHTML = code;\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(style);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tfor(var i in code)\r\n\t\t\t\tdocument.body.style[i] = code[i];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Requires a new CSS\r\n\t\t* @method requireCSS\r\n\t\t* @param {String} url string with url or an array with several urls\r\n\t\t* @param {Function} on_complete\r\n\t\t**/\r\n\t\trequireCSS: function(url, on_complete)\r\n\t\t{\r\n\t\t\tif(typeof(url)==\"string\")\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\twhile(url.length)\r\n\t\t\t{\r\n\t\t\t\tvar link  = document.createElement('link');\r\n\t\t\t\t//link.id   = cssId;\r\n\t\t\t\tlink.rel  = 'stylesheet';\r\n\t\t\t\tlink.type = 'text/css';\r\n\t\t\t\tlink.href = url.shift(1);\r\n\t\t\t\tlink.media = 'all';\r\n\t\t\t\tvar head = document.getElementsByTagName('head')[0];\r\n\t\t\t\thead.appendChild(link);\r\n\t\t\t\tif(url.length == 0)\r\n\t\t\t\t\tlink.onload = on_complete;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request file from url (it could be a binary, text, etc.). If you want a simplied version use \r\n\t\t* @method request\r\n\t\t* @param {Object} request object with all the parameters like data (for sending forms), dataType, success, error\r\n\t\t* @param {Function} on_complete\r\n\t\t**/\r\n\t\trequest: function(request)\r\n\t\t{\r\n\t\t\tvar dataType = request.dataType || \"text\";\r\n\t\t\tif(dataType == \"json\") //parse it locally\r\n\t\t\t\tdataType = \"text\";\r\n\t\t\telse if(dataType == \"xml\") //parse it locally\r\n\t\t\t\tdataType = \"text\";\r\n\t\t\telse if (dataType == \"binary\")\r\n\t\t\t{\r\n\t\t\t\t//request.mimeType = \"text/plain; charset=x-user-defined\";\r\n\t\t\t\tdataType = \"arraybuffer\";\r\n\t\t\t\trequest.mimeType = \"application/octet-stream\";\r\n\t\t\t}\t\r\n\r\n\t\t\t//regular case, use AJAX call\r\n\t        var xhr = new XMLHttpRequest();\r\n\t        xhr.open( request.data ? 'POST' : 'GET', request.url, true);\r\n\t        if(dataType)\r\n\t            xhr.responseType = dataType;\r\n\t        if (request.mimeType)\r\n\t            xhr.overrideMimeType( request.mimeType );\r\n\t\t\tif( request.nocache )\r\n\t\t\t\txhr.setRequestHeader('Cache-Control', 'no-cache');\r\n\r\n\t        xhr.onload = function(load)\r\n\t\t\t{\r\n\t\t\t\tvar response = this.response;\r\n\t\t\t\tif(this.status != 200)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar err = \"Error \" + this.status;\r\n\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\tLEvent.trigger(xhr,\"fail\", this.status);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(request.dataType == \"json\") //chrome doesnt support json format\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(request.dataType == \"xml\")\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar xmlparser = new DOMParser();\r\n\t\t\t\t\t\tresponse = xmlparser.parseFromString(response,\"text/xml\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(request.success)\r\n\t\t\t\t\trequest.success.call(this, response, this);\r\n\t\t\t};\r\n\t        xhr.onerror = function(err) {\r\n\t\t\t\tif(request.error)\r\n\t\t\t\t\trequest.error(err);\r\n\t\t\t}\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tif( request.data )\r\n\t\t\t{\r\n\t\t\t\tfor(var i in request.data)\r\n\t\t\t\t\tdata.append(i,request.data[i]);\r\n\t\t\t}\r\n\r\n\t        xhr.send( data );\r\n\t\t\treturn xhr;\r\n\t\t},\t\r\n\r\n\t\t/**\r\n\t\t* Request file from url\r\n\t\t* @method requestText\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestText: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"text\", success: on_complete, error: on_error });\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request file from url\r\n\t\t* @method requestJSON\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestJSON: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"json\", success: on_complete, error: on_error });\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request binary file from url\r\n\t\t* @method requestBinary\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestBinary: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"binary\", success: on_complete, error: on_error });\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method requireScript\r\n\t\t* @param {String|Array} url the url of the script or an array containing several urls\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t* @param {Function} on_progress (if several files are required, on_progress is called after every file is added to the DOM)\r\n\t\t**/\r\n\t\trequireScript: function(url, on_complete, on_error, on_progress, version )\r\n\t\t{\r\n\t\t\tif(!url)\r\n\t\t\t\tthrow(\"invalid URL\");\r\n\r\n\t\t\tif( url.constructor === String )\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\tvar total = url.length;\r\n\t\t\tvar size = total;\r\n\t\t\tvar loaded_scripts = [];\r\n\r\n\t\t\tfor(var i in url)\r\n\t\t\t{\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.num = i;\r\n\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\tscript.src = url[i] + ( version ? \"?version=\" + version : \"\" );\r\n\t\t\t\tscript.original_src = url[i];\r\n\t\t\t\tscript.async = false;\r\n\t\t\t\tscript.onload = function(e) { \r\n\t\t\t\t\ttotal--;\r\n\t\t\t\t\tloaded_scripts.push(this);\r\n\t\t\t\t\tif(total)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(on_progress)\r\n\t\t\t\t\t\t\ton_progress(this.original_src, this.num);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(on_complete)\r\n\t\t\t\t\t\ton_complete( loaded_scripts );\r\n\t\t\t\t};\r\n\t\t\t\tif(on_error)\r\n\t\t\t\t\tscript.onerror = function(err) { \r\n\t\t\t\t\t\ton_error(err, this.original_src, this.num );\r\n\t\t\t\t\t}\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t//old version, it loads one by one, so it is slower\r\n\t\trequireScriptSerial: function(url, on_complete, on_progress )\r\n\t\t{\r\n\t\t\tif(typeof(url)==\"string\")\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\tvar loaded_scripts = [];\r\n\t\t\tfunction addScript()\r\n\t\t\t{\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\tscript.src = url.shift(1);\r\n\t\t\t\tscript.onload = function(e) { \r\n\t\t\t\t\tif(url.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(on_progress)\r\n\t\t\t\t\t\t\ton_progress(url[0], url.length);\r\n\r\n\t\t\t\t\t\taddScript();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tloaded_scripts.push(this);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(on_complete)\r\n\t\t\t\t\t\ton_complete( loaded_scripts );\r\n\t\t\t\t};\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t\t}\r\n\r\n\t\t\taddScript();\r\n\t\t},\r\n\r\n\t\tnewDiv: function(id, code)\r\n\t\t{\r\n\t\t\treturn this.createElement(\"div\",id,code);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method createElement\r\n\t\t* @param {String} tag\r\n\t\t* @param {String} id_class string containing id and classes, example: \"myid .someclass .anotherclass\"\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} style\r\n\t\t**/\r\n\t\tcreateElement: function(tag, id_class, content, style, events)\r\n\t\t{\r\n\t\t\tvar elem = document.createElement( tag );\r\n\t\t\tif(id_class)\r\n\t\t\t{\r\n\t\t\t\tvar t = id_class.split(\" \");\r\n\t\t\t\tfor(var i = 0; i < t.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(t[i][0] == \".\")\r\n\t\t\t\t\t\telem.classList.add( t[i].substr(1) );\r\n\t\t\t\t\telse if(t[i][0] == \"#\")\r\n\t\t\t\t\t\telem.id = t[i].substr(1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telem.id = t[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telem.root = elem;\r\n\t\t\tif(content)\r\n\t\t\t\telem.innerHTML = content;\r\n\t\t\telem.add = function(v) { this.appendChild( v.root || v ); };\r\n\r\n\t\t\tif(style)\r\n\t\t\t{\r\n\t\t\t\tif(style.constructor === String)\r\n\t\t\t\t\telem.setAttribute(\"style\",style);\r\n\t\t\t\telse\r\n\t\t\t\t\tfor(var i in style)\r\n\t\t\t\t\t\telem.style[i] = style[i];\r\n\t\t\t}\r\n\r\n\t\t\tif(events)\r\n\t\t\t{\r\n\t\t\t\tfor(var i in events)\r\n\t\t\t\t\telem.addEventListener(i, events[i]);\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Useful to create elements from a text like '<div><span class=\"title\"></span></div>' and an object like { \".title\":\"mytitle\" }\r\n\t\t* @method createListItem\r\n\t\t* @param {String} code\r\n\t\t* @param {Object} values it will use innerText in the elements that matches that selector\r\n\t\t* @param {Object} style\r\n\t\t* @return {HTMLElement} \r\n\t\t**/\r\n\t\tcreateListItem: function( code, values, style )\r\n\t\t{\r\n\t\t\tvar elem = document.createElement(\"span\");\r\n\t\t\telem.innerHTML = code;\r\n\t\t\telem = elem.childNodes[0]; //to get the node\r\n\t\t\tif(values)\r\n\t\t\tfor(var i in values)\r\n\t\t\t{\r\n\t\t\t\tvar subelem = elem.querySelector(i);\r\n\t\t\t\tif(subelem)\r\n\t\t\t\t\tsubelem.innerText = values[i];\r\n\t\t\t}\r\n\t\t\tif(style)\r\n\t\t\tfor(var i in style)\r\n\t\t\t\telem.style[i] = style[i];\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method createButton\r\n\t\t* @param {String} id\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback when the button is pressed\r\n\t\t* @param {Object|String} style\r\n\t\t**/\r\n\t\tcreateButton: function( id_class, content, callback, style )\r\n\t\t{\r\n\t\t\tvar elem = document.createElement(\"button\");\r\n\t\t\telem.className = \"litegui litebutton button\";\r\n\t\t\tif(id_class)\r\n\t\t\t{\r\n\t\t\t\tvar t = id_class.split(\" \");\r\n\t\t\t\tfor(var i = 0; i < t.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(t[i][0] == \".\")\r\n\t\t\t\t\t\telem.classList.add( t[i].substr(1) );\r\n\t\t\t\t\telse if(t[i][0] == \"#\")\r\n\t\t\t\t\t\telem.id = t[i].substr(1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telem.id = t[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telem.root = elem;\r\n\t\t\tif(content !== undefined)\r\n\t\t\t\telem.innerHTML = content;\r\n\t\t\tif(callback)\r\n\t\t\t\telem.addEventListener(\"click\", callback );\r\n\t\t\tif(style)\r\n\t\t\t{\r\n\t\t\t\tif(style.constructor === String)\r\n\t\t\t\t\telem.setAttribute(\"style\",style);\r\n\t\t\t\telse\r\n\t\t\t\t\tfor(var i in style)\r\n\t\t\t\t\t\telem.style[i] = style[i];\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\tgetParents: function(element)\r\n\t\t{\r\n\t\t\tvar elements = [];\r\n\t\t\twhile ((element = element.parentElement) !== null) {\r\n\t\t\t\tif (element.nodeType !== Node.ELEMENT_NODE)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telements.push(elem);\r\n\t\t\t}\r\n\t\t\treturn elements;\r\n\t\t},\r\n\r\n\t\t//used to create a window that retains all the CSS info or the scripts.\r\n\t\tnewWindow: function(title, width, height, options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\tvar new_window = window.open(\"\",\"\",\"width=\"+width+\", height=\"+height+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\t\tnew_window.document.write( \"<html><head><title>\"+title+\"</title>\" );\r\n\r\n\t\t\t//transfer style\r\n\t\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\t\tnew_window.document.write( styles[i].outerHTML );\r\n\r\n\t\t\t//transfer scripts (optional because it can produce some errors)\r\n\t\t\tif(options.scripts)\r\n\t\t\t{\r\n\t\t\t\tvar scripts = document.querySelectorAll(\"script\");\r\n\t\t\t\tfor(var i = 0; i < scripts.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(scripts[i].src) //avoid inline scripts, otherwise a cloned website would be created\r\n\t\t\t\t\t\tnew_window.document.write( scripts[i].outerHTML );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar content = options.content || \"\";\r\n\t\t\tnew_window.document.write( \"</head><body>\"+content+\"</body></html>\" );\r\n\t\t\tnew_window.document.close();\r\n\t\t\treturn new_window;\r\n\t\t},\r\n\r\n\t\t//* DIALOGS *******************\r\n\t\tshowModalBackground: function(v)\r\n\t\t{\r\n\t\t\tif(LiteGUI.modalbg_div)\r\n\t\t\t\tLiteGUI.modalbg_div.style.display = v ? \"block\" : \"none\";\r\n\t\t},\r\n\r\n\t\tshowMessage: function(content, options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\t\r\n\t\t\toptions.title = options.title || \"Attention\";\r\n\t\t\toptions.content = content;\r\n\t\t\toptions.close = 'fade';\r\n\t\t\tvar dialog = new LiteGUI.Dialog( options );\r\n\t\t\tif(!options.noclose)\r\n\t\t\t\tdialog.addButton(\"Close\",{ close: true });\r\n\t\t\tdialog.makeModal('fade');\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a dialog with a message\r\n\t\t* @method popup\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} options ( min_height, content, noclose )\r\n\t\t**/\r\n\t\tpopup: function( content, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\toptions.min_height = 140;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\toptions.content = content;\r\n\t\t\toptions.close = 'fade';\r\n\r\n\t\t\tvar dialog = new LiteGUI.Dialog(options);\r\n\t\t\tif(!options.noclose)\r\n\t\t\t\tdialog.addButton(\"Close\",{ close: true });\r\n\t\t\tdialog.show();\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t* Shows an alert dialog with a message\r\n\t\t* @method alert\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\talert: function( content, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\t\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Alert\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\toptions.height = options.height || 140;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\t\t\tLiteGUI.remove(\".litepanel.alert\"); //kill other panels\r\n\t\t\treturn LiteGUI.showMessage(content,options);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a confirm dialog with a message\r\n\t\t* @method confirm\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tconfirm: function( content, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Confirm\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\t//options.height = 100;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tcontent +=\"<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>\";\r\n\t\t\toptions.noclose = true;\r\n\r\n\t\t\tvar dialog = this.showMessage(content,options);\r\n\t\t\tdialog.content.style.paddingBottom = \"10px\";\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\t\t\tbuttons[0].focus();\r\n\r\n\t\t\tfunction inner(v) {\r\n\t\t\t\tvar v = this.dataset[\"value\"] == \"yes\";\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback) \r\n\t\t\t\t\tcallback(v);\r\n\t\t\t}\r\n\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a prompt dialog with a message\r\n\t\t* @method prompt\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tprompt: function( content, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Prompt\";\r\n\t\t\toptions.width = options.width || 280;\r\n\r\n\t\t\t//options.height = 140 + (options.textarea ? 40 : 0);\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tvar value = options.value || \"\";\r\n\t\t\tvar textinput = \"<input type='text' value='\"+value+\"'/>\";\r\n\t\t\tif (options.textarea)\r\n\t\t\t\ttextinput = \"<textarea class='textfield' style='width:95%'>\"+value+\"</textarea>\";\r\n\r\n\t\t\tcontent +=\"<p>\"+textinput+\"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>\";\r\n\t\t\toptions.noclose = true;\r\n\t\t\tvar dialog = this.showMessage( content, options );\r\n\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\r\n\t\t\tvar input = dialog.content.querySelector(\"input,textarea\");\r\n\t\t\tinput.addEventListener(\"keydown\", inner_key, true);\r\n\r\n\t\t\tfunction inner() {\r\n\t\t\t\tvar value = input.value;\r\n\t\t\t\tif(this.dataset && this.dataset[\"value\"] == \"cancel\")\r\n\t\t\t\t\tvalue = null;\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback)\r\n\t\t\t\t\tcallback( value );\r\n\t\t\t};\r\n\r\n\t\t\tfunction inner_key(e)\r\n\t\t\t{\r\n\t\t\t\tif (!e)\r\n\t\t\t\t\te = window.event;\r\n\t\t\t\tvar keyCode = e.keyCode || e.which;\r\n\t\t\t\tif (keyCode == '13'){\r\n\t\t\t\t\tinner();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\t\r\n\t\t\t\tif (keyCode == '29')\r\n\t\t\t\t\tdialog.close();\r\n\t\t\t};\r\n\r\n\t\t\tinput.focus();\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a choice dialog with a message\r\n\t\t* @method choice\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tchoice: function( content, choices, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Select one option\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\t//options.height = 100;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tfor(var i in choices)\r\n\t\t\t{\r\n\t\t\t\tcontent +=\"<button class='litebutton' data-value='\"+i+\"' style='width:45%; margin-left: 10px'>\"+(choices[i].content || choices[i])+\"</button>\";\r\n\t\t\t}\r\n\t\t\toptions.noclose = true;\r\n\r\n\t\t\tvar dialog = this.showMessage(content,options);\r\n\t\t\tdialog.content.style.paddingBottom = \"10px\";\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\r\n\t\t\tfunction inner(v) {\r\n\t\t\t\tvar v = choices[ this.dataset[\"value\"] ];\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback) \r\n\t\t\t\t\tcallback(v);\r\n\t\t\t}\r\n\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\tdownloadURL: function( url, filename )\r\n\t\t{\r\n\t\t\tvar link = document.createElement('a');\r\n\t\t\tlink.href = url;\r\n\t\t\tlink.download = filename;\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlink.click();\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t},\r\n\r\n\t\tdownloadFile: function( filename, data, dataType )\r\n\t\t{\r\n\t\t\tif(!data)\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"No file provided to download\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!dataType)\r\n\t\t\t{\r\n\t\t\t\tif(data.constructor === String )\r\n\t\t\t\t\tdataType = 'text/plain';\r\n\t\t\t\telse\r\n\t\t\t\t\tdataType = 'application/octet-stream';\r\n\t\t\t}\r\n\r\n\t\t\tvar file = null;\r\n\t\t\tif(data.constructor !== File && data.constructor !== Blob)\r\n\t\t\t\tfile = new Blob( [ data ], {type : dataType});\r\n\t\t\telse\r\n\t\t\t\tfile = data;\r\n\r\n\t\t\tvar url = URL.createObjectURL( file );\r\n\t\t\tvar element = document.createElement(\"a\");\r\n\t\t\telement.setAttribute('href', url);\r\n\t\t\telement.setAttribute('download', filename );\r\n\t\t\telement.style.display = 'none';\r\n\t\t\tdocument.body.appendChild(element);\r\n\t\t\telement.click();\r\n\t\t\tdocument.body.removeChild(element);\r\n\t\t\tsetTimeout( function(){ URL.revokeObjectURL( url ); }, 1000*60 ); //wait one minute to revoke url\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the URL vars ( ?foo=faa&foo2=etc )\r\n\t\t* @method getUrlVars\r\n\t\t**/\r\n\t\tgetUrlVars: function(){\r\n\t\t\tvar vars = [], hash;\r\n\t\t\tvar hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n\t\t\tfor(var i = 0; i < hashes.length; i++)\r\n\t\t\t{\r\n\t\t\t  hash = hashes[i].split('=');\r\n\t\t\t  vars.push(hash[0]);\r\n\t\t\t  vars[hash[0]] = hash[1];\r\n\t\t\t}\r\n\t\t\treturn vars;\r\n\t\t},\r\n\r\n\t\tgetUrlVar: function(name) {\r\n\t\t\treturn LiteGUI.getUrlVars()[name];\r\n\t\t},\r\n\r\n\t\tfocus: function( element )\r\n\t\t{\r\n\t\t\telement.focus();\r\n\t\t},\r\n\r\n\t\tblur: function( element )\r\n\t\t{\r\n\t\t\telement.blur();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Makes one element draggable\r\n\t\t* @method draggable\r\n\t\t* @param {HTMLEntity} container the element that will be dragged\r\n\t\t* @param {HTMLEntity} dragger the area to start the dragging\r\n\t\t**/\r\n\t\tdraggable: function( container, dragger, on_start, on_finish, on_is_draggable )\r\n\t\t{\r\n\t\t\tdragger = dragger || container;\r\n\t\t\tdragger.addEventListener(\"mousedown\", inner_mouse);\r\n\t\t\tdragger.style.cursor = \"move\";\r\n\t\t\tvar prev_x = 0;\r\n\t\t\tvar prev_y = 0;\r\n\r\n\t\t\tvar rect = container.getClientRects()[0];\r\n\t\t\tvar x = rect ? rect.left : 0;\r\n\t\t\tvar y = rect ? rect.top : 0;\r\n\r\n\t\t\tcontainer.style.position = \"absolute\";\r\n\t\t\tcontainer.style.left = x + \"px\";\r\n\t\t\tcontainer.style.top = y + \"px\";\r\n\r\n\t\t\tfunction inner_mouse(e)\r\n\t\t\t{\r\n\t\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!rect)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trect = container.getClientRects()[0];\r\n\t\t\t\t\t\tx = rect ? rect.left : 0;\r\n\t\t\t\t\t\ty = rect ? rect.top : 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(on_is_draggable && on_is_draggable(container,e) == false )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tprev_x = e.clientX;\r\n\t\t\t\t\tprev_y = e.clientY;\r\n\t\t\t\t\tdocument.addEventListener(\"mousemove\",inner_mouse);\r\n\t\t\t\t\tdocument.addEventListener(\"mouseup\",inner_mouse);\r\n\t\t\t\t\tif(on_start)\r\n\t\t\t\t\t\ton_start( container, e );\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.type == \"mouseup\")\r\n\t\t\t\t{\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\",inner_mouse);\r\n\t\t\t\t\tdocument.removeEventListener(\"mouseup\",inner_mouse);\r\n\r\n\t\t\t\t\tif( on_finish )\r\n\t\t\t\t\t\ton_finish( container, e );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.type == \"mousemove\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar deltax = e.clientX - prev_x;\r\n\t\t\t\t\tvar deltay = e.clientY - prev_y;\r\n\t\t\t\t\tprev_x = e.clientX;\r\n\t\t\t\t\tprev_y = e.clientY;\r\n\t\t\t\t\tx += deltax;\r\n\t\t\t\t\ty += deltay;\r\n\t\t\t\t\tcontainer.style.left = x + \"px\";\r\n\t\t\t\t\tcontainer.style.top = y + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Clones object content\r\n\t\t* @method cloneObject\r\n\t\t* @param {Object} object\r\n\t\t* @param {Object} target\r\n\t\t**/\r\n\t\tcloneObject: function(object, target)\r\n\t\t{\r\n\t\t\tvar o = target || {};\r\n\t\t\tfor(var i in object)\r\n\t\t\t{\r\n\t\t\t\tif(i[0] == \"_\" || i.substr(0,6) == \"jQuery\") //skip vars with _ (they are private)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar v = object[i];\r\n\t\t\t\tif(v == null)\r\n\t\t\t\t\to[i] = null;\t\t\t\r\n\t\t\t\telse if ( isFunction(v) )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse if (typeof(v) == \"number\" || typeof(v) == \"string\")\r\n\t\t\t\t\to[i] = v;\r\n\t\t\t\telse if( v.constructor == Float32Array ) //typed arrays are ugly when serialized\r\n\t\t\t\t\to[i] = Array.apply( [], v ); //clone\r\n\t\t\t\telse if ( isArray(v) )\r\n\t\t\t\t{\r\n\t\t\t\t\tif( o[i] && o[i].constructor == Float32Array ) //reuse old container\r\n\t\t\t\t\t\to[i].set(v);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[i] = JSON.parse( JSON.stringify(v) ); //v.slice(0); //not safe using slice because it doesnt clone content, only container\r\n\t\t\t\t}\r\n\t\t\t\telse //slow but safe\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//prevent circular recursions\r\n\t\t\t\t\t\to[i] = JSON.parse( JSON.stringify(v) );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn o;\r\n\t\t},\r\n\r\n\t\tsafeName: function( str )\r\n\t\t{\r\n\t\t\treturn String(str).replace(/[\\s\\.]/g, '');\r\n\t\t},\r\n\r\n\t\t//those useful HTML unicode codes that I never remeber but I always need\r\n\t\tspecial_codes: {\r\n\t\t\tclose: \"&#10005;\",\r\n\t\t\tnavicon: \"&#9776;\",\r\n\t\t\trefresh: \"&#8634;\",\r\n\t\t\tgear: \"&#9881;\",\r\n\t\t\topen_folder: \"&#128194;\",\r\n\t\t\tdownload: \"&#11123;\",\r\n\t\t\ttick: \"&#10003;\",\r\n\t\t\ttrash: \"&#128465;\"\r\n\t\t},\r\n\t\t\r\n\t\t//given a html entity string it returns the equivalent unicode character\r\n\t\thtmlEncode: function( html_code )\r\n\t\t{\r\n\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\te.innerHTML = html_code;\r\n\t\t\treturn e.innerText;\r\n\t\t},\r\n\r\n\t\t//given a unicode character it returns the equivalent html encoded string\r\n\t\thtmlDecode: function( unicode_character )\r\n\t\t{\r\n\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\te.innerText = unicode_character;\r\n\t\t\treturn e.innerHTML;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Convert sizes in any format to a valid CSS format (number to string, negative number to calc( 100% - number px )\r\n\t\t* @method sizeToCSS\r\n\t\t* @param {String||Number} size\r\n\t\t* @return {String} valid css size string\r\n\t\t**/\r\n\t\tsizeToCSS: function( v )\r\n\t\t{\r\n\t\t\tif( v ===  undefined || v === null )\r\n\t\t\t\treturn null;\r\n\t\t\tif(v.constructor === String )\r\n\t\t\t\treturn v;\r\n\t\t\tif(v >= 0 )\r\n\t\t\t\treturn (v|0) + \"px\";\r\n\t\t\treturn \"calc( 100% - \" + Math.abs(v|0) + \"px )\";\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the window where this element is attached (used in multi window applications)\r\n\t\t* @method getElementWindow\r\n\t\t* @param {HTMLElement} v\r\n\t\t* @return {Window} the window element\r\n\t\t**/\r\n\t\tgetElementWindow: function(v)\r\n\t\t{\r\n\t        var doc = v.ownerDocument;\r\n\t        return doc.defaultView || doc.parentWindow;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Helper, makes drag and drop easier by enabling drag and drop in a given element\r\n\t\t* @method createDropArea\r\n\t\t* @param {HTMLElement} element the element where users could drop items\r\n\t\t* @param {Function} callback_drop function to call when the user drops the item\r\n\t\t* @param {Function} callback_enter [optional] function to call when the user drags something inside\r\n\t\t**/\r\n\t\tcreateDropArea: function( element, callback_drop, callback_enter, callback_exit )\r\n\t\t{\r\n\t\t\telement.addEventListener(\"dragenter\", onDragEvent);\r\n\r\n\t\t\tfunction onDragEvent(evt)\r\n\t\t\t{\r\n\t\t\t\telement.addEventListener(\"dragexit\", onDragEvent);\r\n\t\t\t\telement.addEventListener(\"dragover\", onDragEvent);\r\n\t\t\t\telement.addEventListener(\"drop\", onDrop);\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tif(evt.type == \"dragenter\" && callback_enter)\r\n\t\t\t\t\tcallback_enter(evt, this);\r\n\t\t\t\tif(evt.type == \"dragexit\" && callback_exit)\r\n\t\t\t\t\tcallback_exit(evt, this);\r\n\t\t\t}\r\n\r\n\t\t\tfunction onDrop(evt)\r\n\t\t\t{\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tevt.preventDefault();\r\n\r\n\t\t\t\telement.removeEventListener(\"dragexit\", onDragEvent);\r\n\t\t\t\telement.removeEventListener(\"dragover\", onDragEvent);\r\n\t\t\t\telement.removeEventListener(\"drop\", onDrop);\r\n\r\n\t\t\t\tvar r = undefined;\r\n\t\t\t\tif(callback_drop)\r\n\t\t\t\t\tr = callback_drop(evt);\r\n\t\t\t\tif(r)\r\n\t\t\t\t{\r\n\t\t\t\t\tevt.stopPropagation();\r\n\t\t\t\t\tevt.stopImmediatePropagation();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//low quality templating system\r\n\tObject.defineProperty( String.prototype, \"template\", {\r\n\t\tvalue: function( data, eval_code )\r\n\t\t{\r\n\t\t\tvar tpl = this;\r\n\t\t\tvar re = /{{([^}}]+)?}}/g, match;\r\n\t\t    while(match = re.exec(tpl)) {\r\n\t\t\t\tvar str = eval_code ? (new Function(\"with(this) { try { return \" + match[1] +\"} catch(e) { return 'error';} }\")).call(data) : data[match[1]];\r\n\t\t\t    tpl = tpl.replace(match[0], str);\r\n\t\t    }\r\n\t\t    return tpl;\t\t\r\n\t\t},\r\n\t\tenumerable: false\r\n\t});\r\n\r\n\r\n\tfunction purgeElement(d, skip) {\r\n\t    var a = d.attributes, i, l, n;\r\n\r\n\t    if (a) {\r\n\t        for (i = a.length - 1; i >= 0; i -= 1) {\r\n\t            n = a[i].name;\r\n\t            if (typeof d[n] === 'function') {\r\n\t                d[n] = null;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\r\n\t    a = d.childNodes;\r\n\t    if (a) {\r\n\t        l = a.length;\r\n\t        for (i = 0; i < l; i += 1) {\r\n\t            purgeElement(d.childNodes[i]);\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\t//useful functions\r\n\r\n\t//from stackoverflow http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\r\n\r\n\tif(typeof escapeHtmlEntities == 'undefined') {\r\n\t        escapeHtmlEntities = function (text) {\r\n\t            return text.replace(/[\\u00A0-\\u2666<>\\&]/g, function(c) {\r\n\t                return '&' + \r\n\t                (escapeHtmlEntities.entityTable[c.charCodeAt(0)] || '#'+c.charCodeAt(0)) + ';';\r\n\t            });\r\n\t        };\r\n\r\n\t        // all HTML4 entities as defined here: http://www.w3.org/TR/html4/sgml/entities.html\r\n\t        // added: amp, lt, gt, quot and apos\r\n\t        escapeHtmlEntities.entityTable = {\r\n\t            34 : 'quot', \r\n\t            38 : 'amp', \r\n\t            39 : 'apos', \r\n\t            60 : 'lt', \r\n\t            62 : 'gt', \r\n\t            160 : 'nbsp', \r\n\t            161 : 'iexcl', \r\n\t            162 : 'cent', \r\n\t            163 : 'pound', \r\n\t            164 : 'curren', \r\n\t            165 : 'yen', \r\n\t            166 : 'brvbar', \r\n\t            167 : 'sect', \r\n\t            168 : 'uml', \r\n\t            169 : 'copy', \r\n\t            170 : 'ordf', \r\n\t            171 : 'laquo', \r\n\t            172 : 'not', \r\n\t            173 : 'shy', \r\n\t            174 : 'reg', \r\n\t            175 : 'macr', \r\n\t            176 : 'deg', \r\n\t            177 : 'plusmn', \r\n\t            178 : 'sup2', \r\n\t            179 : 'sup3', \r\n\t            180 : 'acute', \r\n\t            181 : 'micro', \r\n\t            182 : 'para', \r\n\t            183 : 'middot', \r\n\t            184 : 'cedil', \r\n\t            185 : 'sup1', \r\n\t            186 : 'ordm', \r\n\t            187 : 'raquo', \r\n\t            188 : 'frac14', \r\n\t            189 : 'frac12', \r\n\t            190 : 'frac34', \r\n\t            191 : 'iquest', \r\n\t            192 : 'Agrave', \r\n\t            193 : 'Aacute', \r\n\t            194 : 'Acirc', \r\n\t            195 : 'Atilde', \r\n\t            196 : 'Auml', \r\n\t            197 : 'Aring', \r\n\t            198 : 'AElig', \r\n\t            199 : 'Ccedil', \r\n\t            200 : 'Egrave', \r\n\t            201 : 'Eacute', \r\n\t            202 : 'Ecirc', \r\n\t            203 : 'Euml', \r\n\t            204 : 'Igrave', \r\n\t            205 : 'Iacute', \r\n\t            206 : 'Icirc', \r\n\t            207 : 'Iuml', \r\n\t            208 : 'ETH', \r\n\t            209 : 'Ntilde', \r\n\t            210 : 'Ograve', \r\n\t            211 : 'Oacute', \r\n\t            212 : 'Ocirc', \r\n\t            213 : 'Otilde', \r\n\t            214 : 'Ouml', \r\n\t            215 : 'times', \r\n\t            216 : 'Oslash', \r\n\t            217 : 'Ugrave', \r\n\t            218 : 'Uacute', \r\n\t            219 : 'Ucirc', \r\n\t            220 : 'Uuml', \r\n\t            221 : 'Yacute', \r\n\t            222 : 'THORN', \r\n\t            223 : 'szlig', \r\n\t            224 : 'agrave', \r\n\t            225 : 'aacute', \r\n\t            226 : 'acirc', \r\n\t            227 : 'atilde', \r\n\t            228 : 'auml', \r\n\t            229 : 'aring', \r\n\t            230 : 'aelig', \r\n\t            231 : 'ccedil', \r\n\t            232 : 'egrave', \r\n\t            233 : 'eacute', \r\n\t            234 : 'ecirc', \r\n\t            235 : 'euml', \r\n\t            236 : 'igrave', \r\n\t            237 : 'iacute', \r\n\t            238 : 'icirc', \r\n\t            239 : 'iuml', \r\n\t            240 : 'eth', \r\n\t            241 : 'ntilde', \r\n\t            242 : 'ograve', \r\n\t            243 : 'oacute', \r\n\t            244 : 'ocirc', \r\n\t            245 : 'otilde', \r\n\t            246 : 'ouml', \r\n\t            247 : 'divide', \r\n\t            248 : 'oslash', \r\n\t            249 : 'ugrave', \r\n\t            250 : 'uacute', \r\n\t            251 : 'ucirc', \r\n\t            252 : 'uuml', \r\n\t            253 : 'yacute', \r\n\t            254 : 'thorn', \r\n\t            255 : 'yuml', \r\n\t            402 : 'fnof', \r\n\t            913 : 'Alpha', \r\n\t            914 : 'Beta', \r\n\t            915 : 'Gamma', \r\n\t            916 : 'Delta', \r\n\t            917 : 'Epsilon', \r\n\t            918 : 'Zeta', \r\n\t            919 : 'Eta', \r\n\t            920 : 'Theta', \r\n\t            921 : 'Iota', \r\n\t            922 : 'Kappa', \r\n\t            923 : 'Lambda', \r\n\t            924 : 'Mu', \r\n\t            925 : 'Nu', \r\n\t            926 : 'Xi', \r\n\t            927 : 'Omicron', \r\n\t            928 : 'Pi', \r\n\t            929 : 'Rho', \r\n\t            931 : 'Sigma', \r\n\t            932 : 'Tau', \r\n\t            933 : 'Upsilon', \r\n\t            934 : 'Phi', \r\n\t            935 : 'Chi', \r\n\t            936 : 'Psi', \r\n\t            937 : 'Omega', \r\n\t            945 : 'alpha', \r\n\t            946 : 'beta', \r\n\t            947 : 'gamma', \r\n\t            948 : 'delta', \r\n\t            949 : 'epsilon', \r\n\t            950 : 'zeta', \r\n\t            951 : 'eta', \r\n\t            952 : 'theta', \r\n\t            953 : 'iota', \r\n\t            954 : 'kappa', \r\n\t            955 : 'lambda', \r\n\t            956 : 'mu', \r\n\t            957 : 'nu', \r\n\t            958 : 'xi', \r\n\t            959 : 'omicron', \r\n\t            960 : 'pi', \r\n\t            961 : 'rho', \r\n\t            962 : 'sigmaf', \r\n\t            963 : 'sigma', \r\n\t            964 : 'tau', \r\n\t            965 : 'upsilon', \r\n\t            966 : 'phi', \r\n\t            967 : 'chi', \r\n\t            968 : 'psi', \r\n\t            969 : 'omega', \r\n\t            977 : 'thetasym', \r\n\t            978 : 'upsih', \r\n\t            982 : 'piv', \r\n\t            8226 : 'bull', \r\n\t            8230 : 'hellip', \r\n\t            8242 : 'prime', \r\n\t            8243 : 'Prime', \r\n\t            8254 : 'oline', \r\n\t            8260 : 'frasl', \r\n\t            8472 : 'weierp', \r\n\t            8465 : 'image', \r\n\t            8476 : 'real', \r\n\t            8482 : 'trade', \r\n\t            8501 : 'alefsym', \r\n\t            8592 : 'larr', \r\n\t            8593 : 'uarr', \r\n\t            8594 : 'rarr', \r\n\t            8595 : 'darr', \r\n\t            8596 : 'harr', \r\n\t            8629 : 'crarr', \r\n\t            8656 : 'lArr', \r\n\t            8657 : 'uArr', \r\n\t            8658 : 'rArr', \r\n\t            8659 : 'dArr', \r\n\t            8660 : 'hArr', \r\n\t            8704 : 'forall', \r\n\t            8706 : 'part', \r\n\t            8707 : 'exist', \r\n\t            8709 : 'empty', \r\n\t            8711 : 'nabla', \r\n\t            8712 : 'isin', \r\n\t            8713 : 'notin', \r\n\t            8715 : 'ni', \r\n\t            8719 : 'prod', \r\n\t            8721 : 'sum', \r\n\t            8722 : 'minus', \r\n\t            8727 : 'lowast', \r\n\t            8730 : 'radic', \r\n\t            8733 : 'prop', \r\n\t            8734 : 'infin', \r\n\t            8736 : 'ang', \r\n\t            8743 : 'and', \r\n\t            8744 : 'or', \r\n\t            8745 : 'cap', \r\n\t            8746 : 'cup', \r\n\t            8747 : 'int', \r\n\t            8756 : 'there4', \r\n\t            8764 : 'sim', \r\n\t            8773 : 'cong', \r\n\t            8776 : 'asymp', \r\n\t            8800 : 'ne', \r\n\t            8801 : 'equiv', \r\n\t            8804 : 'le', \r\n\t            8805 : 'ge', \r\n\t            8834 : 'sub', \r\n\t            8835 : 'sup', \r\n\t            8836 : 'nsub', \r\n\t            8838 : 'sube', \r\n\t            8839 : 'supe', \r\n\t            8853 : 'oplus', \r\n\t            8855 : 'otimes', \r\n\t            8869 : 'perp', \r\n\t            8901 : 'sdot', \r\n\t            8968 : 'lceil', \r\n\t            8969 : 'rceil', \r\n\t            8970 : 'lfloor', \r\n\t            8971 : 'rfloor', \r\n\t            9001 : 'lang', \r\n\t            9002 : 'rang', \r\n\t            9674 : 'loz', \r\n\t            9824 : 'spades', \r\n\t            9827 : 'clubs', \r\n\t            9829 : 'hearts', \r\n\t            9830 : 'diams', \r\n\t            338 : 'OElig', \r\n\t            339 : 'oelig', \r\n\t            352 : 'Scaron', \r\n\t            353 : 'scaron', \r\n\t            376 : 'Yuml', \r\n\t            710 : 'circ', \r\n\t            732 : 'tilde', \r\n\t            8194 : 'ensp', \r\n\t            8195 : 'emsp', \r\n\t            8201 : 'thinsp', \r\n\t            8204 : 'zwnj', \r\n\t            8205 : 'zwj', \r\n\t            8206 : 'lrm', \r\n\t            8207 : 'rlm', \r\n\t            8211 : 'ndash', \r\n\t            8212 : 'mdash', \r\n\t            8216 : 'lsquo', \r\n\t            8217 : 'rsquo', \r\n\t            8218 : 'sbquo', \r\n\t            8220 : 'ldquo', \r\n\t            8221 : 'rdquo', \r\n\t            8222 : 'bdquo', \r\n\t            8224 : 'dagger', \r\n\t            8225 : 'Dagger', \r\n\t            8240 : 'permil', \r\n\t            8249 : 'lsaquo', \r\n\t            8250 : 'rsaquo', \r\n\t            8364 : 'euro'\r\n\t        };\r\n\t    }\r\n\r\n\tfunction beautifyCode( code, reserved, skip_css )\r\n\t{\r\n\t\treserved = reserved || [\"abstract\", \"else\", \"instanceof\", \"super\", \"boolean\", \"enum\", \"int\", \"switch\", \"break\", \"export\", \"interface\", \"synchronized\", \"byte\", \"extends\", \"let\", \"this\", \"case\", \"false\", \"long\", \"throw\", \"catch\", \"final\", \"native\", \"throws\", \"char\", \"finally\", \"new\", \"transient\", \"class\", \"float\", \"null\", \"true\", \"const\", \"for\", \"package\", \"try\", \"continue\", \"function\", \"private\", \"typeof\", \"debugger\", \"goto\", \"protected\", \"var\", \"default\", \"if\", \"public\", \"void\", \"delete\", \"implements\", \"return\", \"volatile\", \"do\", \"import\", \"short\", \"while\", \"double\", \"in\", \"static\", \"with\"];\r\n\r\n\t\t//reserved words\r\n\t\tcode = code.replace(/\\b(\\w+)\\b/g, function(v) {\r\n\t\t\tif(reserved.indexOf(v) != -1)\r\n\t\t\t\treturn \"<span class='rsv'>\" + v + \"</span>\";\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\t\t//numbers\r\n\t\tcode = code.replace(/\\b([0-9]+)\\b/g, function(v) {\r\n\t\t\treturn \"<span class='num'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//obj.method\r\n\t\tcode = code.replace(/(\\w+\\.\\w+)/g, function(v) {\r\n\t\t\tvar t = v.split(\".\");\r\n\t\t\treturn \"<span class='obj'>\" + t[0] + \"</span>.<span class='prop'>\" + t[1] + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//function\r\n\t\tcode = code.replace(/(\\w+)\\(/g, function(v) {\r\n\t\t\treturn \"<span class='prop'>\" + v.substr(0, v.length - 1) + \"</span>(\";\r\n\t\t});\r\n\r\n\t\t//strings\r\n\t\tcode = code.replace(/(\\\"(\\\\.|[^\\\"])*\\\")/g, function(v) {\r\n\t\t\treturn \"<span class='str'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//comments \r\n\t\tcode = code.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, function(v) { ///(\\/\\/[a-zA-Z0-9\\?\\!\\(\\)_ ]*)/g\r\n\t\t\treturn \"<span class='cmnt'>\" + v.replace(/<[^>]*>/g, \"\") + \"</span>\";\r\n\t\t});\r\n\r\n\r\n\t\tif(!skip_css)\r\n\t\t\tcode = \"<style>.obj { color: #79B; } .prop { color: #B97; }\t.str,.num { color: #A79; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>\" + code;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tfunction beautifyJSON( code, skip_css )\r\n\t{\r\n\t\tif(typeof(code) == \"object\")\r\n\t\t\tcode = JSON.stringify(code);\r\n\r\n\t\tvar reserved = [\"false\", \"true\", \"null\"];\r\n\r\n\t\t//reserved words\r\n\t\tcode = code.replace(/(\\w+)/g, function(v) {\r\n\t\t\tif(reserved.indexOf(v) != -1)\r\n\t\t\t\treturn \"<span class='rsv'>\" + v + \"</span>\";\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\r\n\t\t//numbers\r\n\t\tcode = code.replace(/([0-9]+)/g, function(v) {\r\n\t\t\treturn \"<span class='num'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//obj.method\r\n\t\tcode = code.replace(/(\\w+\\.\\w+)/g, function(v) {\r\n\t\t\tvar t = v.split(\".\");\r\n\t\t\treturn \"<span class='obj'>\" + t[0] + \"</span>.<span class='prop'>\" + t[1] + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//strings\r\n\t\tcode = code.replace(/(\\\"(\\\\.|[^\\\"])*\\\")/g, function(v) {\r\n\t\t\treturn \"<span class='str'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//comments\r\n\t\tcode = code.replace(/(\\/\\/[a-zA-Z0-9\\?\\!\\(\\)_ ]*)/g, function(v) {\r\n\t\t\treturn \"<span class='cmnt'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\tif(!skip_css)\r\n\t\t\tcode = \"<style>.obj { color: #79B; } .prop { color: #B97; }\t.str { color: #A79; } .num { color: #B97; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>\" + code;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tfunction dataURItoBlob( dataURI ) {\r\n\t\tvar pos = dataURI.indexOf(\",\");\r\n\t\t//convert to binary\r\n\t    var byteString = atob( dataURI.substr(pos+1) ); \r\n\t\t//copy from string to array\r\n\t    var ab = new ArrayBuffer( byteString.length ); \r\n\t    var ia = new Uint8Array(ab);\r\n\t\tvar l = byteString.length;\r\n\t    for (var i = 0; i < l; i++) {\r\n\t        ia[i] = byteString.charCodeAt(i);\r\n\t    }\r\n\r\n\t\tvar mime = dataURI.substr(5,pos-5);\r\n\t\tmime = mime.substr(0, mime.length - 7); //strip \";base64\"\r\n\t    return new Blob([ab], { type: mime });\r\n\t}\r\n\r\n\treturn skylark.attach(\"intg.litegui\",LiteGUI);\r\n});\n//enclose in a scope\r\n\r\ndefine('skylark-litegui/Area',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\t/****************** AREA **************/\r\n\t/** An Area is am streched container.\r\n\t* Areas can be split several times horizontally or vertically to fit different colums or rows\r\n\t*\r\n\t* @class Area\r\n\t* @constructor\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction Area( options, legacy )\r\n\t{\r\n\t\t//for legacy code\r\n\t\tif( (options && options.constructor === String) || legacy )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Area legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\t/* the root element containing all sections */\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\troot.className = \"litearea\";\r\n\t\tif(options.id)\r\n\t\t\troot.id = options.id;\r\n\t\tif(options.className)\r\n\t\t\troot.className +=  \" \" + options.className;\r\n\r\n\t\tthis.root = root;\r\n\t\tthis.root.litearea = this; //dbl link\r\n\r\n\t\tvar width = options.width || \"100%\";\r\n\t\tvar height = options.height || \"100%\";\r\n\r\n\t\tif( width < 0 )\r\n\t\t\twidth = 'calc( 100% - '+Math.abs(width)+'px)';\r\n\t\tif( height < 0 )\r\n\t\t\theight = 'calc( 100% - '+ Math.abs(height)+'px)';\r\n\r\n\t\troot.style.width = width;\r\n\t\troot.style.height = height;\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\tvar that = this;\r\n\t\tthis._computed_size = [ this.root.offsetWidth, this.root.offserHeight ];\r\n\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif(options.content_id)\r\n\t\t\tcontent.id = options.content_id;\r\n\t\tcontent.className = \"liteareacontent\";\r\n\t\tcontent.style.width = \"100%\";\r\n\t\tcontent.style.height = \"100%\";\r\n\t\tthis.root.appendChild( content );\r\n\t\tthis.content = content;\r\n\r\n\t\tthis.split_direction = \"none\";\r\n\t\tthis.sections = [];\r\n\r\n\t\tif(options.autoresize)\r\n\t\t\tLiteGUI.bind( LiteGUI, \"resized\", function() { \r\n\t\t\t\tthat.onResize(); \r\n\t\t\t});\r\n\t}\r\n\r\n\tArea.VERTICAL = \"vertical\";\r\n\tArea.HORIZONTAL = \"horizontal\";\r\n\r\n\tArea.splitbar_size = 4;\r\n\r\n\t/* get container of the section */\r\n\tArea.prototype.getSection = function(num)\r\n\t{\r\n\t\tnum = num || 0;\r\n\t\tif(this.sections.length > num)\r\n\t\t\treturn this.sections[num];\r\n\t\treturn null;\r\n\t}\r\n\r\n\tArea.prototype.onResize = function(e)\r\n\t{\r\n\t\tvar computed_size = [ this.root.offsetWidth, this.root.offsetHeight ];\r\n\t\tif( e && this._computed_size && computed_size[0] == this._computed_size[0] && computed_size[1] == this._computed_size[1])\r\n\t\t\treturn;\r\n\r\n\t\tthis.sendResizeEvent(e);\r\n\t}\r\n\r\n\t//sends the resize event to all the sections\r\n\tArea.prototype.sendResizeEvent = function(e)\r\n\t{\r\n\t\tif(this.sections.length)\r\n\t\t\tfor(var i in this.sections)\r\n\t\t\t{\r\n\t\t\t\tvar section = this.sections[i];\r\n\t\t\t\tsection.onResize(e);\r\n\t\t\t}\r\n\t\telse //send it to the children\r\n\t\t{\r\n\t\t\tfor (var j = 0; j < this.root.childNodes.length; j++)\r\n\t\t\t{\r\n\t\t\t\tvar element = this.root.childNodes[j];\r\n\t\t\t\tif(element.litearea)\r\n\t\t\t\t\telement.litearea.onResize();\r\n\t\t\t\telse\r\n\t\t\t\t\tLiteGUI.trigger( element, \"resize\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//inner callback\r\n\t\tif( this.onresize )\r\n\t\t\tthis.onresize();\r\n\t}\r\n\r\n\tArea.prototype.getWidth = function()\r\n\t{\r\n\t\treturn this.root.offsetWidth;\r\n\t}\r\n\r\n\tArea.prototype.getHeight = function()\r\n\t{\r\n\t\treturn this.root.offsetHeight;\r\n\t}\r\n\r\n\tArea.prototype.isVisible = function()\r\n\t{\r\n\t\treturn this.root.style.display != \"none\";\t\r\n\t}\r\n\r\n\tArea.prototype.adjustHeight = function()\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t{\r\n\t\t\tconsole.error(\"Cannot adjust height of LiteGUI.Area without parent\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//check parent height\r\n\t\tvar h = this.root.parentNode.offsetHeight;\r\n\r\n\t\t//check position\r\n\t\tvar y = this.root.getClientRects()[0].top;\r\n\r\n\t\t//adjust height\r\n\t\tthis.root.style.height = \"calc( 100% - \" + y + \"px )\";\r\n\t}\r\n\r\n\tArea.prototype.split = function( direction, sizes, editable )\r\n\t{\r\n\t\tif( !direction || direction.constructor !== String )\r\n\t\t\tthrow (\"First parameter must be a string: 'vertical' or 'horizontal'\");\r\n\r\n\t\tif( !sizes )\r\n\t\t\tsizes = [\"50%\",null];\r\n\r\n\t\tif( direction != \"vertical\" && direction != \"horizontal\" )\r\n\t\t\tthrow (\"First parameter must be a string: 'vertical' or 'horizontal'\");\r\n\r\n\t\tif(this.sections.length)\r\n\t\t\tthrow \"cannot split twice\";\r\n\r\n\t\t//create areas\r\n\t\tvar area1 = new LiteGUI.Area({ content_id: this.content.id });\r\n\t\tarea1.root.style.display = \"inline-block\";\r\n\t\tvar area2 = new LiteGUI.Area();\r\n\t\tarea2.root.style.display = \"inline-block\";\r\n\r\n\t\tvar splitinfo = \"\";\r\n\t\tvar splitbar = null;\r\n\t\tvar dynamic_section = null;\r\n\t\tif(editable)\r\n\t\t{\r\n\t\t\tsplitinfo = \" - \" + (Area.splitbar_size + 2) +\"px\"; //2 px margin ?\r\n\t\t\tsplitbar = document.createElement(\"div\");\r\n\t\t\tsplitbar.className = \"litesplitbar \" + direction;\r\n\t\t\tif(direction == \"vertical\")\r\n\t\t\t\tsplitbar.style.height = Area.splitbar_size + \"px\";\r\n\t\t\telse\r\n\t\t\t\tsplitbar.style.width = Area.splitbar_size + \"px\";\r\n\t\t\tthis.splitbar = splitbar;\r\n\t\t\tsplitbar.addEventListener(\"mousedown\", inner_mousedown);\r\n\t\t}\r\n\r\n\t\tsizes = sizes || [\"50%\",null];\r\n\r\n\t\tif(direction == \"vertical\")\r\n\t\t{\r\n\t\t\tarea1.root.style.width = \"100%\";\r\n\t\t\tarea2.root.style.width = \"100%\";\r\n\r\n\t\t\tif(sizes[0] == null)\r\n\t\t\t{\r\n\t\t\t\tvar h = sizes[1];\r\n\t\t\t\tif(typeof(h) == \"number\")\r\n\t\t\t\t\th = sizes[1] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.height = \"-moz-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"-webkit-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = h;\r\n\t\t\t\tarea2.size = h;\r\n\t\t\t\tdynamic_section = area1;\r\n\t\t\t}\r\n\t\t\telse if(sizes[1] == null)\r\n\t\t\t{\r\n\t\t\t\tvar h = sizes[0];\r\n\t\t\t\tif(typeof(h) == \"number\")\r\n\t\t\t\t\th = sizes[0] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.height = h;\r\n\t\t\t\tarea1.size = h;\r\n\t\t\t\tarea2.root.style.height = \"-moz-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"-webkit-calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"calc( 100% - \" + h + splitinfo + \" )\";\r\n\t\t\t\tdynamic_section = area2;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar h1 = sizes[0];\r\n\t\t\t\tif(typeof(h1) == \"number\")\r\n\t\t\t\t\th1 = sizes[0] + \"px\";\r\n\t\t\t\tvar h2 = sizes[1];\r\n\t\t\t\tif(typeof(h2) == \"number\")\r\n\t\t\t\t\th2 = sizes[1] + \"px\";\r\n\t\t\t\tarea1.root.style.height = h1;\r\n\t\t\t\tarea1.size = h1;\r\n\t\t\t\tarea2.root.style.height = h2;\r\n\t\t\t\tarea2.size = h2;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse //horizontal\r\n\t\t{\r\n\t\t\tarea1.root.style.height = \"100%\";\r\n\t\t\tarea2.root.style.height = \"100%\";\r\n\r\n\t\t\tif(sizes[0] == null)\r\n\t\t\t{\r\n\t\t\t\tvar w = sizes[1];\r\n\t\t\t\tif(typeof(w) == \"number\")\r\n\t\t\t\t\tw = sizes[1] + \"px\";\r\n\t\t\t\tarea1.root.style.width = \"-moz-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"-webkit-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = w;\r\n\t\t\t\tarea2.size = sizes[1];\r\n\t\t\t\tdynamic_section = area1;\r\n\t\t\t}\r\n\t\t\telse if(sizes[1] == null)\r\n\t\t\t{\r\n\t\t\t\tvar w = sizes[0];\r\n\t\t\t\tif(typeof(w) == \"number\")\r\n\t\t\t\t\tw = sizes[0] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.width = w;\r\n\t\t\t\tarea1.size = w;\r\n\t\t\t\tarea2.root.style.width = \"-moz-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"-webkit-calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"calc( 100% - \" + w + splitinfo + \" )\";\r\n\t\t\t\tdynamic_section = area2;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar w1 = sizes[0];\r\n\t\t\t\tif(typeof(w1) == \"number\")\r\n\t\t\t\t\tw1 = sizes[0] + \"px\";\r\n\t\t\t\tvar w2 = sizes[1];\r\n\t\t\t\tif(typeof(w2) == \"number\")\r\n\t\t\t\t\tw2 = sizes[1] + \"px\";\r\n\r\n\t\t\t\tarea1.root.style.width = w1;\r\n\t\t\t\tarea1.size = w1;\r\n\t\t\t\tarea2.root.style.width = w2;\r\n\t\t\t\tarea2.size = w2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tarea1.root.removeChild( area1.content );\r\n\t\tarea1.root.appendChild( this.content );\r\n\t\tarea1.content = this.content;\r\n\r\n\t\tthis.root.appendChild( area1.root );\r\n\t\tif(splitbar)\r\n\t\t\tthis.root.appendChild( splitbar );\r\n\t\tthis.root.appendChild( area2.root );\r\n\r\n\t\tthis.sections = [area1, area2];\r\n\t\tthis.dynamic_section = dynamic_section;\r\n\t\tthis.direction = direction;\r\n\r\n\t\t//SPLITTER DRAGGER INTERACTION\r\n\t\tvar that = this;\r\n\t\tvar last_pos = [0,0];\r\n\t\tfunction inner_mousedown(e)\r\n\t\t{\r\n\t\t\tvar doc = that.root.ownerDocument;\r\n\t\t\tdoc.addEventListener(\"mousemove\",inner_mousemove);\r\n\t\t\tdoc.addEventListener(\"mouseup\",inner_mouseup);\r\n\t\t\tlast_pos[0] = e.pageX;\r\n\t\t\tlast_pos[1] = e.pageY;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_mousemove(e)\r\n\t\t{\r\n\t\t\tif(direction == \"horizontal\")\r\n\t\t\t{\r\n\t\t\t\tif (last_pos[0] != e.pageX)\r\n\t\t\t\t\tthat.moveSplit(last_pos[0] - e.pageX);\r\n\t\t\t}\r\n\t\t\telse if(direction == \"vertical\")\r\n\t\t\t{\r\n\t\t\t\tif (last_pos[1] != e.pageY)\r\n\t\t\t\t\tthat.moveSplit(e.pageY - last_pos[1]);\r\n\t\t\t}\r\n\r\n\t\t\tlast_pos[0] = e.pageX;\r\n\t\t\tlast_pos[1] = e.pageY;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tif(that.options.immediateResize || that.options.inmediateResize) //inmediate is for legacy...\r\n\t\t\t\tthat.onResize();\r\n\t\t}\r\n\r\n\t\tfunction inner_mouseup(e)\r\n\t\t{\r\n\t\t\tvar doc = that.root.ownerDocument;\r\n\t\t\tdoc.removeEventListener(\"mousemove\",inner_mousemove);\r\n\t\t\tdoc.removeEventListener(\"mouseup\",inner_mouseup);\r\n\t\t\tthat.onResize();\r\n\t\t}\r\n\t}\r\n\r\n\tArea.prototype.hide = function()\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t}\r\n\r\n\tArea.prototype.show = function()\r\n\t{\r\n\t\tthis.root.style.display = \"block\";\r\n\t}\r\n\r\n\tArea.prototype.showSection = function(num)\r\n\t{\r\n\t\tvar section = this.sections[num];\r\n\t\tvar size = 0;\r\n\r\n\t\tif( section && section.root.style.display != \"none\" )\r\n\t\t\treturn; //already visible\r\n\t\t\r\n\t\tif(this.direction == \"horizontal\")\r\n\t\t\tsize = section.root.style.width;\r\n\t\telse\r\n\t\t\tsize = section.root.style.height;\r\n\r\n\t\tif(size.indexOf(\"calc\") != -1)\r\n\t\t\tsize = \"50%\";\r\n\r\n\t\tfor(var i in this.sections)\r\n\t\t{\r\n\t\t\tvar section = this.sections[i];\r\n\r\n\t\t\tif(i == num)\r\n\t\t\t\tsection.root.style.display = \"inline-block\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.direction == \"horizontal\")\r\n\t\t\t\t\tsection.root.style.width = \"calc( 100% - \" + size + \" - 5px)\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.root.style.height = \"calc( 100% - \" + size + \" - 5px)\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.splitbar)\r\n\t\t\tthis.splitbar.style.display = \"inline-block\";\r\n\r\n\t\tthis.sendResizeEvent();\r\n\t}\r\n\r\n\tArea.prototype.hideSection = function(num)\r\n\t{\r\n\t\tfor(var i in this.sections)\r\n\t\t{\r\n\t\t\tvar section = this.sections[i];\r\n\r\n\t\t\tif(i == num)\r\n\t\t\t\tsection.root.style.display = \"none\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.direction == \"horizontal\")\r\n\t\t\t\t\tsection.root.style.width = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.root.style.height = \"100%\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.splitbar)\r\n\t\t\tthis.splitbar.style.display = \"none\";\r\n\r\n\t\tthis.sendResizeEvent();\r\n\t}\r\n\r\n\tArea.prototype.moveSplit = function(delta)\r\n\t{\r\n\t\tif(!this.sections) return;\r\n\r\n\t\tvar area1 = this.sections[0];\r\n\t\tvar area2 = this.sections[1];\r\n\t\tvar splitinfo = \" - \"+ Area.splitbar_size +\"px\";\r\n\r\n\t\tvar min_size = this.options.minSplitSize || 10;\r\n\r\n\t\tif(this.direction == \"horizontal\")\r\n\t\t{\r\n\r\n\t\t\tif (this.dynamic_section == area1)\r\n\t\t\t{\r\n\t\t\t\tvar size = (area2.root.offsetWidth + delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea1.root.style.width = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar size = (area1.root.offsetWidth - delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea2.root.style.width = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.width = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.width = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.direction == \"vertical\")\r\n\t\t{\r\n\t\t\tif (this.dynamic_section == area1)\r\n\t\t\t{\r\n\t\t\t\tvar size = (area2.root.offsetHeight - delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea1.root.style.height = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar size = (area1.root.offsetHeight + delta);\r\n\t\t\t\tif(size < min_size)\r\n\t\t\t\t\tsize = min_size;\r\n\t\t\t\tarea2.root.style.height = \"-moz-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"-webkit-calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea2.root.style.height = \"calc( 100% - \" + size + \"px \" + splitinfo + \" )\";\r\n\t\t\t\tarea1.root.style.height = size + \"px\"; //other split\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLiteGUI.trigger( this.root, \"split_moved\");\r\n\t\t//trigger split_moved event in all areas inside this area\r\n\t\tvar areas = this.root.querySelectorAll(\".litearea\");\r\n\t\tfor(var i = 0; i < areas.length; ++i)\r\n\t\t\tLiteGUI.trigger( areas[i], \"split_moved\" );\r\n\t}\r\n\r\n\tArea.prototype.addEventListener = function(a,b,c,d)\r\n\t{\r\n\t\treturn this.root.addEventListener(a,b,c,d);\r\n\t}\r\n\r\n\tArea.prototype.setAreaSize = function(area,size)\r\n\t{\r\n\t\tvar element = this.sections[1];\r\n\r\n\t\tvar splitinfo = \" - \"+Area.splitbar_size+\"px\";\r\n\t\telement.root.style.width = \"-moz-calc( 100% - \" + size + splitinfo + \" )\";\r\n\t\telement.root.style.width = \"-webkit-calc( 100% - \" + size + splitinfo + \" )\";\r\n\t\telement.root.style.width = \"calc( 100% - \" + size + splitinfo + \" )\";\r\n\t}\r\n\r\n\tArea.prototype.merge = function(main_section)\r\n\t{\r\n\t\tif(this.sections.length == 0) throw \"not splitted\";\r\n\r\n\t\tvar main = this.sections[main_section || 0];\r\n\r\n\t\tthis.root.appendChild( main.content );\r\n\t\tthis.content = main.content;\r\n\r\n\t\tthis.root.removeChild( this.sections[0].root );\r\n\t\tthis.root.removeChild( this.sections[1].root );\r\n\r\n\t\t/*\r\n\t\twhile(main.childNodes.length > 0)\r\n\t\t{\r\n\t\t\tvar e = main.childNodes[0];\r\n\t\t\tthis.root.appendChild(e);\r\n\t\t}\r\n\r\n\t\tthis.root.removeChild( this.sections[0].root );\r\n\t\tthis.root.removeChild( this.sections[1].root );\r\n\t\t*/\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis._computed_size = null;\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\tArea.prototype.add = function(v)\r\n\t{\r\n\t\tif(typeof(v) == \"string\")\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.innerHTML = v;\r\n\t\t\tv = element;\r\n\t\t}\r\n\r\n\t\tthis.content.appendChild( v.root || v );\r\n\t}\r\n\r\n\tArea.prototype.query = function(v)\r\n\t{\r\n\t\treturn this.root.querySelector(v);\r\n\t}\r\n\r\n\treturn LiteGUI.Area = Area;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Console',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\tfunction Console( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"div\");\r\n\t\tthis.root.className = \"liteconsole\";\r\n\t\tthis.root.innerHTML = \"<div class='log'></div><div class='foot'><input type='text'/></div>\";\r\n\r\n\t\tthis.log_element = this.root.querySelector('.log');\r\n\t\tthis.input = this.root.querySelector('input');\r\n\r\n\t\tthis.input.addEventListener(\"keydown\", this.processKeyDown.bind(this) );\r\n\t\tthis._prompt = options.prompt || \"]\";\r\n\r\n\t\tthis.onAutocomplete = null; //receives string, must return final string\r\n\t\tthis.onProcessCommand = null; //receives input value\r\n\r\n\t\tthis.history = [];\r\n\t\tthis._history_offset = 0;\r\n\t}\r\n\r\n\tConsole.prototype.processKeyDown = function(e)\r\n\t{\r\n\t\tif(this._input_blocked)\r\n\t\t\treturn;\r\n\r\n\t\tif(e.keyCode == 13) //return and exec\r\n\t\t{\r\n\t\t\tvar value = this.input.value;\r\n\t\t\tvar cmd = value.trim();\r\n\t\t\tthis.addMessage( this._prompt + cmd, \"me\",true);\r\n\t\t\tthis.input.value = \"\";\r\n\t\t\tthis.history.push(cmd);\r\n\t\t\tif(this.history.length > 10)\r\n\t\t\t\tthis.history.shift();\r\n\t\t\tif( this.onProcessCommand )\r\n\t\t\t\tthis.onProcessCommand( cmd );\r\n\t\t\tthis._history_offset = 0;\r\n\t\t}\r\n\t\telse if(e.keyCode == 38 || e.keyCode == 40) //up & down history\r\n\t\t{\r\n\t\t\tthis._history_offset += (e.keyCode == 38 ? -1 : 1);\r\n\t\t\tif(this._history_offset > 0)\r\n\t\t\t\tthis._history_offset = 0;\r\n\t\t\telse if(this._history_offset < -this.history.length)\r\n\t\t\t\tthis._history_offset = -this.history.length;\r\n\t\t\tvar pos = this.history.length + this._history_offset;\r\n\t\t\tif(pos < 0)\r\n\t\t\t\treturn;\r\n\t\t\tif( pos >= this.history.length)\r\n\t\t\t\tthis.input.value = \"\";\r\n\t\t\telse\r\n\t\t\t\tthis.input.value = this.history[ pos ];\r\n\t\t}\r\n\t\telse if(e.keyCode == 9) //tab autocompletion\r\n\t\t{\r\n\t\t\tif(this.onAutocomplete)\r\n\t\t\t\tthis.input.value = this.onAutocomplete( this.input.value );\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn;\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\tConsole.prototype.addMessage = function(text,className,as_text)\r\n\t{\r\n\t\tvar content = this.log_element;\r\n\t\tvar element = null; //contains the last message sent\r\n\r\n\t\tif(text && text.constructor === Array)\r\n\t\t{\r\n\t\t\tfor( var i = 0; i < text.length; ++i )\r\n\t\t\t\tadd( text[i] );\r\n\t\t}\r\n\t\telse if(text && text.constructor === Object)\r\n\t\t{\r\n\t\t\tadd( JSON.stringify(text,null,\"\"), this );\r\n\t\t}\r\n\t\telse\r\n\t\t\tadd( text, this );\r\n\r\n\t\tfunction add(txt, con)\r\n\t\t{\r\n\t\t\telement = document.createElement(\"pre\");\r\n\t\t\tif(as_text)\r\n\t\t\t\telement.innerText = txt;\r\n\t\t\telse\r\n\t\t\t\telement.innerHTML = txt;\r\n\t\t\telement.className = \"msg\";\r\n\t\t\tif(className)\r\n\t\t\t\telement.className += \" \" + className;\r\n\t\t\tcontent.appendChild(element);\r\n\t\t\tif( content.children.length > 1000 )\r\n\t\t\t\tcontent.removeChild( content.children[0] );\r\n\t\t}\r\n\r\n\t\tthis.log_element.scrollTop = 1000000;\r\n\t\telement.update = function(v)\r\n\t\t{\r\n\t\t\tthis.innerHTML = v;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tConsole.prototype.log = function()\r\n\t{\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tvar d = args.join(\",\");\r\n\t\treturn this.addMessage( d, \"msglog\" );\r\n\t}\r\n\r\n\tConsole.prototype.warn = function()\r\n\t{\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tvar d = args.join(\",\");\r\n\t\treturn this.addMessage( d, \"msgwarn\" );\r\n\t}\r\n\r\n\tConsole.prototype.error = function()\r\n\t{\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tvar d = args.join(\",\");\r\n\t\treturn this.addMessage( d, \"msgerror\" );\r\n\t}\r\n\r\n\tConsole.prototype.clear = function()\r\n\t{\r\n\t\tthis.log_element.innerHTML = \"\";\r\n\t}\r\n\r\n\treturn LiteGUI.Console = Console;\r\n\r\n});\ndefine('skylark-litegui/Dialog',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/****************** DIALOG **********************/\r\n\t/**\r\n\t* Dialog\r\n\t*\r\n\t* @class Dialog\r\n\t* @param {Object} options useful options are { title, width, height, closable, on_close, scroll }\r\n\t* @constructor\r\n\t*/\r\n\tfunction Dialog( options, legacy )\r\n\t{\r\n\t\tif( legacy || (options && options.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\tthis._ctor( options );\r\n\t}\r\n\r\n\tDialog.MINIMIZED_WIDTH = 200;\r\n\tDialog.title_height = \"20px\";\r\n\r\n\tDialog.getDialog = function( id )\r\n\t{\r\n\t\tvar element = document.getElementById( id );\t\t\r\n\t\tif(!element)\r\n\t\t\treturn null;\r\n\t\treturn element.dialog;\r\n\t}\r\n\r\n\tDialog.prototype._ctor = function( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar that = this;\r\n\t\tthis.width = options.width;\r\n\t\tthis.height = options.height;\r\n\t\tthis.minWidth = options.minWidth || 150;\r\n\t\tthis.minHeight = options.minHeight || 100;\r\n\t\tthis.content = options.content || \"\";\r\n\r\n\t\tvar panel = document.createElement(\"div\");\r\n\t\tif(options.id)\r\n\t\t\tpanel.id = options.id;\r\n\r\n\t\tpanel.className = \"litedialog \" + (options.className || \"\");\r\n\t\tpanel.data = this;\r\n\t\tpanel.dialog = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(options.title)\r\n\t\t{\r\n\t\t\tcode += \"<div class='panel-header'>\"+options.title+\"</div><div class='buttons'>\";\r\n\t\t\tif(options.minimize){\r\n\t\t\t\tcode += \"<button class='litebutton mini-button minimize-button'>-</button>\";\r\n\t\t\t\tcode += \"<button class='litebutton mini-button maximize-button' style='display:none'></button>\";\r\n\t\t\t}\r\n\t\t\tif(options.hide)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button hide-button'></button>\";\r\n\t\t\tif(options.detachable)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button detach-button'></button>\";\r\n\t\t\t\r\n\t\t\tif(options.close || options.closable)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button close-button'>\"+ LiteGUI.special_codes.close +\"</button>\";\r\n\t\t\tcode += \"</div>\";\r\n\t\t}\r\n\r\n\t\tcode += \"<div class='content'>\"+this.content+\"</div>\";\r\n\t\tcode += \"<div class='panel-footer'></div>\";\r\n\t\tpanel.innerHTML = code;\r\n\r\n\t\tthis.root = panel;\r\n\t\tthis.content = panel.querySelector(\".content\");\r\n\t\tthis.footer = panel.querySelector(\".panel-footer\");\r\n\r\n\t\tif(options.fullcontent)\r\n\t\t{\r\n\t\t\tthis.content.style.width = \"100%\";\t\t\r\n\t\t\tthis.content.style.height = options.title ? \"calc( 100% - \"+Dialog.title_height+\" )\" : \"100%\";\r\n\t\t}\r\n\r\n\t\tif(options.buttons)\r\n\t\t{\r\n\t\t\tfor(var i in options.buttons)\r\n\t\t\t\tthis.addButton(options.buttons[i].name, options.buttons[i]);\r\n\t\t}\r\n\r\n\t\t//if(options.scroll == false)\tthis.content.style.overflow = \"hidden\";\r\n\t\tif(options.scroll == true)\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\r\n\t\t//buttons *********************************\r\n\t\tvar close_button = panel.querySelector(\".close-button\");\r\n\t\tif(close_button)\r\n\t\t\tclose_button.addEventListener(\"click\", this.close.bind(this) );\r\n\r\n\t\tvar maximize_button = panel.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.addEventListener(\"click\", this.maximize.bind(this) );\r\n\r\n\t\tvar minimize_button = panel.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\r\n\t\t\tminimize_button.addEventListener(\"click\", this.minimize.bind(this) );\r\n\r\n\t\tvar hide_button = panel.querySelector(\".hide-button\");\r\n\t\tif(hide_button)\r\n\t\t\thide_button.addEventListener(\"click\", this.hide.bind(this) );\r\n\r\n\t\tvar detach_button = panel.querySelector(\".detach-button\");\r\n\t\tif(detach_button)\r\n\t\t\tdetach_button.addEventListener(\"click\", function() { that.detachWindow(); });\r\n\r\n\t\t//size, draggable, resizable, etc\r\n\t\tthis.enableProperties(options);\r\n\r\n\t\tthis.root.addEventListener(\"DOMNodeInsertedIntoDocument\", function(){ \r\n\t\t\tif( that.on_attached_to_DOM )\r\n\t\t\t\tthat.on_attached_to_DOM();\r\n\t\t\tif( that.on_resize )\r\n\t\t\t\tthat.on_resize();\r\n\t\t});\r\n\t\tthis.root.addEventListener(\"DOMNodeRemovedFromDocument\", function(){ \r\n\t\t\tif( that.on_detached_from_DOM )\r\n\t\t\t\tthat.on_detached_from_DOM();\r\n\t\t});\r\n\r\n\r\n\t\t//attach\r\n\t\tif(options.attach || options.parent)\r\n\t\t{\r\n\t\t\tvar parent = null;\r\n\t\t\tif(options.parent)\r\n\t\t\t\tparent = typeof(options.parent) == \"string\" ? document.querySelector(options.parent) : options.parent;\r\n\t\t\tif(!parent)\r\n\t\t\t\tparent = LiteGUI.root;\r\n\t\t\tparent.appendChild( this.root );\r\n\t\t\tthis.center();\r\n\t\t}\r\n\r\n\t\t//if(options.position) //not docked\r\n\t\t//\tthis.setPosition( options.position[0], options.position[1] );\r\n\t}\r\n\r\n\t/**\r\n\t* add widget or html to the content of the dialog\r\n\t* @method add\r\n\t*/\r\n\tDialog.prototype.add = function( litegui_item )\r\n\t{\r\n\t\tthis.content.appendChild( litegui_item.root || litegui_item );\r\n\t}\r\n\r\n\t//takes the info from the parent to \r\n\tDialog.prototype.enableProperties = function(options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar that = this;\r\n\r\n\t\tvar panel = this.root;\r\n\t\tpanel.style.position = \"absolute\";\r\n\t\t//panel.style.display = \"none\";\r\n\r\n\t\tpanel.style.minWidth = this.minWidth + \"px\";\r\n\t\tpanel.style.minHeight = this.minHeight + \"px\";\r\n\r\n\t\tif(this.width)\r\n\t\t\tpanel.style.width = this.width + \"px\";\r\n\r\n\t\tif(this.height)\r\n\t\t{\r\n\t\t\tif(typeof(this.height) == \"number\")\r\n\t\t\t{\r\n\t\t\t\tpanel.style.height = this.height + \"px\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.height.indexOf(\"%\") != -1)\r\n\t\t\t\t\tpanel.style.height = this.height;\r\n\t\t\t}\r\n\r\n\t\t\tthis.content.style.height = \"calc( \" + this.height + \"px - 24px )\";\r\n\t\t}\r\n\r\n\t\tpanel.style.boxShadow = \"0 0 3px black\";\r\n\r\n\t\tif(options.draggable)\r\n\t\t{\r\n\t\t\tthis.draggable = true;\r\n\t\t\tLiteGUI.draggable( panel, panel.querySelector(\".panel-header\"), function(){\r\n\t\t\t\tthat.bringToFront();\r\n\t\t\t},null, function(){\r\n\t\t\t\treturn !that.minimized;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(options.resizable)\r\n\t\t\tthis.setResizable();\r\n\t}\r\n\r\n\tDialog.prototype.setResizable = function()\r\n\t{\r\n\t\tif(this.resizable)\r\n\t\t\treturn;\r\n\r\n\t\tvar root = this.root;\r\n\t\tthis.resizable = true;\r\n\t\tvar footer = this.footer;\r\n\t\tfooter.style.minHeight = \"4px\";\r\n\t\tfooter.classList.add(\"resizable\");\r\n\r\n\t\tvar corner = document.createElement(\"div\");\r\n\t\tcorner.className = \"resizable-corner\";\r\n\t\tthis.root.appendChild( corner );\r\n\r\n\t\tfooter.addEventListener(\"mousedown\", inner_mouse);\r\n\t\tcorner.addEventListener(\"mousedown\", inner_mouse, true);\r\n\r\n\t\tvar mouse = [0,0];\r\n\t\tvar that = this;\r\n\r\n\t\tvar is_corner = false;\r\n\r\n\t\tfunction inner_mouse(e)\r\n\t\t{\r\n\t\t\t//console.log( getTime(), is_corner );\r\n\r\n\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.addEventListener(\"mousemove\", inner_mouse);\r\n\t\t\t\tdocument.body.addEventListener(\"mouseup\", inner_mouse);\r\n\t\t\t\tis_corner = this == corner;\r\n\t\t\t\tmouse[0] = e.pageX;\r\n\t\t\t\tmouse[1] = e.pageY;\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mousemove\")\r\n\t\t\t{\r\n\t\t\t\tvar rect = LiteGUI.getRect( root );\r\n\t\t\t\tvar w = rect.width;\r\n\t\t\t\tvar neww = w - (mouse[0] - e.pageX);\r\n\t\r\n\t\t\t\tvar h = rect.height;\r\n\t\t\t\tvar newh = h - (mouse[1] - e.pageY);\r\n\r\n\t\t\t\tif(is_corner)\r\n\t\t\t\t\troot.style.width = neww + \"px\";\r\n\t\t\t\troot.style.height = newh + \"px\";\r\n\r\n\t\t\t\tmouse[0] = e.pageX;\r\n\t\t\t\tmouse[1] = e.pageY;\r\n\t\t\t\tthat.content.style.height = \"calc( 100% - 24px )\";\r\n\r\n\t\t\t\tif(that.on_resize && (w != neww || h != newh) )\r\n\t\t\t\t\tthat.on_resize(e,neww,newh);\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mouseup\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", inner_mouse);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", inner_mouse);\r\n\t\t\t\tis_corner = false;\r\n\t\t\t}\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.dockTo = function( parent, dock_type )\r\n\t{\r\n\t\tif(!parent) return;\r\n\t\tvar panel = this.root;\r\n\r\n\t\tdock_type = dock_type || \"full\";\r\n\t\tparent = parent.content || parent;\r\n\r\n\t\tpanel.style.top = 0;\r\n\t\tpanel.style.left = 0;\r\n\r\n\t\tpanel.style.boxShadow = \"0 0 0\";\r\n\r\n\t\tif(dock_type == \"full\")\r\n\t\t{\r\n\t\t\tpanel.style.position = \"relative\";\r\n\t\t\tpanel.style.width = \"100%\";\r\n\t\t\tpanel.style.height = \"100%\";\r\n\t\t\tthis.content.style.width = \"100%\";\r\n\t\t\tthis.content.style.height = \"calc(100% - \"+ LiteGUI.Panel.title_height +\")\"; //title offset: 20px\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\t\t}\r\n\t\telse if(dock_type == 'left' || dock_type == 'right')\r\n\t\t{\r\n\t\t\tpanel.style.position = \"absolute\";\r\n\t\t\tpanel.style.top = 0;\r\n\t\t\tpanel.style[dock_type] = 0;\r\n\r\n\t\t\tpanel.style.width = this.width + \"px\";\r\n\t\t\tpanel.style.height = \"100%\";\r\n\t\t\tthis.content.style.height = \"calc(100% - \"+ LiteGUI.Panel.title_height +\")\";\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\r\n\t\t\tif(dock_type == 'right')\r\n\t\t\t{\r\n\t\t\t\tpanel.style.left = \"auto\";\r\n\t\t\t\tpanel.style.right = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(dock_type == 'bottom' || dock_type == 'top')\r\n\t\t{\r\n\t\t\tpanel.style.width = \"100%\";\r\n\t\t\tpanel.style.height = this.height + \"px\";\r\n\t\t\tif(dock_type == 'bottom')\r\n\t\t\t{\r\n\t\t\t\tpanel.style.bottom = 0;\r\n\t\t\t\tpanel.style.top = \"auto\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.draggable)\r\n\t\t{\r\n\t\t\tLiteGUI.draggable(panel);\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif(parent.content)\r\n\t\t\tparent.content.appendChild(panel);\r\n\t\telse if( typeof(parent) == \"string\")\r\n\t\t{\r\n\t\t\tparent = document.querySelector( parent );\r\n\t\t\tif(parent)\r\n\t\t\t\tparent.appendChild( panel )\r\n\t\t}\r\n\t\telse\r\n\t\t\tparent.appendChild( panel ); \r\n\t}\r\n\r\n\tDialog.prototype.addButton = function(name,options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tif( options.constructor === Function )\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.className = \"litebutton\";\r\n\r\n\t\tbutton.innerHTML = name;\r\n\t\tif(options.className)\r\n\t\t\tbutton.className += \" \" + options.className;\r\n\r\n\t\tthis.root.querySelector(\".panel-footer\").appendChild( button );\r\n\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback(this);\r\n\r\n\t\t\tif(options.close)\r\n\t\t\t\tthat.close();\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\t/**\r\n\t* destroys the dialog\r\n\t* @method close\r\n\t*/\r\n\tDialog.prototype.close = function() {\r\n\t\tLiteGUI.remove( this.root );\r\n\t\tLiteGUI.trigger( this, \"closed\", this);\r\n\t\tif(this.on_close)\r\n\t\t\tthis.on_close();\r\n\t\tif(this.onclose)\r\n\t\t\tconsole.warn(\"Dialog: Do not use onclose, use on_close instead\");\r\n\t\tif(this.dialog_window)\r\n\t\t{\r\n\t\t\tthis.dialog_window.close();\r\n\t\t\tthis.dialog_window = null;\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.highlight = function(time)\r\n\t{\r\n\t\ttime = time || 100;\r\n\t\tthis.root.style.outline = \"1px solid white\";\r\n\t\tvar doc = this.root.ownerDocument;\r\n\t\tvar w = doc.defaultView || doc.parentWindow;\r\n\t\tw.focus();\r\n\t\tsetTimeout( (function(){\r\n\t\t\tthis.root.style.outline = null;\r\n\t\t}).bind(this), time );\r\n\t}\r\n\r\n\tDialog.minimized = [];\r\n\r\n\tDialog.prototype.minimize = function() {\r\n\t\tif(this.minimized)\r\n\t\t\treturn;\r\n\r\n\t\tthis.minimized = true;\r\n\t\tthis.old_box = this.root.getBoundingClientRect();\r\n\r\n\t\tthis.root.querySelector(\".content\").style.display = \"none\";\r\n\t\t\r\n\t\tvar minimize_button = this.root.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\t\r\n\t\t\tminimize_button.style.display = \"none\";\r\n\r\n\t\tvar maximize_button = this.root.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.style.display = \"\";\r\n\r\n\t\tthis.root.style.width = LiteGUI.Dialog.MINIMIZED_WIDTH + \"px\";\r\n\r\n\t\tLiteGUI.bind( this, \"closed\", function() {\r\n\t\t\tLiteGUI.Dialog.minimized.splice( LiteGUI.Dialog.minimized.indexOf( this ), 1);\r\n\t\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\t\t});\r\n\r\n\t\tLiteGUI.Dialog.minimized.push( this );\r\n\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\r\n\t\tLiteGUI.trigger( this,\"minimizing\" );\r\n\t}\r\n\r\n\tDialog.arrangeMinimized = function()\r\n\t{\r\n\t\tfor(var i in LiteGUI.Dialog.minimized)\r\n\t\t{\r\n\t\t\tvar dialog = LiteGUI.Dialog.minimized[i];\r\n\t\t\tvar parent = dialog.root.parentNode;\r\n\t\t\tvar pos = parent.getBoundingClientRect().height - 20;\r\n\t\t\tdialog.root.style.left = LiteGUI.Dialog.MINIMIZED_WIDTH * i;\r\n\t\t\tdialog.root.style.top = pos + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.maximize = function() {\r\n\t\tif(!this.minimized)\r\n\t\t\treturn;\r\n\t\tthis.minimized = false;\r\n\r\n\t\tthis.root.querySelector(\".content\").style.display = \"\";\r\n\t\tLiteGUI.draggable(this.root);\r\n\t\tthis.root.style.left = this.old_box.left+\"px\";\r\n\t\tthis.root.style.top = this.old_box.top + \"px\";\r\n\t\tthis.root.style.width = this.old_box.width + \"px\";\r\n\t\tthis.root.style.height = this.old_box.height + \"px\";\r\n\r\n\t\tvar minimize_button = this.root.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\r\n\t\t\tminimize_button.style.display = \"\";\r\n\r\n\t\tvar maximize_button = this.root.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.style.display = \"none\";\r\n\r\n\t\tLiteGUI.Dialog.minimized.splice( LiteGUI.Dialog.minimized.indexOf( this ), 1);\r\n\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\t\tLiteGUI.trigger( this, \"maximizing\" );\r\n\t}\r\n\r\n\tDialog.prototype.makeModal = function()\r\n\t{\r\n\t\tLiteGUI.showModalBackground(true);\r\n\t\tLiteGUI.modalbg_div.appendChild( this.root ); //add panel\r\n\t\tthis.show();\r\n\t\tthis.center();\r\n\r\n\t\tLiteGUI.bind( this, \"closed\", inner );\r\n\r\n\t\tfunction inner(e)\r\n\t\t{\r\n\t\t\tLiteGUI.showModalBackground(false);\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.bringToFront = function()\r\n\t{\r\n\t\tvar parent = this.root.parentNode;\r\n\t\tparent.removeChild(this.root);\r\n\t\tparent.appendChild(this.root);\r\n\t}\r\n\r\n\t/**\r\n\t* shows a hidden dialog\r\n\t* @method show\r\n\t*/\r\n\tDialog.prototype.show = function( v, reference_element )\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t{\r\n\t\t\tif(!reference_element)\r\n\t\t\t\tLiteGUI.add( this );\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar doc = reference_element.ownerDocument;\r\n\t\t\t\tvar parent = doc.querySelector(\".litegui-wrap\") || doc.body;\r\n\t\t\t\tparent.appendChild( this.root );\r\n\t\t\t\tvar w = doc.defaultView || doc.parentWindow;\r\n\t\t\t\tw.focus();\r\n\t\t\t}\r\n\t\t\tthis.center();\r\n\t\t}\r\n\r\n\t\tif(!this.detach_window)\r\n\t\t{\r\n\t\t\tthis.root.style.display = \"\";\r\n\t\t\tLiteGUI.trigger( this, \"shown\" );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* hides the dialog\r\n\t* @method hide\r\n\t*/\r\n\tDialog.prototype.hide = function( v )\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t\tLiteGUI.trigger(this, \"hidden\");\r\n\t}\r\n\r\n\tDialog.prototype.fadeIn = function(time)\r\n\t{\r\n\t\ttime = time || 1000;\r\n\t\tthis.root.style.display = \"\";\r\n\t\tthis.root.style.opacity = 0;\r\n\t\tvar that = this;\r\n\t\tsetTimeout(function(){\r\n\t\t\tthat.root.style.transition = \"opacity \"+time+\"ms\";\r\n\t\t\tthat.root.style.opacity = 1;\r\n\t\t},100);\r\n\t}\r\n\r\n\tDialog.prototype.setPosition = function(x,y)\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t\tconsole.warn(\"LiteGUI.Dialog: Cannot set position of dialog if it is not in the DOM\");\r\n\t\tthis.root.position = \"absolute\";\r\n\t\tthis.root.style.left = x + \"px\";\r\n\t\tthis.root.style.top = y + \"px\";\r\n\t}\r\n\r\n\tDialog.prototype.setSize = function( w, h )\r\n\t{\r\n\t\tthis.root.style.width = typeof(w) == \"number\" ? w + \"px\" : w;\r\n\t\tthis.root.style.height = typeof(h) == \"number\" ? h + \"px\" : h;\r\n\t}\r\n\r\n\tDialog.prototype.setTitle = function(text)\r\n\t{\r\n\t\tif(!this.header)\r\n\t\t\treturn;\r\n\t\tthis.header.innerHTML = text;\r\n\t}\r\n\r\n\tDialog.prototype.center = function()\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t\treturn;\r\n\r\n\t\tthis.root.position = \"absolute\";\r\n\t\tvar width = this.root.offsetWidth;\r\n\t\tvar height = this.root.offsetHeight;\r\n\t\tvar parent_width = this.root.parentNode.offsetWidth;\r\n\t\tvar parent_height = this.root.parentNode.offsetHeight;\r\n\t\tthis.root.style.left = Math.floor(( parent_width - width ) * 0.5) + \"px\";\r\n\t\tthis.root.style.top = Math.floor(( parent_height - height ) * 0.5) + \"px\";\r\n\t}\r\n\r\n\t/**\r\n\t* Adjust the size of the dialog to the size of the content\r\n\t* @method adjustSize\r\n\t* @param {number} margin\r\n\t*/\r\n\tDialog.prototype.adjustSize = function( margin, skip_timeout )\r\n\t{\r\n\t\tmargin = margin || 0;\r\n\t\tthis.content.style.height = \"auto\";\r\n\r\n\t\tif(this.content.offsetHeight == 0 && !skip_timeout) //happens sometimes if the dialog is not yet visible\r\n\t\t{\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout( function(){ that.adjustSize( margin, true ); }, 1 );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar extra = 0;\r\n\t\tvar footer = this.root.querySelector(\".panel-footer\");\r\n\t\tif(footer)\r\n\t\t\textra += footer.offsetHeight;\r\n\r\n\t\tvar width = this.content.offsetWidth;\r\n\t\tvar height = this.content.offsetHeight + 20 + margin + extra;\r\n\r\n\t\tthis.setSize( width, height );\r\n\t}\r\n\r\n\tDialog.prototype.clear = function()\r\n\t{\r\n\t\tthis.content.innerHTML = \"\";\r\n\t}\r\n\r\n\tDialog.prototype.detachWindow = function( on_complete, on_close )\r\n\t{\r\n\t\tif(this.dialog_window)\r\n\t\t\treturn;\r\n\r\n\t\t//create window\r\n\t\tvar rect = this.root.getClientRects()[0];\r\n\t\tvar w = rect.width;\r\n\t\tvar h = rect.height;\r\n\t\tvar title = \"Window\";\r\n\t\tvar header = this.root.querySelector(\".panel-header\");\r\n\t\tif(header)\r\n\t\t\ttitle = header.textContent;\r\n\r\n\t\tvar dialog_window = window.open(\"\",\"\",\"width=\"+w+\", height=\"+h+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\tdialog_window.document.write( \"<head><title>\"+title+\"</title>\" );\r\n\t\tthis.dialog_window = dialog_window;\r\n\r\n\t\t//transfer style\r\n\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\tdialog_window.document.write( styles[i].outerHTML );\r\n\t\tdialog_window.document.write( \"</head><body></body>\" );\r\n\t\tdialog_window.document.close();\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t//closing event\r\n\t\tdialog_window.onbeforeunload = function(){\r\n\t\t\tvar index = LiteGUI.windows.indexOf( dialog_window );\r\n\t\t\tif(index != -1)\r\n\t\t\t\tLiteGUI.windows.splice( index, 1 );\r\n\t\t\tif(on_close)\r\n\t\t\t\ton_close();\r\n\t\t}\r\n\r\n\t\t//move the content there\r\n\t\tdialog_window.document.body.appendChild( this.content );\r\n\t\tthis.root.style.display = \"none\"; //hide\r\n\t\tthis._old_height = this.content.style.height;\r\n\t\tthis.content.style.height = \"100%\";\r\n\r\n\t\tLiteGUI.windows.push( dialog_window );\r\n\r\n\t\tif(on_complete)\r\n\t\t\ton_complete();\r\n\r\n\t\treturn dialog_window;\t\t\r\n\t}\r\n\r\n\tDialog.prototype.reattachWindow = function( on_complete )\r\n\t{\r\n\t\tif(!this.dialog_window)\r\n\t\t\treturn;\r\n\r\n\t\tthis.root.appendChild( this.content );\r\n\t\tthis.root.style.display = \"\"; //show\r\n\t\tthis.content.style.height = this._old_height;\r\n\t\tdelete this._old_height;\r\n\t\tthis.dialog_window.close();\r\n\t\tvar index = LiteGUI.windows.indexOf( this.dialog_window );\r\n\t\tif(index != -1)\r\n\t\t\tLiteGUI.windows.splice( index, 1 );\r\n\t\tthis.dialog_window = null;\r\n\t}\r\n\r\n\r\n\t//*********************************************\r\n\r\n\tDialog.showAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.show();\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.hideAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.hide();\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.closeAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.close();\r\n\t\t}\r\n\t}\r\n\r\n\treturn LiteGUI.Dialog = Dialog;\r\n});\ndefine('skylark-litegui/Dragger',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/***** DRAGGER **********/\r\n\tfunction Dragger(value, options)\r\n\t{\r\n\t\tif(value === null || value === undefined)\r\n\t\t\tvalue = 0;\r\n\t\telse if(value.constructor === String)\r\n\t\t\tvalue = parseFloat(value);\r\n\t\telse if(value.constructor !== Number)\r\n\t\t\tvalue = 0;\r\n\r\n\t\tthis.value = value;\r\n\t\tvar that = this;\r\n\t\tvar precision = options.precision != undefined ? options.precision : 3; //num decimals\r\n\r\n\t\tthis.options = options || {};\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"dragger \" + (options.extraclass ? options.extraclass : \"\");\r\n\t\tthis.root = element;\r\n\r\n\t\tvar wrap = document.createElement(\"span\");\r\n\t\twrap.className = \"inputfield \" + (options.extraclass ? options.extraclass : \"\") + (options.full ? \" full\" : \"\");\r\n\t\tif(options.disabled)\r\n\t\twrap.className += \" disabled\";\r\n\t\telement.appendChild(wrap);\r\n\r\n\t\tvar dragger_class = options.dragger_class || \"full\";\r\n\r\n\t\tvar input = document.createElement(\"input\");\r\n\t\tinput.className = \"text number \" + (dragger_class ? dragger_class : \"\");\r\n\t\tinput.value = value.toFixed( precision ) + (options.units ? options.units : \"\");\r\n\t\tinput.tabIndex = options.tab_index;\r\n\t\tthis.input = input;\r\n\t\telement.input = input;\r\n\r\n\t\tif(options.disabled)\r\n\t\t\tinput.disabled = true;\r\n\t\tif(options.tab_index)\r\n\t\t\tinput.tabIndex = options.tab_index;\r\n\t\twrap.appendChild(input);\r\n\r\n\t\tinput.addEventListener(\"keydown\",function(e) {\r\n\t\t\tif(e.keyCode == 38)\r\n\t\t\t\tinner_inc(1,e);\r\n\t\t\telse if(e.keyCode == 40)\r\n\t\t\t\tinner_inc(-1,e);\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tvar dragger = document.createElement(\"div\");\r\n\t\tdragger.className = \"drag_widget\";\r\n\t\tif(options.disabled)\r\n\t\t\tdragger.className += \" disabled\";\r\n\r\n\t\twrap.appendChild(dragger);\r\n\t\telement.dragger = dragger;\r\n\r\n\t\tdragger.addEventListener(\"mousedown\",inner_down);\r\n\t\tinput.addEventListener(\"wheel\",inner_wheel,false);\r\n\t\tinput.addEventListener(\"mousewheel\",inner_wheel,false);\r\n\r\n\t\tvar doc_binded = null;\r\n\r\n\t\tfunction inner_down(e)\r\n\t\t{\r\n\t\t\tdoc_binded = input.ownerDocument;\r\n\r\n\t\t\tdoc_binded.removeEventListener(\"mousemove\", inner_move);\r\n\t\t\tdoc_binded.removeEventListener(\"mouseup\", inner_up);\r\n\r\n\t\t\tif(!options.disabled)\r\n\t\t\t{\r\n\t\t\t\tif(element.requestPointerLock)\r\n\t\t\t\t\telement.requestPointerLock();\r\n\t\t\t\tdoc_binded.addEventListener(\"mousemove\", inner_move);\r\n\t\t\t\tdoc_binded.addEventListener(\"mouseup\", inner_up);\r\n\r\n\t\t\t\tdragger.data = [e.screenX, e.screenY];\r\n\r\n\t\t\t\tLiteGUI.trigger( element,\"start_dragging\");\r\n\t\t\t}\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_move(e)\r\n\t\t{\r\n\t\t\tvar deltax = e.screenX - dragger.data[0];\r\n\t\t\tvar deltay = dragger.data[1] - e.screenY;\r\n\t\t\tvar diff = [ deltax, deltay ];\r\n\t\t\tif(e.movementX !== undefined)\r\n\t\t\t\tdiff = [e.movementX, -e.movementY]\r\n\t\t\t//console.log(e);\r\n\t\t\tdragger.data = [e.screenX, e.screenY];\r\n\t\t\tvar axis = options.horizontal ? 0 : 1;\r\n\t\t\tinner_inc( diff[axis], e );\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tfunction inner_wheel(e)\r\n\t\t{\r\n\t\t\t//console.log(\"wheel!\");\r\n\t\t\tif(document.activeElement !== this)\r\n\t\t\t\treturn;\r\n\t\t\tvar delta = e.wheelDelta !== undefined ? e.wheelDelta : (e.deltaY ? -e.deltaY/3 : 0);\r\n\t\t\tinner_inc( delta > 0 ? 1 : -1, e );\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tfunction inner_up(e)\r\n\t\t{\r\n\t\t\tLiteGUI.trigger(element, \"stop_dragging\");\r\n\t\t\tvar doc = doc_binded || document;\r\n\t\t\tdoc_binded = null;\r\n\t\t\tdoc.removeEventListener(\"mousemove\", inner_move);\r\n\t\t\tdoc.removeEventListener(\"mouseup\", inner_up);\r\n\t\t\tif(doc.exitPointerLock)\r\n\t\t\t\tdoc.exitPointerLock();\r\n\t\t\tLiteGUI.trigger(dragger,\"blur\");\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tfunction inner_inc(v,e)\r\n\t\t{\r\n\t\t\tif(!options.linear)\r\n\t\t\t\tv = v > 0 ? Math.pow(v,1.2) : Math.pow( Math.abs(v), 1.2) * -1;\r\n\t\t\tvar scale = (options.step ? options.step : 1.0);\r\n\t\t\tif(e && e.shiftKey)\r\n\t\t\t\tscale *= 10;\r\n\t\t\telse if(e && e.ctrlKey)\r\n\t\t\t\tscale *= 0.1;\r\n\t\t\tvar value = parseFloat( input.value ) + v * scale;\r\n\t\t\tif(options.max != null && value > options.max)\r\n\t\t\t\tvalue = options.max;\r\n\t\t\tif(options.min != null && value < options.min)\r\n\t\t\t\tvalue = options.min;\r\n\r\n\t\t\tinput.value = value.toFixed( precision );\r\n\t\t\t//input.value = ((value * 1000)<<0) / 1000; //remove ugly decimals\r\n\t\t\tif(options.units)\r\n\t\t\t\tinput.value += options.units;\r\n\t\t\tLiteGUI.trigger(input,\"change\");\r\n\t\t}\r\n\t}\r\n\r\n\tDragger.prototype.setRange = function(min,max)\r\n\t{\r\n\t\tthis.options.min = min;\r\n\t\tthis.options.max = max;\r\n\t}\r\n\r\n\tDragger.prototype.setValue = function(v, skip_event) { \r\n\t\tv = parseFloat(v);\r\n\t\tthis.value = v;\r\n\t\tif(this.options.precision)\r\n\t\t\tv = v.toFixed(this.options.precision);\r\n\t\tif(this.options.units)\r\n\t\t\tv += this.options.units;\r\n\t\tthis.input.value = v;\r\n\t\tif(!skip_event)\r\n\t\t\tLiteGUI.trigger( this.input, \"change\" );\r\n\t}\r\n\r\n\tDragger.prototype.getValue = function()\r\n\t{\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\treturn LiteGUI.Dragger = Dragger;\r\n});\ndefine('skylark-litegui/Inspector',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/**\r\n\t* Inspector allows to create a list of widgets easily, it also provides methods to create the widgets automatically.<br/>\r\n\t* Every widget is created calling the function add followed by the widget name, p.e. addSlider or addVector3 or addNumber.<br/>\r\n\t* Widgets always receive three parameters:<br/>\r\n\t* - name: String that defines the name at that it will be shown in the left side of the widget.<br/>\r\n\t* - value: the value that will be displayed in the widget.<br/>\r\n\t* - options: Object containing all the values .<br/>\r\n\t*\r\n\t* @class Inspector\r\n\t* @param {Object} options object with a set of options { <br/>\r\n\t\twidth: total width <br/>\r\n\t\theight: total height <br/>\r\n\t\twidgets_width: width of every widget (used mostly in horizontal inspectors) <br/>\r\n\t\tname_width: width of the name part of widgets <br/>\r\n\t\tfull: set to true if you want the inspector to use all the parent width and height <br/>\r\n\t\twidgets_per_row: number of widgets per row, default is 1 but you can change it if you want to pack several widgets in a row (useful for small widgets like checkboxes) <br/>\r\n\t\tone_line: widgets are place one next to the other horizontaly <br/>\r\n\t\tonchange: callback to call when something changes <br/>\r\n\t   } <br/>\r\n\r\n\t\tDependencies: \r\n\t\t\t- jscolor.js\r\n\r\n\t* @constructor\r\n\t*/\r\n\r\n\tfunction Inspector( options )\r\n\t{\r\n\t\t//for legacy code\r\n\t\tif(options && options.constructor === String)\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = arguments[1] || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tthis.root = document.createElement(\"DIV\");\r\n\t\tthis.root.className = \"inspector \" + ( options.full ? \"full\" : \"\") + (options.className || \"\");\r\n\t\tif(options.one_line)\r\n\t\t{\r\n\t\t\tthis.one_line = true;\r\n\t\t\tthis.root.className += \" one_line\";\r\n\t\t}\r\n\r\n\t\tif(options.id)\r\n\t\t\tthis.root.id = options.id;\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis.values = {};\r\n\t\tthis.widgets = [];\r\n\t\tthis.widgets_by_name = {};\r\n\t\tthis.row_number = 0; //used to detect if element is even (cannot use CSS, special cases everywhere)\r\n\r\n\t\tthis.addContainer(); //add empty container\r\n\t\tthis.tab_index = Math.floor(Math.random() * 10000);\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\t\tif(!options.one_line)\r\n\t\t\t\tthis.root.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\tif(options.name_width)\r\n\t\t\tthis.name_width = options.name_width;\r\n\t\tif(options.widgets_width)\r\n\t\t\tthis.widgets_width = options.widgets_width;\r\n\r\n\t\tif(options.noscroll)\r\n\t\t\tthis.root.style.overflow = \"hidden\";\r\n\r\n\t\tif(options.onchange)\r\n\t\t\tthis.onchange = options.onchange;\r\n\r\n\t\tif(options.parent)\r\n\t\t\tthis.appendTo(options.parent);\r\n\r\n\t\tthis.className = this.root.className;\r\n\r\n\t\tthis.widgets_per_row = options.widgets_per_row || 1;\r\n\t}\r\n\r\n\tInspector.prototype.getValues = function()\r\n\t{\r\n\t\tvar r = {};\r\n\t\tfor(var i in this.widgets_by_name)\r\n\t\t\tr[i] = this.widgets_by_name[i].getValue();\r\n\t\treturn r;\r\n\t}\r\n\r\n\tInspector.prototype.setValues = function(v)\r\n\t{\r\n\t\tfor(var i in v)\r\n\t\t\tif( this.widgets_by_name[i] )\r\n\t\t\t\tthis.widgets_by_name[i].setValue( v[i] );\r\n\t}\r\n\r\n\t//append the inspector to a parent\r\n\tInspector.prototype.appendTo = function( parent, at_front )\r\n\t{\r\n\t\tif(!parent)\r\n\t\t\treturn;\r\n\t\tif(parent.constructor === String)\r\n\t\t\tparent = document.querySelector(parent);\r\n\t\tif(!parent)\r\n\t\t\treturn;\r\n\t\tif( at_front )\r\n\t\t\tparent.insertBefore( this.root, parent.firstChild );\r\n\t\telse\r\n\t\t\tparent.appendChild( this.root );\r\n\t}\r\n\r\n\t/**\r\n\t* Removes all the widgets inside the inspector\r\n\t* @method clear\r\n\t*/\r\n\tInspector.prototype.clear = function()\r\n\t{\r\n\t\tpurgeElement( this.root, true ); //hack, but doesnt seem to work\r\n\r\n\t\twhile(this.root.hasChildNodes())\r\n\t\t\tthis.root.removeChild( this.root.lastChild );\r\n\r\n\t\tthis.root.className = this.className;\r\n\r\n\t\tthis.row_number = 0;\r\n\t\tthis.values = {};\r\n\t\tthis.widgets = [];\r\n\t\tthis.widgets_by_name = {};\r\n\t\tthis.sections = [];\r\n\t\tthis.current_section = null;\r\n\t\tthis._current_container = null;\r\n\t\tthis._current_container_stack = null;\r\n\t\tthis.addContainer();\r\n\t}\r\n\r\n\t/**\r\n\t* Tryes to refresh (calls on_refresh)\r\n\t* @method refresh\r\n\t*/\r\n\tInspector.prototype.refresh = function()\r\n\t{\r\n\t\tif(this.on_refresh)\r\n\t\t\tthis.on_refresh();\r\n\t}\r\n\r\n\t// Append widget to this inspector (TODO: rename to appendWidget)\r\n\t// + widget_parent\r\n\t// + replace\r\n\tInspector.prototype.append = function( widget, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = options.widget_parent || this._current_container || this.root;\r\n\r\n\t\tif(options.replace)\r\n\t\t\toptions.replace.parentNode.replaceChild( widget, options.replace );\r\n\t\telse\r\n\t\t{\r\n\t\t\twidget.section = this.current_section;\r\n\t\t\troot.appendChild( widget );\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.prototype.pushContainer = function( container )\r\n\t{\r\n\t\tif( !this._current_container_stack )\r\n\t\t\tthis._current_container_stack = [ container ];\r\n\t\telse\r\n\t\t{\r\n\t\t\tif( this._current_container_stack.indexOf( container ) != -1 )\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"Container already in the stack\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._current_container_stack.push( container );\r\n\t\t}\r\n\r\n\t\tthis._current_container = container;\r\n\t}\r\n\r\n\tInspector.prototype.isContainerInStack = function( container )\r\n\t{\r\n\t\tif(!this._current_container_stack)\r\n\t\t\treturn false;\r\n\t\tif( this._current_container_stack.indexOf( container ) != -1 )\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tInspector.prototype.popContainer = function( container )\r\n\t{\r\n\t\tthis.row_number = 0;\r\n\t\tif(this._current_container_stack && this._current_container_stack.length)\r\n\t\t{\r\n\t\t\tif(container)\r\n\t\t\t{\r\n\t\t\t\tvar aux = this._current_container_stack.pop();\r\n\t\t\t\twhile(aux && aux != container)\r\n\t\t\t\t\taux = this._current_container_stack.pop();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._current_container_stack.pop();\r\n\t\t\t}\r\n\t\t\tthis._current_container = this._current_container_stack[ this._current_container_stack.length - 1 ];\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._current_container = null;\r\n\t}\r\n\r\n\tInspector.prototype.setup = function(info)\r\n\t{\r\n\t\tfor(var i in info)\r\n\t\t{\r\n\t\t\tvar w = info[i];\r\n\t\t\tvar widget = this.add( w.type, w.name, w.value, w.options );\r\n\t\t}\r\n\t}\r\n\r\n\t/**  Returns the widget given the name\r\n\t*\r\n\t* @method getWidget\r\n\t* @param {String} name the name of the widget supplied when creating it or the number of the widget\r\n\t* @return {Object} widget object\r\n\t*/\r\n\tInspector.prototype.getWidget = function( name )\r\n\t{\r\n\t\tif( name !== null && name.constructor === Number )\r\n\t\t\treturn this.widgets[ name ];\r\n\t\treturn this.widgets_by_name[ name ];\r\n\t}\r\n\r\n\t/**  Given an instance it shows all the attributes\r\n\t*\r\n\t* @method inspectInstance\r\n\t* @param {Object} instance the instance that you want to inspect, attributes will be collected from this object\r\n\t* @param {Array} properties an array with all the names of the properties you want to inspect, \r\n\t*\t\t  if not specified then it calls getProperties, othewise collect them and tries to guess the type\r\n\t* @param {Object} properties_info_example it overwrites the info about properties found in the object (in case the automaticaly guessed type is wrong)\r\n\t* @param {Array} properties_to_skip this properties will be ignored\r\n\t*/\r\n\tInspector.prototype.inspectInstance = function( instance, properties, properties_info_example, properties_to_skip ) \r\n\t{\r\n\t\tif(!instance)\r\n\t\t\treturn;\r\n\r\n\t\tif( !properties )\r\n\t\t{\tif( instance.getProperties )\r\n\t\t\t\tproperties = instance.getProperties();\r\n\t\t\telse\r\n\t\t\t\tproperties = this.collectProperties( instance );\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t}\r\n\r\n\t\tvar classObject = instance.constructor;\r\n\t\tif(!properties_info_example && classObject.properties)\r\n\t\t\tproperties_info_example = classObject.properties;\r\n\r\n\t\t//Properties info contains  name:type for every property\r\n\t\t//Must be cloned to ensure there is no overlap between widgets reusing the same container\r\n\t\tvar properties_info = {};\r\n\r\n\t\tif( instance.getInspectorProperties )\r\n\t\t\tproperties_info = instance.getInspectorProperties();\r\n\t\telse\r\n\t\t{\r\n\t\t\t//add to properties_info the ones that are not specified \r\n\t\t\tfor(var i in properties)\r\n\t\t\t{\r\n\t\t\t\tif( properties_info_example && properties_info_example[i] )\r\n\t\t\t\t{\r\n\t\t\t\t\t//clone\r\n\t\t\t\t\tproperties_info[i] = inner_clone( properties_info_example[i] );\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar v = properties[i];\r\n\r\n\t\t\t\tif(classObject[\"@\" + i]) //guess from class object info\r\n\t\t\t\t{\r\n\t\t\t\t\tvar shared_options = classObject[\"@\" + i];\r\n\t\t\t\t\tif( shared_options && shared_options.widget === null)\r\n\t\t\t\t\t\tcontinue; //skip\r\n\t\t\t\t\tproperties_info[i] = inner_clone( shared_options );\r\n\t\t\t\t}\r\n\t\t\t\telse if(instance[\"@\" + i]) //guess from instance info\r\n\t\t\t\t\tproperties_info[i] = instance[\"@\" + i];\r\n\t\t\t\telse if(v === null || v === undefined) //are you sure?\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tswitch( v.constructor )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase Number: properties_info[i] = { type: \"number\", step: 0.1 }; break;\r\n\t\t\t\t\t\tcase String: properties_info[i] = { type: \"string\" }; break;\r\n\t\t\t\t\t\tcase Boolean: properties_info[i] = { type: \"boolean\" }; break;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif( v && (v.constructor === Array || v.constructor.BYTES_PER_ELEMENT) ) //Array or typed_array\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar is_number = v[0] != null && v[0].constructor === Number;\r\n\t\t\t\t\t\t\t\tswitch(v.length)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcase 2: properties_info[i] = { type: is_number ? \"vec2\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tcase 3: properties_info[i] = { type: is_number ? \"vec3\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tcase 4: properties_info[i] = { type: is_number ? \"vec4\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tdefault: \r\n\t\t\t\t\t\t\t\t\t\tproperties_info[i] = { type: \"Array\" }; break;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(properties_to_skip)\r\n\t\t\tfor(var i in properties_to_skip)\r\n\t\t\t\tdelete properties_info[ properties_to_skip[i] ];\r\n\r\n\t\t//allows to establish the order of the properties in the inspector\r\n\t\tif(classObject.properties_order)\r\n\t\t{\r\n\t\t\tvar sorted_properties = {};\r\n\t\t\tfor(var i in classObject.properties_order)\r\n\t\t\t{\r\n\t\t\t\tvar name = classObject.properties_order[i];\r\n\t\t\t\tif( properties_info[ name ] )\r\n\t\t\t\t\tsorted_properties[ name ] = properties_info[ name ];\r\n\t\t\t\telse\r\n\t\t\t\t\tconsole.warn(\"property not found in instance:\", name );\r\n\t\t\t}\r\n\t\t\tfor(var i in properties_info) //add the missing ones at the end (should this be optional?)\r\n\t\t\t{\r\n\t\t\t\tif( !sorted_properties[i] )\r\n\t\t\t\t\tsorted_properties[i] = properties_info[i];\r\n\t\t\t}\r\n\t\t\tproperties_info = sorted_properties;\r\n\t\t}\r\n\r\n\r\n\t\t//showAttributes doesnt return anything but just in case...\r\n\t\treturn this.showProperties( instance, properties_info );\r\n\r\n\t\t//basic cloner\r\n\t\tfunction inner_clone(original, target)\r\n\t\t{\r\n\t\t\ttarget = target || {};\r\n\t\t\tfor(var j in original)\r\n\t\t\t\ttarget[j] = original[j];\r\n\t\t\treturn target;\r\n\t\t}\r\n\t}\r\n\r\n\t/**  extract all attributes from an instance (enumerable properties that are not function and a name starting with alphabetic character)\r\n\t*\r\n\t* @method collectPropertier\r\n\t* @param {Object} instance extract enumerable and public (name do not start with '_' ) properties from an object\r\n\t* return {Object} object with \"name\" : value for every property\r\n\t**/\r\n\tInspector.prototype.collectProperties = function( instance )\r\n\t{\r\n\t\tvar properties = {};\r\n\r\n\t\tfor(var i in instance)\r\n\t\t{\r\n\t\t\tif(i[0] == \"_\" || i[0] == \"@\" || i.substr(0,6) == \"jQuery\") //skip vars with _ (they are private)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar v = instance[i];\r\n\t\t\tif ( v && v.constructor == Function && !instance.constructor[\"@\" + i])\r\n\t\t\t\tcontinue;\r\n\t\t\tproperties[i] = v;\r\n\t\t}\r\n\t\treturn properties;\r\n\t}\r\n\r\n\t/** Adds the widgets for the properties specified in properties_info of instance, it will create callback and callback_update\r\n\t*\r\n\t* @method showProperties\r\n\t* @param {Object} instance the instance that you want to inspect\r\n\t* @param {Object} properties_info object containing   \"property_name\" :{ type: value, widget:..., min:..., max:... }  or just \"property\":\"type\"\r\n\t* @param {Array} properties_to_skip this properties will be ignored\r\n\t*/\r\n\tInspector.prototype.showProperties = function( instance, properties_info ) \r\n\t{\r\n\t\t//for every enumerable property create widget\r\n\t\tfor(var i in properties_info)\r\n\t\t{\r\n\t\t\tvar varname = i;\r\n\t\t\tvar options = properties_info[i];\r\n\t\t\tif(!options)\r\n\t\t\t\tcontinue;\r\n\t\t\tif(options.constructor === String) //it allows to just specify the type\r\n\t\t\t\toptions = { type: options };\r\n\t\t\tif(options.name)\r\n\t\t\t\tvarname = options.name;\r\n\t\t\tif(!options.callback) //generate default callback to modify data\r\n\t\t\t{\r\n\t\t\t\tvar o = { instance: instance, name: varname, options: options };\r\n\t\t\t\tif(options.type == \"function\")\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\toptions.callback = Inspector.assignValue.bind( o );\r\n\r\n\t\t\t}\r\n\t\t\tif(!options.callback_update) //generate default refresh\r\n\t\t\t{\r\n\t\t\t\tvar o = { instance: instance, name: varname };\r\n\t\t\t\toptions.callback_update = (function(){ return this.instance[ this.name ]; }).bind(o);\r\n\t\t\t}\r\n\r\n\t\t\toptions.instance = instance;\r\n\t\t\toptions.varname = varname;\r\n\r\n\t\t\tvar type = options.widget || options.type || \"string\";\r\n\r\n\t\t\t//used to hook stuff on special occasions\r\n\t\t\tif( this.on_addProperty )\r\n\t\t\t\tthis.on_addProperty( type, instance, varname, instance[varname], options );\r\n\t\t\tthis.add( type, varname, instance[varname], options );\r\n\t\t}\r\n\r\n\t\t//extra widgets inserted by the object (stored in the constructor)\r\n\t\tif(instance.constructor.widgets)\r\n\t\t\tfor(var i in instance.constructor.widgets)\r\n\t\t\t{\r\n\t\t\t\tvar w = instance.constructor.widgets[i];\r\n\t\t\t\tthis.add( w.widget, w.name, w.value, w );\r\n\t\t\t}\r\n\r\n\t\t//used to add extra widgets at the end\r\n\t\tif(instance.onShowProperties)\r\n\t\t\tinstance.onShowProperties(this);\r\n\t\tif(instance.constructor.onShowProperties)\r\n\t\t\tinstance.constructor.onShowProperties(instance, this);\r\n\t}\r\n\r\n\t/**\r\n\t* Tryes to assigns a value to the instance stored in this.instance\r\n\t* @method assignValue\r\n\t*/\r\n\tInspector.assignValue = function(value)\r\n\t{\r\n\t\tvar instance = this.instance;\r\n\t\tvar current_value = instance[ this.name ];\r\n\r\n\t\tif(current_value == null || value == null || this.options.type == \"enum\")\r\n\t\t\tinstance[this.name] = value;\r\n\t\telse if(typeof(current_value) == \"number\")\r\n\t\t\tinstance[this.name] = parseFloat(value);\r\n\t\telse if(typeof(current_value) == \"string\")\r\n\t\t\tinstance[this.name] = value;\r\n\t\telse if( value && value.length && current_value && current_value.length && \r\n\t\t\t( !Object.getOwnPropertyDescriptor( instance, this.name ) || !Object.getOwnPropertyDescriptor( instance, this.name ).set ) &&  //no setters\r\n\t\t\t( !Object.getOwnPropertyDescriptor( instance.__proto__, this.name ) || !Object.getOwnPropertyDescriptor( instance.__proto__, this.name ).set ) ) \r\n\t\t{\r\n\t\t\tfor(var i = 0; i < value.length; ++i)\r\n\t\t\t\tcurrent_value[i] = value[i];\r\n\t\t}\r\n\t\telse\r\n\t\t\tinstance[ this.name ] = value;\r\n\t}\r\n\r\n\t/**\r\n\t* Used by all widgets to create the container of one widget\r\n\t* @method createWidget\r\n\t* @param {string} name the string to show at the left side of the widget, if null this element wont be created and the value part will use the full width\r\n\t* @param {string} content the string with the html of the elements that conform the interactive part of the widget\r\n\t* @param {object} options some generic options that any widget could have:\r\n\t* - widget_name: the name used to store this widget in the widgets_by_name container, if omited the parameter name is used\r\n\t* - width: the width of the widget (if omited it will use the Inspector widgets_width, otherwise 100%\r\n\t* - name_width: the width of the name part of the widget, if not specified it will use Inspector name_width, otherwise css default\r\n\t* - content_width: the width of the widget content area\r\n\t* - pre_title: string to append to the left side of the name, this is helpful if you want to add icons with behaviour when clicked\r\n\t* - title: string to replace the name, sometimes you want to supply a different name than the one you want to show (this is helpful to retrieve values from an inspector)\r\n\t*/\r\n\tInspector.prototype.createWidget = function( name, content, options ) \r\n\t{\r\n\t\toptions = options || {};\r\n\t\tcontent = (content === undefined || content === null) ? \"\" : content;\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"widget \" + (options.className || \"\");\r\n\t\telement.inspector = this;\r\n\t\telement.options = options;\r\n\t\telement.name = name;\r\n\t\t\r\n\t\tthis.row_number += this.widgets_per_row;\r\n\t\tif(this.row_number % 2 == 0)\r\n\t\t\telement.className += \" even\";\r\n\r\n\t\tvar width = options.width || this.widgets_width;\r\n\t\tif( width )\r\n\t\t{\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS( width );\r\n\t\t\tif(!element.style.width)\r\n\t\t\t\telement.style.width = \"calc(\" + LiteGUI.sizeToCSS( width ) + \")\";\r\n\t\t\telement.style.minWidth = \"auto\";\r\n\t\t}\r\n\t\tvar height = options.height || this.height;\r\n\t\tif( height )\r\n\t\t{\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( height );\r\n\t\t\tif(!element.style.height)\r\n\t\t\t\telement.style.height = \"calc(\" + LiteGUI.sizeToCSS( height ) + \")\";\r\n\t\t\telement.style.minHeight = \"auto\";\r\n\t\t}\r\n\r\n\t\t//store widgets \r\n\t\tthis.widgets.push( element );\r\n\t\tif(options.widget_name || name)\r\n\t\t\tthis.widgets_by_name[ options.widget_name || name ] = element;\r\n\r\n\t\tif(this.widgets_per_row != 1)\r\n\t\t{\r\n\t\t\tif(!options.width)\r\n\t\t\t\telement.style.width = (100 / this.widgets_per_row).toFixed(2) + \"%\";\r\n\t\t\telement.style.display = \"inline-block\";\r\n\t\t}\r\n\r\n\t\tvar namewidth = \"\";\r\n\t\tvar contentwidth = \"\";\r\n\t\tif( (name !== undefined && name !== null) && (this.name_width || options.name_width) && !this.one_line)\r\n\t\t{\r\n\t\t\tvar w = LiteGUI.sizeToCSS( options.name_width || this.name_width );\r\n\t\t\tnamewidth = \"style='width: calc(\" + w + \" - 0px); width: -webkit-calc(\" + w + \" - 0px); width: -moz-calc(\" + w + \" - 0px); '\"; //hack \r\n\t\t\tcontentwidth = \"style='width: calc( 100% - \" + w + \"); width: -webkit-calc(100% - \" + w + \"); width: -moz-calc( 100% - \" + w + \"); '\";\r\n\t\t}\r\n\r\n\t\tif(options.name_width)\r\n\t\t\tnamewidth = \"style='width: \"+ LiteGUI.sizeToCSS(options.name_width)+\" '\";\r\n\t\tif(options.content_width)\r\n\t\t\tcontentwidth = \"style='width: \"+ LiteGUI.sizeToCSS(options.content_width)+\" '\";\r\n\r\n\t\tvar code = \"\";\r\n\t\tvar pretitle = \"\";\r\n\t\tvar filling = this.one_line ? \"\" : \"<span class='filling'></span>\";\r\n\r\n\t\tif(options.pretitle)\r\n\t\t\tpretitle = options.pretitle;\r\n\r\n\t\tvar content_class = \"wcontent \";\r\n\t\tvar title = name;\r\n\t\tif(options.title)\r\n\t\t\ttitle = options.title;\r\n\t\tif( name === null || name === undefined )\r\n\t\t\tcontent_class += \" full\";\r\n\t\telse if(name === \"\") //three equals because 0 == \"\" \r\n\t\t\tcode += \"<span class='wname' title='\"+title+\"' \"+namewidth+\">\"+ pretitle +\"</span>\";\r\n\t\telse\r\n\t\t\tcode += \"<span class='wname' title='\"+title+\"' \"+namewidth+\">\"+ pretitle + name + filling + \"</span>\";\r\n\r\n\t\tif( content.constructor === String || content.constructor === Number || content.constructor === Boolean )\r\n\t\t\telement.innerHTML = code + \"<span class='info_content \"+content_class+\"' \"+contentwidth+\">\"+content+\"</span>\";\r\n\t\telse\r\n\t\t{\r\n\t\t\telement.innerHTML = code + \"<span class='info_content \"+content_class+\"' \"+contentwidth+\"></span>\";\r\n\t\t\tvar content_element = element.querySelector(\"span.info_content\");\r\n\t\t\tif(content_element)\r\n\t\t\t\tcontent_element.appendChild( content );\r\n\t\t}\r\n\r\n\t\telement.content = element.querySelector(\"span.info_content\");\r\n\t\telement.remove = function() { \r\n\t\t\tif( this.parentNode ) \r\n\t\t\t\tthis.parentNode.removeChild( this );\r\n\t\t};\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//calls callback, triggers wchange, calls onchange in Inspector\r\n\tInspector.onWidgetChange = function( element, name, value, options, expand_value, event )\r\n\t{\r\n\t\tvar section = element.section; //this.current_section\r\n\r\n\t\tif(!options.skip_wchange)\r\n\t\t{\r\n\t\t\tif(section)\r\n\t\t\t\tLiteGUI.trigger( section, \"wbeforechange\", value );\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", value );\r\n\t\t}\r\n\r\n\t\t//assign and launch callbacks\r\n\t\tthis.values[ name ] = value;\r\n\t\tvar r = undefined;\r\n\t\tif(options.callback)\r\n\t\t{\r\n\t\t\tif(expand_value)\r\n\t\t\t\tr = options.callback.apply( element, value );\r\n\t\t\telse\r\n\t\t\t\tr = options.callback.call( element, value, event );\r\n\t\t}\r\n\r\n\t\tif(!options.skip_wchange)\r\n\t\t{\r\n\t\t\tif(section)\r\n\t\t\t\tLiteGUI.trigger( section, \"wchange\", value, element );\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", value, element );\r\n\t\t}\r\n\r\n\t\tif(this.onchange) \r\n\t\t\tthis.onchange(name, value, element);\r\n\t\treturn r;\r\n\t}\r\n\r\n\t//must be lowercase\r\n\tInspector.widget_constructors = {\r\n\t\t\"null\": 'addNull', //use for special cases\r\n\t\ttitle: 'addTitle',\r\n\t\tinfo: 'addInfo',\r\n\t\t\"default\": 'addDefault', //it guesses\r\n\t\tnumber: 'addNumber',\r\n\t\tslider: 'addSlider',\r\n\t\tstring: 'addString',\r\n\t\ttext: 'addString',\r\n\t\ttextarea: 'addTextarea',\r\n\t\tcolor: 'addColor',\r\n\t\t\"boolean\": 'addCheckbox', \r\n\t\tcheckbox: 'addCheckbox',\r\n\t\ticon: 'addIcon',\r\n\t\tvec2: 'addVector2',\r\n\t\tvector2: 'addVector2',\r\n\t\tvec3: 'addVector3',\r\n\t\tvector3: 'addVector3',\r\n\t\tvec4: 'addVector4',\r\n\t\tvector4: 'addVector4',\r\n\t\t\"enum\": 'addCombo',\r\n\t\tdropdown: 'addCombo',\r\n\t\tcombo: 'addCombo',\r\n\t\tbutton: 'addButton',\r\n\t\tbuttons: 'addButtons',\r\n\t\tfile: 'addFile',\r\n\t\tline: 'addLine',\r\n\t\tlist: 'addList',\r\n\t\ttree: 'addTree',\r\n\t\tdatatree: 'addDataTree',\r\n\t\tpad: 'addPad',\r\n\t\tarray: 'addArray',\r\n\t\tseparator: 'addSeparator'\r\n\t};\r\n\r\n\r\n\tInspector.registerWidget = function(name, callback)\r\n\t{\r\n\t\tvar func_name = \"add\" + name.charAt(0).toUpperCase() + name.slice(1);\r\n\t\tInspector.prototype[func_name] = callback;\r\n\t\tInspector.widget_constructors[name] = func_name;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Adds a widgete to the inspector, its a way to provide the widget type from a string\r\n\t* @method add\r\n\t* @param {string} type string specifying the name of the widget to use (check Inspector.widget_constructors for a complete list)\r\n\t* @param {string} name the string to show at the left side of the widget, if null this element wont be created and the value part will use the full width\r\n\t* @param {string} value the value to assign to the widget\r\n\t* @param {object} options: some generic options that any widget could have:\r\n\t* - type: overwrites the type\r\n\t* - callback: function to call when the user interacts with the widget and changes the value\r\n\t* [For a bigger list check createWidget and every widget in particular]\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.add = function( type, name, value, options )\r\n\t{\r\n\t\tif(!type)\r\n\t\t\tthrow(\"Inspector: no type specified\");\r\n\r\n\t\t//type could be an object with every parameter contained inside\r\n\t\tif( arguments.length == 1 && typeof(type) == \"object\" )\r\n\t\t{\r\n\t\t\toptions = type;\r\n\t\t\ttype = options.type;\r\n\t\t\tname = options.name;\r\n\t\t\tvalue = options.value;\r\n\t\t}\r\n\r\n\t\tvar func = LiteGUI.Inspector.widget_constructors[type.toLowerCase()];\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector do not have a widget called\",type);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif( func.constructor === String )\r\n\t\t\tfunc = LiteGUI.Inspector.prototype[func];\r\n\t\tif( !func )\r\n\t\t\treturn;\r\n\t\tif( func.constructor !== Function )\r\n\t\t\treturn;\r\n\r\n\t\tif( options && options.constructor === Function )\r\n\t\t\toptions = { callback: options };\r\n\t\t\r\n\t\treturn func.call( this, name,value, options );\r\n\t}\r\n\r\n\tInspector.prototype.getValue = function(name)\r\n\t{\r\n\t\treturn this.values[name];\r\n\t}\r\n\r\n\r\n\tInspector.prototype.applyOptions = function( element, options )\r\n\t{\r\n\t\tif(!element || !options)\r\n\t\t\treturn;\r\n\r\n\t\tif(options.className)\r\n\t\t\telement.className += \" \" + options.className;\r\n\t\tif(options.id)\r\n\t\t\telement.id = options.id;\r\n\t\tif(options.width)\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Creates a line\r\n\t* @method addSeparator\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addSeparator = function()\r\n\t{\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"separator\";\r\n\t\tthis.append(element);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//used when you want to skip the widget of an object\r\n\tInspector.prototype.addNull = function(name,value, options)\r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//used when you dont know which widget to use\r\n\tInspector.prototype.addDefault = function( name, value, options)\r\n\t{\r\n\t\tif(value === null || value === undefined) //can we guess it from the current value?\r\n\t\t\treturn null;\r\n\r\n\t\tif( value.constructor === Boolean )\r\n\t\t\treturn this.addCheckbox( name, value, options );\r\n\t\telse if( value.constructor === String )\r\n\t\t\treturn this.addString( name, value, options );\r\n\t\telse if( value.constructor === Number )\r\n\t\t\treturn this.addNumber( name, value, options );\r\n\t\telse if( value.length == 4)\r\n\t\t\treturn this.addVector4( name, value, options );\r\n\t\telse if( value.length == 3)\r\n\t\t\treturn this.addVector3( name, value, options );\r\n\t\telse if( value.length == 2)\r\n\t\t\treturn this.addVector2( name, value, options );\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Widget to edit strings\r\n\t* @method addString\r\n\t* @param {string} name \r\n\t* @param {string} value\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - focus: true if you want the cursor to be here\r\n\t* - password: true if you want to hide the string \r\n\t* - immediate: calls the callback once every keystroke\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the widget changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addString = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar inputtype = \"text\";\r\n\t\tif(options.password) \r\n\t\t\tinputtype = \"password\";\r\n\t\tvar focus = options.focus ? \"autofocus\" : \"\";\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full \"+(options.disabled?\"disabled\":\"\")+\"'><input type='\"+inputtype+\"' tabIndex='\"+this.tab_index+\"' \"+focus+\" class='text string' value='\"+value+\"' \"+(options.disabled?\"disabled\":\"\")+\"/></span>\", options);\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\r\n\t\tif(options.placeHolder)\r\n\t\t\tinput.setAttribute(\"placeHolder\",options.placeHolder);\r\n\r\n\t\tif(options.align == \"right\")\r\n\t\t{\r\n\t\t\tinput.style.direction = \"rtl\";\r\n\t\t\t//input.style.textAlign = \"right\";\r\n\t\t}\r\n\r\n\t\tinput.addEventListener( options.immediate ? \"keyup\" : \"change\", function(e) { \r\n\t\t\tvar r = Inspector.onWidgetChange.call(that, element, name, e.target.value, options);\r\n\t\t\tif(r !== undefined)\r\n\t\t\t\tthis.value = r;\r\n\t\t});\r\n\r\n\t\tif(options.callback_enter)\r\n\t\t\tinput.addEventListener( \"keydown\" , function(e) { \r\n\t\t\t\tif(e.keyCode == 13)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar r = Inspector.onWidgetChange.call(that, element, name, e.target.value, options);\r\n\t\t\t\t\toptions.callback_enter();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis.tab_index += 1;\r\n\r\n\t\telement.setIcon = function(img)\r\n\t\t{\r\n\t\t\tif(!img)\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"\";\r\n\t\t\t\tinput.style.paddingLeft = \"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"transparent url('\"+img+\"') no-repeat left 4px center\";\r\n\t\t\t\tinput.style.paddingLeft = \"1.7em\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.icon)\r\n\t\t\telement.setIcon( options.icon );\r\n\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined )\r\n\t\t\t\treturn;\r\n\t\t\tif(v === input.value)\r\n\t\t\t\treturn;\r\n\t\t\tinput.value = v; \r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger(input, \"change\" );\r\n\t\t};\r\n\t\telement.getValue = function() { return input.value; };\r\n\t\telement.focus = function() { this.querySelector(\"input\").focus(); };\r\n\t\telement.disable = function() { input.disabled = true; };\r\n\t\telement.enable = function() { input.disabled = false; };\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit strings, but it adds a button behind (useful to search values somewhere in case the user do not remember the name)\r\n\t* @method addStringButton\r\n\t* @param {string} name \r\n\t* @param {string} value the string to show\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - disabled: shows the widget disabled\r\n\t* - button: string to show inside the button, default is \"...\"\r\n\t* - callback: function to call when the string is edited\r\n\t* - callback_button: function to call when the button is pressed\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addStringButton = function( name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tif(value === undefined)\r\n\t\t\tvalue = \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget( name, \"<span class='inputfield button'><input type='text' tabIndex='\"+this.tab_index+\"' class='text string' value='' \"+(options.disabled?\"disabled\":\"\")+\"/></span><button class='micro'>\"+(options.button || \"...\")+\"</button>\", options);\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\t\tinput.value = value;\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\t\t\tvar r = Inspector.onWidgetChange.call(that,element,name,e.target.value, options);\r\n\t\t\tif(r !== undefined)\r\n\t\t\t\tthis.value = r;\r\n\t\t});\r\n\r\n\t\tif( options.disabled )\r\n\t\t\tinput.setAttribute(\"disabled\",\"disabled\");\r\n\r\n\t\telement.setIcon = function(img)\r\n\t\t{\r\n\t\t\tif(!img)\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"\";\r\n\t\t\t\tinput.style.paddingLeft = \"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"transparent url('\"+img+\"') no-repeat left 4px center\";\r\n\t\t\t\tinput.style.paddingLeft = \"1.7em\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.icon)\r\n\t\t\telement.setIcon( options.icon );\r\n\r\n\t\tvar button = element.querySelector(\".wcontent button\");\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tif(options.callback_button)\r\n\t\t\t\toptions.callback_button.call( element, input.value, e );\r\n\t\t});\r\n\r\n\t\tif(options.button_width)\r\n\t\t{\r\n\t\t\tbutton.style.width = LiteGUI.sizeToCSS( options.button_width );\r\n\t\t\tvar inputfield = element.querySelector(\".inputfield\");\r\n\t\t\tinputfield.style.width = \"calc( 100% - \" + button.style.width + \" - 6px)\";\r\n\t\t}\r\n\r\n\r\n\t\tthis.tab_index += 1;\r\n\t\tthis.append(element,options);\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tinput.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger(input, \"change\" );\r\n\t\t};\r\n\t\telement.disable = function() { input.disabled = true; button.disabled = true; };\r\n\t\telement.enable = function() { input.disabled = false; button.disabled = false; };\r\n\t\telement.getValue = function() { return input.value; };\r\n\t\telement.focus = function() { LiteGUI.focus(input); };\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit strings with multiline support\r\n\t* @method addTextarea\r\n\t* @param {string} name \r\n\t* @param {string} value\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - focus: true if you want the cursor to be here\r\n\t* - password: true if you want to hide the string \r\n\t* - immediate: calls the callback once every keystroke\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the widget changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addTextarea = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield textarea \"+(options.disabled?\"disabled\":\"\")+\"'><textarea tabIndex='\"+this.tab_index+\"' \"+(options.disabled?\"disabled\":\"\")+\"></textarea></span>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar textarea = element.querySelector(\".wcontent textarea\");\r\n\t\ttextarea.value = value;\r\n\t\ttextarea.addEventListener( options.immediate ? \"keyup\" : \"change\", function(e) { \r\n\t\t\tInspector.onWidgetChange.call(that,element,name,e.target.value, options, false, e);\r\n\t\t});\r\n\t\tif(options.callback_keydown)\r\n\t\t\ttextarea.addEventListener( \"keydown\", options.callback_keydown );\r\n\r\n\t\tif(options.height)\r\n\t\t\ttextarea.style.height = \"calc( \" + LiteGUI.sizeToCSS( options.height ) + \" - 5px )\";\r\n\t\t\t//textarea.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tthis.append(element,options);\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tif(v == textarea.value)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\ttextarea.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger( textarea,\"change\" );\r\n\t\t};\r\n\t\telement.getValue = function(v) { \r\n\t\t\treturn textarea.value;\r\n\t\t}\r\n\t\telement.focus = function() { LiteGUI.focus(textarea); };\r\n\t\telement.disable = function() { textarea.disabled = true;};\r\n\t\telement.enable = function() { textarea.disabled = false;};\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addNumber\r\n\t* @param {string} name \r\n\t* @param {number} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addNumber = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || 0;\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\t\tthis.append(element,options);\r\n\r\n\t\toptions.extraclass = \"full\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\t//options.dragger_class = \"full\";\r\n\t\toptions.full = true;\r\n\t\toptions.precision = options.precision !== undefined ? options.precision : 2;\r\n\t\toptions.step = options.step === undefined ? (options.precision == 0 ? 1 : 0.1) : options.step;\r\n\r\n\t\tthis.tab_index++;\r\n\t\t\r\n\t\tvar dragger = null;\r\n\t\t\r\n\t\tdragger = new LiteGUI.Dragger(value, options);\r\n\t\tdragger.root.style.width = \"calc( 100% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger.root );\r\n\t\tdragger.root.addEventListener(\"start_dragging\", inner_before_change.bind(options) );\r\n\t\telement.dragger = dragger;\r\n\r\n\t\tif( options.disabled )\r\n\t\t\tdragger.input.setAttribute(\"disabled\",\"disabled\");\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) \r\n\t\t\t\tthis.callback_before.call(element);\r\n\t\t}\r\n\r\n\t\tvar input = element.querySelector(\"input\");\r\n\t\t\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", e.target.value );\r\n\r\n\t\t\tthat.values[name] = e.target.value;\r\n\t\t\t//Inspector.onWidgetChange.call(that,this,name,ret, options);\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar ret = options.callback.call( element, parseFloat( e.target.value) ); \r\n\t\t\t\tif( typeof(ret) == \"number\")\r\n\t\t\t\t\tthis.value = ret;\r\n\t\t\t}\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", e.target.value );\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,e.target.value,element);\r\n\t\t});\r\n\r\n\t\telement.setValue = function( v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tv = parseFloat(v);\r\n\t\t\tif(options.precision)\r\n\t\t\t\tv = v.toFixed( options.precision );\r\n\t\t\tv += (options.units || \"\");\r\n\t\t\tif(input.value == v)\r\n\t\t\t\treturn;\r\n\t\t\tinput.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger( input,\"change\" );\r\n\t\t};\r\n\r\n\t\telement.setRange = function(min,max) { dragger.setRange(min,max); }\r\n\t\telement.getValue = function() { return parseFloat( input.value ); };\r\n\t\telement.focus = function() { LiteGUI.focus(input); };\r\n\t\telement.disable = function() { input.disabled = true;};\r\n\t\telement.enable = function() { input.disabled = false;};\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector2\r\n\t* @param {string} name \r\n\t* @param {vec2} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector2 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step ||0.1;\r\n\t\t//options.dragger_class = \"medium\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar wcontent = element.querySelector(\".wcontent\");\r\n\r\n\t\tvar dragger1 = new LiteGUI.Dragger(value[0], options);\r\n\t\tdragger1.root.style.marginLeft = 0;\r\n\t\tdragger1.root.style.width = \"calc( 50% - 1px )\";\r\n\t\twcontent.appendChild( dragger1.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger2 = new LiteGUI.Dragger(value[1], options);\r\n\t\tdragger2.root.style.width = \"calc( 50% - 1px )\";\r\n\t\twcontent.appendChild( dragger2.root );\r\n\t\telement.draggers = [dragger1,dragger2];\r\n\r\n\t\tLiteGUI.bind( dragger1.root ,\"start_dragging\", inner_before_change.bind(options) );\r\n\t\tLiteGUI.bind( dragger2.root, \"start_dragging\", inner_before_change.bind(options) );\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) this.callback_before(e);\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener( \"change\" , function(e) { \r\n\r\n\t\t\t//gather all three parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\t\r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 2)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", [r] );\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tif(dragger1.getValue() != v[0])\r\n\t\t\t\tdragger1.setValue(v[0],true);\r\n\t\t\tif(dragger2.getValue() != v[1])\r\n\t\t\t\tdragger2.setValue(v[1],skip_event); //last one triggers the event\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { dragger1.setRange(min,max); dragger2.setRange(min,max); }\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector3\r\n\t* @param {string} name \r\n\t* @param {vec3} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector3 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step || 0.1;\r\n\t\t//options.dragger_class = \"mini\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger1 = new LiteGUI.Dragger(value[0], options );\r\n\t\tdragger1.root.style.marginLeft = 0;\r\n\t\tdragger1.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger1.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger2 = new LiteGUI.Dragger(value[1], options );\r\n\t\tdragger2.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger2.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger3 = new LiteGUI.Dragger(value[2], options );\r\n\t\tdragger3.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger3.root );\r\n\t\telement.draggers = [dragger1,dragger2,dragger3];\r\n\r\n\t\tdragger1.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\t\tdragger2.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\t\tdragger3.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) this.callback_before();\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener(\"change\", function(e) { \r\n\t\t\t//gather all three parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element,r ); \r\n\t\t\t\t\r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 3)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event ) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tdragger1.setValue(v[0],true);\r\n\t\t\tdragger2.setValue(v[1],true);\r\n\t\t\tdragger3.setValue(v[2],skip_event); //last triggers\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { dragger1.setRange(min,max); dragger2.setRange(min,max); dragger3.setRange(min,max); }\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector4\r\n\t* @param {string} name \r\n\t* @param {vec4} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector4 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget( name,\"\", options );\r\n\r\n\t\toptions.step = options.step || 0.1;\r\n\t\t//options.dragger_class = \"mini\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar draggers = element.draggers = [];\r\n\r\n\t\tfor(var i = 0; i < 4; i++)\r\n\t\t{\r\n\t\t\tvar dragger = new LiteGUI.Dragger(value[i], options );\r\n\t\t\tdragger.root.style.marginLeft = 0;\r\n\t\t\tdragger.root.style.width = \"calc( 25% - 1px )\";\r\n\t\t\telement.querySelector(\".wcontent\").appendChild( dragger.root );\r\n\t\t\toptions.tab_index = this.tab_index;\r\n\t\t\tthis.tab_index++;\r\n\t\t\tdragger.root.addEventListener(\"start_dragging\", inner_before_change.bind(options) );\r\n\t\t\tdraggers.push(dragger);\r\n\t\t}\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before)\r\n\t\t\t\tthis.callback_before();\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener(\"change\", function(e) { \r\n\t\t\t//gather all parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 4)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event ) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tfor(var i = 0; i < draggers.length; i++)\r\n\t\t\t\tdraggers[i].setValue(v[i],skip_event);\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { for(var i in draggers) { draggers[i].setRange(min,max); } }\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers using a rectangular pad where you can drag horizontaly and verticaly a handler\r\n\t* @method addPad\r\n\t* @param {string} name \r\n\t* @param {vec2} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - minx: minimum x value accepted\r\n\t* - miny: minimum y value accepted\r\n\t* - max: maximum value accepted\r\n\t* - maxx: maximum x value accepted\r\n\t* - maxy: maximum y value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* - background: url of image to use as background (it will be streched)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addPad = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step ||0.1;\r\n\t\t//options.dragger_class = \"medium\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar minx = options.minx || options.min || 0;\r\n\t\tvar miny = options.miny || options.min || 0;\r\n\t\tvar maxx = options.maxx || options.max || 1;\r\n\t\tvar maxy = options.maxy || options.max || 1;\r\n\r\n\t\tvar wcontent = element.querySelector(\".wcontent\");\r\n\r\n\t\tvar pad = document.createElement(\"div\");\r\n\t\tpad.className = \"litepad\";\r\n\t\twcontent.appendChild( pad );\r\n\t\tpad.style.width = \"100%\";\r\n\t\tpad.style.height = \"100px\";\r\n\t\tif (options.background)\r\n\t\t{\r\n\t\t\tpad.style.backgroundImage = \"url('\" + options.background + \"')\";\r\n\t\t\tpad.style.backgroundSize = \"100%\";\r\n\t\t\tpad.style.backgroundRepeat = \"no-repeat\";\r\n\t\t}\r\n\r\n\t\tvar handler = document.createElement(\"div\");\r\n\t\thandler.className = \"litepad-handler\";\r\n\t\tpad.appendChild( handler );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragging = false;\r\n\r\n\t\tpad._onMouseEvent = function(e)\r\n\t\t{\r\n\t\t\tvar b = pad.getBoundingClientRect();\r\n\t\t\te.mousex = e.pageX - b.left;\r\n\t\t\te.mousey = e.pageY - b.top;\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.addEventListener(\"mousemove\", pad._onMouseEvent );\r\n\t\t\t\tdocument.body.addEventListener(\"mouseup\", pad._onMouseEvent );\r\n\t\t\t\tdragging = true;\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mousemove\")\r\n\t\t\t{\r\n\t\t\t\tvar x = e.mousex / (b.width);\r\n\t\t\t\tvar y = e.mousey / (b.height);\r\n\r\n\t\t\t\tx = x * (maxx - minx) + minx;\r\n\t\t\t\ty = y * (maxy - miny) + minx;\r\n\r\n\t\t\t\tvar r = [x,y];\r\n\r\n\t\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\t\telement.setValue(r);\r\n\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\t\tif( new_val && new_val.length >= 2)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\t\telement.setValue( new_val );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\t\tif(that.onchange)\r\n\t\t\t\t\tthat.onchange(name,r,element);\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mouseup\")\r\n\t\t\t{\r\n\t\t\t\tdragging = false;\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", pad._onMouseEvent );\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", pad._onMouseEvent );\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tpad.addEventListener(\"mousedown\", pad._onMouseEvent );\r\n\r\n\t\telement.setValue = function(v,skip_event)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar b = pad.getBoundingClientRect();\r\n\t\t\tvar x = (v[0] - minx) / (maxx - minx);\r\n\t\t\tvar y = (v[1] - miny) / (maxy - miny);\r\n\t\t\tx = Math.max( 0, Math.min( x, 1 ) ); //clamp\r\n\t\t\ty = Math.max( 0, Math.min( y, 1 ) );\r\n\r\n\t\t\t//handler.style.left = (x * (b.width - 10)) + \"px\";\r\n\t\t\t//handler.style.top = (y * (b.height - 10)) + \"px\";\r\n\t\t\tvar w = ((b.width - 10) / b.width) * 100;\r\n\t\t\tvar h = ((b.height - 10) / b.height) * 100;\r\n\t\t\thandler.style.left = (x * w).toFixed(1) + \"%\";\r\n\t\t\thandler.style.top = (y * h).toFixed(1) + \"%\";\r\n\r\n\t\t\t//if(!skip_event)\r\n\t\t\t//\tLiteGUI.trigger(this,\"change\");\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue( value );\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to show plain information in HTML (not interactive)\r\n\t* @method addInfo\r\n\t* @param {string} name \r\n\t* @param {string} value HTML code\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - className: to specify a classname of the content\r\n\t* - height: to specify a height\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addInfo = function( name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = (value === undefined || value === null) ? \"\" : value;\r\n\t\tvar element = null;\r\n\t\tif(name != null)\r\n\t\t\telement = this.createWidget( name, value, options);\r\n\t\telse\r\n\t\t{\r\n\t\t\telement = document.createElement(\"div\");\r\n\t\t\tif(options.className)\r\n\t\t\t\telement.className = options.className;\r\n\t\t\tif(value.nodeName !== undefined)\r\n\t\t\t{\r\n\t\t\t\telement.innerHTML = \"<span class='winfo'></span>\";\r\n\t\t\t\telement.childNodes[0].appendChild( value );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\telement.innerHTML = \"<span class='winfo'>\"+value+\"</span>\";\r\n\t\t}\r\n\r\n\t\tvar info = element.querySelector(\".winfo\") || element.querySelector(\".wcontent\");\r\n\r\n\t\tif(options.callback)\r\n\t\t\telement.addEventListener(\"click\",options.callback.bind(element));\r\n\r\n\t\telement.setValue = function(v) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tif(info)\r\n\t\t\t\tinfo.innerHTML = v;\r\n\t\t};\r\n\r\n\t\tvar content = element.querySelector(\"span.info_content\");\r\n\t\tif(!content)\r\n\t\t\tcontent = element.querySelector(\".winfo\");\r\n\r\n\t\tif(options.width)\r\n\t\t{\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS(options.width);\r\n\t\t\telement.style.display = \"inline-block\";\r\n\t\t\tif(!name)\r\n\t\t\t\tinfo.style.margin = \"2px\";\r\n\t\t}\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\tcontent.style.height = LiteGUI.sizeToCSS(options.height);\r\n\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\telement.scrollToBottom = function(){\r\n\t\t\tcontent.scrollTop = content.offsetTop;\r\n\t\t}\r\n\r\n\t\telement.add = function(e)\r\n\t\t{\r\n\t\t\tcontent.appendChild(e);\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a number using a slider\r\n\t* @method addSlider\r\n\t* @param {string} name \r\n\t* @param {number} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - min: min value\r\n\t* - max: max value\r\n\t* - step: increments when dragging\r\n\t* - callback: function to call once the value changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addSlider = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tif(options.min === undefined)\r\n\t\t\toptions.min = 0;\r\n\r\n\t\tif(options.max === undefined)\r\n\t\t\toptions.max = 1;\r\n\r\n\t\tif(options.step === undefined)\r\n\t\t\toptions.step = 0.01;\r\n\r\n\t\tvar that = this;\r\n\t\tif(value === undefined || value === null)\r\n\t\t\tvalue = 0;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full'>\\\r\n\t\t\t\t\t<input tabIndex='\"+this.tab_index+\"' type='text' class='slider-text fixed liteslider-value' value='' /><span class='slider-container'></span></span>\", options);\r\n\r\n\t\tvar slider_container = element.querySelector(\".slider-container\");\r\n\r\n\t\tvar slider = new LiteGUI.Slider(value,options);\r\n\t\tslider_container.appendChild(slider.root);\r\n\r\n\t\t//Text change -> update slider\r\n\t\tvar skip_change = false; //used to avoid recursive loops\r\n\t\tvar text_input = element.querySelector(\".slider-text\");\r\n\t\ttext_input.value = value;\r\n\t\ttext_input.addEventListener('change', function(e) {\r\n\t\t\tif(skip_change)\r\n\t\t\t\treturn;\r\n\t\t\tvar v = parseFloat( this.value );\r\n\t\t\tvalue = v;\r\n\t\t\tslider.setValue( v );\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,v, options );\r\n\t\t});\r\n\r\n\t\t//Slider change -> update Text\r\n\t\tslider.onChange = function(value) {\r\n\t\t\ttext_input.value = value;\r\n\t\t\tInspector.onWidgetChange.call( that, element, name, value, options);\r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function(v,skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tslider.setValue(v,skip_event);\r\n\t\t};\r\n\t\telement.getValue = function() { \r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a boolean value using a checkbox\r\n\t* @method addCheckbox\r\n\t* @param {string} name \r\n\t* @param {boolean} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - label: text to show, otherwise it shows on/off\r\n\t* - label_on: text to show when on\r\n\t* - label_off: text to show when off\r\n\t* - callback: function to call once the value changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addCheckbox = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tvalue = !!value;\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar label_on = options.label_on || options.label || \"on\";\r\n\t\tvar label_off = options.label_off || options.label || \"off\";\r\n\t\tvar label = (value ? label_on : label_off);\r\n\t\t\r\n\t\t//var element = this.createWidget(name,\"<span class='inputfield'><span class='fixed flag'>\"+(value ? \"on\" : \"off\")+\"</span><span tabIndex='\"+this.tab_index+\"'class='checkbox \"+(value?\"on\":\"\")+\"'></span></span>\", options );\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield'><span tabIndex='\"+this.tab_index+\"' class='fixed flag checkbox \"+(value ? \"on\" : \"off\")+\"'>\"+label+\"</span></span>\", options );\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar checkbox = element.querySelector(\".wcontent .checkbox\");\r\n\t\tcheckbox.addEventListener(\"keypress\", function(e) { \r\n\t\t\tif(e.keyCode == 32)\r\n\t\t\t\tLiteGUI.trigger(this, \"click\");\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"click\", function() {\r\n\t\t\tvalue = !value;\r\n\t\t\telement.querySelector(\"span.flag\").innerHTML = value ? label_on : label_off;\r\n\t\t\tif(value)\r\n\t\t\t\tcheckbox.classList.add(\"on\");\r\n\t\t\telse\r\n\t\t\t\tcheckbox.classList.remove(\"on\");\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,value, options);\r\n\t\t});\r\n\t\t\r\n\t\telement.getValue = function() { \r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v,skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tif(\tthat.values[name] != v && !skip_event)\r\n\t\t\t\tLiteGUI.trigger( checkbox, \"click\" ); \r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a set of boolean values using checkboxes\r\n\t* @method addFlags\r\n\t* @param {Object} value object that contains all the booleans \r\n\t* @param {Object} optional object with extra flags to insert\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addFlags = function(flags, force_flags, options)\r\n\t{\r\n\t\tvar f = {};\r\n\t\tfor(var i in flags)\r\n\t\t\tf[i] = flags[i];\r\n\t\tif(force_flags)\r\n\t\t\tfor(var i in force_flags)\r\n\t\t\t\tif( typeof(f[i]) == \"undefined\" )\r\n\t\t\t\t\tf[i] = ( force_flags[i] ? true : false );\r\n\r\n\t\tfor(var i in f)\r\n\t\t{\r\n\t\t\tvar flag_options = {};\r\n\t\t\tfor(var j in options)\r\n\t\t\t\tflag_options[j] = options[j];\r\n\r\n\t\t\tflag_options.callback = (function(j) {\r\n\t\t\t\t\treturn function(v) { \r\n\t\t\t\t\t\tflags[j] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t})(i);\r\n\r\n\t\t\tthis.addCheckbox(i, f[i], flag_options );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit an enumeration using a combobox\r\n\t* @method addCombo\r\n\t* @param {string} name \r\n\t* @param {*} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - values: a list with all the possible values, it could be an array, or an object, in case of an object, the key is the string to show, the value is the value to assign\r\n\t* - disabled: true to disable\r\n\t* - callback: function to call once an items is clicked\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addCombo = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\t//value = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full inputcombo \"+(options.disabled?\"disabled\":\"\")+\"'></span>\", options);\r\n\t\telement.options = options;\r\n\r\n\t\tvar values = options.values || [];\r\n\t\tif(values.constructor === Function)\r\n\t\t\tvalues = options.values();\r\n\r\n\t\t/*\r\n\t\tif(!values)\r\n\t\t\tvalues = [];\r\n\r\n\t\tvar index = 0;\r\n\t\tfor(var i in values)\r\n\t\t{\r\n\t\t\tvar item_value = values[i];\r\n\t\t\tvar item_index = values.constructor === Array ? index : i;\r\n\t\t\tvar item_title = values.constructor === Array ? item_value : i;\r\n\t\t\tif(item_value && item_value.title)\r\n\t\t\t\titem_title = item_value.title;\r\n\t\t\tcode += \"<option value='\"+item_index+\"' \"+( item_value == value ? \" selected\":\"\")+\" data-index='\"+item_index+\"'>\" + item_title + \"</option>\";\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\tvar code = \"<select tabIndex='\"+this.tab_index+\"' \"+(options.disabled?\"disabled\":\"\")+\" class='\"+(options.disabled?\"disabled\":\"\")+\"'></select>\";\r\n\t\telement.querySelector(\"span.inputcombo\").innerHTML = code;\r\n\t\tsetValues(values);\r\n\t\t\r\n\t\tvar stop_event = false; //used internally\r\n\r\n\t\tvar select = element.querySelector(\".wcontent select\");\r\n\t\tselect.addEventListener(\"change\", function(e) { \r\n\t\t\tvar index = e.target.value;\r\n\t\t\tvalue = values[index];\r\n\t\t\tif(stop_event)\r\n\t\t\t\treturn;\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,value, options );\r\n\t\t});\r\n\r\n\t\telement.getValue = function()\r\n\t\t{\r\n\t\t\treturn value;\t\t\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tvar select = element.querySelector(\"select\");\r\n\t\t\tvar items = select.querySelectorAll(\"option\");\r\n\t\t\tvar index =  -1;\r\n\t\t\tif(values.constructor === Array)\r\n\t\t\t\tindex = values.indexOf(v);\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//search the element index in the values\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor(var i in values)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(values[j] == v)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tindex = j;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(index == -1)\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\tstop_event = skip_event;\r\n\r\n\t\t\tfor(var i in items)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(!item || !item.dataset) //weird bug\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tif( parseFloat(item.dataset[\"index\"]) == index )\r\n\t\t\t\t{\r\n\t\t\t\t\titem.setAttribute(\"selected\", true);\r\n\t\t\t\t\tselect.selectedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\titem.removeAttribute(\"selected\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop_event = false;\r\n\t\t};\r\n\r\n\t\tfunction setValues(v, selected){\r\n\t\t\tif(!v)\r\n\t\t\t\tv = [];\r\n\t\t\tvalues = v;\r\n\t\t\tif(selected)\r\n\t\t\t\tvalue = selected;\r\n\t\t\tvar code = \"\";\r\n\t\t\tvar index = 0;\r\n\t\t\tfor(var i in values)\r\n\t\t\t{\r\n\t\t\t\tvar item_value = values[i];\r\n\t\t\t\tvar item_index = values.constructor === Array ? index : i;\r\n\t\t\t\tvar item_title = values.constructor === Array ? item_value : i;\r\n\t\t\t\tif(item_value && item_value.title)\r\n\t\t\t\t\titem_title = item_value.title;\r\n\t\t\t\tcode += \"<option value='\"+item_index+\"' \"+( item_value == value ? \" selected\":\"\")+\" data-index='\"+item_index+\"'>\" + item_title + \"</option>\";\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telement.querySelector(\"select\").innerHTML = code;\r\n\t\t}\r\n\r\n\t\telement.setOptionValues = setValues;\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addComboButtons = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"\";\r\n\t\tif(options.values)\r\n\t\t\tfor(var i in options.values)\r\n\t\t\t\tcode += \"<button class='wcombobutton \"+(value == options.values[i] ? \"selected\":\"\")+\"' data-name='options.values[i]'>\" + options.values[i] + \"</button>\";\r\n\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tvar buttons = element.querySelectorAll( \".wcontent button\" );\r\n\t\tLiteGUI.bind( buttons, \"click\", function(e) { \r\n\r\n\t\t\tvar buttonname = e.target.innerHTML;\r\n\t\t\tthat.values[name] = buttonname;\r\n\r\n\t\t\tvar elements = element.querySelectorAll(\".selected\");\r\n\t\t\tfor(var i = 0; i < elements.length; ++i)\r\n\t\t\t\telements[i].classList.remove(\"selected\");\r\n\t\t\tthis.classList.add(\"selected\");\r\n\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,buttonname, options );\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addTags = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || [];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"<select>\";\r\n\t\tif(options.values)\r\n\t\t\tfor(var i in options.values)\r\n\t\t\t\tcode += \"<option>\" + options.values[i] + \"</option>\";\r\n\r\n\t\tcode += \"</select><div class='wtagscontainer inputfield'></div>\";\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full'>\"+code+\"</span>\", options);\r\n\t\telement.tags = {};\r\n\r\n\t\t//add default tags\r\n\t\tfor(var i in options.value)\r\n\t\t\tinner_addtag(options.value[i]);\r\n\r\n\t\t//combo change\r\n\t\tvar select_element = element.querySelector(\".wcontent select\");\r\n\t\tselect_element.addEventListener(\"change\", function(e) { \r\n\t\t\tinner_addtag(e.target.value);\r\n\t\t});\r\n\r\n\t\tfunction inner_addtag(tagname)\r\n\t\t{\r\n\t\t\tif( element.tags[tagname] )\r\n\t\t\t\treturn; //repeated tags no\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", element.tags);\r\n\r\n\t\t\telement.tags[tagname] = true;\r\n\r\n\t\t\tvar tag = document.createElement(\"div\");\r\n\t\t\ttag.data = tagname;\r\n\t\t\ttag.className = \"wtag\";\r\n\t\t\ttag.innerHTML = tagname+\"<span class='close'>X</span>\";\r\n\r\n\t\t\ttag.querySelector(\".close\").addEventListener(\"click\", function(e) {\r\n\t\t\t\tvar tagname = this.parentNode.data;\r\n\t\t\t\tdelete element.tags[tagname];\r\n\t\t\t\tLiteGUI.remove(this.parentNode);\r\n\t\t\t\tLiteGUI.trigger( element, \"wremoved\", tagname );\r\n\t\t\t\tInspector.onWidgetChange.call(that,element,name,element.tags, options);\r\n\t\t\t});\r\n\r\n\t\t\telement.querySelector(\".wtagscontainer\").appendChild(tag);\r\n\r\n\t\t\tthat.values[name] = element.tags;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element, element.tags ); \r\n\t\t\tLiteGUI.trigger( element, \"wchange\", element.tags);\r\n\t\t\tLiteGUI.trigger( element, \"wadded\", tagname);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name, element.tags, element);\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to select from a list of items\r\n\t* @method addList\r\n\t* @param {string} name \r\n\t* @param {*} value [Array or Object]\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - multiselection: allow multiple selection\r\n\t* - callback: function to call once an items is clicked\r\n\t* - selected: the item selected\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addList = function(name, values, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar that = this;\r\n\t\t\r\n\t\tvar list_height = \"\";\r\n\t\tif(options.height)\r\n\t\t\tlist_height = \"style='height: 100%; overflow: auto;'\";\r\n\t\t\t//height = \"style='height: \"+options.height+\"px; overflow: auto;'\";\r\n\r\n\t\tvar code = \"<ul class='lite-list' \"+list_height+\" tabIndex='\"+this.tab_index+\"'><ul>\";\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full \"+(options.disabled?\"disabled\":\"\")+\"' style='height: 100%;'>\"+code+\"</span>\", options);\r\n\r\n\t\tvar infocontent = element.querySelector(\".info_content\");\r\n\t\tinfocontent.style.height = \"100%\";\r\n\r\n\t\tvar list_element = element.querySelector(\".lite-list\");\r\n\r\n\t\tvar inputfield = element.querySelector(\".inputfield\");\r\n\t\tinputfield.style.height = \"100%\";\r\n\t\tinputfield.style.paddingBottom = \"0.2em\";\r\n\r\n\t\tvar ul_elements = element.querySelectorAll(\"ul\");\r\n\t\tfor(var i = 0; i < ul_elements.length; ++i)\r\n\t\t{\r\n\t\t\tvar ul = ul_elements[i];\r\n\t\t\tul.addEventListener(\"focus\",function() { \r\n\t\t\t\tdocument.addEventListener(\"keydown\",inner_key,true);\r\n\t\t\t});\r\n\t\t\tul.addEventListener(\"blur\",function() {\r\n\t\t\t\tdocument.removeEventListener(\"keydown\",inner_key,true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction inner_key(e)\r\n\t\t{\r\n\t\t\tvar selected = element.querySelector(\"li.selected\");\r\n\t\t\tif( !selected )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.keyCode == 13) //intro\r\n\t\t\t{\r\n\t\t\t\tif(!selected)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar value = values[ selected.dataset[\"pos\"] ];\r\n\t\t\t\tif(options.callback_dblclick)\r\n\t\t\t\t\toptions.callback_dblclick.call(that,value);\r\n\t\t\t}\r\n\t\t\telse if(e.keyCode == 40) //arrow down\r\n\t\t\t{\r\n\t\t\t\tvar next = selected.nextSibling;\r\n\t\t\t\tif(next)\r\n\t\t\t\t\tLiteGUI.trigger(next, \"click\");\r\n\t\t\t\tif(selected.scrollIntoViewIfNeeded)\r\n\t\t\t\t\tselected.scrollIntoViewIfNeeded({block: \"end\", behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t\telse if(e.keyCode == 38) //arrow up\r\n\t\t\t{\r\n\t\t\t\tvar prev = selected.previousSibling;\r\n\t\t\t\tif(prev)\r\n\t\t\t\t\tLiteGUI.trigger(prev,\"click\");\r\n\t\t\t\tif(selected.scrollIntoViewIfNeeded)\r\n\t\t\t\t\tselected.scrollIntoViewIfNeeded({block: \"end\", behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction inner_item_click(e) { \r\n\r\n\t\t\tif(options.multiselection)\r\n\t\t\t\tthis.classList.toggle(\"selected\");\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//batch action, jquery...\r\n\t\t\t\tvar lis = element.querySelectorAll(\"li\");\r\n\t\t\t\tfor(var i = 0; i < lis.length; ++i)\r\n\t\t\t\t\tlis[i].classList.remove(\"selected\");\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\t}\r\n\r\n\t\t\tvar value = values[ this.dataset[\"pos\"] ];\r\n\t\t\t//if(options.callback) options.callback.call(element,value); //done in onWidgetChange\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,value, options);\r\n\t\t\tLiteGUI.trigger(element, \"wadded\", value );\r\n\t\t}\r\n\r\n\t\tfunction inner_item_dblclick(e) { \r\n\t\t\tvar value = values[ this.dataset[\"pos\"] ];\r\n\t\t\tif(options.callback_dblclick)\r\n\t\t\t\toptions.callback_dblclick.call(that,value);\r\n\t\t}\r\n\r\n\t\telement.updateItems = function( new_values, item_selected )\r\n\t\t{\r\n\t\t\titem_selected = item_selected || options.selected;\r\n\t\t\tvar code = \"\";\r\n\t\t\tvalues = new_values;\r\n\t\t\tvar ul = this.querySelector(\"ul\");\r\n\t\t\tul.innerHTML = \"\";\r\n\r\n\t\t\tif(values)\r\n\t\t\t\tfor(var i in values)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar\tvalue = values[i];\r\n\t\t\t\t\tvar li_element = insert_item( value, item_selected, i );\r\n\t\t\t\t\tul.appendChild( li_element );\r\n\t\t\t\t}\r\n\r\n\t\t\t//ul.innerHTML = code;\r\n\t\t\tLiteGUI.bind( ul.querySelectorAll(\"li\"), \"click\", inner_item_click );\r\n\t\t}\r\n\r\n\t\tfunction insert_item( value, selected, index )\r\n\t\t{\r\n\t\t\tvar item_index = index; //to reference it\r\n\t\t\tvar item_title = index; //to show in the list\r\n\t\t\tselected = !!selected;\r\n\r\n\t\t\tvar item_style = null;\r\n\t\t\tvar icon = \"\";\r\n\t\t\tif( value != null )\r\n\t\t\t{\r\n\t\t\t\tif( value.constructor === String || value.constructor === Number || value.constructor === Boolean )\r\n\t\t\t\t{\r\n\t\t\t\t\titem_title = String(value);\r\n\t\t\t\t}\r\n\t\t\t\telse if( value )\r\n\t\t\t\t{\r\n\t\t\t\t\titem_title = value.content || value.title || value.name || index;\r\n\t\t\t\t\titem_style = value.style;\r\n\t\t\t\t\tif(value.icon)\r\n\t\t\t\t\t\ticon = \"<img src='\"+value.icon+\"' class='icon' /> \";\r\n\t\t\t\t\tif(value.selected)\r\n\t\t\t\t\t\tselected = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item_name = item_title;\r\n\t\t\titem_name = item_name.replace(/<(?:.|\\n)*?>/gm, ''); //remove html tags that could break the html\r\n\r\n\t\t\tvar li_element = document.createElement(\"li\");\r\n\t\t\tli_element.classList.add( 'item-' + LiteGUI.safeName(item_index) );\r\n\t\t\tif( selected )\r\n\t\t\t\tli_element.classList.add( 'selected' );\r\n\t\t\tli_element.dataset[\"name\"] = item_name;\r\n\t\t\tli_element.dataset[\"pos\"] = item_index;\r\n\t\t\tli_element.value = value;\r\n\t\t\tif(item_style)\r\n\t\t\t\tli_element.setAttribute(\"style\", item_style );\r\n\t\t\tli_element.innerHTML = icon + item_title;\r\n\t\t\tli_element.addEventListener( \"click\", inner_item_click );\r\n\t\t\tif(options.callback_dblclick)\r\n\t\t\t\tli_element.addEventListener( \"dblclick\", inner_item_dblclick );\r\n\t\t\treturn li_element;\r\n\t\t}\r\n\r\n\t\telement.addItem = function( value, selected, name )\r\n\t\t{\r\n\t\t\tif(values.constructor !== Array)\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"cannot add item to list of object, only array\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvalues.push( value );\r\n\t\t\tvar ul = this.querySelector(\"ul\");\r\n\t\t\tvar li_element = insert_item( value, selected);\r\n\t\t\tul.appendChild( li_element );\r\n\t\t}\r\n\r\n\t\telement.removeItem = function(name)\r\n\t\t{\r\n\t\t\tvar items = element.querySelectorAll(\".wcontent li\");\r\n\t\t\tfor(var i = 0; i < items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif(items[i].dataset[\"name\"] == name)\r\n\t\t\t\t\tLiteGUI.remove( items[i] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.updateItems( values, options.selected );\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.getSelected = function()\r\n\t\t{\r\n\t\t\tvar r = [];\r\n\t\t\tvar selected = this.querySelectorAll(\"ul li.selected\");\r\n\t\t\tfor(var i = 0; i < selected.length; ++i)\r\n\t\t\t\tr.push( selected[i].dataset[\"name\"] );\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\telement.getByIndex = function(num)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\treturn items[num];\r\n\t\t}\r\n\t\telement.getIndex = element.getByIndex; //legacy\r\n\r\n\t\telement.selectIndex = function( num, add_to_selection )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(i == num)\r\n\t\t\t\t\titem.classList.add(\"selected\");\r\n\t\t\t\telse if(!add_to_selection)\r\n\t\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t\treturn items[num];\r\n\t\t}\r\n\r\n\t\telement.deselectIndex = function( num )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar item = items[num];\r\n\t\t\tif(item)\r\n\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\telement.scrollToIndex = function(num)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar item = items[num];\r\n\t\t\tif(!item)\r\n\t\t\t\treturn;\r\n\t\t\tthis.scrollTop = item.offsetTop;\r\n\t\t}\r\n\r\n\t\telement.selectAll = function()\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif( item.classList.contains(\"selected\") )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.deselectAll = function()\r\n\t\t{\r\n\t\t\t//there has to be a more efficient way to do this\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif( !item.classList.contains(\"selected\") )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tthis.updateItems(v);\r\n\t\t}\r\n\r\n\t\telement.getNumberOfItems = function()\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\treturn items.length;\r\n\t\t}\r\n\r\n\t\telement.filter = function( callback, case_sensitive )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar use_string = false;\r\n\r\n\t\t\tif( callback && callback.constructor === String )\r\n\t\t\t{\r\n\t\t\t\tvar needle = callback;\r\n\t\t\t\tif( case_sensitive )\r\n\t\t\t\t\tneedle.toLowerCase();\r\n\t\t\t\tuse_string = true;\r\n\t\t\t\tcallback = function(v){ return ( (case_sensitive ? v : v.toLowerCase()).indexOf(needle) != -1); };\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(!callback)\r\n\t\t\t\t{\r\n\t\t\t\t\titem.style.display = \"\";\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = item.value;\r\n\t\t\t\tif(use_string && value != null && value.constructor !== String)\r\n\t\t\t\t\tvalue = item.innerHTML;\r\n\r\n\t\t\t\tif( !callback( value, item, item.classList.contains(\"selected\") ) )\r\n\t\t\t\t\titem.style.display = \"none\";\r\n\t\t\t\telse\r\n\t\t\t\t\titem.style.display = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.selectByFilter = function(callback)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tvar r = callback( item.value, item, item.classList.contains(\"selected\") );\r\n\t\t\t\tif( r === true )\r\n\t\t\t\t\titem.classList.add(\"selected\");\r\n\t\t\t\telse if( r === false )\r\n\t\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.height) \r\n\t\t\telement.scrollTop = 0;\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addButton = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = options.button_text || value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar button_classname = \"\";\r\n\t\tif(name === null)\r\n\t\t\tbutton_classname = \"single\";\r\n\t\tif(options.micro)\r\n\t\t\tbutton_classname += \" micro\";\r\n\r\n\t\tvar attrs = \"\";\r\n\t\tif(options.disabled)\r\n\t\t\tattrs = \"disabled='disabled'\";\r\n\r\n\t\tvar title = options.title || \"\";\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<button tabIndex='\"+ this.tab_index + \"' \"+attrs+\"></button>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar button = element.querySelector(\"button\");\r\n\t\tbutton.setAttribute(\"title\",title);\r\n\t\tbutton.className = \"litebutton \" + button_classname;\r\n\t\tbutton.innerHTML = value;\r\n\t\tbutton.addEventListener(\"click\", function(event) {\r\n\t\t\tInspector.onWidgetChange.call( that, element, name, this.innerHTML, options, false, event);\r\n\t\t\tLiteGUI.trigger( button, \"wclick\", value );\r\n\t\t});\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.wclick = function(callback) { \r\n\t\t\tif(!options.disabled)\r\n\t\t\t\tLiteGUI.bind(this, \"wclick\", callback ); \r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tbutton.innerHTML = v;\r\n\t\t}\r\n\r\n\t\telement.disable = function() { button.disabled = true; };\r\n\t\telement.enable = function() { button.disabled = false; };\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addButtons = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\t//var w = \"calc(\"+(100/value.length).toFixed(3)+\"% - \"+Math.floor(16/value.length)+\"px);\";\r\n\t\tvar w = \"calc( \" + (100/value.length).toFixed(3) + \"% - 4px )\";\r\n\t\tvar style = \"width:\"+w+\"; width: -moz-\"+w+\"; width: -webkit-\"+w+\"; margin: 2px;\";\r\n\t\tif(value && typeof(value) == \"object\")\r\n\t\t{\r\n\t\t\tfor(var i in value)\r\n\t\t\t{\r\n\t\t\t\tvar title = \"\";\r\n\t\t\t\tif( options.title && options.title.constructor === Array)\r\n\t\t\t\t\ttitle = options.title[i] || \"\";\r\n\t\t\t\tcode += \"<button class='litebutton' title='\"+title+\"' tabIndex='\"+this.tab_index+\"' style='\"+style+\"'>\"+value[i]+\"</button>\";\r\n\t\t\t\tthis.tab_index++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tvar buttons = element.querySelectorAll(\"button\");\r\n\t\tfor(var i = 0; i < buttons.length; ++i)\r\n\t\t{\r\n\t\t\tvar button = buttons[i];\r\n\t\t\tbutton.addEventListener(\"click\", function(evt) {\r\n\t\t\t\tInspector.onWidgetChange.call(that, element, name, this.innerHTML, options, null, evt);\r\n\t\t\t\tLiteGUI.trigger( element, \"wclick\",this.innerHTML );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addIcon = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar img_url = options.image;\r\n\t\tvar width = options.width || options.size || 20;\r\n\t\tvar height = options.height || options.size || 20;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='icon' \"+(options.title ? \"title='\"+options.title+\"'\" : \"\" )+\" tabIndex='\"+ this.tab_index + \"'></span>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar content = element.querySelector(\"span.wcontent\");\r\n\t\tvar icon = element.querySelector(\"span.icon\");\r\n\r\n\t\tvar x = options.x || 0;\r\n\t\tif(options.index)\r\n\t\t\tx = options.index * -width;\r\n\t\tvar y = value ? height : 0;\r\n\r\n\t\telement.style.minWidth = element.style.width = (width) + \"px\";\r\n\t\telement.style.margin = \"0 2px\"; element.style.padding = \"0\";\r\n\t\tcontent.style.margin = \"0\"; content.style.padding = \"0\";\r\n\r\n\t\ticon.style.display = \"inline-block\"\r\n\t\ticon.style.cursor = \"pointer\";\r\n\t\ticon.style.width = width + \"px\";\r\n\t\ticon.style.height = height + \"px\";\r\n\t\ticon.style.backgroundImage = \"url('\"+img_url+\"')\";\r\n\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\r\n\t\ticon.addEventListener(\"mousedown\", function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvalue = !value;\r\n\t\t\tvar ret = Inspector.onWidgetChange.call(that,element,name, value, options);\r\n\t\t\tLiteGUI.trigger( element, \"wclick\", value);\r\n\r\n\t\t\tif(ret !== undefined)\r\n\t\t\t\tvalue = ret;\r\n\r\n\t\t\tvar y = value ? height : 0;\r\n\t\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\r\n\t\t\tif(options.toggle === false) //blink\r\n\t\t\t\tsetTimeout( function(){ icon.style.backgroundPosition = x + \"px 0px\"; value = false; },200 );\r\n\r\n\t\t});\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function(v, skip_event ) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tvar y = value ? height : 0;\r\n\t\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tInspector.onWidgetChange.call(that,element,name, value, options);\r\n\t\t};\r\n\t\telement.getValue = function() { return value; };\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addColor = function( name, value, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || [0.0,0.0,0.0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"<input tabIndex='\"+this.tab_index+\"' id='colorpicker-\"+name+\"' class='color' value='\"+(value[0]+\",\"+value[1]+\",\"+value[2])+\"' \"+(options.disabled?\"disabled\":\"\")+\"/>\";\r\n\t\tthis.tab_index++;\r\n\r\n\t\tif(options.show_rgb)\r\n\t\t\tcode += \"<span class='rgb-color'>\"+Inspector.parseColor(value)+\"</span>\";\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tthis.append(element,options); //add now or jscolor dont work\r\n\r\n\t\t//create jsColor \r\n\t\tvar input_element = element.querySelector(\"input.color\");\r\n\t\tvar myColor = null;\r\n\r\n\t\tif( window.jscolor )\r\n\t\t{\r\n\r\n\t\t\t//SHOWS CONTEXTUAL MENU\r\n\t\t\t//block focusing\r\n\t\t\t/*\r\n\t\t\tinput_element.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\t\tif(e.button != 2) //right button\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t//create the context menu\r\n\t\t\t\tvar contextmenu = new LiteGUI.ContextMenu( [\"Copy in HEX\",\"Copy in RGBA\"], { event: e, callback: inner_action });\r\n\t\t\t\te.preventDefault(); \r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tinput_element.addEventListener(\"focus\", block_focus , true);\r\n\t\t\t\tsetTimeout(function(){ input_element.removeEventListener(\"focus\", block_focus , true);},1000);\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},true);\t\r\n\r\n\t\t\tfunction block_focus(e)\r\n\t\t\t{\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfunction inner_action(v)\r\n\t\t\t{\r\n\t\t\t\tif(v == \"Copy in HEX\")\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.toClipboard( \"in HEX\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.toClipboard( \"in RGB\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tmyColor = new jscolor.color(input_element);\r\n\t\t\tmyColor.pickerFaceColor = \"#333\";\r\n\t\t\tmyColor.pickerBorderColor = \"black\";\r\n\t\t\tmyColor.pickerInsetColor = \"#222\";\r\n\t\t\tmyColor.rgb_intensity = 1.0;\r\n\r\n\t\t\tif(options.disabled) \r\n\t\t\t\tmyColor.pickerOnfocus = false; //this doesnt work\r\n\r\n\t\t\tif( value.constructor !== String && value.length && value.length > 2)\r\n\t\t\t{\r\n\t\t\t\tvar intensity = 1.0;\r\n\t\t\t\tmyColor.fromRGB(value[0]*intensity,value[1]*intensity,value[2]*intensity);\r\n\t\t\t\tmyColor.rgb_intensity = intensity;\r\n\t\t\t}\r\n\r\n\t\t\t//update values in rgb format\r\n\t\t\tinput_element.addEventListener(\"change\", function(e) { \r\n\t\t\t\tvar rgbelement = element.querySelector(\".rgb-color\");\r\n\t\t\t\tif(rgbelement)\r\n\t\t\t\t\trgbelement.innerHTML = LiteGUI.Inspector.parseColor(myColor.rgb);\r\n\t\t\t});\r\n\r\n\t\t\tmyColor.onImmediateChange = function() \r\n\t\t\t{\r\n\t\t\t\tvar v = [ myColor.rgb[0] * myColor.rgb_intensity, myColor.rgb[1] * myColor.rgb_intensity, myColor.rgb[2] * myColor.rgb_intensity ];\r\n\t\t\t\t//Inspector.onWidgetChange.call(that,element,name,v, options);\r\n\t\t\t\tvar event_data = [v.concat(), myColor.toString()];\r\n\t\t\t\tLiteGUI.trigger( element, \"wbeforechange\", event_data );\r\n\t\t\t\tthat.values[name] = v;\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback.call( element, v.concat(), \"#\" + myColor.toString(), myColor );\r\n\t\t\t\tLiteGUI.trigger( element, \"wchange\", event_data );\r\n\t\t\t\tif(that.onchange) that.onchange(name, v.concat(), element);\r\n\t\t\t}\r\n\r\n\t\t\t//alpha dragger\r\n\t\t\toptions.step = options.step || 0.01;\r\n\t\t\toptions.dragger_class = \"nano\";\r\n\r\n\t\t\tvar dragger = new LiteGUI.Dragger(1, options);\r\n\t\t\telement.querySelector('.wcontent').appendChild(dragger.root);\r\n\t\t\tdragger.input.addEventListener(\"change\", function(e)\r\n\t\t\t{\r\n\t\t\t\tvar v = parseFloat( this.value );\r\n\t\t\t\tmyColor.rgb_intensity = v;\r\n\t\t\t\tif (myColor.onImmediateChange)\r\n\t\t\t\t\tmyColor.onImmediateChange();\r\n\t\t\t});\r\n\r\n\t\t\telement.setValue = function(value,skip_event) { \r\n\t\t\t\tmyColor.fromRGB(value[0],value[1],value[2]);\r\n\t\t\t\tif(!skip_event)\r\n\t\t\t\t\tLiteGUI.trigger( dragger.input, \"change\" ); \r\n\t\t\t};\r\n\r\n\t\t\telement.getValue = function() { \r\n\t\t\t\treturn value;\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tinput_element.addEventListener(\"change\", function(e) { \r\n\t\t\t\tvar rgbelement = element.querySelector(\".rgb-color\");\r\n\t\t\t\tif(rgbelement)\r\n\t\t\t\t\trgbelement.innerHTML = LiteGUI.Inspector.parseColor(myColor.rgb);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addFile = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'></span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='\"+value+\"'/>\", options);\r\n\t\tvar content = element.querySelector(\".wcontent\");\r\n\t\tcontent.style.position = \"relative\";\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\t\tvar filename_element = element.querySelector(\".wcontent .filename\");\r\n\t\tif(value)\r\n\t\t\tfilename_element.innerText = value.name;\r\n\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\t\t\tif(!e.target.files.length)\r\n\t\t\t{\r\n\t\t\t\t//nothing\r\n\t\t\t\tfilename_element.innerText = \"\";\r\n\t\t\t\tInspector.onWidgetChange.call(that, element, name, null, options);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar url = null;\r\n\t\t\t//var data = { url: url, filename: e.target.value, file: e.target.files[0], files: e.target.files };\r\n\t\t\tvar file = e.target.files[0];\r\n\t\t\tfile.files = e.target.files;\r\n\t\t\tif( options.generate_url )\r\n\t\t\t\tfile.url = URL.createObjectURL( e.target.files[0] );\r\n\t\t\tfilename_element.innerText = file.name;\r\n\r\n\t\t\tif(options.read_file)\r\n\t\t\t{\r\n\t\t\t\t var reader = new FileReader();\r\n\t\t\t\t reader.onload = function(e2){\r\n\t\t\t\t\tfile.data = e2.target.result;\r\n\t\t\t\t\tInspector.onWidgetChange.call( that, element, name, file, options );\r\n\t\t\t\t }\r\n\t\t\t\t if( options.read_file == \"binary\" )\r\n\t\t\t\t\t reader.readAsArrayBuffer( file );\r\n\t\t\t\t else if( options.read_file == \"data_url\" )\r\n\t\t\t\t\t reader.readAsDataURL( file );\r\n\t\t\t\t else\r\n\t\t\t\t\t reader.readAsText( file );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tInspector.onWidgetChange.call( that, element, name, file, options );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addLine = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<span class='line-editor'></span>\", options);\r\n\t\telement.style.width = \"100%\";\r\n\r\n\t\tvar line_editor = new LiteGUI.LineEditor(value,options);\r\n\t\telement.querySelector(\"span.line-editor\").appendChild(line_editor);\r\n\r\n\t\tLiteGUI.bind( line_editor, \"change\", function(e) { \r\n\t\t\tLiteGUI.trigger(element, \"wbeforechange\",[e.target.value]);\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element,e.target.value );\r\n\t\t\tLiteGUI.trigger(element, \"wchange\",[e.target.value]);\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,e.target.value, options);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addTree = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = this.createWidget(name,\"<div class='wtree inputfield full'></div>\", options);\r\n\t\t\r\n\t\tvar tree_root = element.querySelector(\".wtree\");\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\ttree_root.style.height = typeof(options.height) == \"number\" ? options.height + \"px\" : options.height;\r\n\t\t\ttree_root.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\tvar current = value;\r\n\r\n\t\tvar tree = element.tree = new LiteGUI.Tree( value, options.tree_options );\r\n\t\ttree.onItemSelected = function(node, data) {\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element, node, data);\r\n\t\t};\r\n\r\n\t\ttree_root.appendChild(tree.root);\r\n\r\n\t\telement.setValue = function(v) { \r\n\t\t\ttree.updateTree(v);\r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addDataTree = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = this.createWidget(name,\"<div class='wtree'></div>\", options);\r\n\t\t\r\n\t\tvar node = element.querySelector(\".wtree\");\r\n\t\tvar current = value;\r\n\r\n\t\tinner_recursive(node,value);\r\n\r\n\t\tfunction inner_recursive( root_node, value)\r\n\t\t{\r\n\t\t\tfor(var i in value)\r\n\t\t\t{\r\n\t\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\t\te.className = \"treenode\";\r\n\t\t\t\tif( typeof( value[i] ) == \"object\" )\r\n\t\t\t\t{\r\n\t\t\t\t\te.innerHTML = \"<span class='itemname'>\" + i + \"</span><span class='itemcontent'></span>\";\r\n\t\t\t\t\tinner_recursive( e.querySelector(\".itemcontent\"), value[i] );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\te.innerHTML = \"<span class='itemname'>\" + i + \"</span><span class='itemvalue'>\" + value[i] + \"</span>\";\r\n\t\t\t\troot_node.appendChild(e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit an array of values of a certain type\r\n\t* @method addArray\r\n\t* @param {string} name \r\n\t* @param {Array} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - data_type: the type of every value inside the array\r\n\t* - data_options: options for the widgets of every item in the array\r\n\t* - max_items: max number of items to show from the array, default is 100\r\n\t* - callback: function to call once an items inside the array has changed\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addArray = function( name, value, options )\r\n\t{\r\n\t\tvar that = this;\r\n\r\n\t\tif( !value || value.constructor !== Array )\r\n\t\t{\r\n\t\t\tconsole.error(\"Inspector: Array widget value must be a valid array\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar type = options.data_type || \"string\";\r\n\t\tvar max_items = options.max_items || 100;\r\n\t\tvar container = null;\r\n\r\n\t\t//length widget\r\n\t\tthis.widgets_per_row = 3;\r\n\t\tthis.addInfo(name,null,{ name_width: \"100%\", width: \"100% - 160px\"});\r\n\t\tvar length_widget = this.addString( \"length\", value.length || \"0\", { width: 100, callback: function(v){ \r\n\t\t\tvar v = parseInt(v);\r\n\t\t\tif(value < 0)\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue.length = v;\r\n\t\t\trefresh.call( container );\r\n\t\t}});\r\n\r\n\t\tthis.addButtons( null,[\"+\",\"-\"], { width: 60, callback: function(v){\r\n\t\t\tif(v == \"+\")\r\n\t\t\t\tvalue.length = value.length + 1;\r\n\t\t\telse if(value.length > 0)\r\n\t\t\t\tvalue.length = value.length - 1;\r\n\t\t\tlength_widget.setValue( value.length );\r\n\t\t\trefresh.call( container );\r\n\t\t}});\r\n\r\n\t\tthis.widgets_per_row = 1;\r\n\t\tcontainer = this.addContainer( name, options );\r\n\t\tcontainer.value = value;\r\n\r\n\t\trefresh.call( container );\r\n\r\n\t\tfunction refresh()\r\n\t\t{\r\n\t\t\tvar container = this;\r\n\t\t\tvar value = container.value;\r\n\t\t\tvar size = Math.min( value.length, max_items );\r\n\r\n\t\t\tthat.widgets_per_row += 1;\r\n\t\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\t\tfor(var i = 0; i < size; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar v = null;\r\n\t\t\t\tif (value[i] !== undefined)\r\n\t\t\t\t\tv = value[i];\r\n\t\t\t\tvar row = document.createElement(\"div\");\r\n\t\t\t\trow.className = \"array-row\";\r\n\t\t\t\trow.innerHTML = \"<span class='row-index'>\" + i + \"</span><span class='row-cell'></span><button style='width: 30px;' class='litebutton single row-trash'><img src='imgs/mini-icon-trash.png'/></button>\";\r\n\t\t\t\tcontainer.appendChild(row);\r\n\r\n\t\t\t\tvar widget_row_container = row.querySelector('.row-cell');\r\n\t\t\t\t\r\n\t\t\t\tvar item_options = { widget_parent: widget_row_container, callback: assign.bind({value: this.value, index: i}) };\r\n\t\t\t\tif(options.data_options)\r\n\t\t\t\t\tfor(var j in options.data_options)\r\n\t\t\t\t\t\titem_options[j] = options.data_options[j];\r\n\t\t\t\tvar w = that.add( type, null, v, item_options );\r\n\r\n\t\t\t\t/*\r\n\t\t\t\tthat.addButton(null,\"<img src='imgs/mini-icon-trash.png'/>\", {  widget_parent: container, index: i, width: 30, callback: function(){\r\n\t\t\t\t\tif( value && value.length > (this.options.index-1))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue.splice( this.options.index,1 );\r\n\t\t\t\t\t\tlength_widget.setValue( value.length, true );\r\n\t\t\t\t\t\trefresh.call( container );\r\n\t\t\t\t\t}\r\n\t\t\t\t}});\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tthat.widgets_per_row -= 1;\r\n\t\t}\r\n\r\n\t\tfunction assign(v)\r\n\t\t{\r\n\t\t\tthis.value[ this.index ] = v;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( container, this.value, this.index );\r\n\t\t\t//todo: trigger change\r\n\t\t}\r\n\r\n\t\tcontainer.setValue = function(v)\r\n\t\t{\r\n\t\t\tthis.value = v;\r\n\t\t\trefresh.call(container);\r\n\t\t}\r\n\r\n\t\tcontainer.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.value = v;\r\n\t\t}\r\n\r\n\t\t//this.append(element,options);\r\n\t\treturn container;\r\n\t}\r\n\r\n\t//***** containers ********/\r\n\t//creates an empty container but it is not set active\r\n\tInspector.prototype.addContainer = function(name, options)\r\n\t{\r\n\t\tif(name && name.constructor !== String)\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector.addContainer first parameter must be a string with the name\");\r\n\t\tvar element = this.startContainer(null,options);\r\n\t\tthis.endContainer();\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//creates an empty container and sets its as active\r\n\tInspector.prototype.startContainer = function(name, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wcontainer\";\r\n\t\tthis.applyOptions(element, options);\r\n\t\tthis.row_number = 0;\r\n\r\n\t\tthis.append( element );\r\n\t\tthis.pushContainer( element );\r\n\r\n\t\tif(options.widgets_per_row)\r\n\t\t\tthis.widgets_per_row = options.widgets_per_row;\r\n\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\t\telement.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\telement.refresh = function()\r\n\t\t{\r\n\t\t\tif(element.on_refresh)\r\n\t\t\t\telement.on_refresh.call(this, element);\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.endContainer = function(name, options)\r\n\t{\r\n\t\tthis.popContainer();\r\n\t}\r\n\r\n\t//it is like a group but they cant be nested inside containers\r\n\tInspector.prototype.addSection = function( name, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tvar that = this;\r\n\r\n\t\tif(this.current_section)\r\n\t\t\tthis.current_section.end();\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wsection\";\r\n\t\tif(!name) \r\n\t\t\telement.className += \" notitle\";\r\n\t\tif(options.className)\r\n\t\t\telement.className += \" \" + options.className;\r\n\t\tif(options.collapsed)\r\n\t\t\telement.className += \" collapsed\";\r\n\r\n\t\tif(options.id)\r\n\t\t\telement.id = options.id;\r\n\t\tif(options.instance)\r\n\t\t\telement.instance = options.instance;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(name)\r\n\t\t\tcode += \"<div class='wsectiontitle'>\"+(options.no_collapse ? \"\" : \"<span class='switch-section-button'></span>\")+name+\"</div>\";\r\n\t\tcode += \"<div class='wsectioncontent'></div>\";\r\n\t\telement.innerHTML = code;\r\n\r\n\t\t//append to inspector\r\n\t\telement._last_container_stack = this._current_container_stack.concat();\r\n\t\t//this.append( element ); //sections are added to the root, not to the current container\r\n\t\tthis.root.appendChild( element );\r\n\t\tthis.sections.push( element );\r\n\r\n\t\telement.sectiontitle = element.querySelector(\".wsectiontitle\");\r\n\r\n\t\tif(name)\r\n\t\t\telement.sectiontitle.addEventListener(\"click\",function(e) {\r\n\t\t\t\tif(e.target.localName == \"button\") \r\n\t\t\t\t\treturn;\r\n\t\t\t\telement.classList.toggle(\"collapsed\");\r\n\t\t\t\tvar seccont = element.querySelector(\".wsectioncontent\");\r\n\t\t\t\tseccont.style.display = seccont.style.display === \"none\" ? null : \"none\";\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback.call( element, !element.classList.contains(\"collapsed\") );\r\n\t\t\t});\r\n\r\n\t\tif(options.collapsed)\r\n\t\t\telement.querySelector(\".wsectioncontent\").style.display = \"none\";\r\n\r\n\t\tthis.setCurrentSection( element );\r\n\r\n\t\tif(options.widgets_per_row)\r\n\t\t\tthis.widgets_per_row = options.widgets_per_row;\r\n\r\n\t\telement.refresh = function()\r\n\t\t{\r\n\t\t\tif(element.on_refresh)\r\n\t\t\t\telement.on_refresh.call(this, element);\r\n\t\t}\r\n\r\n\t\telement.end = function()\r\n\t\t{\r\n\t\t\tif(that.current_section != this)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthat._current_container_stack = this._last_container_stack;\r\n\t\t\tthat._current_container = null;\r\n\r\n\t\t\tvar content = this.querySelector(\".wsectioncontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\treturn;\r\n\t\t\tif( that.isContainerInStack( content ) )\r\n\t\t\t\tthat.popContainer( content );\r\n\t\t\tthat.current_section = null;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//change current section (allows to add widgets to previous sections)\r\n\tInspector.prototype.setCurrentSection = function( section )\r\n\t{\r\n\t\tif( this.current_section == section )\r\n\t\t\treturn;\r\n\r\n\t\tthis.current_section = section;\r\n\r\n\t\tvar parent = section.parentNode;\r\n\t\tthis.popContainer( parent ); //go back till that container\r\n\r\n\t\tvar content = section.querySelector(\".wsectioncontent\");\r\n\t\tthis.pushContainer( content );\r\n\t}\r\n\r\n\tInspector.prototype.getCurrentSection = function()\r\n\t{\r\n\t\tfor(var i = this._current_container_stack.length - 1; i >= 0; --i)\r\n\t\t{\r\n\t\t\tvar container = this._current_container_stack[i];\r\n\t\t\tif(container.classList.contains(\"wsectioncontent\"))\r\n\t\t\t\treturn container.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tInspector.prototype.endCurrentSection = function()\r\n\t{\r\n\t\tif(this.current_section)\r\n\t\t\tthis.current_section.end();\r\n\t}\r\n\r\n\t//A container of widgets with a title \r\n\tInspector.prototype.beginGroup = function( name, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wgroup\";\r\n\t\tname = name || \"\";\r\n\t\telement.innerHTML = \"<div class='wgroupheader \"+ (options.title ? \"wtitle\" : \"\") +\"'><span class='switch-section-button'></span>\"+name+\"</div>\";\r\n\t\telement.group = true;\r\n\r\n\t\tvar content = document.createElement(\"DIV\");\r\n\t\tcontent.className = \"wgroupcontent\";\r\n\t\tif(options.collapsed)\r\n\t\t\tcontent.style.display = \"none\";\r\n\r\n\t\tif( options.height )\r\n\t\t\tcontent.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tif( options.scrollable )\r\n\t\t\tcontent.style.overflow = \"auto\";\r\n\r\n\t\telement.appendChild( content );\r\n\r\n\t\tvar collapsed = options.collapsed || false;\r\n\t\tvar header = element.querySelector(\".wgroupheader\");\r\n\t\tif(collapsed)\r\n\t\t\theader.classList.add(\"collapsed\");\r\n\t\theader.addEventListener(\"click\", function(e) { \r\n\t\t\tvar style = element.querySelector(\".wgroupcontent\").style;\r\n\t\t\tstyle.display = style.display === \"none\" ? \"\" : \"none\";\r\n\t\t\tcollapsed = !collapsed;\r\n\t\t\tif(collapsed)\r\n\t\t\t\theader.classList.add(\"collapsed\");\r\n\t\t\telse\r\n\t\t\t\theader.classList.remove(\"collapsed\");\r\n\t\t\t//element.querySelector(\".switch-section-button\").innerHTML = (collapsed ? \"+\" : \"-\");\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\r\n\t\tthis.append( element, options );\r\n\t\tthis.pushContainer( content );\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.endGroup = function()\r\n\t{\r\n\t\tdo\r\n\t\t{\r\n\t\t\tthis.popContainer();\r\n\t\t}\r\n\t\twhile( this._current_container && !this._current_container.classList.contains(\"wgroupcontent\") )\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a title bar in the widgets list to help separate widgets\r\n\t* @method addTitle\r\n\t* @param {string} title \r\n\t* @param {Object} options\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addTitle = function(title,options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\tvar code = \"<span class='wtitle'><span class='text'>\"+title+\"</span>\";\r\n\t\tif(options.help)\r\n\t\t{\r\n\t\t\tcode += \"<span class='help'><div class='help-content'>\"+options.help+\"</div></span>\";\r\n\t\t}\r\n\t\tcode += \"</span>\";\r\n\t\telement.innerHTML = code;\r\n\t\telement.setValue = function(v) { \r\n\t\t\tthis.querySelector(\".text\").innerHTML = v;\r\n\t\t};\r\n\t\tthis.row_number = 0;\r\n\t\tthis.append(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\r\n\tInspector.prototype.scrollTo = function( id )\r\n\t{\r\n\t\tvar element = this.root.querySelector(\"#\" + id );\r\n\t\tif(!element)\r\n\t\t\treturn;\r\n\t\tvar top = this.root.offsetTop;\r\n\t\tvar delta = element.offsetTop - top;\r\n\t\tthis.root.parentNode.parentNode.scrollTop = delta;\r\n\t}\r\n\r\n\tInspector.prototype.processOptions = function(options)\r\n\t{\r\n\t\tif(typeof(options) == \"function\")\r\n\t\t\toptions = { callback: options };\r\n\t\treturn options || {};\r\n\t}\r\n\r\n\tInspector.prototype.processElement = function(element, options)\r\n\t{\r\n\t\tif(options.callback_update && element.setValue)\r\n\t\t{\r\n\t\t\telement.on_update = function(){\r\n\t\t\t\tthis.setValue( options.callback_update.call(this), true );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.prototype.updateWidgets = function()\r\n\t{\r\n\t\tfor(var i = 0; i < this.widgets.length; ++i)\r\n\t\t{\r\n\t\t\tvar widget = this.widgets[i];\r\n\t\t\tif(widget.on_update)\r\n\t\t\t\twidget.on_update( widget );\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.parseColor = function(color)\r\n\t{\r\n\t\treturn \"<span style='color: #FAA'>\" + color[0].toFixed(2) + \"</span>,<span style='color: #AFA'>\" + color[1].toFixed(2) + \"</span>,<span style='color: #AAF'>\" + color[2].toFixed(2) + \"</span>\";\r\n\t}\r\n\r\n\treturn LiteGUI.Inspector = Inspector;\r\n\r\n});\ndefine('skylark-litegui/Menubar',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/************** MENUBAR ************************/\r\n\tfunction Menubar(id, options)\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.menu = [];\r\n\t\tthis.panels = [];\r\n\r\n\t\tthis.root = document.createElement(\"div\");\r\n\t\tthis.root.id = id;\r\n\t\tthis.root.className = \"litemenubar\";\r\n\r\n\t\tthis.content = document.createElement(\"ul\");\r\n\t\tthis.root.appendChild( this.content );\r\n\r\n\t\tthis.is_open = false;\r\n\t\tthis.auto_open = options.auto_open || false;\r\n\t\tthis.sort_entries = options.sort_entries || false;\r\n\t}\r\n\r\n\tMenubar.closing_time = 500;\r\n\r\n\tMenubar.prototype.clear = function()\r\n\t{\r\n\t\tthis.content.innerHTML = \"\";\r\n\t\tthis.menu = [];\r\n\t\tthis.panels = [];\r\n\t}\r\n\r\n\tMenubar.prototype.attachToPanel = function(panel)\r\n\t{\r\n\t\tpanel.content.insertBefore( this.root, panel.content.firstChild );\r\n\t}\r\n\r\n\tMenubar.prototype.add = function( path, data )\r\n\t{\r\n\t\tdata = data || {};\r\n\r\n\t\tif( typeof(data) == \"function\" )\r\n\t\t\tdata = { callback: data };\r\n\r\n\t\tvar prev_length = this.menu.length;\r\n\r\n\t\tvar tokens = path.split(\"/\");\r\n\t\tvar current_token = 0;\r\n\t\tvar current_pos = 0;\r\n\t\tvar menu = this.menu;\r\n\t\tvar last_item = null;\r\n\r\n\t\twhile( menu )\r\n\t\t{\r\n\t\t\tif(current_token > 5)\r\n\t\t\t\tthrow(\"Error: Menubar too deep\");\r\n\t\t\t//token not found in this menu, create it\r\n\t\t\tif( menu.length == current_pos )\r\n\t\t\t{\r\n\t\t\t\tvar v = { parent: last_item, children: [] };\r\n\t\t\t\tlast_item = v;\r\n\t\t\t\tif(current_token == tokens.length - 1)\r\n\t\t\t\t\tv.data = data;\r\n\r\n\t\t\t\tv.disable = function() { if( this.data ) this.data.disabled = true; }\r\n\t\t\t\tv.enable = function() { if( this.data ) delete this.data.disabled; }\r\n\r\n\t\t\t\tv.name = tokens[ current_token ];\r\n\t\t\t\tmenu.push( v );\r\n\t\t\t\tcurrent_token++;\r\n\t\t\t\tif( current_token == tokens.length )\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tv.children = [];\r\n\t\t\t\tmenu = v.children;\r\n\t\t\t\tcurrent_pos = 0;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//token found in this menu, get inside for next token\r\n\t\t\tif( menu[ current_pos ] && tokens[ current_token ] == menu[ current_pos ].name )\r\n\t\t\t{\r\n\t\t\t\tif(current_token < tokens.length - 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tlast_item = menu[ current_pos ];\r\n\t\t\t\t\tmenu = menu[ current_pos ].children;\r\n\t\t\t\t\tcurrent_pos = 0;\r\n\t\t\t\t\tcurrent_token++;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\telse //last token\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.warn(\"Warning: Adding menu that already exists: \" + path );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcurrent_pos++;\r\n\t\t}\r\n\r\n\t\tif(prev_length != this.menu.length)\r\n\t\t\tthis.updateMenu();\r\n\t};\r\n\r\n\tMenubar.prototype.remove = function( path )\r\n\t{\r\n\t\tvar menu = this.findMenu( path );\r\n\t\tif(!menu)\r\n\t\t\treturn;\r\n\t\tif(!menu.parent || !menu.parent.children)\r\n\t\t\treturn console.warn(\"menu without parent?\");\r\n\t\t\r\n\t\tvar index = menu.parent.children.indexOf( menu );\r\n\t\tif(index != -1)\r\n\t\t\tmenu.parent.children.splice( index, 1 );\r\n\t},\r\n\r\n\tMenubar.prototype.separator = function( path, order )\r\n\t{\r\n\t\tvar menu = this.findMenu( path );\r\n\t\tif(!menu)\r\n\t\t\treturn;\r\n\t\tmenu.children.push( {separator: true, order: order || 10 } );\r\n\t}\r\n\r\n\t//returns the menu entry that matches this path\r\n\tMenubar.prototype.findMenu = function( path )\r\n\t{\r\n\t\tvar tokens = path.split(\"/\");\r\n\t\tvar current_token = 0;\r\n\t\tvar current_pos = 0;\r\n\t\tvar menu = this.menu;\r\n\r\n\t\twhile( menu )\r\n\t\t{\r\n\t\t\t//no more tokens, return last found menu\r\n\t\t\tif(current_token == tokens.length)\r\n\t\t\t\treturn menu;\r\n\r\n\t\t\t//this menu doesnt have more entries\r\n\t\t\tif(menu.length <= current_pos)\r\n\t\t\t\treturn null;\r\n\r\n\t\t\tif(tokens[ current_token ] == \"*\")\r\n\t\t\t\treturn menu[ current_pos ].children;\r\n\r\n\t\t\t//token found in this menu, get inside for next token\r\n\t\t\tif( tokens[ current_token ] == menu[ current_pos ].name )\r\n\t\t\t{\r\n\t\t\t\tif(current_token == tokens.length - 1) //last token\r\n\t\t\t\t{\r\n\t\t\t\t\treturn menu[ current_pos ];\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tmenu = menu[ current_pos ].children;\r\n\t\t\t\t\tcurrent_pos = 0;\r\n\t\t\t\t\tcurrent_token++;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//check next entry in this menu\r\n\t\t\tcurrent_pos++;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//update top main menu\r\n\tMenubar.prototype.updateMenu = function()\r\n\t{\r\n\t\tvar that = this;\r\n\r\n\t\tthis.content.innerHTML = \"\";\r\n\t\tfor(var i in this.menu)\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"li\");\r\n\t\t\telement.innerHTML = \"<span class='icon'></span><span class='name'>\" + this.menu[i].name + \"</span>\";\r\n\t\t\tthis.content.appendChild(element);\r\n\t\t\telement.data = this.menu[i];\r\n\t\t\tthis.menu[i].element = element;\r\n\r\n\t\t\t/* ON CLICK TOP MAIN MENU ITEM */\r\n\t\t\telement.addEventListener(\"click\", function(e) {\r\n\t\t\t\tvar item = this.data;\r\n\r\n\t\t\t\tif(item.data && item.data.callback && typeof(item.data.callback) == \"function\")\r\n\t\t\t\t\titem.data.callback(item.data);\r\n\r\n\t\t\t\tif(!that.is_open)\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.is_open = true;\r\n\t\t\t\t\tthat.showMenu( item, e, this );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.is_open = false;\r\n\t\t\t\t\tthat.hidePanels();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.addEventListener(\"mouseover\", function(e) {\r\n\t\t\t\tthat.hidePanels();\r\n\t\t\t\tif(that.is_open || that.auto_open)\r\n\t\t\t\t\tthat.showMenu( this.data, e, this );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tMenubar.prototype.hidePanels = function() {\r\n\t\tif(!this.panels.length)\r\n\t\t\treturn;\r\n\r\n\t\tfor(var i in this.panels)\r\n\t\t\tLiteGUI.remove(this.panels[i]);\r\n\t\tthis.panels = [];\r\n\t}\r\n\r\n\t//Create the panel with the drop menu\r\n\tMenubar.prototype.showMenu = function(menu, e, root, is_submenu) {\r\n\r\n\t\tif(!is_submenu)\r\n\t\t\tthis.hidePanels();\r\n\r\n\t\tif(!menu.children || !menu.children.length)\r\n\t\t\treturn;\r\n\r\n\t\tvar that = this;\r\n\t\tif(that.closing_by_leave)\r\n\t\t\tclearInterval(that.closing_by_leave);\r\n\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litemenubar-panel\";\r\n\r\n\t\tvar sorted_entries = [];\r\n\t\tfor(var i in menu.children)\r\n\t\t\tsorted_entries.push(menu.children[i]);\r\n\r\n\t\tif(this.sort_entries)\r\n\t\t\tsorted_entries.sort(function(a,b) {\r\n\t\t\t\tvar a_order = 10;\r\n\t\t\t\tvar b_order = 10;\r\n\t\t\t\tif(a && a.data && a.data.order != null) a_order = a.data.order;\r\n\t\t\t\tif(a && a.separator && a.order != null) a_order = a.order;\r\n\t\t\t\tif(b && b.data && b.data.order != null) b_order = b.data.order;\r\n\t\t\t\tif(b && b.separator && b.order != null) b_order = b.order;\r\n\t\t\t\treturn a_order - b_order;\r\n\t\t\t});\r\n\r\n\t\tfor(var i in sorted_entries)\r\n\t\t{\r\n\t\t\tvar item = document.createElement(\"p\");\r\n\t\t\tvar menu_item = sorted_entries[i];\r\n\r\n\t\t\titem.className = 'litemenu-entry ' + ( item.children ? \" submenu\" : \"\" );\r\n\t\t\tvar has_submenu = menu_item.children && menu_item.children.length;\r\n\r\n\t\t\tif(has_submenu)\r\n\t\t\t\titem.classList.add(\"has_submenu\");\r\n\r\n\t\t\tif(menu_item && menu_item.name)\r\n\t\t\t\titem.innerHTML = \"<span class='icon'></span><span class='name'>\" + menu_item.name + (has_submenu ? \"<span class='more'>+</span>\":\"\") + \"</span>\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\titem.classList.add(\"separator\");\r\n\t\t\t\t//item.innerHTML = \"<span class='separator'></span>\";\r\n\t\t\t}\r\n\r\n\t\t\titem.data = menu_item;\r\n\r\n\t\t\t//check if it has to show the item being 'checked'\r\n\t\t\tif( item.data.data )\r\n\t\t\t{\r\n\t\t\t\tvar data = item.data.data;\r\n\r\n\t\t\t\tvar checked = (data.type == \"checkbox\" && data.instance && data.property && data.instance[ data.property ] == true) || \r\n\t\t\t\t\tdata.checkbox == true ||\r\n\t\t\t\t\t(data.instance && data.property && data.hasOwnProperty(\"value\") && data.instance[data.property] == data.value) ||\r\n\t\t\t\t\t(typeof( data.isChecked ) == \"function\" && data.isChecked.call(data.instance, data) );\r\n\r\n\t\t\t\tif(checked)\r\n\t\t\t\t\titem.className += \" checked\";\r\n\r\n\t\t\t\tif(data.disabled)\r\n\t\t\t\t\titem.className += \" disabled\";\r\n\t\t\t}\r\n\r\n\t\t\t/* ON CLICK SUBMENU ITEM */\r\n\t\t\titem.addEventListener(\"click\",function(){\r\n\t\t\t\tvar item = this.data;\r\n\t\t\t\tif(item.data)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(item.data.disabled)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t//to change variables directly\r\n\t\t\t\t\tif(item.data.instance && item.data.property)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif( item.data.type == \"checkbox\" )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.data.instance[item.data.property] = !item.data.instance[item.data.property];\r\n\t\t\t\t\t\t\tif(\titem.data.instance[item.data.property] )\r\n\t\t\t\t\t\t\t\tthis.classList.add(\"checked\");\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tthis.classList.remove(\"checked\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if( item.data.hasOwnProperty(\"value\") )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\titem.data.instance[item.data.property] = item.data.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//to have a checkbox behaviour\r\n\t\t\t\t\tif(item.data.checkbox != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titem.data.checkbox = !item.data.checkbox;\r\n\t\t\t\t\t\tif(\titem.data.checkbox )\r\n\t\t\t\t\t\t\tthis.classList.add(\"checked\");\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthis.classList.remove(\"checked\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//execute a function\r\n\t\t\t\t\tif(item.data.callback && typeof(item.data.callback) == \"function\")\r\n\t\t\t\t\t\titem.data.callback(item.data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//more menus\r\n\t\t\t\tif(item.children && item.children.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.showMenu( item, e, this, true );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthat.is_open = false;\r\n\t\t\t\t\tthat.hidePanels();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\titem.addEventListener(\"mouseenter\",function(e){\r\n\t\t\t\t/*\r\n\t\t\t\tif( that.auto_open && this.classList.contains(\"has_submenu\") )\r\n\t\t\t\t\tLiteGUI.trigger( this, \"click\" );\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\r\n\t\t\telement.appendChild( item );\r\n\t\t}\r\n\r\n\t\telement.addEventListener(\"mouseleave\",function(e){\r\n\t\t\r\n\t\t\tif(that.closing_by_leave)\r\n\t\t\t\tclearInterval(that.closing_by_leave);\r\n\r\n\t\t\tthat.closing_by_leave = setTimeout( function() { \r\n\t\t\t\tthat.is_open = false;\r\n\t\t\t\tthat.hidePanels();\r\n\t\t\t},LiteGUI.Menubar.closing_time);\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"mouseenter\",function(e){\r\n\t\t\tif(that.closing_by_leave)\r\n\t\t\t\tclearInterval(that.closing_by_leave);\r\n\t\t\tthat.closing_by_leave = null;\r\n\t\t});\r\n\r\n\t\t//compute X and Y for menu\r\n\t\tvar box = root.getBoundingClientRect();\r\n\t\telement.style.left = box.left + ( is_submenu ? 200 : 0 ) + \"px\";\r\n\t\telement.style.top = box.top + box.height + ( is_submenu ? -20 : 10 ) + \"px\";\r\n\t\t/* animation, not working well, flickers\r\n\t\telement.style.opacity = \"0.1\";\r\n\t\telement.style.transform = \"translate(0,-10px)\";\r\n\t\telement.style.transition = \"all 0.2s\";\r\n\t\tsetTimeout( function(){ \r\n\t\t\telement.style.opacity = \"1\"; \r\n\t\t\telement.style.transform = \"translate(0,0)\";\r\n\t\t},1);\r\n\t\t*/\r\n\r\n\t\tthis.panels.push(element);\r\n\t\tdocument.body.appendChild( element );\r\n\t}\r\n\r\n\treturn LiteGUI.Menubar = Menubar;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Panel',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/****************** PANEL **************/\r\n\tfunction Panel(id, options)\r\n\t{\r\n\t\tthis._ctor(id,options);\r\n\t}\r\n\r\n\tPanel.title_height = \"20px\";\r\n\r\n\tPanel.prototype._ctor = function(id, options)\r\n\t{\r\n\t\tif(!options && id && id.constructor !== String)\r\n\t\t{\r\n\t\t\toptions = id;\r\n\t\t\tid = null;\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.content = options.content || \"\";\r\n\r\n\t\tvar root = this.root = document.createElement(\"div\");\r\n\t\tif(id)\r\n\t\t\troot.id = id;\r\n\r\n\t\troot.className = \"litepanel \" + (options.className || \"\");\r\n\t\troot.data = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(options.title)\r\n\t\t\tcode += \"<div class='panel-header'>\"+options.title+\"</div>\";\r\n\t\tcode += \"<div class='content'>\"+this.content+\"</div>\";\r\n\t\tcode += \"<div class='panel-footer'></div>\";\r\n\t\troot.innerHTML = code;\r\n\r\n\t\tif(options.title)\r\n\t\t\tthis.header = this.root.querySelector(\".panel-header\");\r\n\r\n\t\tthis.content = this.root.querySelector(\".content\");\r\n\t\tthis.footer = this.root.querySelector(\".panel-footer\");\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tif(options.position)\r\n\t\t{\r\n\t\t\tthis.root.style.position = \"absolute\";\r\n\t\t\tthis.root.style.left = LiteGUI.sizeToCSS( options.position[0] );\r\n\t\t\tthis.root.style.top = LiteGUI.sizeToCSS( options.position[1] );\r\n\t\t}\r\n\r\n\t\t//if(options.scroll == false)\tthis.content.style.overflow = \"hidden\";\r\n\t\tif(options.scroll == true)\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\t}\r\n\r\n\tPanel.prototype.add = function( litegui_item )\r\n\t{\r\n\t\tthis.content.appendChild( litegui_item.root );\r\n\t}\r\n\r\n\tPanel.prototype.clear = function()\r\n\t{\r\n\t\twhile (this.content.firstChild)\r\n\t\t\tthis.content.removeChild(this.content.firstChild);\r\n\t}\r\n\r\n\treturn LiteGUI.Panel = Panel;\r\n});\n//enclose in a scope\r\n\r\ndefine('skylark-litegui/Split',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\t/***************** SPLIT ******************/\r\n\r\n\t/**\r\n\t* Split \r\n\t*\r\n\t* @class Split\r\n\t* @constructor\r\n\t*/\r\n\tfunction Split( sections, options, legacy )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tif(sections && sections.constructor === String)\r\n\t\t{\r\n\t\t\tvar id = sections;\r\n\t\t\tsections = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Split legacy parameter, use sections as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\tthis.root = root;\r\n\t\tif(options.id)\r\n\t\t\troot.id = id;\r\n\t\troot.className = \"litesplit \" + (options.vertical ? \"vsplit\" : \"hsplit\");\r\n\t\tthis.sections = [];\r\n\r\n\t\tfor(var i in sections)\r\n\t\t{\r\n\t\t\tvar section = document.createElement(\"div\");\r\n\r\n\t\t\tsection.className = \"split-section split\" + i;\r\n\t\t\tif(typeof(sections[i]) == \"number\")\r\n\t\t\t{\r\n\t\t\t\tif(options.vertical)\r\n\t\t\t\t\tsection.style.height = sections[i].toFixed(1) + \"%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.style.width = sections[i].toFixed(1) + \"%\";\r\n\t\t\t}\r\n\t\t\telse if(typeof(sections[i]) == \"string\")\r\n\t\t\t{\r\n\t\t\t\tif(options.vertical)\r\n\t\t\t\t\tsection.style.height = sections[i];\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.style.width = sections[i];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(sections[i].id) section.id = sections[i].id;\r\n\t\t\t\tif(options.vertical)\r\n\t\t\t\t\tsection.style.height = (typeof(sections[i].height) == \"Number\" ? sections[i].height.toFixed(1) + \"%\" : sections[i].height);\r\n\t\t\t\telse\r\n\t\t\t\t\tsection.style.width = (typeof(sections[i].width) == \"Number\" ? sections[i].width.toFixed(1) + \"%\" : sections[i].width);\r\n\t\t\t}\r\n\r\n\t\t\tsection.add = function(element) {\r\n\t\t\t\tthis.appendChild( element.root || element );\r\n\t\t\t}\r\n\r\n\t\t\tthis.sections.push(section);\r\n\t\t\troot.appendChild(section);\r\n\t\t}\r\n\r\n\t\tif(options.parent)\r\n\t\t{\r\n\t\t\tif(options.parent.root)\r\n\t\t\t\toptions.parent.root.appendChild(root);\r\n\t\t\telse\r\n\t\t\t\toptions.parent.appendChild(root);\r\n\t\t}\r\n\r\n\t\tthis.getSection = function(n)\r\n\t\t{\r\n\t\t\treturn this.sections[n];\r\n\t\t}\r\n\t}\r\n\r\n\treturn LiteGUI.Split = Split;\r\n\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Table',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\tfunction Table( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"table\");\r\n\t\tthis.root.classList.add(\"litetable\");\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.column_fields = [];\r\n\t\tthis.rows = [];\r\n\t\tthis.data = [];\r\n\r\n\t\tthis._must_update_header = true;\r\n\r\n\t\tif(options.colums)\r\n\t\t\tthis.setColumns(options.colums);\r\n\r\n\t\tif(options.scrollable)\r\n\t\t\tthis.root.style.overflow = \"auto\";\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\r\n\t\tif(options.columns)\r\n\t\t\tthis.setColumns( options.columns );\r\n\r\n\t\tif(options.rows)\r\n\t\t\tthis.setRows( options.data );\r\n\t}\r\n\r\n\tTable.prototype.setRows = function( data, reuse )\r\n\t{\r\n\t\tthis.data = data;\r\n\t\tthis.updateContent( reuse );\r\n\t}\r\n\r\n\tTable.prototype.addRow = function( row, skip_add )\r\n\t{\r\n\t\tvar tr = document.createElement(\"tr\");\r\n\r\n\t\t//create cells\r\n\t\tfor(var j = 0; j < this.column_fields.length; ++j)\r\n\t\t{\r\n\t\t\tvar td = document.createElement(\"td\");\r\n\r\n\t\t\tvar value = null;\r\n\r\n\t\t\tif(row.constructor === Array )\r\n\t\t\t\tvalue = row[ j ];\r\n\t\t\telse //object\r\n\t\t\t\tvalue = row[ this.column_fields[j] ];\r\n\t\t\tif(value === undefined)\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\ttd.innerHTML = value;\r\n\r\n\t\t\tvar column = this.columns[j];\r\n\t\t\tif(column === undefined)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tif(column.className)\r\n\t\t\t\ttd.className = column.className;\r\n\t\t\tif(column.width)\r\n\t\t\t\ttd.style.width = column.width;\r\n\t\t\ttr.appendChild( td );\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild( tr );\r\n\t\tthis.rows.push( tr );\r\n\t\tif(!skip_add)\r\n\t\t\tthis.data.push( row );\r\n\r\n\t\treturn tr;\r\n\t}\r\n\r\n\tTable.prototype.updateRow = function( index, row )\r\n\t{\r\n\t\tthis.data[ index ] = row;\r\n\r\n\t\tvar tr = this.rows[index];\r\n\t\tif(!tr)\r\n\t\t\treturn;\r\n\r\n\t\tvar cells = tr.querySelectorAll(\"td\");\r\n\t\tfor(var j = 0; j < cells.length; ++j)\r\n\t\t{\r\n\t\t\tvar column = this.columns[j];\r\n\r\n\t\t\tvar value = null;\r\n\r\n\t\t\tif(row.constructor === Array )\r\n\t\t\t\tvalue = row[ j ];\r\n\t\t\telse\r\n\t\t\t\tvalue = row[ column.field ];\r\n\r\n\t\t\tif(value === undefined)\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tcells[j].innerHTML = value;\r\n\t\t}\r\n\t\treturn tr;\r\n\t}\r\n\r\n\tTable.prototype.updateCell = function( row, cell, data )\r\n\t{\r\n\t\tvar tr = this.rows[ row ];\r\n\t\tif(!tr)\r\n\t\t\treturn;\r\n\t\tvar cell = tr.childNodes[cell];\r\n\t\tif(!cell)\r\n\t\t\treturn;\r\n\t\tcell.innerHTML = data;\r\n\t\treturn cell;\r\n\t}\r\n\r\n\r\n\tTable.prototype.setColumns = function( columns )\r\n\t{\r\n\t\tthis.columns.length = 0;\r\n\t\tthis.column_fields.length = 0;\r\n\r\n\t\tvar avg_width = ((Math.floor(100 / columns.length)).toFixed(1)) + \"%\";\r\n\r\n\t\tvar rest = [];\r\n\r\n\t\tfor(var i = 0; i < columns.length; ++i)\r\n\t\t{\r\n\t\t\tvar c = columns[i];\r\n\r\n\t\t\tif( c === null || c === undefined )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t//allow to pass just strings or numbers instead of objects\r\n\t\t\tif( c.constructor === String || c.constructor === Number )\r\n\t\t\t\tc = { name: String(c) };\r\n\r\n\t\t\tvar column = {\r\n\t\t\t\tname: c.name || \"\",\r\n\t\t\t\twidth: LiteGUI.sizeToCSS(c.width || avg_width),\r\n\t\t\t\tfield: (c.field || c.name || \"\").toLowerCase(),\r\n\t\t\t\tclassName: c.className\r\n\t\t\t};\r\n\r\n\t\t\t//last\r\n\t\t\tif(i == columns.length - 1)\r\n\t\t\t\tcolumn.width = \" calc( 100% - ( \" + rest.join(\" + \") + \" ) )\";\r\n\t\t\telse\r\n\t\t\t\trest.push( column.width );\r\n\r\n\t\t\tthis.columns.push( column );\r\n\t\t\tthis.column_fields.push( column.field );\r\n\t\t}\r\n\r\n\t\tthis._must_update_header = true;\r\n\t\tthis.updateContent();\r\n\t}\r\n\r\n\tTable.prototype.updateContent = function( reuse )\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\r\n\t\t//update header\r\n\t\tif(this._must_update_header)\r\n\t\t{\r\n\t\t\tthis.header = document.createElement(\"tr\");\r\n\t\t\tfor(var i = 0; i < this.columns.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar column = this.columns[i];\r\n\t\t\t\tvar th = document.createElement(\"th\");\r\n\t\t\t\tth.innerHTML = column.name;\r\n\t\t\t\tif(column.width)\r\n\t\t\t\t\tth.style.width = column.width;\r\n\t\t\t\tcolumn.th = th;\r\n\t\t\t\tthis.header.appendChild( th );\r\n\t\t\t}\r\n\t\t\tthis._must_update_header = false;\r\n\t\t}\r\n\t\tthis.root.appendChild( this.header );\r\n\r\n\t\tif(!this.data)\r\n\t\t\treturn;\r\n\r\n\t\tif(this.data.length != this.rows.length)\r\n\t\t\treuse = false;\r\n\r\n\t\tif(reuse)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < this.rows.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar data_row = this.data[i];\r\n\t\t\t\tvar tr = this.updateRow( i, data_row );\r\n\t\t\t\tthis.root.appendChild( tr );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.rows.length = 0;\r\n\r\n\t\t\t//create rows\r\n\t\t\tfor(var i = 0; i < this.data.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar row = this.data[i];\r\n\t\t\t\tthis.addRow( row, true );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\treturn LiteGUI.Table = Table;\r\n\r\n\r\n});\n/**************  ***************************/\r\ndefine('skylark-litegui/Tabs',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\r\n\t/**\r\n\t* Widget that contains several tabs and their content\r\n\t* Options:\r\n\t* - mode: \"vertical\",\"horizontal\"\r\n\t* - size\r\n\t* - width,height\r\n\t* - autoswitch: allow autoswitch (switch when mouse over)\r\n\t* @class Tabs\r\n\t* @constructor\r\n\t*/\r\n\tfunction Tabs( options, legacy )\r\n\t{\r\n\t\tif( legacy || (options && options.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Tabs legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tthis.options = options;\r\n\r\n\t\tvar mode = this.mode = options.mode || \"horizontal\";\r\n\r\n\t\tvar root = document.createElement(\"DIV\");\r\n\t\tif(options.id) \r\n\t\t\troot.id = options.id;\r\n\t\troot.data = this;\r\n\t\troot.className = \"litetabs \" + mode;\r\n\t\tthis.root = root;\r\n\t\tthis.root.tabs = this;\r\n\r\n\t\tthis.current_tab = null; //current tab array [id, tab, content]\r\n\r\n\t\tif(mode == \"horizontal\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t\tthis.root.style.height = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.root.style.height = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(mode == \"vertical\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t\tthis.root.style.width = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.root.style.width = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = options.width.constructor === Number ? options.width.toFixed(0) + \"px\" : options.width;\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = options.height.constructor === Number ? options.height.toFixed(0) + \"px\" : options.height;\r\n\r\n\t\t//container of tab elements\r\n\t\tvar list = document.createElement(\"UL\");\r\n\t\tlist.className = \"wtabcontainer\";\r\n\t\tif(mode == \"vertical\")\r\n\t\t\tlist.style.width = LiteGUI.Tabs.tabs_width + \"px\";\r\n\t\telse\r\n\t\t\tlist.style.height = LiteGUI.Tabs.tabs_height + \"px\";\r\n\r\n\t\t//allows to use the wheel to see hidden tabs\r\n\t\tlist.addEventListener(\"wheel\", onMouseWheel);\r\n\t\tlist.addEventListener(\"mousewheel\", onMouseWheel);\r\n\t\tfunction onMouseWheel(e){\r\n\t\t\tif(e.deltaY)\r\n\t\t\t\tlist.scrollLeft += e.deltaY;\r\n\t\t}\r\n\r\n\t\tthis.list = list;\r\n\t\tthis.root.appendChild(this.list);\r\n\t\tthis.tabs_root = list;\r\n\r\n\t\tthis.tabs = {};\r\n\t\tthis.tabs_by_index = [];\r\n\t\tthis.selected = null;\r\n\r\n\t\tthis.onchange = options.callback;\r\n\r\n\t\tif(options.parent)\r\n\t\t\tthis.appendTo(options.parent);\r\n\t}\r\n\r\n\tTabs.tabs_width = 64;\r\n\tTabs.tabs_height = 26;\r\n\r\n\tTabs.prototype.show = function()\r\n\t{\r\n\t\tthis.root.style.display = \"block\";\r\n\t}\r\n\r\n\tTabs.prototype.hide = function()\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Returns the currently selected tab in the form of a tab object\r\n\t* @method getCurrentTab\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getCurrentTab = function()\r\n\t{\r\n\t\tif(!this.current_tab)\r\n\t\t\treturn null;\r\n\t\treturn this.tabs[ this.current_tab[0] ];\r\n\t}\r\n\r\n\tTabs.prototype.getCurrentTabId = function()\r\n\t{\r\n\t\treturn this.current_tab[0];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the last tab pressed before this one. used to know from which tab we come\r\n\t* @method getCurrentTab\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getPreviousTab = function()\r\n\t{\r\n\t\tif(!this.previous_tab)\r\n\t\t\treturn null;\r\n\t\treturn this.tabs[ this.previous_tab[0] ];\r\n\t}\r\n\r\n\tTabs.prototype.appendTo = function(parent, at_front)\r\n\t{\r\n\t\tif(at_front)\r\n\t\t\tparent.prepend(this.root);\r\n\t\telse\r\n\t\t\tparent.appendChild(this.root);\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a tab given its id\r\n\t* @method getTab\r\n\t* @param {String} id tab id\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getTab = function(id)\r\n\t{\r\n\t\treturn this.tabs[id];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a tab given its index in the tabs list\r\n\t* @method getTabByIndex\r\n\t* @param {Number} index\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getTabByIndex = function(index)\r\n\t{\r\n\t\treturn this.tabs_by_index[index];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns how many tabs there is\r\n\t* @method getNumOfTabs\r\n\t* @return {number} number of tabs\r\n\t*/\r\n\tTabs.prototype.getNumOfTabs = function()\r\n\t{\r\n\t\tvar num = 0;\r\n\t\tfor(var i in this.tabs)\r\n\t\t\tnum++;\r\n\t\treturn num;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the content HTML element of a tab\r\n\t* @method getTabContent\r\n\t* @param {String} id\r\n\t* @return {HTMLEntity} content\r\n\t*/\r\n\tTabs.prototype.getTabContent = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(tab)\r\n\t\t\treturn tab.content;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the index of a tab (the position in the tabs list)\r\n\t* @method getTabIndex\r\n\t* @param {String} id\r\n\t* @return {number} index\r\n\t*/\r\n\tTabs.prototype.getTabIndex = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn -1;\r\n\t\tfor(var i = 0; i < this.list.childNodes.length; i++)\r\n\t\t\tif( this.list.childNodes[i] == tab.tab )\r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Create a new tab, where id is a unique identifier\r\n\t* @method addTab\r\n\t* @param {String} id could be null then a random id is generated\r\n\t* @param {Object} options { \r\n\t*\ttitle: tab text, \r\n\t*\tcallback: called when selected, \r\n\t*\tcallback_leave: callback when leaving, \r\n\t*   callback_context: on right click on tab\r\n\t*   callback_canopen: used to block if this tab can be opened or not (if it returns true then yes)\r\n\t*\tcontent: HTML content, \r\n\t*   closable: if it can be closed (callback is onclose), \r\n\t*\ttab_width: size of the tab,\r\n\t*\ttab_className: classes for the tab element,\r\n\t*\tid: content id,\r\n\t*\tsize: full means all,\r\n\t*\tmode: \"vertical\" or \"horizontal\",\r\n\t*\tbutton: if it is a button tab, not a selectable tab\r\n\t*\t}\r\n\t* @param {bool} skip_event prevent dispatching events\r\n\t* @return {Object} an object containing { id, tab, content }\r\n\t*/\r\n\tTabs.prototype.addTab = function( id, options, skip_event )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tif(typeof(options) == \"function\")\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tif(id === undefined || id === null)\r\n\t\t\tid = \"rand_\" + ((Math.random() * 1000000)|0);\r\n\r\n\t\t//the tab element\r\n\t\tvar element = document.createElement(\"LI\");\r\n\t\tvar safe_id = id.replace(/ /gi,\"_\");\r\n\t\telement.className = \"wtab wtab-\" + safe_id + \" \";\r\n\t\t//if(options.selected) element.className += \" selected\";\r\n\t\telement.dataset[\"id\"] = id;\r\n\t\telement.innerHTML = \"<span class='tabtitle'>\" + (options.title || id) + \"</span>\";\r\n\r\n\t\tif(options.button)\r\n\t\t\telement.className += \"button \";\r\n\t\tif(options.tab_className)\r\n\t\t\telement.className += options.tab_className;\r\n\t\tif(options.bigicon)\r\n\t\t\telement.innerHTML = \"<img class='tabbigicon' src='\" + options.bigicon+\"'/>\" + element.innerHTML;\r\n\t\tif(options.closable)\r\n\t\t{\r\n\t\t\telement.innerHTML += \"<span class='tabclose'>\" + LiteGUI.special_codes.close + \"</span>\";\r\n\t\t\telement.querySelector(\"span.tabclose\").addEventListener(\"click\", function(e) { \r\n\t\t\t\tthat.removeTab(id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t},true);\r\n\t\t}\r\n\t\t//WARNING: do not modify element.innerHTML or events will be lost\r\n\r\n\t\tif( options.index !== undefined )\r\n\t\t{\r\n\t\t\tvar after = this.list.childNodes[options.index];\r\n\t\t\tif(after)\r\n\t\t\t\tthis.list.insertBefore(element,after);\r\n\t\t\telse\r\n\t\t\t\tthis.list.appendChild(element);\r\n\t\t}\r\n\t\telse if( this.plus_tab )\r\n\t\t\tthis.list.insertBefore( element, this.plus_tab );\r\n\t\telse\r\n\t\t\tthis.list.appendChild(element);\r\n\r\n\t\tif(options.tab_width)\r\n\t\t{\r\n\t\t\telement.style.width = options.tab_width.constructor === Number ? ( options.tab_width.toFixed(0) + \"px\" ) : options.tab_width;\r\n\t\t\telement.style.minWidth = \"0\";\r\n\t\t}\r\n\r\n\t\tif(this.options.autoswitch)\r\n\t\t{\r\n\t\t\telement.classList.add(\"autoswitch\");\r\n\t\t\telement.addEventListener(\"dragenter\",function(e){\r\n\t\t\t\t//console.log(\"Enter\",this.dataset[\"id\"]);\r\n\t\t\t\tif(that._timeout_mouseover)\r\n\t\t\t\t\tclearTimeout(that._timeout_mouseover);\r\n\t\t\t\tthat._timeout_mouseover = setTimeout((function(){\r\n\t\t\t\t\tLiteGUI.trigger(this,\"click\");\r\n\t\t\t\t\tthat._timeout_mouseover = null;\r\n\t\t\t\t}).bind(this),500);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\telement.addEventListener(\"dragleave\",function(e){\r\n\t\t\t\t//console.log(\"Leave\",this.dataset[\"id\"]);\r\n\t\t\t\tif(that._timeout_mouseover)\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(that._timeout_mouseover);\r\n\t\t\t\t\tthat._timeout_mouseover = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t//the content of the tab\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif(options.id)\r\n\t\t\tcontent.id = options.id;\r\n\r\n\t\tcontent.className = \"wtabcontent \" + \"wtabcontent-\" + safe_id + \" \" + (options.className || \"\");\r\n\t\tcontent.dataset[\"id\"] = id;\r\n\t\tcontent.style.display = \"none\";\r\n\r\n\t\t//adapt height\r\n\t\tif(this.mode == \"horizontal\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent.style.width = \"100%\";\r\n\t\t\t\t\tcontent.style.height = \"calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.height = \"-moz-calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.height = \"-webkit-calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\t//content.style.height = \"-webkit-calc( 90% )\"; //minus title\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent.style.height = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.mode == \"vertical\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent.style.height = \"100%\";\r\n\t\t\t\t\tcontent.style.width = \"calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.width = \"-moz-calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.width = \"-webkit-calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\t//content.style.height = \"-webkit-calc( 90% )\"; //minus title\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent.style.width = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//overwrite\r\n\t\tif(options.width !== undefined )\r\n\t\t\tcontent.style.width = typeof(options.width) === \"string\" ? options.width : options.width + \"px\";\r\n\t\tif(options.height !== undefined )\r\n\t\t\tcontent.style.height = typeof(options.height) === \"string\" ? options.height : options.height + \"px\";\r\n\r\n\t\t//add content\r\n\t\tif(options.content)\r\n\t\t{\r\n\t\t\tif (typeof(options.content) == \"string\")\r\n\t\t\t\tcontent.innerHTML = options.content;\r\n\t\t\telse\r\n\t\t\t\tcontent.appendChild(options.content);\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild(content);\r\n\r\n\t\t//when clicked\r\n\t\tif(!options.button)\r\n\t\t\telement.addEventListener(\"click\", Tabs.prototype.onTabClicked );\r\n\t\telse\r\n\t\t\telement.addEventListener(\"click\", function(e){ \r\n\t\t\t\tvar tab_id = this.dataset[\"id\"];\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback( tab_id, e );\r\n\t\t\t});\r\n\r\n\t\telement.options = options;\r\n\t\telement.tabs = this;\r\n\r\n\t\tvar title = element.querySelector(\"span.tabtitle\");\r\n\r\n\t\t//tab object\r\n\t\tvar tab_info = {\r\n\t\t\tid: id,\r\n\t\t\ttab: element,\r\n\t\t\tcontent: content,\r\n\t\t\ttitle: title,\r\n\t\t\tadd: function(v) { this.content.appendChild(v.root || v); },\r\n\t\t\tsetTitle: function( title )\t{ this.title.innerHTML = title; },\r\n\t\t\tclick: function(){ LiteGUI.trigger( this.tab, \"click\" ); },\r\n\t\t\tdestroy: function(){ that.removeTab(this.id) }\r\n\t\t};\r\n\r\n\t\tif(options.onclose)\r\n\t\t\ttab_info.onclose = options.onclose;\r\n\t\tthis.tabs[ id ] = tab_info;\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\r\n\t\t//context menu\r\n\t\telement.addEventListener(\"contextmenu\", (function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\t\t\te.preventDefault(); \r\n\t\t\tif(options.callback_context)\r\n\t\t\t\toptions.callback_context.call(tab_info);\r\n\t\t\treturn false;\r\n\t\t}).bind(this));\r\n\r\n\t\tif ( options.selected == true || this.selected == null )\r\n\t\t\tthis.selectTab( id, options.skip_callbacks );\r\n\r\n\t\treturn tab_info;\r\n\t}\r\n\r\n\tTabs.prototype.addPlusTab = function( callback )\r\n\t{\r\n\t\tif(this.plus_tab)\r\n\t\t\tconsole.warn(\"There is already a plus tab created in this tab widget\");\r\n\t\tthis.plus_tab = this.addTab( \"plus_tab\", { title: \"+\", tab_width: 20, button: true, callback: callback, skip_callbacks: true });\r\n\t}\r\n\r\n\tTabs.prototype.addButtonTab = function( id, title, callback )\r\n\t{\r\n\t\treturn this.addTab( id, { title: title, tab_width: 20, button: true, callback: callback, skip_callbacks: true });\r\n\t}\r\n\r\n\t//this is tab\r\n\tTabs.prototype.onTabClicked = function(e)\r\n\t{\r\n\t\t//skip if already selected\r\n\t\tif( this.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\tif(!this.parentNode)\r\n\t\t\treturn; //this could happend if it gets removed while being clicked (not common)\r\n\r\n\t\tvar options = this.options;\r\n\t\tvar tabs = this.parentNode.parentNode.tabs;\r\n\t\tif(!tabs)\r\n\t\t\tthrow(\"tabs not found\");\r\n\t\tvar that = tabs;\r\n\r\n\t\t//check if this tab is available\r\n\t\tif(options.callback_canopen && options.callback_canopen() == false)\r\n\t\t\treturn;\r\n\r\n\t\t//launch leaving current tab event\r\n\t\tif( that.current_tab && \r\n\t\t\tthat.current_tab[0] != tab_id && \r\n\t\t\tthat.current_tab[2] && \r\n\t\t\tthat.current_tab[2].callback_leave)\r\n\t\t\t\tthat.current_tab[2].callback_leave( that.current_tab[0], that.current_tab[1], that.current_tab[2] );\r\n\r\n\t\tvar tab_id = this.dataset[\"id\"];\r\n\t\tvar tab_content = null;\r\n\r\n\t\t//iterate tab labels\r\n\t\tfor(var i in that.tabs)\r\n\t\t{\r\n\t\t\tvar tab_info = that.tabs[i];\r\n\t\t\tif( i == tab_id )\r\n\t\t\t{\r\n\t\t\t\ttab_info.selected = true;\r\n\t\t\t\ttab_info.content.style.display = \"\";\r\n\t\t\t\ttab_content = tab_info.content;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdelete tab_info.selected;\r\n\t\t\t\ttab_info.content.style.display = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar list = that.list.querySelectorAll(\"li.wtab\");\r\n\t\tfor(var i = 0; i < list.length; ++i)\r\n\t\t\tlist[i].classList.remove(\"selected\");\r\n\t\tthis.classList.add(\"selected\");\r\n\r\n\t\t//change tab\r\n\t\tthat.previous_tab = that.current_tab;\r\n\t\tthat.current_tab = [tab_id, tab_content, options];\r\n\r\n\t\tif(e) //user clicked\r\n\t\t{\r\n\t\t\t//launch callback\r\n\t\t\tif(options.callback) \r\n\t\t\t\toptions.callback(tab_id, tab_content,e);\r\n\r\n\t\t\tLiteGUI.trigger(that,\"wchange\",[tab_id, tab_content]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange( tab_id, tab_content );\r\n\t\t}\r\n\r\n\t\t//change afterwards in case the user wants to know the previous one\r\n\t\tthat.selected = tab_id;\r\n\t}\r\n\r\n\tTabs.prototype.selectTab = function( id, skip_events )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\r\n\t\tif( id.constructor != String )\r\n\t\t\tid = id.id; //in case id is the object referencing the tab\r\n\r\n\t\tvar tabs = this.list.querySelectorAll(\"li.wtab\");\r\n\t\tfor(var i = 0; i < tabs.length; i++)\r\n\t\t\tif( id == tabs[i].dataset[\"id\"] )\r\n\t\t\t{\r\n\t\t\t\tthis.onTabClicked.call( tabs[i], !skip_events );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t}\r\n\r\n\tTabs.prototype.setTabVisibility = function(id, v)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\ttab.tab.style.display = v ? \"none\" : null;\r\n\t\ttab.content.style.display = v ? \"none\" : null;\r\n\t}\r\n\r\n\tTabs.prototype.recomputeTabsByIndex = function()\r\n\t{\r\n\t\tthis.tabs_by_index = [];\r\n\r\n\t\tfor(var i in this.tabs)\r\n\t\t{\r\n\t\t\tvar tab = this.tabs[i];\r\n\r\n\t\t\t//compute index\r\n\t\t\tvar index = 0;\r\n\t\t\tvar child = tab.tab;\r\n\t\t\twhile( (child = child.previousSibling) != null ) \r\n\t\t\t\tindex++;\r\n\r\n\t\t\tthis.tabs_by_index[index] = tab;\r\n\t\t}\r\n\t}\r\n\r\n\tTabs.prototype.removeTab = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t{\r\n\t\t\tconsole.warn( \"tab not found: \" + id );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(tab.onclose)\r\n\t\t\ttab.onclose(tab);\r\n\r\n\t\tif(tab.tab.parentNode)\r\n\t\t\ttab.tab.parentNode.removeChild( tab.tab );\r\n\t\tif(tab.content.parentNode)\r\n\t\t\ttab.content.parentNode.removeChild( tab.content );\r\n\t\tdelete this.tabs[id];\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\t}\r\n\r\n\tTabs.prototype.removeAllTabs = function( keep_plus )\r\n\t{\r\n\t\tvar tabs = [];\r\n\t\tfor(var i in this.tabs)\r\n\t\t\ttabs.push( this.tabs[i] );\r\n\r\n\t\tfor(var i in tabs)\r\n\t\t{\r\n\t\t\tvar tab = tabs[i];\r\n\t\t\tif(tab == this.plus_tab && keep_plus)\r\n\t\t\t\tcontinue;\r\n\t\t\tif(tab.tab.parentNode)\r\n\t\t\t\ttab.tab.parentNode.removeChild( tab.tab );\r\n\t\t\tif(tab.content.parentNode)\r\n\t\t\t\ttab.content.parentNode.removeChild( tab.content );\r\n\t\t\tdelete this.tabs[ tab.id ];\r\n\t\t}\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\t}\r\n\r\n\tTabs.prototype.clear = function()\r\n\t{\r\n\t\tthis.removeAllTabs();\r\n\t}\r\n\r\n\tTabs.prototype.hideTab = function(id)\r\n\t{\r\n\t\tthis.setTabVisibility(id, false);\r\n\t}\r\n\r\n\tTabs.prototype.showTab = function(id)\r\n\t{\r\n\t\tthis.setTabVisibility(id, true);\r\n\t}\r\n\r\n\tTabs.prototype.transferTab = function(id, target_tabs, index)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\ttarget_tabs.tabs[id] = tab;\r\n\r\n\t\tif(index !== undefined)\r\n\t\t\ttarget_tabs.list.insertBefore(tab.tab, target_tabs.list.childNodes[index]);\r\n\t\telse\r\n\t\t\ttarget_tabs.list.appendChild(tab.tab);\r\n\t\ttarget_tabs.root.appendChild(tab.content);\r\n\t\tdelete this.tabs[id];\r\n\r\n\t\tvar newtab = null;\r\n\t\tfor(var i in this.tabs)\r\n\t\t{\r\n\t\t\tnewtab = i;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(newtab)\r\n\t\t\tthis.selectTab(newtab);\r\n\r\n\t\ttab.tab.classList.remove(\"selected\");\r\n\t\ttarget_tabs.selectTab(id);\r\n\t}\r\n\r\n\tTabs.prototype.detachTab = function(id, on_complete, on_close )\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\tvar index = this.getTabIndex( id );\r\n\r\n\t\t//create window\r\n\t\tvar w = 800;\r\n\t\tvar h = 600;\r\n\t\tvar tab_window = window.open(\"\",\"\",\"width=\"+w+\", height=\"+h+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\ttab_window.document.write( \"<head><title>\"+id+\"</title>\" );\r\n\r\n\t\t//transfer style\r\n\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\ttab_window.document.write( styles[i].outerHTML );\r\n\t\ttab_window.document.write( \"</head><body></body>\" );\r\n\t\ttab_window.document.close();\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t//transfer content after a while so the window is propertly created\r\n\t\tvar newtabs = new LiteGUI.Tabs(null, this.options );\r\n\t\ttab_window.tabs = newtabs;\r\n\r\n\t\t//closing event\r\n\t\ttab_window.onbeforeunload = function(){\r\n\t\t\tnewtabs.transferTab( id, that, index);\r\n\t\t\tif(on_close)\r\n\t\t\t\ton_close();\r\n\t\t}\r\n\r\n\t\t//move the content there\r\n\t\tnewtabs.list.style.height = \"20px\";\r\n\t\ttab_window.document.body.appendChild(newtabs.root);\r\n\t\tthat.transferTab(id, newtabs);\r\n\t\tnewtabs.tabs[id].tab.classList.add(\"selected\");\r\n\t\tthis.recomputeTabsByIndex();\r\n\r\n\t\tif(on_complete)\r\n\t\t\ton_complete();\r\n\r\n\t\treturn tab_window;\r\n\t}\r\n\r\n\r\n\treturn LiteGUI.Tabs = Tabs;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/Tree',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\r\n/**\r\n* To create interactive trees (useful for folders or hierarchies).<br>\r\n* Options are:<br>\r\n*\t+ allow_multiselection: allow to select multiple elements using the shift key<br>\r\n*\t+ allow_rename: double click to rename items in the tree<br>\r\n*\t+ allow_drag: drag elements around<br>\r\n*\t+ height<br>\r\n* Item data should be in the next format:<br>\r\n* {<br>\r\n*    id: unique_identifier,<br>\r\n*    content: what to show in the HTML (if omited id will be shown)<br>\r\n*\t children: []  array with another object with the same structure<br>\r\n*\t className: class<br>\r\n*    precontent: HTML inserted before the content<br>\r\n*\t visible: boolean, to hide it<br>\r\n*\t dataset: dataset for the element<br>\r\n*\t onDragData: callback in case the user drags this item somewhere else<br>\r\n* }<br>\r\n* To catch events use tree.root.addEventListener(...)<br>\r\n* item_selected : receive { item: node, data: node.data }<br>\r\n* item_dblclicked<br>\r\n* item_renamed<br>\r\n* item_moved<br>\r\n*\r\n* @class Tree\r\n* @constructor\r\n*/\r\n\r\n\t/*********** LiteTree *****************************/\r\n\tfunction Tree( data, options, legacy )\r\n\t{\r\n\t\tif(legacy || (data && data.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = data;\r\n\t\t\tdata = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Tree legacy parameter, use data as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\tthis.root = root;\r\n\t\tif(options.id)\r\n\t\t\troot.id = options.id;\r\n\r\n\t\troot.className = \"litetree\";\r\n\t\tthis.tree = data;\r\n\t\tvar that = this;\r\n\t\toptions = options || {allow_rename: false, allow_drag: true, allow_multiselection: false};\r\n\t\tthis.options = options;\r\n\t\tthis.indent_offset = options.indent_offset || 0;\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = typeof(options.height) == \"string\" ? options.height : Math.round(options.height) + \"px\";\r\n\r\n        this.collapsed_depth = 3;\r\n        if(options.collapsed_depth != null)\r\n            this.collapsed_depth = options.collapsed_depth;\r\n\r\n\t\t//bg click\r\n\t\troot.addEventListener(\"click\", function(e){\r\n\t\t\tif(e.srcElement != that.root)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(that.onBackgroundClicked)\r\n\t\t\t\tthat.onBackgroundClicked(e,that);\r\n\t\t});\r\n\r\n\t\t//bg click right mouse\r\n\t\troot.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tif(that.onContextMenu) \r\n\t\t\t\tthat.onContextMenu(e);\r\n\t\t\te.preventDefault(); \r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\t\tvar root_item = this.createAndInsert(data, options, null);\r\n\t\tif(!root_item)\r\n\t\t\tthrow(\"Error in LiteGUI.Tree, createAndInsert returned null\");\r\n\t\troot_item.className += \" root_item\";\r\n\t\t//this.root.appendChild(root_item);\r\n\t\tthis.root_item = root_item;\r\n\t}\r\n\r\n\tTree.INDENT = 20;\r\n\r\n\r\n\t/**\r\n\t* update tree with new data (old data will be thrown away)\r\n\t* @method updateTree\r\n\t* @param {object} data\r\n\t*/\r\n\tTree.prototype.updateTree = function( data )\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\t\tvar root_item = this.createAndInsert( data, this.options, null );\r\n\t\tif(root_item)\r\n\t\t{\r\n\t\t\troot_item.className += \" root_item\";\r\n\t\t\tthis.root_item = root_item;\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.root_item = null;\r\n\t}\r\n\r\n\t/**\r\n\t* update tree with new data (old data will be thrown away)\r\n\t* @method insertItem\r\n\t* @param {object} data\r\n\t* @param {string} parent_id\r\n\t* @param {number} position index in case you want to add it before the last position\r\n\t* @param {object} options\r\n\t* @return {DIVElement}\r\n\t*/\r\n\tTree.prototype.insertItem = function( data, parent_id, position, options)\r\n\t{\r\n\t\tif(!parent_id)\r\n\t\t{\r\n\t\t\tvar root = this.root.childNodes[0];\r\n\t\t\tif(root)\r\n\t\t\t\tparent_id = root.dataset[\"item_id\"];\r\n\t\t}\r\n\r\n\t\tvar element = this.createAndInsert( data, options, parent_id, position );\r\n\r\n\t\t//update parent collapse button\r\n\t\tif(parent_id)\r\n\t\t\tthis._updateListBox( this._findElement(parent_id) ); //no options here, this is the parent\r\n\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tTree.prototype.createAndInsert = function( data, options, parent_id, element_index )\r\n\t{\r\n\t\t//find parent\r\n\t\tvar parent_element_index = -1;\r\n\t\tif(parent_id)\r\n\t\t\tparent_element_index = this._findElementIndex( parent_id );\r\n\t\telse if(parent_id === undefined)\r\n\t\t\tparent_element_index = 0; //root\r\n\r\n\t\tvar parent = null;\r\n\t\tvar child_level = 0;\r\n\r\n\t\t//find level\r\n\t\tif(parent_element_index != -1)\r\n\t\t{\r\n\t\t\tparent = this.root.childNodes[ parent_element_index ];\r\n\t\t\tchild_level = parseInt( parent.dataset[\"level\"] ) + 1;\r\n\t\t}\r\n\r\n\t\t//create\r\n\t\tvar element = this.createTreeItem( data, options, child_level );\r\n\t\tif(!element) //error creating element\r\n\t\t\treturn;\r\n\r\n\t\telement.parent_id = parent_id;\r\n\r\n\t\t//check\r\n\t\tvar existing_item = this.getItem( element.dataset[\"item_id\"] );\r\n\t\tif( existing_item )\r\n\t\t\tconsole.warn(\"There another item with the same ID in this tree\");\r\n\r\n\t\t//insert\r\n\t\tif(parent_element_index == -1)\r\n\t\t\tthis.root.appendChild( element );\r\n\t\telse\r\n\t\t\tthis._insertInside( element, parent_element_index, element_index );\r\n\r\n\t\t//compute visibility according to parents\r\n\t\tif( parent && !this._isNodeChildrenVisible( parent_id ) )\r\n\t\t\telement.classList.add(\"hidden\");\r\n\r\n\t\t//children\r\n\t\tif(data.children)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < data.children.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tthis.createAndInsert( data.children[i], options, data.id );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//update collapse button\r\n\t\tthis._updateListBox( element, options, child_level );\r\n\r\n\t\tif(options && options.selected)\r\n\t\t\tthis.markAsSelected( element, true );\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//element to add, position of the parent node, position inside children, the depth level\r\n\tTree.prototype._insertInside = function( element, parent_index, offset_index, level )\r\n\t{\r\n\t\tvar parent = this.root.childNodes[ parent_index ];\r\n\t\tif(!parent)\r\n\t\t\tthrow(\"No parent node found, index: \" + parent_index +\", nodes: \" + this.root.childNodes.length );\r\n\r\n\t\tvar parent_level = parseInt( parent.dataset[\"level\"] );\r\n\t\tvar child_level = level !== undefined ? level : parent_level + 1;\r\n\r\n\t\tvar indent = element.querySelector(\".indentblock\");\r\n\t\tif(indent)\r\n\t\t\tindent.style.paddingLeft = ((child_level + this.indent_offset) * Tree.INDENT ) + \"px\"; //inner padding\r\n\t\t\r\n\t\telement.dataset[\"level\"] = child_level;\r\n\r\n\t\t//under level nodes\r\n\t\tfor( var j = parent_index+1; j < this.root.childNodes.length; ++j )\r\n\t\t{\r\n\t\t\tvar new_childNode = this.root.childNodes[j];\r\n\t\t\tif( !new_childNode.classList || !new_childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\t\t\tvar current_level = parseInt( new_childNode.dataset[\"level\"] );\r\n\r\n\t\t\tif( current_level == child_level && offset_index)\r\n\t\t\t{\r\n\t\t\t\toffset_index--;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//last position\r\n\t\t\tif( current_level < child_level || (offset_index === 0 && current_level === child_level) )\r\n\t\t\t{\r\n\t\t\t\tthis.root.insertBefore( element, new_childNode );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//ended\r\n\t\tthis.root.appendChild( element );\r\n\t}\r\n\r\n\r\n\tTree.prototype._isNodeChildrenVisible = function( id )\r\n\t{\r\n\t\tvar node = this.getItem( id );\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\t\tif( node.classList.contains(\"hidden\") )\r\n\t\t\treturn false;\r\n\r\n\t\t//check listbox\r\n\t\tvar listbox = node.querySelector(\".listbox\");\r\n\t\tif(!listbox)\r\n\t\t\treturn true;\r\n\t\tif(listbox.getValue() == \"closed\")\r\n\t\t\treturn false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tTree.prototype._findElement = function( id )\r\n\t{\r\n\t\tif( !id || id.constructor !== String)\r\n\t\t\tthrow(\"findElement param must be string with item id\");\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\t\t\tif( childNode.classList.contains(\"ltreeitem-\" + id) )\r\n\t\t\t\treturn childNode;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tTree.prototype._findElementIndex = function( id )\r\n\t{\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(typeof(id) === \"string\")\r\n\t\t\t{\r\n\t\t\t\tif(childNode.dataset[\"item_id\"] === id)\r\n\t\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\telse if( childNode === id )\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tTree.prototype._findElementLastChildIndex = function( start_index )\r\n\t{\r\n\t\tif(start_index == -1)\r\n\t\t\treturn -1;\r\n\r\n\t\tvar level = parseInt( this.root.childNodes[ start_index ].dataset[\"level\"] );\r\n\r\n\t\tfor(var i = start_index+1; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar current_level = parseInt( childNode.dataset[\"level\"] );\r\n\t\t\tif( current_level == level )\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t//returns child elements (you can control levels)\r\n\tTree.prototype._findChildElements = function( id, only_direct )\r\n\t{\r\n\t\tvar parent_index = this._findElementIndex( id );\r\n\t\tif(parent_index == -1)\r\n\t\t\treturn;\r\n\r\n\t\tvar parent = this.root.childNodes[ parent_index ];\r\n\t\tvar parent_level = parseInt( parent.dataset[\"level\"] );\r\n\r\n\t\tvar result = [];\r\n\r\n\t\tfor(var i = parent_index + 1; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar current_level = parseInt( childNode.dataset[\"level\"] );\r\n\t\t\tif(only_direct && current_level > (parent_level + 1) )\r\n\t\t\t\tcontinue;\r\n\t\t\tif(current_level <= parent_level)\r\n\t\t\t\treturn result;\r\n\r\n\t\t\tresult.push( childNode );\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tTree.prototype.createTreeItem = function( data, options, level )\r\n\t{\r\n\t\tif(data === null || data === undefined)\r\n\t\t{\r\n\t\t\tconsole.error(\"Tree item cannot be null\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = options || this.options;\r\n\r\n\t\tvar root = document.createElement(\"li\");\r\n\t\troot.className = \"ltreeitem\";\r\n\t\tvar that = this;\r\n\r\n\t\t//ids are not used because they could collide, classes instead\r\n\t\tif(data.id)\r\n\t\t{\r\n\t\t\tvar safe_id = data.id.replace(/\\s/g,\"_\");\r\n\t\t\troot.className += \" ltreeitem-\" + safe_id;\r\n\t\t\troot.dataset[\"item_id\"] = data.id;\r\n\t\t}\r\n\r\n\t\tif(data.dataset)\r\n\t\t\tfor(var i in data.dataset)\r\n\t\t\t\troot.dataset[i] = data.dataset[i];\r\n\r\n\t\tdata.DOM = root; //double link\r\n\t\troot.data = data;\r\n\r\n\t\tif(level !== undefined)\r\n\t\t{\r\n\t\t\troot.dataset[\"level\"] = level;\r\n\t\t\troot.classList.add(\"ltree-level-\" + level);\r\n\t\t}\r\n\r\n\t\tvar title_element = document.createElement(\"div\");\r\n\t\ttitle_element.className = \"ltreeitemtitle\";\r\n\t\tif(data.className)\r\n\t\t\ttitle_element.className += \" \" + data.className;\r\n\r\n\t\ttitle_element.innerHTML = \"<span class='precontent'></span><span class='indentblock'></span><span class='collapsebox'></span><span class='incontent'></span><span class='postcontent'></span>\";\r\n\r\n\t\tvar content = data.content || data.id || \"\";\r\n\t\ttitle_element.querySelector(\".incontent\").innerHTML = content;\r\n\r\n\t\tif(data.precontent)\r\n\t\t\ttitle_element.querySelector(\".precontent\").innerHTML = data.precontent;\r\n\r\n\t\tif(data.postcontent)\r\n\t\t\ttitle_element.querySelector(\".postcontent\").innerHTML = data.postcontent;\r\n\r\n\t\tif(data.dataset)\r\n\t\t\tfor(var i in data.dataset)\r\n\t\t\t\troot.dataset[i] = data.dataset[i];\r\n\r\n\t\troot.appendChild( title_element );\r\n\t\troot.title_element = title_element;\r\n\r\n\t\tif(data.visible === false)\r\n\t\t\troot.style.display = \"none\";\r\n\r\n\t\t//var row = root.querySelector(\".ltreeitemtitle .incontent\");\r\n\t\tvar row = root;\r\n\t\trow.addEventListener(\"click\", onNodeSelected );\r\n\t\trow.addEventListener(\"dblclick\",onNodeDblClicked );\r\n\t\trow.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\tvar item = this;\r\n\t\t\te.preventDefault(); \r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(that.onItemContextMenu)\r\n\t\t\t\treturn that.onItemContextMenu(e, { item: item, data: item.data} );\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tfunction onNodeSelected(e)\r\n\t\t{\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t//var title = this.parentNode;\r\n\t\t\t//var item = title.parentNode;\r\n\t\t\tvar node = this;\r\n\t\t\tvar title = node.title_element;\r\n\r\n\t\t\tif(title._editing) \r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.ctrlKey && that.options.allow_multiselection)\r\n\t\t\t{\r\n\t\t\t\t//check if selected\r\n\t\t\t\tif( that.isNodeSelected( node ) )\r\n\t\t\t\t{\r\n\t\t\t\t\tnode.classList.remove(\"selected\");\r\n\t\t\t\t\tLiteGUI.trigger(that, \"item_remove_from_selection\", { item: node, data: node.data} );\r\n\t\t\t\t\tLiteGUI.trigger(that.root, \"item_remove_from_selection\", { item: node, data: node.data} ); //LEGACY\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//mark as selected\r\n\t\t\t\tthat.markAsSelected( node, true );\r\n\t\t\t\tLiteGUI.trigger(that, \"item_add_to_selection\", { item: node, data: node.data} );\r\n\t\t\t\tLiteGUI.trigger(that.root, \"item_add_to_selection\", { item: node, data: node.data} ); //LEGACY\r\n\t\t\t\tvar r = false;\r\n\t\t\t\tif(data.callback) \r\n\t\t\t\t\tr = data.callback.call(that,node);\r\n\r\n\t\t\t\tif(!r && that.onItemAddToSelection)\r\n\t\t\t\t\tthat.onItemAddToSelection(node.data, node);\r\n\t\t\t}\r\n\t\t\tif(e.shiftKey && that.options.allow_multiselection)\r\n\t\t\t{\r\n\t\t\t\t//select from current selection till here\r\n\t\t\t\t//current\r\n\t\t\t\tvar last_item = that.getSelectedItem();\r\n\t\t\t\tif(!last_item)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif(last_item === node)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar nodeList = Array.prototype.slice.call( last_item.parentNode.children );\r\n\t\t\t\tvar last_index = nodeList.indexOf( last_item );\r\n\t\t\t\tvar current_index = nodeList.indexOf( node );\r\n\r\n\t\t\t\tvar items = current_index > last_index ? nodeList.slice( last_index, current_index ) : nodeList.slice( current_index, last_index );\r\n\t\t\t\tfor( var i = 0; i < items.length; ++i )\r\n\t\t\t\t{\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\t//console.log(item);\r\n\t\t\t\t\t//mark as selected\r\n\t\t\t\t\tthat.markAsSelected( item, true );\r\n\t\t\t\t\tLiteGUI.trigger( that, \"item_add_to_selection\", { item: item, data: item.data } );\r\n\t\t\t\t\tLiteGUI.trigger( that.root, \"item_add_to_selection\", { item: item, data: item.data } ); //LEGACY\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//mark as selected\r\n\t\t\t\tthat.markAsSelected( node );\r\n\r\n\t\t\t\tthat._skip_scroll = true; //avoid scrolling while user clicks something\r\n\t\t\t\tLiteGUI.trigger( that, \"item_selected\", { item: node, data: node.data } );\r\n\t\t\t\tLiteGUI.trigger( that.root, \"item_selected\", { item: node, data: node.data } ); //LEGACY\r\n\t\t\t\tvar r = false;\r\n\t\t\t\tif(data.callback) \r\n\t\t\t\t\tr = data.callback.call(that,node);\r\n\r\n\t\t\t\tif(!r && that.onItemSelected)\r\n\t\t\t\t\tthat.onItemSelected(node.data, node);\r\n\t\t\t\tthat._skip_scroll = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onNodeDblClicked(e)\r\n\t\t{\r\n\t\t\tvar node = this; //this.parentNode;\r\n\t\t\tvar title = node.title_element.querySelector(\".incontent\");\r\n\r\n\t\t\tLiteGUI.trigger( that, \"item_dblclicked\", node );\r\n\t\t\tLiteGUI.trigger( that.root, \"item_dblclicked\", node ); //LEGACY\r\n\r\n\t\t\tif(!title._editing && that.options.allow_rename)\r\n\t\t\t{\r\n\t\t\t\ttitle._editing = true;\r\n\t\t\t\ttitle._old_name = title.innerHTML;\r\n\t\t\t\tvar that2 = title;\r\n\t\t\t\ttitle.innerHTML = \"<input type='text' value='\" + title.innerHTML + \"' />\";\r\n\t\t\t\tvar input = title.querySelector(\"input\");\r\n\r\n\t\t\t\t//loose focus when renaming\r\n\t\t\t\tinput.addEventListener(\"blur\",function(e) { \r\n\t\t\t\t\tvar new_name = e.target.value;\r\n\t\t\t\t\tsetTimeout(function() { that2.innerHTML = new_name; },1); //bug fix, if I destroy input inside the event, it produce a NotFoundError\r\n\t\t\t\t\t//item.node_name = new_name;\r\n\t\t\t\t\tdelete that2._editing;\r\n\t\t\t\t\tLiteGUI.trigger( that.root, \"item_renamed\", { old_name: that2._old_name, new_name: new_name, item: node, data: node.data } );\r\n\t\t\t\t\tdelete that2._old_name;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//finishes renaming\r\n\t\t\t\tinput.addEventListener(\"keydown\", function(e) {\r\n\t\t\t\t\tif(e.keyCode != 13)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tthis.blur();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//set on focus\r\n\t\t\t\tinput.focus();\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t//dragging element on tree\r\n\t\tvar draggable_element = title_element;\r\n\t\tif(this.options.allow_drag)\r\n\t\t{\r\n\t\t\tdraggable_element.draggable = true;\r\n\r\n\t\t\t//starts dragging this element\r\n\t\t\tdraggable_element.addEventListener(\"dragstart\", function(ev) {\r\n\t\t\t\t//this.removeEventListener(\"dragover\", on_drag_over ); //avoid being drag on top of himself\r\n\t\t\t\t//ev.dataTransfer.setData(\"node-id\", this.parentNode.id);\r\n\t\t\t\tev.dataTransfer.setData(\"item_id\", this.parentNode.dataset[\"item_id\"]);\r\n\t\t\t\tif(!data.onDragData)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar drag_data =\tdata.onDragData();\r\n\t\t\t\tif(drag_data)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i in drag_data)\r\n\t\t\t\t\t\tev.dataTransfer.setData(i,drag_data[i]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar count = 0;\r\n\r\n\t\t//something being dragged entered\r\n\t\tdraggable_element.addEventListener(\"dragenter\", function (ev)\r\n\t\t{\r\n\t\t\tev.preventDefault();\r\n\t\t\tif(data.skipdrag)\r\n\t\t\t\treturn false;\r\n\t\t\t\r\n\t\t\tif(count == 0)\r\n\t\t\t\ttitle_element.classList.add(\"dragover\");\r\n\t\t\tcount++;\r\n\t\t});\r\n\r\n\t\tdraggable_element.addEventListener(\"dragleave\", function (ev)\r\n\t\t{\r\n\t\t\tev.preventDefault();\r\n\t\t\t//console.log(data.id);\r\n\t\t\tcount--;\r\n\t\t\tif(count == 0)\r\n\t\t\t\ttitle_element.classList.remove(\"dragover\");\r\n\t\t\t//if(ev.srcElement == this) return;\r\n\t\t});\r\n\r\n\t\t//test if allows to drag stuff on top?\r\n\t\tdraggable_element.addEventListener(\"dragover\", on_drag_over );\r\n\t\tfunction on_drag_over(ev)\r\n\t\t{\r\n\t\t\tev.preventDefault();\r\n\t\t}\r\n\r\n\t\tdraggable_element.addEventListener(\"drop\", function (ev)\r\n\t\t{\r\n\t\t\ttitle_element.classList.remove(\"dragover\");\r\n\t\t\tev.preventDefault();\r\n\t\t\tif(data.skipdrag)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item_id = ev.dataTransfer.getData(\"item_id\");\r\n\r\n\t\t\t//var data = ev.dataTransfer.getData(\"Text\");\r\n\t\t\tif(!item_id)\r\n\t\t\t{\r\n\t\t\t\tLiteGUI.trigger( that.root, \"drop_on_item\", { item: this, event: ev });\r\n\t\t\t\tif( that.onDropItem )\r\n\t\t\t\t\tthat.onDropItem( ev, this.parentNode.data );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//try\r\n\t\t\t{\r\n\t\t\t\tvar parent_id = this.parentNode.dataset[\"item_id\"];\r\n\r\n\t\t\t\tif( !that.onMoveItem || (that.onMoveItem && that.onMoveItem( that.getItem( item_id ), that.getItem( parent_id ) ) != false))\r\n\t\t\t\t{\r\n\t\t\t\t\tif( that.moveItem( item_id, parent_id ) )\r\n\t\t\t\t\t\tLiteGUI.trigger( that.root, \"item_moved\", { item: that.getItem( item_id ), parent_item: that.getItem( parent_id ) } );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\tcatch (err)\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"Error: \" + err );\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif( that.onDropItem )\r\n\t\t\t\tthat.onDropItem( ev, this.parentNode.data );\r\n\t\t});\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* remove from the tree the items that do not have a name that matches the string\r\n\t* @method filterByName\r\n\t* @param {string} name\r\n\t*/\r\n\tTree.prototype.filterByName = function(name)\r\n\t{\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i]; //ltreeitem\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar content = childNode.querySelector(\".incontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar str = content.innerHTML.toLowerCase();\r\n\r\n\t\t\tif(!name || str.indexOf( name.toLowerCase() ) != -1)\r\n\t\t\t{\r\n\t\t\t\tif( childNode.data && childNode.data.visible !== false )\r\n\t\t\t\t\tchildNode.classList.remove(\"filtered\");\r\n\t\t\t\tvar indent = childNode.querySelector(\".indentblock\");\r\n\t\t\t\tif(indent)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(name)\r\n\t\t\t\t\t\tindent.style.paddingLeft = 0;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tindent.style.paddingLeft = paddingLeft = ( (parseInt(childNode.dataset[\"level\"]) + this.indent_offset) * Tree.INDENT) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tchildNode.classList.add(\"filtered\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\r\n\t/**\r\n\t* remove from the tree the items that do not have a name that matches the string\r\n\t* @method filterByName\r\n\t* @param {string} name\r\n\t*/\r\n\tTree.prototype.filterByRule = function( callback_to_filter, param )\r\n\t{\r\n\t\tif(!callback_to_filter)\r\n\t\t\tthrow(\"filterByRule requires a callback\");\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i]; //ltreeitem\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar content = childNode.querySelector(\".incontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif( callback_to_filter( childNode.data, content, param ) )\r\n\t\t\t{\r\n\t\t\t\tif( childNode.data && childNode.data.visible !== false )\r\n\t\t\t\t\tchildNode.classList.remove(\"filtered\");\r\n\t\t\t\tvar indent = childNode.querySelector(\".indentblock\");\r\n\t\t\t\tif(indent)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(name)\r\n\t\t\t\t\t\tindent.style.paddingLeft = 0;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tindent.style.paddingLeft = paddingLeft = ( (parseInt(childNode.dataset[\"level\"]) + this.indent_offset) * LiteGUI.Tree.INDENT) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tchildNode.classList.add(\"filtered\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\t\r\n\r\n\r\n\t/**\r\n\t* get the item with that id, returns the HTML element\r\n\t* @method getItem\r\n\t* @param {string} id\r\n\t* @return {Object}\r\n\t*/\r\n\tTree.prototype.getItem = function( id )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn null;\r\n\r\n\t\tif( id.classList ) //if it is already a node\r\n\t\t\treturn id;\r\n\r\n\t\tfor(var i = 0; i < this.root.childNodes.length; ++i)\r\n\t\t{\r\n\t\t\tvar childNode = this.root.childNodes[i];\r\n\t\t\tif( !childNode.classList || !childNode.classList.contains(\"ltreeitem\") )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif(childNode.dataset[\"item_id\"] === id)\r\n\t\t\t\treturn childNode;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t/*\r\n\t\tvar safe_id = id.replace(/\\s/g,\"_\");\r\n\t\tvar node = this.root.querySelector(\".ltreeitem-\"+safe_id);\r\n\t\tif(!node) \r\n\t\t\treturn null;\r\n\t\tif( !node.classList.contains(\"ltreeitem\") )\r\n\t\t\tthrow(\"this node is not a tree item\");\r\n\t\treturn node;\r\n\t\t*/\r\n\t}\r\n\r\n\t/**\r\n\t* in case an item is collapsed, it expands it to show children\r\n\t* @method expandItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.expandItem = function(id, parents)\r\n\t{\r\n\t\tvar item = this.getItem(id);\r\n\t\tif(!item)\r\n\t\t\treturn;\r\n\r\n\t\tif(!item.listbox)\r\n\t\t\treturn;\r\n\r\n\t\titem.listbox.setValue(true); //this propagates changes\r\n\r\n\t\tif(!parents)\r\n\t\t\treturn;\r\n\r\n\t\tvar parent = this.getParent( item );\r\n\t\tif(parent)\r\n\t\t\tthis.expandItem(parent,parents);\r\n\t}\r\n\r\n\t/**\r\n\t* in case an item is expanded, it collapses it to hide children\r\n\t* @method collapseItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.collapseItem = function(id)\r\n\t{\r\n\t\tvar item = this.getItem(id);\r\n\t\tif(!item)\r\n\t\t\treturn;\r\n\r\n\t\tif(!item.listbox)\r\n\t\t\treturn;\r\n\r\n\t\tlistbox.setValue(false);  //this propagates changes\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Tells you if the item its out of the view due to the scrolling\r\n\t* @method isInsideArea\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.isInsideArea = function( id )\r\n\t{\r\n\t\tvar item = id.constructor === String ? this.getItem(id) : id;\r\n\t\tif(!item)\r\n\t\t\treturn false;\r\n\r\n\t\tvar rects = this.root.getClientRects();\r\n\t\tif(!rects.length)\r\n\t\t\treturn false;\r\n\t\tvar r = rects[0];\r\n\t\tvar h = r.height;\r\n\t\tvar y = item.offsetTop;\r\n\r\n\t\tif( this.root.scrollTop < y && y < (this.root.scrollTop + h) )\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t* Scrolls to center this item\r\n\t* @method scrollToItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.scrollToItem = function(id)\r\n\t{\r\n\t\tvar item = id.constructor === String ? this.getItem(id) : id;\r\n\t\tif(!item)\r\n\t\t\treturn;\r\n\r\n\t\tvar container = this.root.parentNode;\r\n\r\n\t\tif(!container)\r\n\t\t\treturn;\r\n\r\n\t\tvar rect = container.getBoundingClientRect();\r\n\t\tif(!rect)\r\n\t\t\treturn;\r\n\t\tvar h = rect.height;\r\n\t\tvar x = ( parseInt( item.dataset[\"level\"] ) + this.indent_offset) * Tree.INDENT + 50;\r\n\r\n\t\tcontainer.scrollTop = item.offsetTop - (h * 0.5)|0;\r\n\t\tif( rect.width * 0.75 < x )\r\n\t\t\tcontainer.scrollLeft = x;\r\n\t\telse\r\n\t\t\tcontainer.scrollLeft = 0;\r\n\t}\r\n\r\n\t/**\r\n\t* mark item as selected\r\n\t* @method setSelectedItem\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.setSelectedItem = function( id, scroll, send_event )\r\n\t{\r\n\t\tif(!id)\r\n\t\t{\r\n\t\t\t//clear selection\r\n\t\t\tthis.unmarkAllAsSelected();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node) //not found\r\n\t\t\treturn null;\r\n\r\n\t\t//already selected\r\n\t\tif( node.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\tthis.markAsSelected(node);\r\n\t\tif( scroll && !this._skip_scroll )\r\n\t\t\tthis.scrollToItem(node);\r\n\r\n\t\t//expand parents\r\n\t\tthis.expandItem( node, true );\r\n\r\n\t\tif(send_event)\r\n\t\t\tLiteGUI.trigger( node, \"click\" );\r\n\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t* adds item to selection (multiple selection)\r\n\t* @method addItemToSelection\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.addItemToSelection = function( id )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node) //not found\r\n\t\t\treturn null;\r\n\r\n\t\tthis.markAsSelected(node, true);\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t* remove item from selection (multiple selection)\r\n\t* @method removeItemFromSelection\r\n\t* @param {string} id\r\n\t*/\r\n\tTree.prototype.removeItemFromSelection = function( id )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node) //not found\r\n\t\t\treturn null;\r\n\t\tnode.classList.remove(\"selected\");\r\n\t}\r\n\r\n\t/**\r\n\t* returns the first selected item (its HTML element)\r\n\t* @method getSelectedItem\r\n\t* @return {HTML}\r\n\t*/\r\n\tTree.prototype.getSelectedItem = function()\r\n\t{\r\n\t\treturn this.root.querySelector(\".ltreeitem.selected\");\r\n\t}\r\n\r\n\t/**\r\n\t* returns an array with the selected items (its HTML elements)\r\n\t* @method getSelectedItems\r\n\t* @return {HTML}\r\n\t*/\r\n\tTree.prototype.getSelectedItems = function()\r\n\t{\r\n\t\treturn this.root.querySelectorAll(\".ltreeitem.selected\");\r\n\t}\r\n\r\n\t/**\r\n\t* returns if an item is selected\r\n\t* @method isItemSelected\r\n\t* @param {string} id\r\n\t* @return {bool}\r\n\t*/\r\n\tTree.prototype.isItemSelected = function(id)\r\n\t{\r\n\t\tvar node = this.getItem( id );\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\t\treturn this.isNodeSelected(node);\r\n\t}\r\n\r\n\t/**\r\n\t* returns the children of an item\r\n\t* @method getChildren\r\n\t* @param {string} id could be string or node directly\r\n\t* @param {bool} [only_direct=false] to get only direct children\r\n\t* @return {Array}\r\n\t*/\r\n\tTree.prototype.getChildren = function(id, only_direct )\r\n\t{\r\n\t\tif( id && id.constructor !== String && id.dataset )\r\n\t\t\tid = id.dataset[\"item_id\"];\r\n\t\treturn this._findChildElements( id, only_direct );\r\n\t}\r\n\r\n\t/**\r\n\t* returns the parent of a item\r\n\t* @method getParent\r\n\t* @param {string} id\r\n\t* @return {HTML}\r\n\t*/\r\n\tTree.prototype.getParent = function(id_or_node)\r\n\t{\r\n\t\tvar element = this.getItem( id_or_node );\r\n\t\tif(element)\r\n\t\t\treturn this.getItem( element.parent_id );\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t* returns an array with all the ancestors\r\n\t* @method getAncestors\r\n\t* @param {string} id\r\n\t* @return {Array}\r\n\t*/\r\n\tTree.prototype.getAncestors = function( id_or_node, result )\r\n\t{\r\n\t\tresult = result || [];\r\n\t\tvar element = this.getItem( id_or_node );\r\n\t\tif(element)\r\n\t\t{\r\n\t\t\tresult.push( element );\r\n\t\t\treturn this.getAncestors( element.parent_id, result );\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t* returns an array with all the ancestors\r\n\t* @method getAncestors\r\n\t* @param {string} id\r\n\t* @return {Array}\r\n\t*/\r\n\tTree.prototype.isAncestor = function( child, node )\r\n\t{\r\n\t\tvar element = this.getItem( child );\r\n\t\tif(!element)\r\n\t\t\treturn false;\r\n\t\tvar dest = this.getItem( node );\r\n\t\tvar parent = this.getItem( element.parent_id );\r\n\t\tif(!parent)\r\n\t\t\treturn false;\r\n\t\tif(parent == dest)\r\n\t\t\treturn true;\r\n\t\treturn this.isAncestor( parent, node );\r\n\t}\r\n\r\n\t/**\r\n\t* move item with id to be child of parent_id\r\n\t* @method moveItem\r\n\t* @param {string} id\r\n\t* @param {string} parent_id\r\n\t* @return {bool}\r\n\t*/\r\n\tTree.prototype.moveItem = function( id, parent_id )\r\n\t{\r\n\t\tif(id === parent_id)\r\n\t\t\treturn false;\r\n\r\n\t\tvar node = this.getItem( id );\r\n\t\tvar parent = this.getItem( parent_id );\r\n\r\n\t\tif( this.isAncestor( parent, node ) )\r\n\t\t\treturn false;\r\n\r\n\t\tvar parent_index = this._findElementIndex( parent );\r\n\t\tvar parent_level = parseInt( parent.dataset[\"level\"] );\r\n\t\tvar old_parent = this.getParent( node );\r\n\t\tif(!old_parent)\r\n\t\t{\r\n\t\t\tconsole.error(\"node parent not found by id, maybe id has changed\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar old_parent_level = parseInt( old_parent.dataset[\"level\"] );\r\n\t\tvar level_offset = parent_level - old_parent_level;\r\n\r\n\t\tif(!parent || !node)\r\n\t\t\treturn false;\r\n\r\n\t\tif(parent == old_parent)\r\n\t\t\treturn false;\r\n\r\n\t\t//replace parent info\r\n\t\tnode.parent_id = parent_id;\r\n\r\n\t\t//get all children and subchildren and reinsert them in the new level\r\n\t\tvar children = this.getChildren( node );\r\n\t\tif(children)\r\n\t\t{\r\n\t\t\tchildren.unshift( node ); //add the node at the beginning\r\n\r\n\t\t\t//remove all children\r\n\t\t\tfor(var i = 0; i < children.length; i++)\r\n\t\t\t\tchildren[i].parentNode.removeChild( children[i] );\r\n\r\n\t\t\t//update levels\r\n\t\t\tfor(var i = 0; i < children.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar child = children[i];\r\n\t\t\t\tvar new_level = parseInt(child.dataset[\"level\"]) + level_offset;\r\n\t\t\t\tchild.dataset[\"level\"] = new_level;\r\n\t\t\t}\r\n\r\n\t\t\t//reinsert\r\n\t\t\tparent_index = this._findElementIndex( parent ); //update parent index\r\n\t\t\tvar last_index = this._findElementLastChildIndex( parent_index );\r\n\t\t\tif(last_index == -1)\r\n\t\t\t\tlast_index = 0;\r\n\t\t\tfor(var i = 0; i < children.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar child = children[i];\r\n\t\t\t\tthis._insertInside( child, parent_index, last_index + i - 1, parseInt( child.dataset[\"level\"] ) );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//update collapse button\r\n\t\tthis._updateListBox( parent );\r\n\t\tif(old_parent)\r\n\t\t\tthis._updateListBox( old_parent );\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* remove item with given id\r\n\t* @method removeItem\r\n\t* @param {string} id\r\n\t* @return {bool}\r\n\t*/\r\n\tTree.prototype.removeItem = function( id_or_node, remove_children )\r\n\t{\r\n\t\tvar node = id_or_node;\r\n\t\tif(typeof(id_or_node) == \"string\")\r\n\t\t\tnode = this.getItem( id_or_node );\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\r\n\t\t//get parent\r\n\t\tvar parent = this.getParent( node );\r\n\r\n\t\t//get all descendants\r\n\t\tvar child_nodes = null;\r\n\t\tif(remove_children)\r\n\t\t\tchild_nodes = this.getChildren( node );\r\n\r\n\t\t//remove html element\r\n\t\tthis.root.removeChild( node );\r\n\r\n\t\t//remove all children\r\n\t\tif( child_nodes )\r\n\t\t{\r\n\t\t\tfor( var i = 0; i < child_nodes.length; i++ )\r\n\t\t\t\tthis.root.removeChild( child_nodes[i] );\r\n\t\t}\r\n\r\n\t\t//update parent collapse button\r\n\t\tif(parent)\r\n\t\t\tthis._updateListBox( parent );\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* update a given item with new data\r\n\t* @method updateItem\r\n\t* @param {string} id\r\n\t* @param {object} data\r\n\t*/\r\n\tTree.prototype.updateItem = function(id, data)\r\n\t{\r\n\t\tvar node = this.getItem(id);\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\r\n\t\tnode.data = data;\r\n\t\tif(data.id)\r\n\t\t\tnode.id = data.id; //this updateItemId ?\r\n\t\tif(data.content)\r\n\t\t{\r\n\t\t\t//node.title_element.innerHTML = \"<span class='precontent'></span><span class='incontent'>\" +  + \"</span><span class='postcontent'></span>\";\r\n\t\t\tvar incontent = node.title_element.querySelector(\".incontent\");\r\n\t\t\tincontent.innerHTML = data.content;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* update a given item id and the link with its children\r\n\t* @method updateItemId\r\n\t* @param {string} old_id\r\n\t* @param {string} new_id\r\n\t*/\r\n\tTree.prototype.updateItemId = function(old_id, new_id)\r\n\t{\r\n\t\tvar node = this.getItem(old_id);\r\n\t\tif(!node)\r\n\t\t\treturn false;\r\n\r\n\t\tvar children = this.getChildren( old_id, true );\r\n\t\tnode.id = new_id;\r\n\r\n\t\tfor(var i = 0; i < children.length; ++i)\r\n\t\t{\r\n\t\t\tvar child = children[i];\r\n\t\t\tchild.parent_id = new_id;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* clears all the items\r\n\t* @method clear\r\n\t* @param {bool} keep_root if you want to keep the root item\r\n\t*/\r\n\tTree.prototype.clear = function(keep_root)\r\n\t{\r\n\t\tif(!keep_root)\r\n\t\t{\r\n\t\t\tthis.root.innerHTML = \"\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar items = this.root.querySelectorAll(\".ltreeitem\");\r\n\t\tfor(var i = 1; i < items.length; i++)\r\n\t\t{\r\n\t\t\tvar item = items[i];\r\n\t\t\tthis.root.removeChild( item );\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tTree.prototype.getNodeByIndex = function(index)\r\n\t{\r\n\t\tvar items = this.root.querySelectorAll(\".ltreeitem\");\r\n\t\treturn items[index];\r\n\t}\r\n\r\n\t//private ********************************\r\n\r\n\tTree.prototype.unmarkAllAsSelected = function()\r\n\t{\r\n\t\tthis.root.classList.remove(\"selected\");\r\n\t\tvar selected_array = this.root.querySelectorAll(\".ltreeitem.selected\");\r\n\t\tif(selected_array)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < selected_array.length; i++)\r\n\t\t\t\tselected_array[i].classList.remove(\"selected\");\r\n\t\t}\r\n\t\tvar semiselected = this.root.querySelectorAll(\".ltreeitem.semiselected\");\r\n\t\tfor(var i = 0; i < semiselected.length; i++)\r\n\t\t\tsemiselected[i].classList.remove(\"semiselected\");\r\n\t}\r\n\r\n\tTree.prototype.isNodeSelected = function( node )\r\n\t{\r\n\t\t//already selected\r\n\t\tif( node.classList.contains(\"selected\") ) \r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tTree.prototype.markAsSelected = function( node, add_to_existing_selection )\r\n\t{\r\n\t\t//already selected\r\n\t\tif( node.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\t//clear old selection\r\n\t\tif(!add_to_existing_selection)\r\n\t\t\tthis.unmarkAllAsSelected();\r\n\r\n\t\t//mark as selected (it was node.title_element?)\r\n\t\tnode.classList.add(\"selected\");\r\n\r\n\t\t//go up and semiselect\r\n\t\tvar parent = this.getParent( node );\r\n\t\tvar visited = [];\r\n\t\twhile(parent && visited.indexOf(parent) == -1)\r\n\t\t{\r\n\t\t\tparent.classList.add(\"semiselected\");\r\n\t\t\tvisited.push( parent );\r\n\t\t\tparent = this.getParent( parent );\r\n\t\t}\r\n\t\t/*\r\n\t\tvar parent = node.parentNode.parentNode; //two elements per level\r\n\t\twhile(parent && parent.classList.contains(\"ltreeitem\"))\r\n\t\t{\r\n\t\t\tparent.title_element.classList.add(\"semiselected\");\r\n\t\t\tparent = parent.parentNode.parentNode;\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\r\n\t//updates the widget to collapse\r\n\tTree.prototype._updateListBox = function( node, options, current_level )\r\n\t{\r\n\t\tif(!node)\r\n\t\t\treturn;\r\n\r\n\t\tvar that = this;\r\n\r\n\t\tif(!node.listbox)\r\n\t\t{\r\n\t\t\tvar pre = node.title_element.querySelector(\".collapsebox\");\r\n\t\t\tvar box = LiteGUI.createLitebox(true, function(e) { \r\n\t\t\t\tthat.onClickBox(e, node);\r\n\t\t\t\tLiteGUI.trigger( that.root, \"item_collapse_change\", { item: node, data: box.getValue() } );\r\n\t\t\t});\r\n\t\t\tbox.stopPropagation = true;\r\n\t\t\tbox.setEmpty(true);\r\n\t\t\tpre.appendChild(box);\r\n\t\t\tnode.listbox = box;\r\n\t\t}\r\n\r\n\t\tif( (options && options.collapsed) || current_level >= this.collapsed_depth )\r\n\t\t\tnode.listbox.collapse();\r\n\r\n\t\tvar child_elements = this.getChildren( node.dataset[\"item_id\"] );\r\n\t\tif(!child_elements)\r\n\t\t\treturn; //null\r\n\r\n\t\tif(child_elements.length)\r\n\t\t\tnode.listbox.setEmpty(false);\r\n\t\telse\r\n\t\t\tnode.listbox.setEmpty(true);\r\n\t}\r\n\r\n\tTree.prototype.onClickBox = function(e, node)\r\n\t{\r\n\t\tvar children = this.getChildren( node );\r\n\r\n\t\tif(!children)\r\n\t\t\treturn;\r\n\r\n\t\t//update children visibility\r\n\t\tfor(var i = 0; i < children.length; ++i)\r\n\t\t{\r\n\t\t\tvar child = children[i];\r\n\t\t\t\r\n\t\t\tvar child_parent = this.getParent( child );\r\n\t\t\tvar visible = true;\r\n\t\t\tif( child_parent )\r\n\t\t\t\tvisible = this._isNodeChildrenVisible(child_parent);\r\n\t\t\tif(visible)\r\n\t\t\t\tchild.classList.remove(\"hidden\");\r\n\t\t\telse\r\n\t\t\t\tchild.classList.add(\"hidden\");\r\n\t\t}\r\n\t}\r\n\r\n\treturn LiteGUI.Tree = Tree;\r\n});\n//enclose in a scope\r\ndefine('skylark-litegui/widgets',[\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\r\n\tfunction Button( value, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tif(typeof(options) === \"function\")\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litegui button\";\r\n\r\n\t\tthis.root = element;\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.className = \"litebutton\";\r\n\t\tthis.content = button;\r\n\t\telement.appendChild(button);\r\n\r\n\t\tbutton.innerHTML = value;\t\t\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tthat.click();\r\n\t\t});\r\n\r\n\t\tthis.click = function()\r\n\t\t{\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call(that);\r\n\t\t}\r\n\t}\r\n\r\n\tLiteGUI.Button = Button;\r\n\r\n\t/**\r\n\t* SearchBox \r\n\t*\r\n\t* @class SearchBox\r\n\t* @constructor\r\n\t* @param {*} value\r\n\t* @param {Object} options\r\n\t*/\r\n\r\n\tfunction SearchBox( value, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litegui searchbox\";\r\n\t\tvar placeholder = (options.placeholder != null ? options.placeholder : \"Search\");\r\n\t\telement.innerHTML = \"<input value='\"+value+\"' placeholder='\"+ placeholder +\"'/>\";\r\n\t\tthis.input = element.querySelector(\"input\");\r\n\t\tthis.root = element;\r\n\t\tvar that = this;\r\n\r\n\t\tthis.input.onchange = function(e) { \r\n\t\t\tvar value = e.target.value;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call(that,value);\r\n\t\t};\r\n\t}\r\n\r\n\tSearchBox.prototype.setValue = function(v) { this.input.value = v; this.input.onchange(); };\r\n\tSearchBox.prototype.getValue = function() { return this.input.value; };\r\n\r\n\tLiteGUI.SearchBox = SearchBox;\r\n\r\n\r\n\t/**\r\n\t* ContextMenu \r\n\t*\r\n\t* @class ContextMenu \r\n\t* @constructor\r\n\t* @param {Array} values (allows object { title: \"Nice text\", callback: function ... })\r\n\t* @param {Object} options [optional] Some options:\\\r\n\t* - title: title to show on top of the menu\r\n\t* - callback: function to call when an option is clicked, it receives the item information\r\n\t* - ignore_item_callbacks: ignores the callback inside the item, it just calls the options.callback \r\n\t* - event: you can pass a MouseEvent, this way the ContextMenu appears in that position\r\n\t*/\r\n\tfunction ContextMenu( values, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tthis.options = options;\r\n\t\tvar that = this;\r\n\r\n\t\t//to link a menu with its parent\r\n\t\tif(options.parentMenu)\r\n\t\t{\r\n\t\t\tif( options.parentMenu.constructor !== this.constructor )\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"parentMenu must be of class ContextMenu, ignoring it\");\r\n\t\t\t\toptions.parentMenu = null;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.parentMenu = options.parentMenu;\r\n\t\t\t\tthis.parentMenu.lock = true;\r\n\t\t\t\tthis.parentMenu.current_submenu = this;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( options.event && options.event.constructor.name !== \"MouseEvent\" && options.event.constructor.name !== \"PointerEvent\" && options.event.constructor.name !== \"CustomEvent\" )\r\n\t\t{\r\n\t\t\tconsole.error(\"Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it.\");\r\n\t\t\toptions.event = null;\r\n\t\t}\r\n\r\n\t\tvar root = document.createElement(\"div\");\r\n\t\troot.className = \"litecontextmenu litemenubar-panel\";\r\n\t\troot.style.minWidth = 100;\r\n\t\troot.style.minHeight = 100;\r\n\t\troot.style.pointerEvents = \"none\";\r\n\t\tsetTimeout( function() { root.style.pointerEvents = \"auto\"; },100); //delay so the mouse up event is not caugh by this element\r\n\r\n\t\t//this prevents the default context browser menu to open in case this menu was created when pressing right button \r\n\t\troot.addEventListener(\"mouseup\", function(e){ \r\n\t\t\te.preventDefault(); return true; \r\n\t\t}, true);\r\n\t\troot.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\t\t\te.preventDefault(); \r\n\t\t\treturn false;\r\n\t\t},true);\r\n\r\n\t\troot.addEventListener(\"mousedown\", function(e){ \r\n\t\t\tif(e.button == 2)\r\n\t\t\t{\r\n\t\t\t\tthat.close();\r\n\t\t\t\te.preventDefault(); return true; \r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\r\n\t\tthis.root = root;\r\n\r\n\t\t//title\r\n\t\tif(options.title)\r\n\t\t{\r\n\t\t\tvar element = document.createElement(\"div\");\r\n\t\t\telement.className = \"litemenu-title\";\r\n\t\t\telement.innerHTML = options.title;\r\n\t\t\troot.appendChild(element);\r\n\t\t}\r\n\r\n\t\t//entries\r\n\t\tvar num = 0;\r\n\t\tfor(var i in values)\r\n\t\t{\r\n\t\t\tvar name = values.constructor == Array ? values[i] : i;\r\n\t\t\tif( name != null && name.constructor !== String )\r\n\t\t\t\tname = name.content === undefined ? String(name) : name.content;\r\n\t\t\tvar value = values[i];\r\n\t\t\tthis.addItem( name, value, options );\r\n\t\t\tnum++;\r\n\t\t}\r\n\r\n\t\t//close on leave\r\n\t\troot.addEventListener(\"mouseleave\", function(e) {\r\n\t\t\tif(that.lock)\r\n\t\t\t\treturn;\r\n\t\t\tif(root.closing_timer)\r\n\t\t\t\tclearTimeout( root.closing_timer );\r\n\t\t\troot.closing_timer = setTimeout( that.close.bind(that, e), 500 );\r\n\t\t\t//that.close(e);\r\n\t\t});\r\n\r\n\t\troot.addEventListener(\"mouseenter\", function(e) {\r\n\t\t\tif(root.closing_timer)\r\n\t\t\t\tclearTimeout( root.closing_timer );\r\n\t\t});\r\n\r\n\t\tfunction on_mouse_wheel(e)\r\n\t\t{\r\n\t\t\tvar pos = parseInt( root.style.top );\r\n\t\t\troot.style.top = (pos + e.deltaY * 0.1).toFixed() + \"px\";\r\n\t\t\te.preventDefault();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\troot.addEventListener(\"wheel\", on_mouse_wheel, true);\r\n\t\troot.addEventListener(\"mousewheel\", on_mouse_wheel, true);\r\n\r\n\r\n\t\t//insert before checking position\r\n\t\tvar root_document = document;\r\n\t\tif(options.event)\r\n\t\t\troot_document = options.event.target.ownerDocument; \r\n\r\n\t\tif(!root_document)\r\n\t\t\troot_document = document;\r\n\t\troot_document.body.appendChild(root);\r\n\r\n\t\t//compute best position\r\n\t\tvar left = options.left || 0;\r\n\t\tvar top = options.top || 0;\r\n\t\tif(options.event)\r\n\t\t{\r\n\t\t\tif( options.event.constructor.name !== \"MouseEvent\" && options.event.constructor.name !== \"PointerEvent\" && options.event.constructor.name !== \"CustomEvent\" )\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"Event passed to ContextMenu is not of type MouseEvent\");\r\n\t\t\t\toptions.event = null;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tleft = (options.event.pageX - 10);\r\n\t\t\t\ttop = (options.event.pageY - 10);\r\n\t\t\t\tif(options.title)\r\n\t\t\t\t\ttop -= 20;\r\n\r\n\t\t\t\tif(options.parentMenu)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar rect = options.parentMenu.root.getBoundingClientRect();\r\n\t\t\t\t\tleft = rect.left + rect.width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar body_rect = document.body.getBoundingClientRect();\r\n\t\t\t\tvar root_rect = root.getBoundingClientRect();\r\n\r\n\t\t\t\tif(left > (body_rect.width - root_rect.width - 10))\r\n\t\t\t\t\tleft = (body_rect.width - root_rect.width - 10);\r\n\t\t\t\tif(top > (body_rect.height - root_rect.height - 10))\r\n\t\t\t\t\ttop = (body_rect.height - root_rect.height - 10);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\troot.style.left = left + \"px\";\r\n\t\troot.style.top = top  + \"px\";\r\n\t}\r\n\r\n\tContextMenu.prototype.addItem = function( name, value, options )\r\n\t{\r\n\t\tvar that = this;\r\n\t\toptions = options || {};\r\n\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"litemenu-entry submenu\";\r\n\r\n\t\tvar disabled = false;\r\n\r\n\t\tif(value === null)\r\n\t\t{\r\n\t\t\telement.classList.add(\"separator\");\r\n\t\t\t//element.innerHTML = \"<hr/>\"\r\n\t\t\t//continue;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\telement.innerHTML = value && value.title ? value.title : name;\r\n\t\t\telement.value = value;\r\n\r\n\t\t\tif(value)\r\n\t\t\t{\r\n\t\t\t\tif(value.disabled)\r\n\t\t\t\t{\r\n\t\t\t\t\tdisabled = true;\r\n\t\t\t\t\telement.classList.add(\"disabled\");\r\n\t\t\t\t}\r\n\t\t\t\tif(value.submenu || value.has_submenu)\r\n\t\t\t\t\telement.classList.add(\"has_submenu\");\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof(value) == \"function\")\r\n\t\t\t{\r\n\t\t\t\telement.dataset[\"value\"] = name;\r\n\t\t\t\telement.onclick_callback = value;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\telement.dataset[\"value\"] = value;\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild(element);\r\n\t\tif(!disabled)\r\n\t\t\telement.addEventListener(\"click\", inner_onclick);\r\n\t\tif(options.autoopen)\r\n\t\t\telement.addEventListener(\"mouseenter\", inner_over);\r\n\r\n\t\tfunction inner_over(e)\r\n\t\t{\r\n\t\t\tvar value = this.value;\r\n\t\t\tif(!value || !value.has_submenu)\r\n\t\t\t\treturn;\r\n\t\t\tinner_onclick.call(this,e);\r\n\t\t}\r\n\r\n\t\t//menu option clicked\r\n\t\tfunction inner_onclick(e) {\r\n\t\t\tvar value = this.value;\r\n\t\t\tvar close_parent = true;\r\n\r\n\t\t\tif(that.current_submenu)\r\n\t\t\t\tthat.current_submenu.close(e);\r\n\r\n\t\t\t//global callback\r\n\t\t\tif(options.callback) \r\n\t\t\t{\r\n\t\t\t\tvar r = options.callback.call(that, value, options, e );\r\n\t\t\t\tif(r === true)\r\n\t\t\t\t\tclose_parent = false;\r\n\t\t\t}\r\n\r\n\t\t\t//special cases\r\n\t\t\tif(value)\r\n\t\t\t{\r\n\t\t\t\tif (value.callback && !options.ignore_item_callbacks && value.disabled !== true )  //item callback\r\n\t\t\t\t{\r\n\t\t\t\t\tvar r = value.callback.call( this, value, options, e, that );\r\n\t\t\t\t\tif(r === true)\r\n\t\t\t\t\t\tclose_parent = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(value.submenu)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!value.submenu.options)\r\n\t\t\t\t\t\tthrow(\"ContextMenu submenu needs options\");\r\n\t\t\t\t\tvar submenu = new LiteGUI.ContextMenu( value.submenu.options, {\r\n\t\t\t\t\t\tcallback: value.submenu.callback,\r\n\t\t\t\t\t\tevent: e,\r\n\t\t\t\t\t\tparentMenu: that,\r\n\t\t\t\t\t\tignore_item_callbacks: value.submenu.ignore_item_callbacks,\r\n\t\t\t\t\t\ttitle: value.submenu.title,\r\n\t\t\t\t\t\tautoopen: options.autoopen\r\n\t\t\t\t\t});\r\n\t\t\t\t\tclose_parent = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(close_parent && !that.lock)\r\n\t\t\t\tthat.close();\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tContextMenu.prototype.close = function(e, ignore_parent_menu)\r\n\t{\r\n\t\tif(this.root.parentNode)\r\n\t\t\tthis.root.parentNode.removeChild( this.root );\r\n\t\tif(this.parentMenu && !ignore_parent_menu)\r\n\t\t{\r\n\t\t\tthis.parentMenu.lock = false;\r\n\t\t\tthis.parentMenu.current_submenu = null;\r\n\t\t\tif( e === undefined )\r\n\t\t\t\tthis.parentMenu.close();\r\n\t\t\telse if( e && !LiteGUI.isCursorOverElement( e, this.parentMenu.root) )\r\n\t\t\t\tLiteGUI.trigger( this.parentMenu.root, \"mouseleave\", e );\r\n\t\t}\r\n\t\tif(this.current_submenu)\r\n\t\t\tthis.current_submenu.close(e, true);\r\n\t\tif(this.root.closing_timer)\r\n\t\t\tclearTimeout( this.root.closing_timer );\r\n\t}\r\n\r\n\t//returns the top most menu\r\n\tContextMenu.prototype.getTopMenu = function()\r\n\t{\r\n\t\tif( this.options.parentMenu )\r\n\t\t\treturn this.options.parentMenu.getTopMenu();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tContextMenu.prototype.getFirstEvent = function()\r\n\t{\r\n\t\tif( this.options.parentMenu )\r\n\t\t\treturn this.options.parentMenu.getFirstEvent();\r\n\t\treturn this.options.event;\r\n\t}\r\n\r\n\tLiteGUI.ContextMenu = ContextMenu;\r\n\tLiteGUI.ContextualMenu = ContextMenu; //LEGACY: REMOVE\r\n\r\n\r\n\tfunction Checkbox( value, on_change)\r\n\t{\r\n\t\tvar that = this;\r\n\t\tthis.value = value;\r\n\r\n\t\tvar root = this.root = document.createElement(\"span\");\r\n\t\troot.className = \"litecheckbox inputfield\";\r\n\t\troot.dataset[\"value\"] = value;\r\n\r\n\t\tvar element = this.element = document.createElement(\"span\");\r\n\t\telement.className = \"fixed flag checkbox \"+(value ? \"on\" : \"off\");\r\n\t\troot.appendChild( element );\r\n\t\t\r\n\t\troot.addEventListener(\"click\", onClick.bind(this) );\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\tthis.setValue( this.root.dataset[\"value\"] != \"true\" );\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\tthis.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(this.value === v)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif( this.root.dataset[\"value\"] == v.toString())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis.root.dataset[\"value\"] = v;\r\n\t\t\tif(v)\r\n\t\t\t{\r\n\t\t\t\tthis.element.classList.remove(\"off\");\r\n\t\t\t\tthis.element.classList.add(\"on\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.element.classList.remove(\"on\");\r\n\t\t\t\tthis.element.classList.add(\"off\");\r\n\t\t\t}\r\n\t\t\tvar old_value = this.value;\r\n\t\t\tthis.value = v;\r\n\r\n\t\t\tif(on_change)\r\n\t\t\t\ton_change( v, old_value );\r\n\t\t}\r\n\r\n\t\tthis.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.value;\r\n\t\t\t//return this.root.dataset[\"value\"] == \"true\";\r\n\t\t}\r\n\t}\t\r\n\r\n\tLiteGUI.Checkbox = Checkbox;\r\n\r\n\r\n\t//the tiny box to expand the children of a node\r\n\tfunction createLitebox(state, on_change)\r\n\t{\r\n\t\tvar element = document.createElement(\"span\");\r\n\t\telement.className = \"listbox \" + (state ? \"listopen\" : \"listclosed\");\r\n\t\telement.innerHTML = state ? \"&#9660;\" : \"&#9658;\";\r\n\t\telement.dataset[\"value\"] = state ? \"open\" : \"closed\";\r\n\t\telement.addEventListener(\"click\", onClick );\r\n\t\telement.on_change_callback = on_change;\r\n\r\n\t\telement.setEmpty = function(v)\r\n\t\t{\r\n\t\t\tif(v)\r\n\t\t\t\tthis.classList.add(\"empty\");\r\n\t\t\telse\r\n\t\t\t\tthis.classList.remove(\"empty\");\r\n\t\t}\r\n\r\n\t\telement.expand = function()\r\n\t\t{\r\n\t\t\tthis.setValue(true);\r\n\t\t}\r\n\r\n\t\telement.collapse = function()\r\n\t\t{\r\n\t\t\tthis.setValue(false);\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(this.dataset[\"value\"] == (v ? \"open\" : \"closed\"))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(!v)\r\n\t\t\t{\r\n\t\t\t\tthis.dataset[\"value\"] = \"closed\";\r\n\t\t\t\tthis.innerHTML = \"&#9658;\";\r\n\t\t\t\tthis.classList.remove(\"listopen\");\r\n\t\t\t\tthis.classList.add(\"listclosed\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.dataset[\"value\"] = \"open\";\r\n\t\t\t\tthis.innerHTML = \"&#9660;\";\r\n\t\t\t\tthis.classList.add(\"listopen\");\r\n\t\t\t\tthis.classList.remove(\"listclosed\");\r\n\t\t\t}\r\n\r\n\t\t\tif(on_change)\r\n\t\t\t\ton_change( this.dataset[\"value\"] );\r\n\t\t}\r\n\r\n\t\telement.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.dataset[\"value\"];\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\t//console.log(\"CLICK\");\r\n\t\t\tvar box = e.target;\r\n\t\t\tbox.setValue( this.dataset[\"value\"] == \"open\" ? false : true );\r\n\t\t\tif(this.stopPropagation)\r\n\t\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\t\r\n\r\n\tLiteGUI.createLitebox = createLitebox;\r\n\r\n\t/**\r\n\t* List \r\n\t*\r\n\t* @class List\r\n\t* @constructor\r\n\t* @param {String} id\r\n\t* @param {Array} values\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction List( id, items, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = this.root = document.createElement(\"ul\");\r\n\t\troot.id = id;\r\n\t\troot.className = \"litelist\";\r\n\t\tthis.items = [];\r\n\t\tvar that = this;\r\n\r\n\t\tthis.callback = options.callback;\r\n\r\n\t\t//walk over every item in the list\r\n\t\tfor(var i in items)\r\n\t\t{\r\n\t\t\tvar item = document.createElement(\"li\");\r\n\t\t\titem.className = \"list-item\";\r\n\t\t\titem.data = items[i];\r\n\t\t\titem.dataset[\"value\"] = items[i];\r\n\r\n\t\t\tvar content = \"\";\r\n\t\t\tif(typeof(items[i]) == \"string\")\r\n\t\t\t\tcontent = items[i] + \"<span class='arrow'></span>\";\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tcontent = (items[i].name || items[i].title || \"\") + \"<span class='arrow'></span>\";\r\n\t\t\t\tif(items[i].id)\r\n\t\t\t\t\titem.id = items[i].id;\r\n\t\t\t}\r\n\t\t\titem.innerHTML = content;\r\n\r\n\t\t\titem.addEventListener(\"click\", function() {\r\n\r\n\t\t\t\tvar list = root.querySelectorAll(\".list-item.selected\");\r\n\t\t\t\tfor(var j = 0; j < list.length; ++j)\r\n\t\t\t\t\tlist[j].classList.remove(\"selected\");\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\t\tLiteGUI.trigger( that.root, \"wchanged\", this );\r\n\t\t\t\tif(that.callback)\r\n\t\t\t\t\tthat.callback( this.data  );\r\n\t\t\t});\r\n\r\n\t\t\troot.appendChild(item);\r\n\t\t}\r\n\r\n\r\n\t\tif(options.parent)\r\n\t\t{\r\n\t\t\tif(options.parent.root)\r\n\t\t\t\toptions.parent.root.appendChild( root );\r\n\t\t\telse\r\n\t\t\t\toptions.parent.appendChild( root );\r\n\t\t}\r\n\t}\r\n\r\n\tList.prototype.getSelectedItem = function()\r\n\t{\r\n\t\treturn this.root.querySelector(\".list-item.selected\");\r\n\t}\r\n\r\n\tList.prototype.setSelectedItem = function( name )\r\n\t{\r\n\t\tvar items = this.root.querySelectorAll(\".list-item\");\r\n\t\tfor(var i = 0; i < items.length; i++)\r\n\t\t{\r\n\t\t\tvar item = items[i];\r\n\t\t\tif(item.data == name)\r\n\t\t\t{\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tLiteGUI.List = List;\r\n\r\n\t/**\r\n\t* Slider \r\n\t*\r\n\t* @class Slider\r\n\t* @constructor\r\n\t* @param {Number} value\r\n\t* @param {Object} options\r\n\t*/\r\n\tfunction Slider(value, options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar root = this.root = document.createElement(\"div\");\r\n\t\tvar that = this;\r\n\t\tthis.value = value;\r\n\t\troot.className = \"liteslider\";\r\n\r\n\t\tthis.setValue = function(value, skip_event)\r\n\t\t{\r\n\t\t\t//var width = canvas.getClientRects()[0].width;\r\n\t\t\tvar min = options.min || 0.0;\r\n\t\t\tvar max = options.max || 1.0;\r\n\t\t\tif(value < min) value = min;\r\n\t\t\telse if(value > max) value = max;\r\n\t\t\tvar range = max - min;\r\n\t\t\tvar norm = (value - min) / range;\r\n\t\t\tvar percentage = (norm*100).toFixed(1) + \"%\";\r\n\t\t\tvar percentage2 = (norm*100+2).toFixed(1) + \"%\";\r\n\t\t\troot.style.background = \"linear-gradient(to right, #999 \" + percentage + \", #FC0 \"+percentage2+\", #333 \" + percentage2 + \")\";\r\n\r\n\t\t\tif(value != this.value)\r\n\t\t\t{\r\n\t\t\t\tthis.value = value;\r\n\t\t\t\tif(!skip_event)\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.trigger(this.root, \"change\", value );\r\n\t\t\t\t\tif(this.onChange)\r\n\t\t\t\t\t\tthis.onChange( value );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction setFromX(x)\r\n\t\t{\r\n\t\t\tvar rect = root.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn;\r\n\t\t\tvar width = rect.width;\r\n\t\t\tvar norm = x / width;\r\n\t\t\tvar min = options.min || 0.0;\r\n\t\t\tvar max = options.max || 1.0;\r\n\t\t\tvar range = max - min;\r\n\t\t\tthat.setValue( range * norm + min );\r\n\t\t}\r\n\r\n\t\tvar doc_binded = null;\r\n\r\n\t\troot.addEventListener(\"mousedown\", function(e) {\r\n\t\t\tvar mouseX, mouseY;\r\n\t\t\tif(e.offsetX) { mouseX = e.offsetX; mouseY = e.offsetY; }\r\n\t\t\telse if(e.layerX) { mouseX = e.layerX; mouseY = e.layerY; }\t\r\n\t\t\tsetFromX(mouseX);\r\n\t\t\tdoc_binded = root.ownerDocument;\r\n\t\t\tdoc_binded.addEventListener(\"mousemove\", onMouseMove );\r\n\t\t\tdoc_binded.addEventListener(\"mouseup\", onMouseUp );\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tfunction onMouseMove(e)\r\n\t\t{\r\n\t\t\tvar rect = root.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn;\r\n\t\t\tvar x = e.x === undefined ? e.pageX : e.x;\r\n\t\t\tvar mouseX = x - rect.left;\r\n\t\t\tsetFromX(mouseX);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction onMouseUp(e)\r\n\t\t{\r\n\t\t\tvar doc = doc_binded || document;\r\n\t\t\tdoc_binded = null;\r\n\t\t\tdoc.removeEventListener(\"mousemove\", onMouseMove );\r\n\t\t\tdoc.removeEventListener(\"mouseup\", onMouseUp );\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.setValue(value);\r\n\t}\r\n\r\n\tLiteGUI.Slider = Slider;\r\n\r\n\t/**\r\n\t* LineEditor \r\n\t*\r\n\t* @class LineEditor\r\n\t* @constructor\r\n\t* @param {Number} value\r\n\t* @param {Object} options\r\n\t*/\r\n\r\n\tfunction LineEditor(value, options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"curve \" + (options.extraclass ? options.extraclass : \"\");\r\n\t\telement.style.minHeight = \"50px\";\r\n\t\telement.style.width = options.width || \"100%\";\r\n\r\n\t\telement.bgcolor = options.bgcolor || \"#222\";\r\n\t\telement.pointscolor = options.pointscolor || \"#5AF\";\r\n\t\telement.linecolor = options.linecolor || \"#444\";\r\n\r\n\t\telement.value = value || [];\r\n\t\telement.xrange = options.xrange || [0,1]; //min,max\r\n\t\telement.yrange = options.yrange || [0,1]; //min,max\r\n\t\telement.defaulty = options.defaulty != null ? options.defaulty : 0.5;\r\n\t\telement.no_trespassing = options.no_trespassing || false;\r\n\t\telement.show_samples = options.show_samples || 0;\r\n\t\telement.options = options;\r\n\t\telement.style.minWidth = \"50px\";\r\n\t\telement.style.minHeight = \"20px\";\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tcanvas.width = options.width || 200;\r\n\t\tcanvas.height = options.height || 50;\r\n\t\telement.appendChild( canvas );\r\n\t\telement.canvas = canvas;\r\n\r\n\t\telement.addEventListener(\"mousedown\",onmousedown);\r\n\r\n\t\telement.getValueAt = function(x)\r\n\t\t{\r\n\t\t\tif(x < element.xrange[0] || x > element.xrange[1])\r\n\t\t\t\treturn element.defaulty;\r\n\r\n\t\t\tvar last = [ element.xrange[0], element.defaulty ];\r\n\t\t\tvar f = 0;\r\n\t\t\tfor(var i = 0; i < element.value.length; i += 1)\r\n\t\t\t{\r\n\t\t\t\tvar v = element.value[i];\r\n\t\t\t\tif(x == v[0]) return v[1];\r\n\t\t\t\tif(x < v[0])\r\n\t\t\t\t{\r\n\t\t\t\t\tf = (x - last[0]) / (v[0] - last[0]);\r\n\t\t\t\t\treturn last[1] * (1-f) + v[1] * f;\r\n\t\t\t\t}\r\n\t\t\t\tlast = v;\r\n\t\t\t}\r\n\r\n\t\t\tv = [ element.xrange[1], element.defaulty ];\r\n\t\t\tf = (x - last[0]) / (v[0] - last[0]);\r\n\t\t\treturn last[1] * (1-f) + v[1] * f;\r\n\t\t}\r\n\r\n\t\telement.resample = function(samples)\r\n\t\t{\r\n\t\t\tvar r = [];\r\n\t\t\tvar dx = (element.xrange[1] - element.xrange[0]) / samples;\r\n\t\t\tfor(var i = element.xrange[0]; i <= element.xrange[1]; i += dx)\r\n\t\t\t{\r\n\t\t\t\tr.push( element.getValueAt(i) );\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\telement.addValue = function(v)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < element.value; i++)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tif(value[0] < v[0]) continue;\r\n\t\t\t\telement.value.splice(i,0,v);\r\n\t\t\t\tredraw();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\telement.value.push(v);\r\n\t\t\tredraw();\r\n\t\t}\r\n\r\n\t\t//value to canvas\r\n\t\tfunction convert(v)\r\n\t\t{\r\n\t\t\treturn [ canvas.width * ( (element.xrange[1] - element.xrange[0]) * v[0] + element.xrange[0]),\r\n\t\t\t\tcanvas.height * ((element.yrange[1] - element.yrange[0]) * v[1] + element.yrange[0])];\r\n\t\t}\r\n\r\n\t\t//canvas to value\r\n\t\tfunction unconvert(v)\r\n\t\t{\r\n\t\t\treturn [(v[0] / canvas.width - element.xrange[0]) / (element.xrange[1] - element.xrange[0]),\r\n\t\t\t\t\t(v[1] / canvas.height - element.yrange[0]) / (element.yrange[1] - element.yrange[0])];\r\n\t\t}\r\n\r\n\t\tvar selected = -1;\r\n\r\n\t\telement.redraw = function()\r\n\t\t{\r\n\t\t\tvar rect = canvas.parentNode.getBoundingClientRect();\r\n\t\t\tif(rect && canvas.width != rect.width && rect.width && rect.width < 1000)\r\n\t\t\t\tcanvas.width = rect.width;\r\n\t\t\tif(rect && canvas.height != rect.height && rect.height && rect.height < 1000)\r\n\t\t\t\tcanvas.height = rect.height;\r\n\r\n\t\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\tctx.translate(0,canvas.height);\r\n\t\t\tctx.scale(1,-1);\r\n\r\n\t\t\tctx.fillStyle = element.bgcolor;\r\n\t\t\tctx.fillRect(0,0,canvas.width,canvas.height);\r\n\r\n\t\t\tctx.strokeStyle = element.linecolor;\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\t//draw line\r\n\t\t\tvar pos = convert([element.xrange[0],element.defaulty]);\r\n\t\t\tctx.moveTo( pos[0], pos[1] );\r\n\r\n\t\t\tfor(var i in element.value)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tpos = convert(value);\r\n\t\t\t\tctx.lineTo( pos[0], pos[1] );\r\n\t\t\t}\r\n\r\n\t\t\tpos = convert([element.xrange[1],element.defaulty]);\r\n\t\t\tctx.lineTo( pos[0], pos[1] );\r\n\t\t\tctx.stroke();\r\n\r\n\t\t\t//draw points\r\n\t\t\tfor(var i = 0; i < element.value.length; i += 1)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tpos = convert(value);\r\n\t\t\t\tif(selected == i)\r\n\t\t\t\t\tctx.fillStyle = \"white\";\r\n\t\t\t\telse\r\n\t\t\t\t\tctx.fillStyle = element.pointscolor;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc( pos[0], pos[1], selected == i ? 4 : 2, 0, Math.PI * 2);\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\r\n\t\t\tif(element.show_samples)\r\n\t\t\t{\r\n\t\t\t\tvar samples = element.resample(element.show_samples);\r\n\t\t\t\tctx.fillStyle = \"#888\";\r\n\t\t\t\tfor(var i = 0; i < samples.length; i += 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar value = [ i * ((element.xrange[1] - element.xrange[0]) / element.show_samples) + element.xrange[0], samples[i] ];\r\n\t\t\t\t\tpos = convert(value);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc( pos[0], pos[1], 2, 0, Math.PI * 2);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar last_mouse = [0,0];\r\n\t\tfunction onmousedown(evt)\r\n\t\t{\r\n\t\t\tdocument.addEventListener(\"mousemove\",onmousemove);\r\n\t\t\tdocument.addEventListener(\"mouseup\",onmouseup);\r\n\r\n\t\t\tvar rect = canvas.getBoundingClientRect();\r\n\t\t\tvar mousex = evt.clientX - rect.left;\r\n\t\t\tvar mousey = evt.clientY - rect.top;\r\n\r\n\t\t\tselected = computeSelected(mousex,canvas.height-mousey);\r\n\r\n\t\t\tif(selected == -1)\r\n\t\t\t{\r\n\t\t\t\tvar v = unconvert([mousex,canvas.height-mousey]);\r\n\t\t\t\telement.value.push(v);\r\n\t\t\t\tsortValues();\r\n\t\t\t\tselected = element.value.indexOf(v);\r\n\t\t\t}\r\n\r\n\t\t\tlast_mouse = [mousex,mousey];\r\n\t\t\telement.redraw();\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\r\n\t\tfunction onmousemove(evt)\r\n\t\t{\r\n\t\t\tvar rect = canvas.getBoundingClientRect();\r\n\t\t\tvar mousex = evt.clientX - rect.left;\r\n\t\t\tvar mousey = evt.clientY - rect.top;\r\n\r\n\t\t\tif(mousex < 0) mousex = 0;\r\n\t\t\telse if(mousex > canvas.width) mousex = canvas.width;\r\n\t\t\tif(mousey < 0) mousey = 0;\r\n\t\t\telse if(mousey > canvas.height) mousey = canvas.height;\r\n\r\n\t\t\t//dragging to remove\r\n\t\t\tif( selected != -1 && distance( [evt.clientX - rect.left, evt.clientY - rect.top], [mousex,mousey] ) > canvas.height * 0.5 )\r\n\t\t\t{\r\n\t\t\t\telement.value.splice(selected,1);\r\n\t\t\t\tonmouseup(evt);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar dx = last_mouse[0] - mousex;\r\n\t\t\tvar dy = last_mouse[1] - mousey;\r\n\t\t\tvar delta = unconvert([-dx,dy]);\r\n\t\t\tif(selected != -1)\r\n\t\t\t{\r\n\t\t\t\tvar minx = element.xrange[0];\r\n\t\t\t\tvar maxx = element.xrange[1];\r\n\r\n\t\t\t\tif(element.no_trespassing)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(selected > 0) minx = element.value[selected-1][0];\r\n\t\t\t\t\tif(selected < (element.value.length-1) ) maxx = element.value[selected+1][0];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar v = element.value[selected];\r\n\t\t\t\tv[0] += delta[0];\r\n\t\t\t\tv[1] += delta[1];\r\n\t\t\t\tif(v[0] < minx) v[0] = minx;\r\n\t\t\t\telse if(v[0] > maxx) v[0] = maxx;\r\n\t\t\t\tif(v[1] < element.yrange[0]) v[1] = element.yrange[0];\r\n\t\t\t\telse if(v[1] > element.yrange[1]) v[1] = element.yrange[1];\r\n\t\t\t}\r\n\r\n\t\t\tsortValues();\r\n\t\t\telement.redraw();\r\n\t\t\tlast_mouse[0] = mousex;\r\n\t\t\tlast_mouse[1] = mousey;\r\n\t\t\tonchange();\r\n\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\r\n\t\tfunction onmouseup(evt)\r\n\t\t{\r\n\t\t\tselected = -1;\r\n\t\t\telement.redraw();\r\n\t\t\tdocument.removeEventListener(\"mousemove\",onmousemove);\r\n\t\t\tdocument.removeEventListener(\"mouseup\",onmouseup);\r\n\t\t\tonchange();\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\r\n\t\tfunction onresize(e)\r\n\t\t{\r\n\t\t\telement.redraw();\r\n\t\t}\r\n\t\t\r\n\t\tfunction onchange()\r\n\t\t{\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call(element,element.value);\r\n\t\t\telse\r\n\t\t\t\tLiteGUI.trigger(element,\"change\");\r\n\t\t}\r\n\r\n\t\tfunction distance(a,b) { return Math.sqrt( Math.pow(b[0]-a[0],2) + Math.pow(b[1]-a[1],2) ); };\r\n\r\n\t\tfunction computeSelected(x,y)\r\n\t\t{\r\n\t\t\tvar min_dist = 100000;\r\n\t\t\tvar max_dist = 8; //pixels\r\n\t\t\tvar selected = -1;\r\n\t\t\tfor(var i=0; i < element.value.length; i++)\r\n\t\t\t{\r\n\t\t\t\tvar value = element.value[i];\r\n\t\t\t\tvar pos = convert(value);\r\n\t\t\t\tvar dist = distance([x,y],pos);\r\n\t\t\t\tif(dist < min_dist && dist < max_dist)\r\n\t\t\t\t{\r\n\t\t\t\t\tmin_dist = dist;\r\n\t\t\t\t\tselected = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selected;\r\n\t\t}\r\n\r\n\t\tfunction sortValues()\r\n\t\t{\r\n\t\t\tvar v = null;\r\n\t\t\tif(selected != -1)\r\n\t\t\t\tv = element.value[selected];\r\n\t\t\telement.value.sort(function(a,b) { return a[0] - b[0]; });\r\n\t\t\tif(v)\r\n\t\t\t\tselected = element.value.indexOf(v);\r\n\t\t}\r\n\t\t\r\n\t\telement.redraw();\r\n\t\treturn element;\r\n\t}\r\n\r\n\tLiteGUI.LineEditor = LineEditor;\r\n\r\n\r\n\tfunction ComplexList( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"div\");\r\n\t\tthis.root.className = \"litecomplexlist\";\r\n\r\n\t\tthis.item_code = options.item_code || \"<div class='listitem'><span class='tick'><span>\"+LiteGUI.special_codes.tick+\"</span></span><span class='title'></span><button class='trash'>\"+LiteGUI.special_codes.close+\"</button></div>\";\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\r\n\t\tthis.selected = null;\r\n\t\tthis.onItemSelected = null;\r\n\t\tthis.onItemToggled = null;\r\n\t\tthis.onItemRemoved = null;\r\n\t}\r\n\r\n\tComplexList.prototype.addTitle = function( text )\r\n\t{\r\n\t\tvar elem = LiteGUI.createElement(\"div\",\".listtitle\",text);\r\n\t\tthis.root.appendChild( elem );\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tComplexList.prototype.addHTML = function( html, on_click )\r\n\t{\r\n\t\tvar elem = LiteGUI.createElement(\"div\",\".listtext\", html );\r\n\t\tif(on_click)\r\n\t\t\telem.addEventListener(\"mousedown\", on_click);\r\n\t\tthis.root.appendChild( elem );\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tComplexList.prototype.clear = function()\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\t}\r\n\r\n\tComplexList.prototype.addItem = function( item, text, is_enabled, can_be_removed )\r\n\t{\r\n\t\tvar title = text || item.content || item.name;\r\n\t\tvar elem = LiteGUI.createListItem( this.item_code, { \".title\": title } );\r\n\t\telem.item = item;\r\n\r\n\t\tif(is_enabled)\r\n\t\t\telem.classList.add(\"enabled\");\r\n\r\n\t\tif(!can_be_removed)\r\n\t\t\telem.querySelector(\".trash\").style.display = \"none\";\r\n\r\n\t\tvar that = this;\r\n\t\telem.addEventListener(\"mousedown\", function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.setSelected(true);\r\n\t\t\tif(that.onItemSelected)\r\n\t\t\t\tthat.onItemSelected( item, elem );\r\n\t\t});\r\n\t\telem.querySelector(\".tick\").addEventListener(\"mousedown\",  function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\telem.classList.toggle(\"enabled\");\r\n\t\t\tif(that.onItemToggled)\r\n\t\t\t\tthat.onItemToggled( item, elem, elem.classList.contains(\"enabled\"));\r\n\t\t});\r\n\r\n\t\telem.querySelector(\".trash\").addEventListener(\"mousedown\",function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tif(that.onItemRemoved)\r\n\t\t\t\tthat.onItemRemoved( item, elem );\r\n\t\t});\r\n\r\n\t\telem.setContent = function(v, is_html){\r\n\t\t\tif(is_html)\r\n\t\t\t\telem.querySelector(\".title\").innerHTML = v;\r\n\t\t\telse\r\n\t\t\t\telem.querySelector(\".title\").innerText = v;\r\n\t\t}\r\n\r\n\t\telem.toggleEnabled = function(v){\r\n\t\t\telem.classList.toggle(\"enabled\");\r\n\t\t}\r\n\r\n\t\telem.setSelected = function(v)\r\n\t\t{\r\n\t\t\tLiteGUI.removeClass( that.root, \"selected\" );\r\n\t\t\tif(v)\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\telse\r\n\t\t\t\tthis.classList.remove(\"selected\");\r\n\t\t\tthat.selected = elem.item;\r\n\t\t}\r\n\r\n\t\telem.show = function() { this.style.display = \"\"; }\r\n\t\telem.hide = function() { this.style.display = \"none\"; }\r\n\r\n\t\tthis.root.appendChild( elem );\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tLiteGUI.ComplexList = ComplexList;\r\n\r\n\treturn LiteGUI;\r\n});\ndefine('skylark-litegui/main',[\r\n\t\"./litegui\",\r\n\t\"./Area\",\r\n\t\"./Console\",\r\n\t\"./Dialog\",\r\n\t\"./Dragger\",\r\n\t\"./Inspector\",\r\n\t\"./Menubar\",\r\n\t\"./Panel\",\r\n\t\"./Split\",\r\n\t\"./Table\",\r\n\t\"./Tabs\",\r\n\t\"./Tree\",\r\n\t\"./widgets\"\r\n],function(LiteGUI){\r\n\treturn LiteGUI;\r\n});\ndefine('skylark-litegui', ['skylark-litegui/main'], function (main) { return main; });\n\n"]}
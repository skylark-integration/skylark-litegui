/**
 * skylark-litegui - A version of litegui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-litegui/
 * @license MIT
 */
define(["./litegui"],function(e){function t(t){if(t&&t.constructor===String){var n=t;(t=arguments[1]||{}).id=n,console.warn("LiteGUI.Inspector legacy parameter, use options as first parameter instead of id.")}t=t||{},this.root=document.createElement("DIV"),this.root.className="inspector "+(t.full?"full":"")+(t.className||""),t.one_line&&(this.one_line=!0,this.root.className+=" one_line"),t.id&&(this.root.id=t.id),this.sections=[],this.values={},this.widgets=[],this.widgets_by_name={},this.row_number=0,this.addContainer(),this.tab_index=Math.floor(1e4*Math.random()),t.width&&(this.root.style.width=e.sizeToCSS(t.width)),t.height&&(this.root.style.height=e.sizeToCSS(t.height),t.one_line||(this.root.style.overflow="auto")),t.name_width&&(this.name_width=t.name_width),t.widgets_width&&(this.widgets_width=t.widgets_width),t.noscroll&&(this.root.style.overflow="hidden"),t.onchange&&(this.onchange=t.onchange),t.parent&&this.appendTo(t.parent),this.className=this.root.className,this.widgets_per_row=t.widgets_per_row||1}return t.prototype.getValues=function(){var e={};for(var t in this.widgets_by_name)e[t]=this.widgets_by_name[t].getValue();return e},t.prototype.setValues=function(e){for(var t in e)this.widgets_by_name[t]&&this.widgets_by_name[t].setValue(e[t])},t.prototype.appendTo=function(e,t){e&&(e.constructor===String&&(e=document.querySelector(e)),e&&(t?e.insertBefore(this.root,e.firstChild):e.appendChild(this.root)))},t.prototype.clear=function(){for(purgeElement(this.root,!0);this.root.hasChildNodes();)this.root.removeChild(this.root.lastChild);this.root.className=this.className,this.row_number=0,this.values={},this.widgets=[],this.widgets_by_name={},this.sections=[],this.current_section=null,this._current_container=null,this._current_container_stack=null,this.addContainer()},t.prototype.refresh=function(){this.on_refresh&&this.on_refresh()},t.prototype.append=function(e,t){var n=(t=t||{}).widget_parent||this._current_container||this.root;t.replace?t.replace.parentNode.replaceChild(e,t.replace):(e.section=this.current_section,n.appendChild(e))},t.prototype.pushContainer=function(e){if(this._current_container_stack){if(-1!=this._current_container_stack.indexOf(e))return void console.warn("Container already in the stack");this._current_container_stack.push(e)}else this._current_container_stack=[e];this._current_container=e},t.prototype.isContainerInStack=function(e){return!!this._current_container_stack&&-1!=this._current_container_stack.indexOf(e)},t.prototype.popContainer=function(e){if(this.row_number=0,this._current_container_stack&&this._current_container_stack.length){if(e)for(var t=this._current_container_stack.pop();t&&t!=e;)t=this._current_container_stack.pop();else this._current_container_stack.pop();this._current_container=this._current_container_stack[this._current_container_stack.length-1]}else this._current_container=null},t.prototype.setup=function(e){for(var t in e){var n=e[t];this.add(n.type,n.name,n.value,n.options)}},t.prototype.getWidget=function(e){return null!==e&&e.constructor===Number?this.widgets[e]:this.widgets_by_name[e]},t.prototype.inspectInstance=function(e,t,n,i){if(e){t||(t=e.getProperties?e.getProperties():this.collectProperties(e));var a=e.constructor;!n&&a.properties&&(n=a.properties);var r={};if(e.getInspectorProperties)r=e.getInspectorProperties();else for(var s in t)if(n&&n[s])r[s]=p(n[s]);else{var o=t[s];if(a["@"+s]){var l=a["@"+s];if(l&&null===l.widget)continue;r[s]=p(l)}else if(e["@"+s])r[s]=e["@"+s];else{if(null===o||void 0===o)continue;switch(o.constructor){case Number:r[s]={type:"number",step:.1};break;case String:r[s]={type:"string"};break;case Boolean:r[s]={type:"boolean"};break;default:if(o&&(o.constructor===Array||o.constructor.BYTES_PER_ELEMENT)){var c=null!=o[0]&&o[0].constructor===Number;switch(o.length){case 2:r[s]={type:c?"vec2":"Array",step:.1};break;case 3:r[s]={type:c?"vec3":"Array",step:.1};break;case 4:r[s]={type:c?"vec4":"Array",step:.1};break;default:r[s]={type:"Array"}}}}}}if(i)for(var s in i)delete r[i[s]];if(a.properties_order){var d={};for(var s in a.properties_order){var u=a.properties_order[s];r[u]?d[u]=r[u]:console.warn("property not found in instance:",u)}for(var s in r)d[s]||(d[s]=r[s]);r=d}return this.showProperties(e,r)}function p(e,t){for(var n in t=t||{},e)t[n]=e[n];return t}},t.prototype.collectProperties=function(e){var t={};for(var n in e)if("_"!=n[0]&&"@"!=n[0]&&"jQuery"!=n.substr(0,6)){var i=e[n];i&&i.constructor==Function&&!e.constructor["@"+n]||(t[n]=i)}return t},t.prototype.showProperties=function(e,n){for(var i in n){var a=i,r=n[i];if(r){if(r.constructor===String&&(r={type:r}),r.name&&(a=r.name),!r.callback){var s={instance:e,name:a,options:r};"function"==r.type||(r.callback=t.assignValue.bind(s))}if(!r.callback_update){s={instance:e,name:a};r.callback_update=function(){return this.instance[this.name]}.bind(s)}r.instance=e,r.varname=a;var o=r.widget||r.type||"string";this.on_addProperty&&this.on_addProperty(o,e,a,e[a],r),this.add(o,a,e[a],r)}}if(e.constructor.widgets)for(var i in e.constructor.widgets){var l=e.constructor.widgets[i];this.add(l.widget,l.name,l.value,l)}e.onShowProperties&&e.onShowProperties(this),e.constructor.onShowProperties&&e.constructor.onShowProperties(e,this)},t.assignValue=function(e){var t=this.instance,n=t[this.name];if(null==n||null==e||"enum"==this.options.type)t[this.name]=e;else if("number"==typeof n)t[this.name]=parseFloat(e);else if("string"==typeof n)t[this.name]=e;else if(!(e&&e.length&&n&&n.length)||Object.getOwnPropertyDescriptor(t,this.name)&&Object.getOwnPropertyDescriptor(t,this.name).set||Object.getOwnPropertyDescriptor(t.__proto__,this.name)&&Object.getOwnPropertyDescriptor(t.__proto__,this.name).set)t[this.name]=e;else for(var i=0;i<e.length;++i)n[i]=e[i]},t.prototype.createWidget=function(t,n,i){i=i||{},n=void 0===n||null===n?"":n;var a=document.createElement("DIV");a.className="widget "+(i.className||""),a.inspector=this,a.options=i,a.name=t,this.row_number+=this.widgets_per_row,this.row_number%2==0&&(a.className+=" even");var r=i.width||this.widgets_width;r&&(a.style.width=e.sizeToCSS(r),a.style.width||(a.style.width="calc("+e.sizeToCSS(r)+")"),a.style.minWidth="auto");var s=i.height||this.height;s&&(a.style.height=e.sizeToCSS(s),a.style.height||(a.style.height="calc("+e.sizeToCSS(s)+")"),a.style.minHeight="auto"),this.widgets.push(a),(i.widget_name||t)&&(this.widgets_by_name[i.widget_name||t]=a),1!=this.widgets_per_row&&(i.width||(a.style.width=(100/this.widgets_per_row).toFixed(2)+"%"),a.style.display="inline-block");var o="",l="";if(void 0!==t&&null!==t&&(this.name_width||i.name_width)&&!this.one_line){var c=e.sizeToCSS(i.name_width||this.name_width);o="style='width: calc("+c+" - 0px); width: -webkit-calc("+c+" - 0px); width: -moz-calc("+c+" - 0px); '",l="style='width: calc( 100% - "+c+"); width: -webkit-calc(100% - "+c+"); width: -moz-calc( 100% - "+c+"); '"}i.name_width&&(o="style='width: "+e.sizeToCSS(i.name_width)+" '"),i.content_width&&(l="style='width: "+e.sizeToCSS(i.content_width)+" '");var d="",u="",p=this.one_line?"":"<span class='filling'></span>";i.pretitle&&(u=i.pretitle);var h="wcontent ",g=t;if(i.title&&(g=i.title),null===t||void 0===t?h+=" full":d+=""===t?"<span class='wname' title='"+g+"' "+o+">"+u+"</span>":"<span class='wname' title='"+g+"' "+o+">"+u+t+p+"</span>",n.constructor===String||n.constructor===Number||n.constructor===Boolean)a.innerHTML=d+"<span class='info_content "+h+"' "+l+">"+n+"</span>";else{a.innerHTML=d+"<span class='info_content "+h+"' "+l+"></span>";var f=a.querySelector("span.info_content");f&&f.appendChild(n)}return a.content=a.querySelector("span.info_content"),a.remove=function(){this.parentNode&&this.parentNode.removeChild(this)},a},t.onWidgetChange=function(t,n,i,a,r,s){var o=t.section;a.skip_wchange||(o&&e.trigger(o,"wbeforechange",i),e.trigger(t,"wbeforechange",i)),this.values[n]=i;var l=void 0;return a.callback&&(l=r?a.callback.apply(t,i):a.callback.call(t,i,s)),a.skip_wchange||(o&&e.trigger(o,"wchange",i,t),e.trigger(t,"wchange",i,t)),this.onchange&&this.onchange(n,i,t),l},t.widget_constructors={null:"addNull",title:"addTitle",info:"addInfo",default:"addDefault",number:"addNumber",slider:"addSlider",string:"addString",text:"addString",textarea:"addTextarea",color:"addColor",boolean:"addCheckbox",checkbox:"addCheckbox",icon:"addIcon",vec2:"addVector2",vector2:"addVector2",vec3:"addVector3",vector3:"addVector3",vec4:"addVector4",vector4:"addVector4",enum:"addCombo",dropdown:"addCombo",combo:"addCombo",button:"addButton",buttons:"addButtons",file:"addFile",line:"addLine",list:"addList",tree:"addTree",datatree:"addDataTree",pad:"addPad",array:"addArray",separator:"addSeparator"},t.registerWidget=function(e,n){var i="add"+e.charAt(0).toUpperCase()+e.slice(1);t.prototype[i]=n,t.widget_constructors[e]=i},t.prototype.add=function(t,n,i,a){if(!t)throw"Inspector: no type specified";1==arguments.length&&"object"==typeof t&&(t=(a=t).type,n=a.name,i=a.value);var r=e.Inspector.widget_constructors[t.toLowerCase()];if(r){if(r.constructor===String&&(r=e.Inspector.prototype[r]),r&&r.constructor===Function)return a&&a.constructor===Function&&(a={callback:a}),r.call(this,n,i,a)}else console.warn("LiteGUI.Inspector do not have a widget called",t)},t.prototype.getValue=function(e){return this.values[e]},t.prototype.applyOptions=function(t,n){t&&n&&(n.className&&(t.className+=" "+n.className),n.id&&(t.id=n.id),n.width&&(t.style.width=e.sizeToCSS(n.width)),n.height&&(t.style.height=e.sizeToCSS(n.height)))},t.prototype.addSeparator=function(){var e=document.createElement("DIV");return e.className="separator",this.append(e),e},t.prototype.addNull=function(e,t,n){return null},t.prototype.addDefault=function(e,t,n){return null===t||void 0===t?null:t.constructor===Boolean?this.addCheckbox(e,t,n):t.constructor===String?this.addString(e,t,n):t.constructor===Number?this.addNumber(e,t,n):4==t.length?this.addVector4(e,t,n):3==t.length?this.addVector3(e,t,n):2==t.length?this.addVector2(e,t,n):null},t.prototype.addString=function(n,i,a){a=this.processOptions(a),i=i||"";var r=this;this.values[n]=i;var s="text";a.password&&(s="password");var o=a.focus?"autofocus":"",l=this.createWidget(n,"<span class='inputfield full "+(a.disabled?"disabled":"")+"'><input type='"+s+"' tabIndex='"+this.tab_index+"' "+o+" class='text string' value='"+i+"' "+(a.disabled?"disabled":"")+"/></span>",a),c=l.querySelector(".wcontent input");return a.placeHolder&&c.setAttribute("placeHolder",a.placeHolder),"right"==a.align&&(c.style.direction="rtl"),c.addEventListener(a.immediate?"keyup":"change",function(e){var i=t.onWidgetChange.call(r,l,n,e.target.value,a);void 0!==i&&(this.value=i)}),a.callback_enter&&c.addEventListener("keydown",function(e){if(13==e.keyCode){t.onWidgetChange.call(r,l,n,e.target.value,a);a.callback_enter(),e.preventDefault()}}),this.tab_index+=1,l.setIcon=function(e){e?(c.style.background="transparent url('"+e+"') no-repeat left 4px center",c.style.paddingLeft="1.7em"):(c.style.background="",c.style.paddingLeft="")},a.icon&&l.setIcon(a.icon),l.setValue=function(t,n){void 0!==t&&t!==c.value&&(c.value=t,n||e.trigger(c,"change"))},l.getValue=function(){return c.value},l.focus=function(){this.querySelector("input").focus()},l.disable=function(){c.disabled=!0},l.enable=function(){c.disabled=!1},this.append(l,a),this.processElement(l,a),l},t.prototype.addStringButton=function(n,i,a){a=this.processOptions(a),void 0===i&&(i="");var r=this;this.values[n]=i;var s=this.createWidget(n,"<span class='inputfield button'><input type='text' tabIndex='"+this.tab_index+"' class='text string' value='' "+(a.disabled?"disabled":"")+"/></span><button class='micro'>"+(a.button||"...")+"</button>",a),o=s.querySelector(".wcontent input");o.value=i,o.addEventListener("change",function(e){var i=t.onWidgetChange.call(r,s,n,e.target.value,a);void 0!==i&&(this.value=i)}),a.disabled&&o.setAttribute("disabled","disabled"),s.setIcon=function(e){e?(o.style.background="transparent url('"+e+"') no-repeat left 4px center",o.style.paddingLeft="1.7em"):(o.style.background="",o.style.paddingLeft="")},a.icon&&s.setIcon(a.icon);var l=s.querySelector(".wcontent button");(l.addEventListener("click",function(e){a.callback_button&&a.callback_button.call(s,o.value,e)}),a.button_width)&&(l.style.width=e.sizeToCSS(a.button_width),s.querySelector(".inputfield").style.width="calc( 100% - "+l.style.width+" - 6px)");return this.tab_index+=1,this.append(s,a),s.setValue=function(t,n){o.value=t,n||e.trigger(o,"change")},s.disable=function(){o.disabled=!0,l.disabled=!0},s.enable=function(){o.disabled=!1,l.disabled=!1},s.getValue=function(){return o.value},s.focus=function(){e.focus(o)},this.processElement(s,a),s},t.prototype.addTextarea=function(n,i,a){a=this.processOptions(a),i=i||"";var r=this;this.values[n]=i;var s=this.createWidget(n,"<span class='inputfield textarea "+(a.disabled?"disabled":"")+"'><textarea tabIndex='"+this.tab_index+"' "+(a.disabled?"disabled":"")+"></textarea></span>",a);this.tab_index++;var o=s.querySelector(".wcontent textarea");return o.value=i,o.addEventListener(a.immediate?"keyup":"change",function(e){t.onWidgetChange.call(r,s,n,e.target.value,a,!1,e)}),a.callback_keydown&&o.addEventListener("keydown",a.callback_keydown),a.height&&(o.style.height="calc( "+e.sizeToCSS(a.height)+" - 5px )"),this.append(s,a),s.setValue=function(t,n){void 0!==t&&t!=o.value&&(i=t,o.value=t,n||e.trigger(o,"change"))},s.getValue=function(e){return o.value},s.focus=function(){e.focus(o)},s.disable=function(){o.disabled=!0},s.enable=function(){o.disabled=!1},this.processElement(s,a),s},t.prototype.addNumber=function(t,n,i){i=this.processOptions(i),n=n||0;var a=this;this.values[t]=n;var r=this.createWidget(t,"",i);this.append(r,i),i.extraclass="full",i.tab_index=this.tab_index,i.full=!0,i.precision=void 0!==i.precision?i.precision:2,i.step=void 0===i.step?0==i.precision?1:.1:i.step,this.tab_index++;var s=null;(s=new e.Dragger(n,i)).root.style.width="calc( 100% - 1px )",r.querySelector(".wcontent").appendChild(s.root),s.root.addEventListener("start_dragging",function(e){this.callback_before&&this.callback_before.call(r)}.bind(i)),r.dragger=s,i.disabled&&s.input.setAttribute("disabled","disabled");var o=r.querySelector("input");return o.addEventListener("change",function(n){if(e.trigger(r,"wbeforechange",n.target.value),a.values[t]=n.target.value,i.callback){var s=i.callback.call(r,parseFloat(n.target.value));"number"==typeof s&&(this.value=s)}e.trigger(r,"wchange",n.target.value),a.onchange&&a.onchange(t,n.target.value,r)}),r.setValue=function(t,n){void 0!==t&&(t=parseFloat(t),i.precision&&(t=t.toFixed(i.precision)),t+=i.units||"",o.value!=t&&(o.value=t,n||e.trigger(o,"change")))},r.setRange=function(e,t){s.setRange(e,t)},r.getValue=function(){return parseFloat(o.value)},r.focus=function(){e.focus(o)},r.disable=function(){o.disabled=!0},r.enable=function(){o.disabled=!1},this.processElement(r,i),r},t.prototype.addVector2=function(t,n,i){(i=this.processOptions(i)).step||(i.step=.1),n=n||[0,0];var a=this;this.values[t]=n;var r=this.createWidget(t,"",i);i.step=i.step||.1,i.tab_index=this.tab_index,i.full=!0,this.tab_index++;var s=r.querySelector(".wcontent"),o=new e.Dragger(n[0],i);o.root.style.marginLeft=0,o.root.style.width="calc( 50% - 1px )",s.appendChild(o.root),i.tab_index=this.tab_index,this.tab_index++;var l=new e.Dragger(n[1],i);function c(e){this.callback_before&&this.callback_before(e)}l.root.style.width="calc( 50% - 1px )",s.appendChild(l.root),r.draggers=[o,l],e.bind(o.root,"start_dragging",c.bind(i)),e.bind(l.root,"start_dragging",c.bind(i));for(var d=r.querySelectorAll("input"),u=0;u<d.length;++u)d[u].addEventListener("change",function(n){for(var s=[],o=d,l=0;l<o.length;l++)s.push(parseFloat(o[l].value));if(e.trigger(r,"wbeforechange",[s]),a.values[t]=s,i.callback){var c=i.callback.call(r,s);if("object"==typeof c&&c.length>=2){for(l=0;l<o.length;l++)o[l].value=c[l];s=c}}e.trigger(r,"wchange",[s]),a.onchange&&a.onchange(t,s,r)});return this.append(r,i),r.setValue=function(e,t){e&&(o.getValue()!=e[0]&&o.setValue(e[0],!0),l.getValue()!=e[1]&&l.setValue(e[1],t))},r.setRange=function(e,t){o.setRange(e,t),l.setRange(e,t)},this.processElement(r,i),r},t.prototype.addVector3=function(t,n,i){(i=this.processOptions(i)).step||(i.step=.1),n=n||[0,0,0];var a=this;this.values[t]=n;var r=this.createWidget(t,"",i);i.step=i.step||.1,i.tab_index=this.tab_index,i.full=!0,this.tab_index++;var s=new e.Dragger(n[0],i);s.root.style.marginLeft=0,s.root.style.width="calc( 33% - 1px )",r.querySelector(".wcontent").appendChild(s.root),i.tab_index=this.tab_index,this.tab_index++;var o=new e.Dragger(n[1],i);o.root.style.width="calc( 33% - 1px )",r.querySelector(".wcontent").appendChild(o.root),i.tab_index=this.tab_index,this.tab_index++;var l=new e.Dragger(n[2],i);function c(e){this.callback_before&&this.callback_before()}l.root.style.width="calc( 33% - 1px )",r.querySelector(".wcontent").appendChild(l.root),r.draggers=[s,o,l],s.root.addEventListener("start_dragging",c.bind(i)),o.root.addEventListener("start_dragging",c.bind(i)),l.root.addEventListener("start_dragging",c.bind(i));for(var d=r.querySelectorAll("input"),u=0;u<d.length;++u)d[u].addEventListener("change",function(n){for(var s=[],o=d,l=0;l<o.length;l++)s.push(parseFloat(o[l].value));if(e.trigger(r,"wbeforechange",[s]),a.values[t]=s,i.callback){var c=i.callback.call(r,s);if("object"==typeof c&&c.length>=3){for(l=0;l<o.length;l++)o[l].value=c[l];s=c}}e.trigger(r,"wchange",[s]),a.onchange&&a.onchange(t,s,r)});return this.append(r,i),r.setValue=function(e,t){e&&(s.setValue(e[0],!0),o.setValue(e[1],!0),l.setValue(e[2],t))},r.setRange=function(e,t){s.setRange(e,t),o.setRange(e,t),l.setRange(e,t)},this.processElement(r,i),r},t.prototype.addVector4=function(t,n,i){(i=this.processOptions(i)).step||(i.step=.1),n=n||[0,0,0];var a=this;this.values[t]=n;var r=this.createWidget(t,"",i);i.step=i.step||.1,i.tab_index=this.tab_index,i.full=!0,this.tab_index++;for(var s=r.draggers=[],o=0;o<4;o++){var l=new e.Dragger(n[o],i);l.root.style.marginLeft=0,l.root.style.width="calc( 25% - 1px )",r.querySelector(".wcontent").appendChild(l.root),i.tab_index=this.tab_index,this.tab_index++,l.root.addEventListener("start_dragging",c.bind(i)),s.push(l)}function c(e){this.callback_before&&this.callback_before()}var d=r.querySelectorAll("input");for(o=0;o<d.length;++o)d[o].addEventListener("change",function(n){for(var s=[],o=d,l=0;l<o.length;l++)s.push(parseFloat(o[l].value));if(e.trigger(r,"wbeforechange",[s]),a.values[t]=s,i.callback){var c=i.callback.call(r,s);if("object"==typeof c&&c.length>=4){for(l=0;l<o.length;l++)o[l].value=c[l];s=c}}e.trigger(r,"wchange",[s]),a.onchange&&a.onchange(t,s,r)});return this.append(r,i),r.setValue=function(e,t){if(e)for(var n=0;n<s.length;n++)s[n].setValue(e[n],t)},r.setRange=function(e,t){for(var n in s)s[n].setRange(e,t)},this.processElement(r,i),r},t.prototype.addPad=function(t,n,i){(i=this.processOptions(i)).step||(i.step=.1),n=n||[0,0];var a=this;this.values[t]=n;var r=this.createWidget(t,"",i);i.step=i.step||.1,i.tab_index=this.tab_index,i.full=!0,this.tab_index++;var s=i.minx||i.min||0,o=i.miny||i.min||0,l=i.maxx||i.max||1,c=i.maxy||i.max||1,d=r.querySelector(".wcontent"),u=document.createElement("div");u.className="litepad",d.appendChild(u),u.style.width="100%",u.style.height="100px",i.background&&(u.style.backgroundImage="url('"+i.background+"')",u.style.backgroundSize="100%",u.style.backgroundRepeat="no-repeat");var p=document.createElement("div");p.className="litepad-handler",u.appendChild(p),i.tab_index=this.tab_index,this.tab_index++;return u._onMouseEvent=function(n){var d=u.getBoundingClientRect();if(n.mousex=n.pageX-d.left,n.mousey=n.pageY-d.top,n.preventDefault(),n.stopPropagation(),"mousedown"==n.type)document.body.addEventListener("mousemove",u._onMouseEvent),document.body.addEventListener("mouseup",u._onMouseEvent),!0;else if("mousemove"==n.type){var p=n.mousex/d.width,h=n.mousey/d.height,g=[p=p*(l-s)+s,h=h*(c-o)+s];if(e.trigger(r,"wbeforechange",[g]),r.setValue(g),i.callback){var f=i.callback.call(r,g);if(f&&f.length>=2)for(var v=0;v<elems.length;v++)r.setValue(f)}e.trigger(r,"wchange",[g]),a.onchange&&a.onchange(t,g,r)}else"mouseup"==n.type&&(!1,document.body.removeEventListener("mousemove",u._onMouseEvent),document.body.removeEventListener("mouseup",u._onMouseEvent));return!0},u.addEventListener("mousedown",u._onMouseEvent),r.setValue=function(e,t){if(void 0!==e){var n=u.getBoundingClientRect(),i=(e[0]-s)/(l-s),a=(e[1]-o)/(c-o);i=Math.max(0,Math.min(i,1)),a=Math.max(0,Math.min(a,1));var r=(n.width-10)/n.width*100,d=(n.height-10)/n.height*100;p.style.left=(i*r).toFixed(1)+"%",p.style.top=(a*d).toFixed(1)+"%"}},this.append(r,i),r.setValue(n),this.processElement(r,i),r},t.prototype.addInfo=function(t,n,i){i=this.processOptions(i),n=void 0===n||null===n?"":n;var a=null;null!=t?a=this.createWidget(t,n,i):(a=document.createElement("div"),i.className&&(a.className=i.className),void 0!==n.nodeName?(a.innerHTML="<span class='winfo'></span>",a.childNodes[0].appendChild(n)):a.innerHTML="<span class='winfo'>"+n+"</span>");var r=a.querySelector(".winfo")||a.querySelector(".wcontent");i.callback&&a.addEventListener("click",i.callback.bind(a)),a.setValue=function(e){void 0!==e&&r&&(r.innerHTML=e)};var s=a.querySelector("span.info_content");return s||(s=a.querySelector(".winfo")),i.width&&(a.style.width=e.sizeToCSS(i.width),a.style.display="inline-block",t||(r.style.margin="2px")),i.height&&(s.style.height=e.sizeToCSS(i.height),s.style.overflow="auto"),a.scrollToBottom=function(){s.scrollTop=s.offsetTop},a.add=function(e){s.appendChild(e)},this.append(a,i),this.processElement(a,i),a},t.prototype.addSlider=function(n,i,a){void 0===(a=this.processOptions(a)).min&&(a.min=0),void 0===a.max&&(a.max=1),void 0===a.step&&(a.step=.01);var r=this;void 0!==i&&null!==i||(i=0),this.values[n]=i;var s=this.createWidget(n,"<span class='inputfield full'>\t\t\t\t\t<input tabIndex='"+this.tab_index+"' type='text' class='slider-text fixed liteslider-value' value='' /><span class='slider-container'></span></span>",a),o=s.querySelector(".slider-container"),l=new e.Slider(i,a);o.appendChild(l.root);var c=s.querySelector(".slider-text");return c.value=i,c.addEventListener("change",function(e){var o=parseFloat(this.value);i=o,l.setValue(o),t.onWidgetChange.call(r,s,n,o,a)}),l.onChange=function(e){c.value=e,t.onWidgetChange.call(r,s,n,e,a)},this.append(s,a),s.setValue=function(e,t){void 0!==e&&(i=e,l.setValue(e,t))},s.getValue=function(){return i},this.processElement(s,a),s},t.prototype.addCheckbox=function(n,i,a){a=this.processOptions(a),i=!!i;var r=this;this.values[n]=i;var s=a.label_on||a.label||"on",o=a.label_off||a.label||"off",l=i?s:o,c=this.createWidget(n,"<span class='inputfield'><span tabIndex='"+this.tab_index+"' class='fixed flag checkbox "+(i?"on":"off")+"'>"+l+"</span></span>",a);this.tab_index++;var d=c.querySelector(".wcontent .checkbox");return d.addEventListener("keypress",function(t){32==t.keyCode&&e.trigger(this,"click")}),c.addEventListener("click",function(){i=!i,c.querySelector("span.flag").innerHTML=i?s:o,i?d.classList.add("on"):d.classList.remove("on"),t.onWidgetChange.call(r,c,n,i,a)}),c.getValue=function(){return i},c.setValue=function(t,a){void 0!==t&&(i=t,r.values[n]==t||a||e.trigger(d,"click"))},this.append(c,a),this.processElement(c,a),c},t.prototype.addFlags=function(e,t,n){var i={};for(var a in e)i[a]=e[a];if(t)for(var a in t)void 0===i[a]&&(i[a]=!!t[a]);for(var a in i){var r={};for(var s in n)r[s]=n[s];r.callback=function(t){return function(n){e[t]=n}}(a),this.addCheckbox(a,i[a],r)}},t.prototype.addCombo=function(e,n,i){i=this.processOptions(i);var a=this;this.values[e]=n,this.tab_index++;var r=this.createWidget(e,"<span class='inputfield full inputcombo "+(i.disabled?"disabled":"")+"'></span>",i);r.options=i;var s=i.values||[];s.constructor===Function&&(s=i.values());var o="<select tabIndex='"+this.tab_index+"' "+(i.disabled?"disabled":"")+" class='"+(i.disabled?"disabled":"")+"'></select>";r.querySelector("span.inputcombo").innerHTML=o,c(s);var l=!1;function c(e,t){e||(e=[]),s=e,t&&(n=t);var i="",a=0;for(var o in s){var l=s[o],c=s.constructor===Array?a:o,d=s.constructor===Array?l:o;l&&l.title&&(d=l.title),i+="<option value='"+c+"' "+(l==n?" selected":"")+" data-index='"+c+"'>"+d+"</option>",a++}r.querySelector("select").innerHTML=i}return r.querySelector(".wcontent select").addEventListener("change",function(o){var c=o.target.value;n=s[c],l||t.onWidgetChange.call(a,r,e,n,i)}),r.getValue=function(){return n},r.setValue=function(e,t){if(void 0!==e){n=e;var i=r.querySelector("select"),a=i.querySelectorAll("option"),o=-1;if(s.constructor===Array)o=s.indexOf(e);else{var c=0;for(var d in s){if(s[c]==e){o=c;break}c++}}if(-1!=o){for(var d in l=t,a){var u=a[d];u&&u.dataset&&(parseFloat(u.dataset.index)==o?(u.setAttribute("selected",!0),i.selectedIndex=o):u.removeAttribute("selected"))}l=!1}}},r.setOptionValues=c,this.append(r,i),this.processElement(r,i),r},t.prototype.addComboButtons=function(n,i,a){a=this.processOptions(a),i=i||"";var r=this;this.values[n]=i;var s="";if(a.values)for(var o in a.values)s+="<button class='wcombobutton "+(i==a.values[o]?"selected":"")+"' data-name='options.values[i]'>"+a.values[o]+"</button>";var l=this.createWidget(n,s,a),c=l.querySelectorAll(".wcontent button");return e.bind(c,"click",function(e){var i=e.target.innerHTML;r.values[n]=i;for(var s=l.querySelectorAll(".selected"),o=0;o<s.length;++o)s[o].classList.remove("selected");this.classList.add("selected"),t.onWidgetChange.call(r,l,n,i,a)}),this.append(l,a),this.processElement(l,a),l},t.prototype.addTags=function(n,i,a){a=this.processOptions(a),i=i||[];var r=this;this.values[n]=i;var s="<select>";if(a.values)for(var o in a.values)s+="<option>"+a.values[o]+"</option>";s+="</select><div class='wtagscontainer inputfield'></div>";var l=this.createWidget(n,"<span class='inputfield full'>"+s+"</span>",a);for(var o in l.tags={},a.value)c(a.value[o]);function c(i){if(!l.tags[i]){e.trigger(l,"wbeforechange",l.tags),l.tags[i]=!0;var s=document.createElement("div");s.data=i,s.className="wtag",s.innerHTML=i+"<span class='close'>X</span>",s.querySelector(".close").addEventListener("click",function(i){var s=this.parentNode.data;delete l.tags[s],e.remove(this.parentNode),e.trigger(l,"wremoved",s),t.onWidgetChange.call(r,l,n,l.tags,a)}),l.querySelector(".wtagscontainer").appendChild(s),r.values[n]=l.tags,a.callback&&a.callback.call(l,l.tags),e.trigger(l,"wchange",l.tags),e.trigger(l,"wadded",i),r.onchange&&r.onchange(n,l.tags,l)}}return l.querySelector(".wcontent select").addEventListener("change",function(e){c(e.target.value)}),this.append(l,a),this.processElement(l,a),l},t.prototype.addList=function(n,i,a){var r=this,s="";(a=this.processOptions(a)).height&&(s="style='height: 100%; overflow: auto;'");var o="<ul class='lite-list' "+s+" tabIndex='"+this.tab_index+"'><ul>";this.tab_index++;var l=this.createWidget(n,"<span class='inputfield full "+(a.disabled?"disabled":"")+"' style='height: 100%;'>"+o+"</span>",a);l.querySelector(".info_content").style.height="100%";l.querySelector(".lite-list");var c=l.querySelector(".inputfield");c.style.height="100%",c.style.paddingBottom="0.2em";for(var d=l.querySelectorAll("ul"),u=0;u<d.length;++u){var p=d[u];p.addEventListener("focus",function(){document.addEventListener("keydown",h,!0)}),p.addEventListener("blur",function(){document.removeEventListener("keydown",h,!0)})}function h(t){var n=l.querySelector("li.selected");if(n){if(13==t.keyCode){if(!n)return;var s=i[n.dataset.pos];a.callback_dblclick&&a.callback_dblclick.call(r,s)}else if(40==t.keyCode){var o=n.nextSibling;o&&e.trigger(o,"click"),n.scrollIntoViewIfNeeded&&n.scrollIntoViewIfNeeded({block:"end",behavior:"smooth"})}else{if(38!=t.keyCode)return;var c=n.previousSibling;c&&e.trigger(c,"click"),n.scrollIntoViewIfNeeded&&n.scrollIntoViewIfNeeded({block:"end",behavior:"smooth"})}return t.preventDefault(),t.stopPropagation(),!0}}function g(s){if(a.multiselection)this.classList.toggle("selected");else{for(var o=l.querySelectorAll("li"),c=0;c<o.length;++c)o[c].classList.remove("selected");this.classList.add("selected")}var d=i[this.dataset.pos];t.onWidgetChange.call(r,l,n,d,a),e.trigger(l,"wadded",d)}function f(e){var t=i[this.dataset.pos];a.callback_dblclick&&a.callback_dblclick.call(r,t)}function v(t,n,i){var r=i,s=i;n=!!n;var o=null,l="";null!=t&&(t.constructor===String||t.constructor===Number||t.constructor===Boolean?s=String(t):t&&(s=t.content||t.title||t.name||i,o=t.style,t.icon&&(l="<img src='"+t.icon+"' class='icon' /> "),t.selected&&(n=!0)));var c=s;c=c.replace(/<(?:.|\n)*?>/gm,"");var d=document.createElement("li");return d.classList.add("item-"+e.safeName(r)),n&&d.classList.add("selected"),d.dataset.name=c,d.dataset.pos=r,d.value=t,o&&d.setAttribute("style",o),d.innerHTML=l+s,d.addEventListener("click",g),a.callback_dblclick&&d.addEventListener("dblclick",f),d}return l.updateItems=function(t,n){n=n||a.selected;i=t;var r=this.querySelector("ul");if(r.innerHTML="",i)for(var s in i){var o=v(i[s],n,s);r.appendChild(o)}e.bind(r.querySelectorAll("li"),"click",g)},l.addItem=function(e,t,n){if(i.constructor===Array){i.push(e);var a=this.querySelector("ul"),r=v(e,t);a.appendChild(r)}else console.error("cannot add item to list of object, only array")},l.removeItem=function(t){for(var n=l.querySelectorAll(".wcontent li"),i=0;i<n.length;i++)n[i].dataset.name==t&&e.remove(n[i])},l.updateItems(i,a.selected),this.append(l,a),l.getSelected=function(){for(var e=[],t=this.querySelectorAll("ul li.selected"),n=0;n<t.length;++n)e.push(t[n].dataset.name);return e},l.getByIndex=function(e){return this.querySelectorAll("ul li")[e]},l.getIndex=l.getByIndex,l.selectIndex=function(e,t){for(var n=this.querySelectorAll("ul li"),i=0;i<n.length;++i){var a=n[i];i==e?a.classList.add("selected"):t||a.classList.remove("selected")}return n[e]},l.deselectIndex=function(e){var t=this.querySelectorAll("ul li")[e];return t&&t.classList.remove("selected"),t},l.scrollToIndex=function(e){var t=this.querySelectorAll("ul li")[e];t&&(this.scrollTop=t.offsetTop)},l.selectAll=function(){for(var t=this.querySelectorAll("ul li"),n=0;n<t.length;++n){var i=t[n];i.classList.contains("selected")||e.trigger(i,"click")}},l.deselectAll=function(){for(var t=this.querySelectorAll("ul li"),n=0;n<t.length;++n){var i=t[n];i.classList.contains("selected")&&e.trigger(i,"click")}},l.setValue=function(e){void 0!==e&&this.updateItems(e)},l.getNumberOfItems=function(){return this.querySelectorAll("ul li").length},l.filter=function(e,t){var n=this.querySelectorAll("ul li"),i=!1;if(e&&e.constructor===String){var a=e;t&&a.toLowerCase(),i=!0,e=function(e){return-1!=(t?e:e.toLowerCase()).indexOf(a)}}for(var r=0;r<n.length;++r){var s=n[r];if(e){var o=s.value;i&&null!=o&&o.constructor!==String&&(o=s.innerHTML),e(o,s,s.classList.contains("selected"))?s.style.display="":s.style.display="none"}else s.style.display=""}},l.selectByFilter=function(e){for(var t=this.querySelectorAll("ul li"),n=0;n<t.length;++n){var i=t[n],a=e(i.value,i,i.classList.contains("selected"));!0===a?i.classList.add("selected"):!1===a&&i.classList.remove("selected")}},a.height&&(l.scrollTop=0),this.processElement(l,a),l},t.prototype.addButton=function(n,i,a){a=this.processOptions(a),i=a.button_text||i||"";var r=this,s="";null===n&&(s="single"),a.micro&&(s+=" micro");var o="";a.disabled&&(o="disabled='disabled'");var l=a.title||"",c=this.createWidget(n,"<button tabIndex='"+this.tab_index+"' "+o+"></button>",a);this.tab_index++;var d=c.querySelector("button");return d.setAttribute("title",l),d.className="litebutton "+s,d.innerHTML=i,d.addEventListener("click",function(s){t.onWidgetChange.call(r,c,n,this.innerHTML,a,!1,s),e.trigger(d,"wclick",i)}),this.append(c,a),c.wclick=function(t){a.disabled||e.bind(this,"wclick",t)},c.setValue=function(e){void 0!==e&&(d.innerHTML=e)},c.disable=function(){d.disabled=!0},c.enable=function(){d.disabled=!1},this.processElement(c,a),c},t.prototype.addButtons=function(n,i,a){a=this.processOptions(a);var r=this,s="",o="calc( "+(100/(i=i||"").length).toFixed(3)+"% - 4px )",l="width:"+o+"; width: -moz-"+o+"; width: -webkit-"+o+"; margin: 2px;";if(i&&"object"==typeof i)for(var c in i){var d="";a.title&&a.title.constructor===Array&&(d=a.title[c]||""),s+="<button class='litebutton' title='"+d+"' tabIndex='"+this.tab_index+"' style='"+l+"'>"+i[c]+"</button>",this.tab_index++}var u=this.createWidget(n,s,a),p=u.querySelectorAll("button");for(c=0;c<p.length;++c){p[c].addEventListener("click",function(i){t.onWidgetChange.call(r,u,n,this.innerHTML,a,null,i),e.trigger(u,"wclick",this.innerHTML)})}return this.append(u,a),this.processElement(u,a),u},t.prototype.addIcon=function(n,i,a){a=this.processOptions(a),i=i||"";var r=this,s=a.image,o=a.width||a.size||20,l=a.height||a.size||20,c=this.createWidget(n,"<span class='icon' "+(a.title?"title='"+a.title+"'":"")+" tabIndex='"+this.tab_index+"'></span>",a);this.tab_index++;var d=c.querySelector("span.wcontent"),u=c.querySelector("span.icon"),p=a.x||0;a.index&&(p=a.index*-o);var h=i?l:0;return c.style.minWidth=c.style.width=o+"px",c.style.margin="0 2px",c.style.padding="0",d.style.margin="0",d.style.padding="0",u.style.display="inline-block",u.style.cursor="pointer",u.style.width=o+"px",u.style.height=l+"px",u.style.backgroundImage="url('"+s+"')",u.style.backgroundPosition=p+"px "+h+"px",u.addEventListener("mousedown",function(s){s.preventDefault(),i=!i;var o=t.onWidgetChange.call(r,c,n,i,a);e.trigger(c,"wclick",i),void 0!==o&&(i=o);var d=i?l:0;u.style.backgroundPosition=p+"px "+d+"px",!1===a.toggle&&setTimeout(function(){u.style.backgroundPosition=p+"px 0px",i=!1},200)}),this.append(c,a),c.setValue=function(e,s){if(void 0!==e){var o=(i=e)?l:0;u.style.backgroundPosition=p+"px "+o+"px",s||t.onWidgetChange.call(r,c,n,i,a)}},c.getValue=function(){return i},this.processElement(c,a),c},t.prototype.addColor=function(n,i,a){a=this.processOptions(a),i=i||[0,0,0];var r=this;this.values[n]=i;var s="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+n+"' class='color' value='"+i[0]+","+i[1]+","+i[2]+"' "+(a.disabled?"disabled":"")+"/>";this.tab_index++,a.show_rgb&&(s+="<span class='rgb-color'>"+t.parseColor(i)+"</span>");var o=this.createWidget(n,s,a);this.append(o,a);var l=o.querySelector("input.color"),c=null;if(window.jscolor){if((c=new jscolor.color(l)).pickerFaceColor="#333",c.pickerBorderColor="black",c.pickerInsetColor="#222",c.rgb_intensity=1,a.disabled&&(c.pickerOnfocus=!1),i.constructor!==String&&i.length&&i.length>2){c.fromRGB(1*i[0],1*i[1],1*i[2]),c.rgb_intensity=1}l.addEventListener("change",function(t){var n=o.querySelector(".rgb-color");n&&(n.innerHTML=e.Inspector.parseColor(c.rgb))}),c.onImmediateChange=function(){var t=[c.rgb[0]*c.rgb_intensity,c.rgb[1]*c.rgb_intensity,c.rgb[2]*c.rgb_intensity],i=[t.concat(),c.toString()];e.trigger(o,"wbeforechange",i),r.values[n]=t,a.callback&&a.callback.call(o,t.concat(),"#"+c.toString(),c),e.trigger(o,"wchange",i),r.onchange&&r.onchange(n,t.concat(),o)},a.step=a.step||.01,a.dragger_class="nano";var d=new e.Dragger(1,a);o.querySelector(".wcontent").appendChild(d.root),d.input.addEventListener("change",function(e){var t=parseFloat(this.value);c.rgb_intensity=t,c.onImmediateChange&&c.onImmediateChange()}),o.setValue=function(t,n){c.fromRGB(t[0],t[1],t[2]),n||e.trigger(d.input,"change")},o.getValue=function(){return i}}else l.addEventListener("change",function(t){var n=o.querySelector(".rgb-color");n&&(n.innerHTML=e.Inspector.parseColor(c.rgb))});return this.processElement(o,a),o},t.prototype.addFile=function(e,n,i){i=this.processOptions(i),n=n||"";var a=this;this.values[e]=n;var r=this.createWidget(e,"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'></span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='"+n+"'/>",i);r.querySelector(".wcontent").style.position="relative";var s=r.querySelector(".wcontent input"),o=r.querySelector(".wcontent .filename");return n&&(o.innerText=n.name),s.addEventListener("change",function(n){if(!n.target.files.length)return o.innerText="",void t.onWidgetChange.call(a,r,e,null,i);var s=n.target.files[0];if(s.files=n.target.files,i.generate_url&&(s.url=URL.createObjectURL(n.target.files[0])),o.innerText=s.name,i.read_file){var l=new FileReader;l.onload=function(n){s.data=n.target.result,t.onWidgetChange.call(a,r,e,s,i)},"binary"==i.read_file?l.readAsArrayBuffer(s):"data_url"==i.read_file?l.readAsDataURL(s):l.readAsText(s)}else t.onWidgetChange.call(a,r,e,s,i)}),this.append(r,i),r},t.prototype.addLine=function(n,i,a){a=this.processOptions(a),i=i||"";var r=this;this.values[n]=i;var s=this.createWidget(n,"<span class='line-editor'></span>",a);s.style.width="100%";var o=new e.LineEditor(i,a);return s.querySelector("span.line-editor").appendChild(o),e.bind(o,"change",function(i){e.trigger(s,"wbeforechange",[i.target.value]),a.callback&&a.callback.call(s,i.target.value),e.trigger(s,"wchange",[i.target.value]),t.onWidgetChange.call(r,s,n,i.target.value,a)}),this.append(s,a),s},t.prototype.addTree=function(t,n,i){i=this.processOptions(i),n=n||"";var a=this.createWidget(t,"<div class='wtree inputfield full'></div>",i),r=a.querySelector(".wtree");i.height&&(r.style.height="number"==typeof i.height?i.height+"px":i.height,r.style.overflow="auto");var s=a.tree=new e.Tree(n,i.tree_options);return s.onItemSelected=function(e,t){i.callback&&i.callback.call(a,e,t)},r.appendChild(s.root),a.setValue=function(e){s.updateTree(e)},this.append(a,i),this.processElement(a,i),a},t.prototype.addDataTree=function(e,t,n){n=this.processOptions(n),t=t||"";var i=this.createWidget(e,"<div class='wtree'></div>",n);return function e(t,n){for(var i in n){var a=document.createElement("div");a.className="treenode","object"==typeof n[i]?(a.innerHTML="<span class='itemname'>"+i+"</span><span class='itemcontent'></span>",e(a.querySelector(".itemcontent"),n[i])):a.innerHTML="<span class='itemname'>"+i+"</span><span class='itemvalue'>"+n[i]+"</span>",t.appendChild(a)}}(i.querySelector(".wtree"),t),this.append(i,n),i},t.prototype.addArray=function(e,t,n){var i=this;if(t&&t.constructor===Array){var a=(n=this.processOptions(n)).data_type||"string",r=n.max_items||100,s=null;this.widgets_per_row=3,this.addInfo(e,null,{name_width:"100%",width:"100% - 160px"});var o=this.addString("length",t.length||"0",{width:100,callback:function(e){e=parseInt(e);t<0&&(t=0),t.length=e,l.call(s)}});return this.addButtons(null,["+","-"],{width:60,callback:function(e){"+"==e?t.length=t.length+1:t.length>0&&(t.length=t.length-1),o.setValue(t.length),l.call(s)}}),this.widgets_per_row=1,(s=this.addContainer(e,n)).value=t,l.call(s),s.setValue=function(e){this.value=e,l.call(s)},s.getValue=function(){return this.value=v},s}function l(){var e=this.value,t=Math.min(e.length,r);i.widgets_per_row+=1,this.innerHTML="";for(var s=0;s<t;++s){var o=null;void 0!==e[s]&&(o=e[s]);var l=document.createElement("div");l.className="array-row",l.innerHTML="<span class='row-index'>"+s+"</span><span class='row-cell'></span><button style='width: 30px;' class='litebutton single row-trash'><img src='imgs/mini-icon-trash.png'/></button>",this.appendChild(l);var d={widget_parent:l.querySelector(".row-cell"),callback:c.bind({value:this.value,index:s})};if(n.data_options)for(var u in n.data_options)d[u]=n.data_options[u];i.add(a,null,o,d)}i.widgets_per_row-=1}function c(e){this.value[this.index]=e,n.callback&&n.callback.call(s,this.value,this.index)}console.error("Inspector: Array widget value must be a valid array")},t.prototype.addContainer=function(e,t){e&&e.constructor!==String&&console.warn("LiteGUI.Inspector.addContainer first parameter must be a string with the name");var n=this.startContainer(null,t);return this.endContainer(),n},t.prototype.startContainer=function(t,n){n=this.processOptions(n);var i=document.createElement("DIV");return i.className="wcontainer",this.applyOptions(i,n),this.row_number=0,this.append(i),this.pushContainer(i),n.widgets_per_row&&(this.widgets_per_row=n.widgets_per_row),n.height&&(i.style.height=e.sizeToCSS(n.height),i.style.overflow="auto"),i.refresh=function(){i.on_refresh&&i.on_refresh.call(this,i)},i},t.prototype.endContainer=function(e,t){this.popContainer()},t.prototype.addSection=function(e,t){t=this.processOptions(t);var n=this;this.current_section&&this.current_section.end();var i=document.createElement("DIV");i.className="wsection",e||(i.className+=" notitle"),t.className&&(i.className+=" "+t.className),t.collapsed&&(i.className+=" collapsed"),t.id&&(i.id=t.id),t.instance&&(i.instance=t.instance);var a="";return e&&(a+="<div class='wsectiontitle'>"+(t.no_collapse?"":"<span class='switch-section-button'></span>")+e+"</div>"),a+="<div class='wsectioncontent'></div>",i.innerHTML=a,i._last_container_stack=this._current_container_stack.concat(),this.root.appendChild(i),this.sections.push(i),i.sectiontitle=i.querySelector(".wsectiontitle"),e&&i.sectiontitle.addEventListener("click",function(e){if("button"!=e.target.localName){i.classList.toggle("collapsed");var n=i.querySelector(".wsectioncontent");n.style.display="none"===n.style.display?null:"none",t.callback&&t.callback.call(i,!i.classList.contains("collapsed"))}}),t.collapsed&&(i.querySelector(".wsectioncontent").style.display="none"),this.setCurrentSection(i),t.widgets_per_row&&(this.widgets_per_row=t.widgets_per_row),i.refresh=function(){i.on_refresh&&i.on_refresh.call(this,i)},i.end=function(){if(n.current_section==this){n._current_container_stack=this._last_container_stack,n._current_container=null;var e=this.querySelector(".wsectioncontent");e&&(n.isContainerInStack(e)&&n.popContainer(e),n.current_section=null)}},i},t.prototype.setCurrentSection=function(e){if(this.current_section!=e){this.current_section=e;var t=e.parentNode;this.popContainer(t);var n=e.querySelector(".wsectioncontent");this.pushContainer(n)}},t.prototype.getCurrentSection=function(){for(var e=this._current_container_stack.length-1;e>=0;--e){var t=this._current_container_stack[e];if(t.classList.contains("wsectioncontent"))return t.parentNode}return null},t.prototype.endCurrentSection=function(){this.current_section&&this.current_section.end()},t.prototype.beginGroup=function(t,n){n=this.processOptions(n);var i=document.createElement("DIV");i.className="wgroup",t=t||"",i.innerHTML="<div class='wgroupheader "+(n.title?"wtitle":"")+"'><span class='switch-section-button'></span>"+t+"</div>",i.group=!0;var a=document.createElement("DIV");a.className="wgroupcontent",n.collapsed&&(a.style.display="none"),n.height&&(a.style.height=e.sizeToCSS(n.height)),n.scrollable&&(a.style.overflow="auto"),i.appendChild(a);var r=n.collapsed||!1,s=i.querySelector(".wgroupheader");return r&&s.classList.add("collapsed"),s.addEventListener("click",function(e){var t=i.querySelector(".wgroupcontent").style;t.display="none"===t.display?"":"none",(r=!r)?s.classList.add("collapsed"):s.classList.remove("collapsed"),e.preventDefault()}),this.append(i,n),this.pushContainer(a),i},t.prototype.endGroup=function(){do{this.popContainer()}while(this._current_container&&!this._current_container.classList.contains("wgroupcontent"))},t.prototype.addTitle=function(e,t){t=this.processOptions(t);var n=document.createElement("DIV"),i="<span class='wtitle'><span class='text'>"+e+"</span>";return t.help&&(i+="<span class='help'><div class='help-content'>"+t.help+"</div></span>"),i+="</span>",n.innerHTML=i,n.setValue=function(e){this.querySelector(".text").innerHTML=e},this.row_number=0,this.append(n,t),n},t.prototype.scrollTo=function(e){var t=this.root.querySelector("#"+e);if(t){var n=this.root.offsetTop,i=t.offsetTop-n;this.root.parentNode.parentNode.scrollTop=i}},t.prototype.processOptions=function(e){return"function"==typeof e&&(e={callback:e}),e||{}},t.prototype.processElement=function(e,t){t.callback_update&&e.setValue&&(e.on_update=function(){this.setValue(t.callback_update.call(this),!0)})},t.prototype.updateWidgets=function(){for(var e=0;e<this.widgets.length;++e){var t=this.widgets[e];t.on_update&&t.on_update(t)}},t.parseColor=function(e){return"<span style='color: #FAA'>"+e[0].toFixed(2)+"</span>,<span style='color: #AFA'>"+e[1].toFixed(2)+"</span>,<span style='color: #AAF'>"+e[2].toFixed(2)+"</span>"},e.Inspector=t});
//# sourceMappingURL=sourcemaps/Inspector.js.map

/**
 * skylark-litegui - A version of litegui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-litegui/
 * @license MIT
 */
define(["./litegui"],function(e){function t(e,t){t=t||{},e=e||"";var n=document.createElement("div");n.className="litegui searchbox";var a=null!=t.placeholder?t.placeholder:"Search";n.innerHTML="<input value='"+e+"' placeholder='"+a+"'/>",this.input=n.querySelector("input"),this.root=n;var i=this;this.input.onchange=function(e){var n=e.target.value;t.callback&&t.callback.call(i,n)}}function n(e,t){t=t||{},this.options=t;var n=this;t.parentMenu&&(t.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),t.parentMenu=null):(this.parentMenu=t.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this)),t.event&&"MouseEvent"!==t.event.constructor.name&&"PointerEvent"!==t.event.constructor.name&&"CustomEvent"!==t.event.constructor.name&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it."),t.event=null);var a=document.createElement("div");if(a.className="litecontextmenu litemenubar-panel",a.style.minWidth=100,a.style.minHeight=100,a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},100),a.addEventListener("mouseup",function(e){return e.preventDefault(),!0},!0),a.addEventListener("contextmenu",function(e){return 2==e.button&&(e.preventDefault(),!1)},!0),a.addEventListener("mousedown",function(e){if(2==e.button)return n.close(),e.preventDefault(),!0},!0),this.root=a,t.title){var i=document.createElement("div");i.className="litemenu-title",i.innerHTML=t.title,a.appendChild(i)}for(var o in e){var s=e.constructor==Array?e[o]:o;null!=s&&s.constructor!==String&&(s=void 0===s.content?String(s):s.content);var r=e[o];this.addItem(s,r,t),0}function l(e){var t=parseInt(a.style.top);return a.style.top=(t+.1*e.deltaY).toFixed()+"px",e.preventDefault(),!0}a.addEventListener("mouseleave",function(e){n.lock||(a.closing_timer&&clearTimeout(a.closing_timer),a.closing_timer=setTimeout(n.close.bind(n,e),500))}),a.addEventListener("mouseenter",function(e){a.closing_timer&&clearTimeout(a.closing_timer)}),a.addEventListener("wheel",l,!0),a.addEventListener("mousewheel",l,!0);var u=document;t.event&&(u=t.event.target.ownerDocument),u||(u=document),u.body.appendChild(a);var c=t.left||0,d=t.top||0;if(t.event)if("MouseEvent"!==t.event.constructor.name&&"PointerEvent"!==t.event.constructor.name&&"CustomEvent"!==t.event.constructor.name)console.warn("Event passed to ContextMenu is not of type MouseEvent"),t.event=null;else{if(c=t.event.pageX-10,d=t.event.pageY-10,t.title&&(d-=20),t.parentMenu){var h=t.parentMenu.root.getBoundingClientRect();c=h.left+h.width}var v=document.body.getBoundingClientRect(),p=a.getBoundingClientRect();c>v.width-p.width-10&&(c=v.width-p.width-10),d>v.height-p.height-10&&(d=v.height-p.height-10)}a.style.left=c+"px",a.style.top=d+"px"}function a(t,n,a){a=a||{};var i=this.root=document.createElement("ul");i.id=t,i.className="litelist",this.items=[];var o=this;for(var s in this.callback=a.callback,n){var r=document.createElement("li");r.className="list-item",r.data=n[s],r.dataset.value=n[s];var l="";"string"==typeof n[s]?l=n[s]+"<span class='arrow'></span>":(l=(n[s].name||n[s].title||"")+"<span class='arrow'></span>",n[s].id&&(r.id=n[s].id)),r.innerHTML=l,r.addEventListener("click",function(){for(var t=i.querySelectorAll(".list-item.selected"),n=0;n<t.length;++n)t[n].classList.remove("selected");this.classList.add("selected"),e.trigger(o.root,"wchanged",this),o.callback&&o.callback(this.data)}),i.appendChild(r)}a.parent&&(a.parent.root?a.parent.root.appendChild(i):a.parent.appendChild(i))}function i(t){t=t||{},this.root=document.createElement("div"),this.root.className="litecomplexlist",this.item_code=t.item_code||"<div class='listitem'><span class='tick'><span>"+e.special_codes.tick+"</span></span><span class='title'></span><button class='trash'>"+e.special_codes.close+"</button></div>",t.height&&(this.root.style.height=e.sizeToCSS(t.height)),this.selected=null,this.onItemSelected=null,this.onItemToggled=null,this.onItemRemoved=null}return e.Button=function(e,t){"function"==typeof(t=t||{})&&(t={callback:t});var n=this,a=document.createElement("div");a.className="litegui button",this.root=a;var i=document.createElement("button");i.className="litebutton",this.content=i,a.appendChild(i),i.innerHTML=e,i.addEventListener("click",function(e){n.click()}),this.click=function(){t.callback&&t.callback.call(n)}},t.prototype.setValue=function(e){this.input.value=e,this.input.onchange()},t.prototype.getValue=function(){return this.input.value},e.SearchBox=t,n.prototype.addItem=function(t,n,a){var i=this;a=a||{};var o=document.createElement("div");o.className="litemenu-entry submenu";var s=!1;function r(t){var n=this.value,o=!0;(i.current_submenu&&i.current_submenu.close(t),a.callback)&&(!0===a.callback.call(i,n,a,t)&&(o=!1));if(n){if(n.callback&&!a.ignore_item_callbacks&&!0!==n.disabled)!0===n.callback.call(this,n,a,t,i)&&(o=!1);if(n.submenu){if(!n.submenu.options)throw"ContextMenu submenu needs options";new e.ContextMenu(n.submenu.options,{callback:n.submenu.callback,event:t,parentMenu:i,ignore_item_callbacks:n.submenu.ignore_item_callbacks,title:n.submenu.title,autoopen:a.autoopen});o=!1}}o&&!i.lock&&i.close()}return null===n?o.classList.add("separator"):(o.innerHTML=n&&n.title?n.title:t,o.value=n,n&&(n.disabled&&(s=!0,o.classList.add("disabled")),(n.submenu||n.has_submenu)&&o.classList.add("has_submenu")),"function"==typeof n?(o.dataset.value=t,o.onclick_callback=n):o.dataset.value=n),this.root.appendChild(o),s||o.addEventListener("click",r),a.autoopen&&o.addEventListener("mouseenter",function(e){var t=this.value;if(!t||!t.has_submenu)return;r.call(this,e)}),o},n.prototype.close=function(t,n){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.parentMenu&&!n&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=null,void 0===t?this.parentMenu.close():t&&!e.isCursorOverElement(t,this.parentMenu.root)&&e.trigger(this.parentMenu.root,"mouseleave",t)),this.current_submenu&&this.current_submenu.close(t,!0),this.root.closing_timer&&clearTimeout(this.root.closing_timer)},n.prototype.getTopMenu=function(){return this.options.parentMenu?this.options.parentMenu.getTopMenu():this},n.prototype.getFirstEvent=function(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event},e.ContextMenu=n,e.ContextualMenu=n,e.Checkbox=function(e,t){this.value=e;var n=this.root=document.createElement("span");n.className="litecheckbox inputfield",n.dataset.value=e;var a=this.element=document.createElement("span");a.className="fixed flag checkbox "+(e?"on":"off"),n.appendChild(a),n.addEventListener("click",function(e){this.setValue("true"!=this.root.dataset.value),e.preventDefault(),e.stopPropagation()}.bind(this)),this.setValue=function(e){if(this.value!==e&&this.root.dataset.value!=e.toString()){this.root.dataset.value=e,e?(this.element.classList.remove("off"),this.element.classList.add("on")):(this.element.classList.remove("on"),this.element.classList.add("off"));var n=this.value;this.value=e,t&&t(e,n)}},this.getValue=function(){return this.value}},e.createLitebox=function(e,t){var n=document.createElement("span");return n.className="listbox "+(e?"listopen":"listclosed"),n.innerHTML=e?"&#9660;":"&#9658;",n.dataset.value=e?"open":"closed",n.addEventListener("click",function(e){e.target.setValue("open"!=this.dataset.value),this.stopPropagation&&e.stopPropagation()}),n.on_change_callback=t,n.setEmpty=function(e){e?this.classList.add("empty"):this.classList.remove("empty")},n.expand=function(){this.setValue(!0)},n.collapse=function(){this.setValue(!1)},n.setValue=function(e){this.dataset.value!=(e?"open":"closed")&&(e?(this.dataset.value="open",this.innerHTML="&#9660;",this.classList.add("listopen"),this.classList.remove("listclosed")):(this.dataset.value="closed",this.innerHTML="&#9658;",this.classList.remove("listopen"),this.classList.add("listclosed")),t&&t(this.dataset.value))},n.getValue=function(){return this.dataset.value},n},a.prototype.getSelectedItem=function(){return this.root.querySelector(".list-item.selected")},a.prototype.setSelectedItem=function(t){for(var n=this.root.querySelectorAll(".list-item"),a=0;a<n.length;a++){var i=n[a];if(i.data==t){e.trigger(i,"click");break}}},e.List=a,e.Slider=function(t,n){n=n||{};var a=this.root=document.createElement("div"),i=this;function o(e){var t=a.getBoundingClientRect();if(t){var o=e/t.width,s=n.min||0,r=(n.max||1)-s;i.setValue(r*o+s)}}this.value=t,a.className="liteslider",this.setValue=function(t,i){var o=n.min||0,s=n.max||1;t<o?t=o:t>s&&(t=s);var r=(t-o)/(s-o),l=(100*r).toFixed(1)+"%",u=(100*r+2).toFixed(1)+"%";a.style.background="linear-gradient(to right, #999 "+l+", #FC0 "+u+", #333 "+u+")",t!=this.value&&(this.value=t,i||(e.trigger(this.root,"change",t),this.onChange&&this.onChange(t)))};var s=null;function r(e){var t=a.getBoundingClientRect();if(t)return o((void 0===e.x?e.pageX:e.x)-t.left),e.preventDefault(),!1}function l(e){var t=s||document;return s=null,t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",l),e.preventDefault(),!1}a.addEventListener("mousedown",function(e){var t;e.offsetX?(t=e.offsetX,e.offsetY):e.layerX&&(t=e.layerX,e.layerY),o(t),(s=a.ownerDocument).addEventListener("mousemove",r),s.addEventListener("mouseup",l),e.preventDefault(),e.stopPropagation()}),this.setValue(t)},e.LineEditor=function(t,n){n=n||{};var a=document.createElement("div");a.className="curve "+(n.extraclass?n.extraclass:""),a.style.minHeight="50px",a.style.width=n.width||"100%",a.bgcolor=n.bgcolor||"#222",a.pointscolor=n.pointscolor||"#5AF",a.linecolor=n.linecolor||"#444",a.value=t||[],a.xrange=n.xrange||[0,1],a.yrange=n.yrange||[0,1],a.defaulty=null!=n.defaulty?n.defaulty:.5,a.no_trespassing=n.no_trespassing||!1,a.show_samples=n.show_samples||0,a.options=n,a.style.minWidth="50px",a.style.minHeight="20px";var i=document.createElement("canvas");function o(e){return[i.width*((a.xrange[1]-a.xrange[0])*e[0]+a.xrange[0]),i.height*((a.yrange[1]-a.yrange[0])*e[1]+a.yrange[0])]}function s(e){return[(e[0]/i.width-a.xrange[0])/(a.xrange[1]-a.xrange[0]),(e[1]/i.height-a.yrange[0])/(a.yrange[1]-a.yrange[0])]}i.width=n.width||200,i.height=n.height||50,a.appendChild(i),a.canvas=i,a.addEventListener("mousedown",function(e){document.addEventListener("mousemove",u),document.addEventListener("mouseup",c);var t=i.getBoundingClientRect(),n=e.clientX-t.left,d=e.clientY-t.top;if(-1==(r=function(e,t){for(var n=1e5,i=-1,s=0;s<a.value.length;s++){var r=a.value[s],l=o(r),u=h([e,t],l);u<n&&u<8&&(n=u,i=s)}return i}(n,i.height-d))){var p=s([n,i.height-d]);a.value.push(p),v(),r=a.value.indexOf(p)}l=[n,d],a.redraw(),e.preventDefault(),e.stopPropagation()}),a.getValueAt=function(e){if(e<a.xrange[0]||e>a.xrange[1])return a.defaulty;for(var t=[a.xrange[0],a.defaulty],n=0,i=0;i<a.value.length;i+=1){var o=a.value[i];if(e==o[0])return o[1];if(e<o[0])return n=(e-t[0])/(o[0]-t[0]),t[1]*(1-n)+o[1]*n;t=o}return o=[a.xrange[1],a.defaulty],n=(e-t[0])/(o[0]-t[0]),t[1]*(1-n)+o[1]*n},a.resample=function(e){for(var t=[],n=(a.xrange[1]-a.xrange[0])/e,i=a.xrange[0];i<=a.xrange[1];i+=n)t.push(a.getValueAt(i));return t},a.addValue=function(e){for(var t=0;t<a.value;t++)if(!(a.value[t][0]<e[0]))return a.value.splice(t,0,e),void redraw();a.value.push(e),redraw()};var r=-1;a.redraw=function(){var e=i.parentNode.getBoundingClientRect();e&&i.width!=e.width&&e.width&&e.width<1e3&&(i.width=e.width),e&&i.height!=e.height&&e.height&&e.height<1e3&&(i.height=e.height);var t=i.getContext("2d");t.setTransform(1,0,0,1,0,0),t.translate(0,i.height),t.scale(1,-1),t.fillStyle=a.bgcolor,t.fillRect(0,0,i.width,i.height),t.strokeStyle=a.linecolor,t.beginPath();var n=o([a.xrange[0],a.defaulty]);for(var s in t.moveTo(n[0],n[1]),a.value)n=o(a.value[s]),t.lineTo(n[0],n[1]);for(n=o([a.xrange[1],a.defaulty]),t.lineTo(n[0],n[1]),t.stroke(),s=0;s<a.value.length;s+=1)n=o(a.value[s]),t.fillStyle=r==s?"white":a.pointscolor,t.beginPath(),t.arc(n[0],n[1],r==s?4:2,0,2*Math.PI),t.fill();if(a.show_samples){var l=a.resample(a.show_samples);for(t.fillStyle="#888",s=0;s<l.length;s+=1)n=o([s*((a.xrange[1]-a.xrange[0])/a.show_samples)+a.xrange[0],l[s]]),t.beginPath(),t.arc(n[0],n[1],2,0,2*Math.PI),t.fill()}};var l=[0,0];function u(e){var t=i.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top;if(n<0?n=0:n>i.width&&(n=i.width),o<0?o=0:o>i.height&&(o=i.height),-1!=r&&h([e.clientX-t.left,e.clientY-t.top],[n,o])>.5*i.height)return a.value.splice(r,1),void c(e);var u=s([-(l[0]-n),l[1]-o]);if(-1!=r){var p=a.xrange[0],m=a.xrange[1];a.no_trespassing&&(r>0&&(p=a.value[r-1][0]),r<a.value.length-1&&(m=a.value[r+1][0]));var g=a.value[r];g[0]+=u[0],g[1]+=u[1],g[0]<p?g[0]=p:g[0]>m&&(g[0]=m),g[1]<a.yrange[0]?g[1]=a.yrange[0]:g[1]>a.yrange[1]&&(g[1]=a.yrange[1])}v(),a.redraw(),l[0]=n,l[1]=o,d(),e.preventDefault(),e.stopPropagation()}function c(e){r=-1,a.redraw(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c),d(),e.preventDefault(),e.stopPropagation()}function d(){n.callback?n.callback.call(a,a.value):e.trigger(a,"change")}function h(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function v(){var e=null;-1!=r&&(e=a.value[r]),a.value.sort(function(e,t){return e[0]-t[0]}),e&&(r=a.value.indexOf(e))}return a.redraw(),a},i.prototype.addTitle=function(t){var n=e.createElement("div",".listtitle",t);return this.root.appendChild(n),n},i.prototype.addHTML=function(t,n){var a=e.createElement("div",".listtext",t);return n&&a.addEventListener("mousedown",n),this.root.appendChild(a),a},i.prototype.clear=function(){this.root.innerHTML=""},i.prototype.addItem=function(t,n,a,i){var o=n||t.content||t.name,s=e.createListItem(this.item_code,{".title":o});s.item=t,a&&s.classList.add("enabled"),i||(s.querySelector(".trash").style.display="none");var r=this;return s.addEventListener("mousedown",function(e){e.preventDefault(),this.setSelected(!0),r.onItemSelected&&r.onItemSelected(t,s)}),s.querySelector(".tick").addEventListener("mousedown",function(e){e.preventDefault(),s.classList.toggle("enabled"),r.onItemToggled&&r.onItemToggled(t,s,s.classList.contains("enabled"))}),s.querySelector(".trash").addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),r.onItemRemoved&&r.onItemRemoved(t,s)}),s.setContent=function(e,t){t?s.querySelector(".title").innerHTML=e:s.querySelector(".title").innerText=e},s.toggleEnabled=function(e){s.classList.toggle("enabled")},s.setSelected=function(t){e.removeClass(r.root,"selected"),t?this.classList.add("selected"):this.classList.remove("selected"),r.selected=s.item},s.show=function(){this.style.display=""},s.hide=function(){this.style.display="none"},this.root.appendChild(s),s},e.ComplexList=i,e});
//# sourceMappingURL=sourcemaps/widgets.js.map

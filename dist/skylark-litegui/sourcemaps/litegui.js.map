{"version":3,"sources":["litegui.js"],"names":["define","skylark","LiteGUI","root","content","panels","windows","undo_steps","modalbg_div","mainmenu","init","options","width","height","this","setWindowSize","container","document","getElementById","body","wrapped","createElement","style","position","overflow","appendChild","classList","contains","window","addEventListener","e","maximizeWindow","className","modalbg","display","menubar","createMenubar","gui_callback","i","close","trigger","element","event_name","params","origin","evt","createEvent","initCustomEvent","srcElement","dispatchEvent","__events","bind","event","callback","constructor","String","querySelectorAll","NodeList","Array","length","inner","dummy","widget","Object","defineProperty","enumerable","configurable","writable","value","unbind","removeEventListener","removeClass","elem","selector","class_name","list","remove","add","litegui_element","elements","parentNode","removeChild","getById","id","Menubar","w","h","boxShadow","setCursor","name","cursor","isCursorOverElement","left","pageX","top","pageY","rect","getBoundingClientRect","getRect","toClipboard","object","force_local","JSON","stringify","input","in_clipboard","queryCommandSupported","type","opacity","select","execCommand","console","log","err","warn","_safe_cliboard","localStorage","setItem","getLocalClipboard","data","getItem","parse","addCSS","code","innerHTML","getElementsByTagName","requireCSS","url","on_complete","link","rel","href","shift","media","onload","request","dataType","mimeType","xhr","XMLHttpRequest","open","responseType","overrideMimeType","nocache","setRequestHeader","load","response","status","error","LEvent","DOMParser","parseFromString","success","call","onerror","FormData","append","send","requestText","on_error","requestJSON","requestBinary","requireScript","on_progress","version","total","loaded_scripts","script","num","src","original_src","async","push","requireScriptSerial","addScript","newDiv","tag","id_class","events","t","split","substr","v","setAttribute","createListItem","values","childNodes","subelem","querySelector","innerText","createButton","undefined","getParents","parentElement","nodeType","Node","ELEMENT_NODE","newWindow","title","new_window","write","styles","outerHTML","scripts","showModalBackground","showMessage","dialog","Dialog","noclose","addButton","makeModal","popup","min_height","show","alert","confirm","paddingBottom","buttons","dataset","focus","prompt","textinput","textarea","keyCode","which","choice","choices","downloadURL","filename","download","click","downloadFile","file","File","Blob","URL","createObjectURL","setTimeout","revokeObjectURL","getUrlVars","hash","vars","hashes","location","slice","indexOf","getUrlVar","blur","draggable","dragger","on_start","on_finish","on_is_draggable","inner_mouse","getClientRects","x","y","stopPropagation","preventDefault","prev_x","clientX","prev_y","clientY","deltax","deltay","cloneObject","target","o","isFunction","Float32Array","apply","isArray","set","safeName","str","replace","special_codes","navicon","refresh","gear","open_folder","tick","trash","htmlEncode","html_code","htmlDecode","unicode_character","sizeToCSS","Math","abs","getElementWindow","doc","ownerDocument","defaultView","parentWindow","createDropArea","callback_drop","callback_enter","callback_exit","onDragEvent","onDrop","r","stopImmediatePropagation","prototype","eval_code","match","tpl","re","exec","Function","escapeHtmlEntities","text","c","entityTable","charCodeAt","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","attach"],"mappings":"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","file":"../litegui.js","sourcesContent":["\r\n/**\r\n* Core namespace of LiteGUI library, it holds some useful functions\r\n*\r\n* @class LiteGUI\r\n* @constructor\r\n*/\r\n\r\ndefine([\r\n\t\"skylark-langx-ns\"\r\n],function(skylark){\r\n\r\n\r\n\tvar LiteGUI = {\r\n\t\troot: null,\r\n\t\tcontent: null,\r\n\r\n\t\tpanels: {},\r\n\t\twindows: [], //windows opened by the GUI (we need to know about them to close them once the app closes)\r\n\r\n\t\t//undo\r\n\t\tundo_steps: [],\r\n\r\n\t\t//used for blacken when a modal dialog is shown\r\n\t\tmodalbg_div: null,\r\n\r\n\t\t//the top menu\r\n\t\tmainmenu: null,\r\n\r\n\t\t/**\r\n\t\t* initializes the lib, must be called\r\n\t\t* @method init\r\n\t\t* @param {object} options some options are container, menubar, \r\n\t\t*/\r\n\t\tinit: function(options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\tif(options.width && options.height)\r\n\t\t\t\tthis.setWindowSize(options.width,options.height);\r\n\r\n\t\t\t//choose main container\r\n\t\t\tthis.container = null;\r\n\t\t\tif( options.container )\r\n\t\t\t\tthis.container = document.getElementById(options.container);\r\n\t\t\tif(!this.container )\r\n\t\t\t\tthis.container = document.body;\r\n\r\n\t\t\tif( options.wrapped )\r\n\t\t\t{\r\n\t\t\t\t//create litegui root element\r\n\t\t\t\tvar root = document.createElement(\"div\");\r\n\t\t\t\troot.style.position = \"relative\";\r\n\t\t\t\troot.style.overflow = \"hidden\";\r\n\t\t\t\tthis.root = root;\r\n\t\t\t\tthis.container.appendChild( root );\r\n\r\n\t\t\t\t//content: the main container for everything\r\n\t\t\t\tvar content = document.createElement(\"div\");\r\n\t\t\t\tthis.content = content;\r\n\t\t\t\tthis.root.appendChild(content);\r\n\r\n\t\t\t\t//maximize\r\n\t\t\t\tif( this.root.classList.contains(\"fullscreen\") )\r\n\t\t\t\t{\r\n\t\t\t\t\twindow.addEventListener(\"resize\", function(e) { \r\n\t\t\t\t\t\tLiteGUI.maximizeWindow();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.root = this.content = this.container;\r\n\r\n\t\t\tthis.root.className = \"litegui-wrap fullscreen\";\r\n\t\t\tthis.content.className = \"litegui-maincontent\";\r\n\r\n\t\t\t//create modal dialogs container\r\n\t\t\tvar modalbg = this.modalbg_div = document.createElement(\"div\");\r\n\t\t\tthis.modalbg_div.className = \"litemodalbg\";\r\n\t\t\tthis.root.appendChild(this.modalbg_div);\r\n\t\t\tmodalbg.style.display = \"none\";\r\n\r\n\t\t\t//create menubar\r\n\t\t\tif(options.menubar)\r\n\t\t\t\tthis.createMenubar();\r\n\r\n\t\t\t//called before anything\r\n\t\t\tif(options.gui_callback)\r\n\t\t\t\toptions.gui_callback();\r\n\r\n\t\t\t//external windows\r\n\t\t\twindow.addEventListener(\"beforeunload\", function(e) {\r\n\t\t\t\tfor(var i in LiteGUI.windows)\r\n\t\t\t\t\tLiteGUI.windows[i].close();\r\n\t\t\t\tLiteGUI.windows = [];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Triggers a simple event in an object (similar to jQuery.trigger)\r\n\t\t* @method trigger\r\n\t\t* @param {Object} element could be an HTMLEntity or a regular object\r\n\t\t* @param {String} event_name the type of the event\r\n\t\t* @param {*} params it will be stored in e.detail\r\n\t\t* @param {*} origin it will be stored in e.srcElement\r\n\t\t*/\r\n\t\ttrigger: function(element, event_name, params, origin)\r\n\t\t{\r\n\t\t\tvar evt = document.createEvent( 'CustomEvent' );\r\n\t\t\tevt.initCustomEvent( event_name, true,true, params ); //canBubble, cancelable, detail\r\n\t\t\tevt.srcElement = origin;\r\n\t\t\tif( element.dispatchEvent )\r\n\t\t\t\telement.dispatchEvent( evt );\r\n\t\t\telse if( element.__events )\r\n\t\t\t\telement.__events.dispatchEvent( evt );\r\n\t\t\t//else nothing seems binded here so nothing to do\r\n\t\t\treturn evt;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Binds an event in an object (similar to jQuery.bind)\r\n\t\t* If the element is not an HTML entity a new one is created, attached to the object (as non-enumerable, called __events) and used\r\n\t\t* @method trigger\r\n\t\t* @param {Object} element could be an HTMLEntity, a regular object, a query string or a regular Array of entities\r\n\t\t* @param {String} event the string defining the event\r\n\t\t* @param {Function} callback where to call\r\n\t\t*/\r\n\t\tbind: function( element, event, callback )\r\n\t\t{\r\n\t\t\tif(!element)\r\n\t\t\t\tthrow(\"Cannot bind to null\");\r\n\t\t\tif(!event)\r\n\t\t\t\tthrow(\"Event bind missing\");\r\n\t\t\tif(!callback)\r\n\t\t\t\tthrow(\"Bind callback missing\");\r\n\r\n\t\t\tif(element.constructor === String)\r\n\t\t\t\telement = document.querySelectorAll( element );\r\n\t\t\t\t\r\n\t\t\tif(element.constructor === NodeList || element.constructor === Array)\r\n\t\t\t{\r\n\t\t\t\tfor(var i = 0; i < element.length; ++i)\r\n\t\t\t\t\tinner( element[i] );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tinner( element );\r\n\r\n\t\t\tfunction inner( element )\r\n\t\t\t{\r\n\t\t\t\tif(element.addEventListener)\r\n\t\t\t\t\telement.addEventListener(event, callback);\r\n\t\t\t\telse if(element.__events)\r\n\t\t\t\t\telement.__events.addEventListener( event, callback );\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t//create a dummy HTMLentity so we can use it to bind HTML events\r\n\t\t\t\t\tvar dummy = document.createElement(\"span\");\r\n\t\t\t\t\tdummy.widget = element; //double link\r\n\t\t\t\t\tObject.defineProperty( element, \"__events\", {\r\n\t\t\t\t\t\tenumerable: false,\r\n\t\t\t\t\t\tconfigurable: false,\r\n\t\t\t\t\t\twritable: false,\r\n\t\t\t\t\t\tvalue: dummy\r\n\t\t\t\t\t});\r\n\t\t\t\t\telement.__events.addEventListener( event, callback );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Unbinds an event in an object (similar to jQuery.unbind)\r\n\t\t* @method unbind\r\n\t\t* @param {Object} element could be an HTMLEntity or a regular object\r\n\t\t* @param {String} event the string defining the event\r\n\t\t* @param {Function} callback where to call\r\n\t\t*/\r\n\t\tunbind: function(element, event, callback)\r\n\t\t{\r\n\t\t\tif( element.removeEventListener )\r\n\t\t\t\telement.removeEventListener( event, callback );\r\n\t\t\telse if( element.__events && element.__events.removeEventListener )\r\n\t\t\t\telement.__events.removeEventListener( event, callback );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* removes a class \r\n\t\t* @method removeClass\r\n\t\t* @param {HTMLElement} root\r\n\t\t* @param {String} selector\r\n\t\t* @param {String} class_name\r\n\t\t*/\r\n\t\tremoveClass: function( elem, selector, class_name ){\r\n\t\t\tif(!class_name)\r\n\t\t\t{\r\n\t\t\t\tclass_name = selector;\r\n\t\t\t\tselector = \".\" + selector;\r\n\t\t\t}\r\n\t\t\tvar list = (elem || document).querySelectorAll( selector );\r\n\t\t\tfor(var i = 0; i < list.length; ++i)\r\n\t\t\t\tlist[i].classList.remove(class_name);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Appends litegui widget to the global interface\r\n\t\t* @method add\r\n\t\t* @param {Object} litegui_element\r\n\t\t*/\r\n\t\tadd: function( litegui_element )\r\n\t\t{\r\n\t\t\tthis.content.appendChild( litegui_element.root || litegui_element );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Remove from the interface, it is is an HTML element it is removed from its parent, if it is a widget the same.\r\n\t\t* @method remove\r\n\t\t* @param {Object} litegui_element it also supports HTMLentity, selector string or Array of elements\r\n\t\t*/\r\n\t\tremove: function( element )\r\n\t\t{\r\n\t\t\tif(!element)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif( element.constructor === String ) //selector\r\n\t\t\t{\r\n\t\t\t\tvar elements = document.querySelectorAll( element );\r\n\t\t\t\tfor(var i = 0; i < elements.length; ++i)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar element = elements[i];\r\n\t\t\t\t\tif(element && element.parentNode)\r\n\t\t\t\t\t\telement.parentNode.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif( element.constructor === Array || element.constructor === NodeList ) \r\n\t\t\t{\r\n\t\t\t\tfor(var i = 0; i < element.length; ++i)\r\n\t\t\t\t\tLiteGUI.remove( element[i] );\r\n\t\t\t}\r\n\t\t\telse if( element.root && element.root.parentNode ) //ltiegui widget\r\n\t\t\t\telement.root.parentNode.removeChild( element.root );\r\n\t\t\telse if( element.parentNode ) //regular HTML entity\r\n\t\t\t\telement.parentNode.removeChild( element );\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* wrapper of document.getElementById\r\n\t\t* @method getById\r\n\t\t* @param {String} id\r\n\t\t* return {HTMLEntity}\r\n\t\t**/\r\n\t\tgetById: function(id)\r\n\t\t{\r\n\t\t\treturn document.getElementById(id);\r\n\t\t},\r\n\r\n\t\tcreateMenubar: function()\r\n\t\t{\r\n\t\t\tthis.menubar = new LiteGUI.Menubar(\"mainmenubar\");\r\n\t\t\tthis.add( this.menubar );\r\n\t\t},\r\n\r\n\t\tsetWindowSize: function(w,h)\r\n\t\t{\r\n\t\t\tvar style = this.root.style;\r\n\r\n\t\t\tif(w && h)\r\n\t\t\t{\r\n\t\t\t\tstyle.width = w+\"px\";\r\n\t\t\t\tstyle.height = h + \"px\";\r\n\t\t\t\tstyle.boxShadow = \"0 0 4px black\"\r\n\t\t\t\tthis.root.classList.remove(\"fullscreen\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif( this.root.classList.contains(\"fullscreen\") )\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.root.classList.add(\"fullscreen\");\r\n\t\t\t\tstyle.width = \"100%\";\r\n\t\t\t\tstyle.height = \"100%\";\r\n\t\t\t\tstyle.boxShadow = \"0 0 0\";\r\n\t\t\t}\r\n\t\t\tLiteGUI.trigger( LiteGUI, \"resized\");\r\n\t\t},\r\n\r\n\t\tmaximizeWindow: function()\r\n\t\t{\r\n\t\t\tthis.setWindowSize();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Change cursor\r\n\t\t* @method setCursor\r\n\t\t* @param {String} cursor\r\n\t\t**/\r\n\t\tsetCursor: function( name )\r\n\t\t{\r\n\t\t\tthis.root.style.cursor = name;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Test if the cursor is inside an element\r\n\t\t* @method setCursor\r\n\t\t* @param {String} cursor\r\n\t\t**/\r\n\t\tisCursorOverElement: function( event, element )\r\n\t\t{\r\n\t\t\tvar left = event.pageX;\r\n\t\t\tvar top = event.pageY;\r\n\t\t\tvar rect = element.getBoundingClientRect();\r\n\t\t\tif(!rect)\r\n\t\t\t\treturn false;\r\n\t\t\tif(top > rect.top && top < (rect.top + rect.height) &&\r\n\t\t\t\tleft > rect.left && left < (rect.left + rect.width) )\r\n\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetRect: function(element)\r\n\t\t{\r\n\t\t\treturn element.getBoundingClientRect();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Copy a string to the clipboard (it needs to be invoqued from a click event)\r\n\t\t* @method toClipboard\r\n\t\t* @param {String} data\r\n\t\t* @param {Boolean} force_local force to store the data in the browser clipboard (this one can be read back)\r\n\t\t**/\r\n\t\ttoClipboard: function( object, force_local )\r\n\t\t{\r\n\t\t\tif(object && object.constructor !== String )\r\n\t\t\t\tobject = JSON.stringify( object );\r\n\r\n\t\t\tvar input = null;\r\n\t\t\tvar in_clipboard = false;\r\n\t\t\tif( !force_local )\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tvar copySupported = document.queryCommandSupported('copy');\r\n\t\t\t\tinput = document.createElement(\"input\");\r\n\t\t\t\tinput.type = \"text\";\r\n\t\t\t\tinput.style.opacity = 0;\r\n\t\t\t\tinput.value = object;\r\n\t\t\t\tdocument.body.appendChild( input );\r\n\t\t\t\tinput.select();\r\n\t\t\t\tin_clipboard = document.execCommand('copy');\r\n\t\t\t\tconsole.log( in_clipboard ? \"saved to clipboard\" : \"problem saving to clipboard\");\r\n\t\t\t\tdocument.body.removeChild( input );\r\n\t\t\t} catch (err) {\r\n\t\t\t\tif(input)\r\n\t\t\t\t\tdocument.body.removeChild( input );\r\n\t\t\t\tconsole.warn('Oops, unable to copy using the true clipboard');\r\n\t\t\t}\r\n\r\n\t\t\t//old system\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tthis._safe_cliboard = null;\r\n\t\t\t\tlocalStorage.setItem(\"litegui_clipboard\", object );\r\n\t\t\t}\r\n\t\t\tcatch (err)\r\n\t\t\t{\r\n\t\t\t\tthis._safe_cliboard = object;\r\n\t\t\t\tconsole.warn(\"cliboard quota excedeed\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Reads from the secondary clipboard (only can read if the data was stored using the toClipboard)\r\n\t\t* @method getLocalClipboard\r\n\t\t* @return {String} clipboard\r\n\t\t**/\r\n\t\tgetLocalClipboard: function()\r\n\t\t{\r\n\t\t\tvar data = localStorage.getItem(\"litegui_clipboard\");\r\n\t\t\tif(!data && this._safe_cliboard)\r\n\t\t\t\tdata = this._safe_cliboard;\r\n\t\t\tif(!data) \r\n\t\t\t\treturn null;\r\n\t\t\tif(data[0] == \"{\")\r\n\t\t\t\treturn JSON.parse( data );\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Insert some CSS code to the website\r\n\t\t* @method addCSS\r\n\t\t* @param {String|Object} code it could be a string with CSS rules, or an object with the style syntax.\r\n\t\t**/\r\n\t\taddCSS: function(code)\r\n\t\t{\r\n\t\t\tif(!code)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(code.constructor === String)\r\n\t\t\t{\r\n\t\t\t\tvar style = document.createElement('style');\r\n\t\t\t\tstyle.type = 'text/css';\r\n\t\t\t\tstyle.innerHTML = code;\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(style);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tfor(var i in code)\r\n\t\t\t\tdocument.body.style[i] = code[i];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Requires a new CSS\r\n\t\t* @method requireCSS\r\n\t\t* @param {String} url string with url or an array with several urls\r\n\t\t* @param {Function} on_complete\r\n\t\t**/\r\n\t\trequireCSS: function(url, on_complete)\r\n\t\t{\r\n\t\t\tif(typeof(url)==\"string\")\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\twhile(url.length)\r\n\t\t\t{\r\n\t\t\t\tvar link  = document.createElement('link');\r\n\t\t\t\t//link.id   = cssId;\r\n\t\t\t\tlink.rel  = 'stylesheet';\r\n\t\t\t\tlink.type = 'text/css';\r\n\t\t\t\tlink.href = url.shift(1);\r\n\t\t\t\tlink.media = 'all';\r\n\t\t\t\tvar head = document.getElementsByTagName('head')[0];\r\n\t\t\t\thead.appendChild(link);\r\n\t\t\t\tif(url.length == 0)\r\n\t\t\t\t\tlink.onload = on_complete;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request file from url (it could be a binary, text, etc.). If you want a simplied version use \r\n\t\t* @method request\r\n\t\t* @param {Object} request object with all the parameters like data (for sending forms), dataType, success, error\r\n\t\t* @param {Function} on_complete\r\n\t\t**/\r\n\t\trequest: function(request)\r\n\t\t{\r\n\t\t\tvar dataType = request.dataType || \"text\";\r\n\t\t\tif(dataType == \"json\") //parse it locally\r\n\t\t\t\tdataType = \"text\";\r\n\t\t\telse if(dataType == \"xml\") //parse it locally\r\n\t\t\t\tdataType = \"text\";\r\n\t\t\telse if (dataType == \"binary\")\r\n\t\t\t{\r\n\t\t\t\t//request.mimeType = \"text/plain; charset=x-user-defined\";\r\n\t\t\t\tdataType = \"arraybuffer\";\r\n\t\t\t\trequest.mimeType = \"application/octet-stream\";\r\n\t\t\t}\t\r\n\r\n\t\t\t//regular case, use AJAX call\r\n\t        var xhr = new XMLHttpRequest();\r\n\t        xhr.open( request.data ? 'POST' : 'GET', request.url, true);\r\n\t        if(dataType)\r\n\t            xhr.responseType = dataType;\r\n\t        if (request.mimeType)\r\n\t            xhr.overrideMimeType( request.mimeType );\r\n\t\t\tif( request.nocache )\r\n\t\t\t\txhr.setRequestHeader('Cache-Control', 'no-cache');\r\n\r\n\t        xhr.onload = function(load)\r\n\t\t\t{\r\n\t\t\t\tvar response = this.response;\r\n\t\t\t\tif(this.status != 200)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar err = \"Error \" + this.status;\r\n\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\tLEvent.trigger(xhr,\"fail\", this.status);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(request.dataType == \"json\") //chrome doesnt support json format\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(request.dataType == \"xml\")\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar xmlparser = new DOMParser();\r\n\t\t\t\t\t\tresponse = xmlparser.parseFromString(response,\"text/xml\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(request.error)\r\n\t\t\t\t\t\t\trequest.error(err);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(request.success)\r\n\t\t\t\t\trequest.success.call(this, response, this);\r\n\t\t\t};\r\n\t        xhr.onerror = function(err) {\r\n\t\t\t\tif(request.error)\r\n\t\t\t\t\trequest.error(err);\r\n\t\t\t}\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tif( request.data )\r\n\t\t\t{\r\n\t\t\t\tfor(var i in request.data)\r\n\t\t\t\t\tdata.append(i,request.data[i]);\r\n\t\t\t}\r\n\r\n\t        xhr.send( data );\r\n\t\t\treturn xhr;\r\n\t\t},\t\r\n\r\n\t\t/**\r\n\t\t* Request file from url\r\n\t\t* @method requestText\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestText: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"text\", success: on_complete, error: on_error });\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request file from url\r\n\t\t* @method requestJSON\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestJSON: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"json\", success: on_complete, error: on_error });\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request binary file from url\r\n\t\t* @method requestBinary\r\n\t\t* @param {String} url\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t**/\r\n\t\trequestBinary: function(url, on_complete, on_error )\r\n\t\t{\r\n\t\t\treturn this.request({ url: url, dataType:\"binary\", success: on_complete, error: on_error });\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method requireScript\r\n\t\t* @param {String|Array} url the url of the script or an array containing several urls\r\n\t\t* @param {Function} on_complete\r\n\t\t* @param {Function} on_error\r\n\t\t* @param {Function} on_progress (if several files are required, on_progress is called after every file is added to the DOM)\r\n\t\t**/\r\n\t\trequireScript: function(url, on_complete, on_error, on_progress, version )\r\n\t\t{\r\n\t\t\tif(!url)\r\n\t\t\t\tthrow(\"invalid URL\");\r\n\r\n\t\t\tif( url.constructor === String )\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\tvar total = url.length;\r\n\t\t\tvar size = total;\r\n\t\t\tvar loaded_scripts = [];\r\n\r\n\t\t\tfor(var i in url)\r\n\t\t\t{\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.num = i;\r\n\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\tscript.src = url[i] + ( version ? \"?version=\" + version : \"\" );\r\n\t\t\t\tscript.original_src = url[i];\r\n\t\t\t\tscript.async = false;\r\n\t\t\t\tscript.onload = function(e) { \r\n\t\t\t\t\ttotal--;\r\n\t\t\t\t\tloaded_scripts.push(this);\r\n\t\t\t\t\tif(total)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(on_progress)\r\n\t\t\t\t\t\t\ton_progress(this.original_src, this.num);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(on_complete)\r\n\t\t\t\t\t\ton_complete( loaded_scripts );\r\n\t\t\t\t};\r\n\t\t\t\tif(on_error)\r\n\t\t\t\t\tscript.onerror = function(err) { \r\n\t\t\t\t\t\ton_error(err, this.original_src, this.num );\r\n\t\t\t\t\t}\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t//old version, it loads one by one, so it is slower\r\n\t\trequireScriptSerial: function(url, on_complete, on_progress )\r\n\t\t{\r\n\t\t\tif(typeof(url)==\"string\")\r\n\t\t\t\turl = [url];\r\n\r\n\t\t\tvar loaded_scripts = [];\r\n\t\t\tfunction addScript()\r\n\t\t\t{\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\tscript.src = url.shift(1);\r\n\t\t\t\tscript.onload = function(e) { \r\n\t\t\t\t\tif(url.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(on_progress)\r\n\t\t\t\t\t\t\ton_progress(url[0], url.length);\r\n\r\n\t\t\t\t\t\taddScript();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tloaded_scripts.push(this);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(on_complete)\r\n\t\t\t\t\t\ton_complete( loaded_scripts );\r\n\t\t\t\t};\r\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t\t}\r\n\r\n\t\t\taddScript();\r\n\t\t},\r\n\r\n\t\tnewDiv: function(id, code)\r\n\t\t{\r\n\t\t\treturn this.createElement(\"div\",id,code);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method createElement\r\n\t\t* @param {String} tag\r\n\t\t* @param {String} id_class string containing id and classes, example: \"myid .someclass .anotherclass\"\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} style\r\n\t\t**/\r\n\t\tcreateElement: function(tag, id_class, content, style, events)\r\n\t\t{\r\n\t\t\tvar elem = document.createElement( tag );\r\n\t\t\tif(id_class)\r\n\t\t\t{\r\n\t\t\t\tvar t = id_class.split(\" \");\r\n\t\t\t\tfor(var i = 0; i < t.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(t[i][0] == \".\")\r\n\t\t\t\t\t\telem.classList.add( t[i].substr(1) );\r\n\t\t\t\t\telse if(t[i][0] == \"#\")\r\n\t\t\t\t\t\telem.id = t[i].substr(1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telem.id = t[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telem.root = elem;\r\n\t\t\tif(content)\r\n\t\t\t\telem.innerHTML = content;\r\n\t\t\telem.add = function(v) { this.appendChild( v.root || v ); };\r\n\r\n\t\t\tif(style)\r\n\t\t\t{\r\n\t\t\t\tif(style.constructor === String)\r\n\t\t\t\t\telem.setAttribute(\"style\",style);\r\n\t\t\t\telse\r\n\t\t\t\t\tfor(var i in style)\r\n\t\t\t\t\t\telem.style[i] = style[i];\r\n\t\t\t}\r\n\r\n\t\t\tif(events)\r\n\t\t\t{\r\n\t\t\t\tfor(var i in events)\r\n\t\t\t\t\telem.addEventListener(i, events[i]);\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Useful to create elements from a text like '<div><span class=\"title\"></span></div>' and an object like { \".title\":\"mytitle\" }\r\n\t\t* @method createListItem\r\n\t\t* @param {String} code\r\n\t\t* @param {Object} values it will use innerText in the elements that matches that selector\r\n\t\t* @param {Object} style\r\n\t\t* @return {HTMLElement} \r\n\t\t**/\r\n\t\tcreateListItem: function( code, values, style )\r\n\t\t{\r\n\t\t\tvar elem = document.createElement(\"span\");\r\n\t\t\telem.innerHTML = code;\r\n\t\t\telem = elem.childNodes[0]; //to get the node\r\n\t\t\tif(values)\r\n\t\t\tfor(var i in values)\r\n\t\t\t{\r\n\t\t\t\tvar subelem = elem.querySelector(i);\r\n\t\t\t\tif(subelem)\r\n\t\t\t\t\tsubelem.innerText = values[i];\r\n\t\t\t}\r\n\t\t\tif(style)\r\n\t\t\tfor(var i in style)\r\n\t\t\t\telem.style[i] = style[i];\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Request script and inserts it in the DOM\r\n\t\t* @method createButton\r\n\t\t* @param {String} id\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback when the button is pressed\r\n\t\t* @param {Object|String} style\r\n\t\t**/\r\n\t\tcreateButton: function( id_class, content, callback, style )\r\n\t\t{\r\n\t\t\tvar elem = document.createElement(\"button\");\r\n\t\t\telem.className = \"litegui litebutton button\";\r\n\t\t\tif(id_class)\r\n\t\t\t{\r\n\t\t\t\tvar t = id_class.split(\" \");\r\n\t\t\t\tfor(var i = 0; i < t.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(t[i][0] == \".\")\r\n\t\t\t\t\t\telem.classList.add( t[i].substr(1) );\r\n\t\t\t\t\telse if(t[i][0] == \"#\")\r\n\t\t\t\t\t\telem.id = t[i].substr(1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telem.id = t[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telem.root = elem;\r\n\t\t\tif(content !== undefined)\r\n\t\t\t\telem.innerHTML = content;\r\n\t\t\tif(callback)\r\n\t\t\t\telem.addEventListener(\"click\", callback );\r\n\t\t\tif(style)\r\n\t\t\t{\r\n\t\t\t\tif(style.constructor === String)\r\n\t\t\t\t\telem.setAttribute(\"style\",style);\r\n\t\t\t\telse\r\n\t\t\t\t\tfor(var i in style)\r\n\t\t\t\t\t\telem.style[i] = style[i];\r\n\t\t\t}\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\tgetParents: function(element)\r\n\t\t{\r\n\t\t\tvar elements = [];\r\n\t\t\twhile ((element = element.parentElement) !== null) {\r\n\t\t\t\tif (element.nodeType !== Node.ELEMENT_NODE)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telements.push(elem);\r\n\t\t\t}\r\n\t\t\treturn elements;\r\n\t\t},\r\n\r\n\t\t//used to create a window that retains all the CSS info or the scripts.\r\n\t\tnewWindow: function(title, width, height, options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\tvar new_window = window.open(\"\",\"\",\"width=\"+width+\", height=\"+height+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\t\tnew_window.document.write( \"<html><head><title>\"+title+\"</title>\" );\r\n\r\n\t\t\t//transfer style\r\n\t\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\t\tnew_window.document.write( styles[i].outerHTML );\r\n\r\n\t\t\t//transfer scripts (optional because it can produce some errors)\r\n\t\t\tif(options.scripts)\r\n\t\t\t{\r\n\t\t\t\tvar scripts = document.querySelectorAll(\"script\");\r\n\t\t\t\tfor(var i = 0; i < scripts.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(scripts[i].src) //avoid inline scripts, otherwise a cloned website would be created\r\n\t\t\t\t\t\tnew_window.document.write( scripts[i].outerHTML );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar content = options.content || \"\";\r\n\t\t\tnew_window.document.write( \"</head><body>\"+content+\"</body></html>\" );\r\n\t\t\tnew_window.document.close();\r\n\t\t\treturn new_window;\r\n\t\t},\r\n\r\n\t\t//* DIALOGS *******************\r\n\t\tshowModalBackground: function(v)\r\n\t\t{\r\n\t\t\tif(LiteGUI.modalbg_div)\r\n\t\t\t\tLiteGUI.modalbg_div.style.display = v ? \"block\" : \"none\";\r\n\t\t},\r\n\r\n\t\tshowMessage: function(content, options)\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\t\r\n\t\t\toptions.title = options.title || \"Attention\";\r\n\t\t\toptions.content = content;\r\n\t\t\toptions.close = 'fade';\r\n\t\t\tvar dialog = new LiteGUI.Dialog( options );\r\n\t\t\tif(!options.noclose)\r\n\t\t\t\tdialog.addButton(\"Close\",{ close: true });\r\n\t\t\tdialog.makeModal('fade');\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a dialog with a message\r\n\t\t* @method popup\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} options ( min_height, content, noclose )\r\n\t\t**/\r\n\t\tpopup: function( content, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\toptions.min_height = 140;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\toptions.content = content;\r\n\t\t\toptions.close = 'fade';\r\n\r\n\t\t\tvar dialog = new LiteGUI.Dialog(options);\r\n\t\t\tif(!options.noclose)\r\n\t\t\t\tdialog.addButton(\"Close\",{ close: true });\r\n\t\t\tdialog.show();\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t* Shows an alert dialog with a message\r\n\t\t* @method alert\r\n\t\t* @param {String} content\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\talert: function( content, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\r\n\t\t\t\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Alert\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\toptions.height = options.height || 140;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\t\t\tLiteGUI.remove(\".litepanel.alert\"); //kill other panels\r\n\t\t\treturn LiteGUI.showMessage(content,options);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a confirm dialog with a message\r\n\t\t* @method confirm\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tconfirm: function( content, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Confirm\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\t//options.height = 100;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tcontent +=\"<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>\";\r\n\t\t\toptions.noclose = true;\r\n\r\n\t\t\tvar dialog = this.showMessage(content,options);\r\n\t\t\tdialog.content.style.paddingBottom = \"10px\";\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\t\t\tbuttons[0].focus();\r\n\r\n\t\t\tfunction inner(v) {\r\n\t\t\t\tvar v = this.dataset[\"value\"] == \"yes\";\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback) \r\n\t\t\t\t\tcallback(v);\r\n\t\t\t}\r\n\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a prompt dialog with a message\r\n\t\t* @method prompt\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tprompt: function( content, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Prompt\";\r\n\t\t\toptions.width = options.width || 280;\r\n\r\n\t\t\t//options.height = 140 + (options.textarea ? 40 : 0);\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tvar value = options.value || \"\";\r\n\t\t\tvar textinput = \"<input type='text' value='\"+value+\"'/>\";\r\n\t\t\tif (options.textarea)\r\n\t\t\t\ttextinput = \"<textarea class='textfield' style='width:95%'>\"+value+\"</textarea>\";\r\n\r\n\t\t\tcontent +=\"<p>\"+textinput+\"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>\";\r\n\t\t\toptions.noclose = true;\r\n\t\t\tvar dialog = this.showMessage( content, options );\r\n\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\r\n\t\t\tvar input = dialog.content.querySelector(\"input,textarea\");\r\n\t\t\tinput.addEventListener(\"keydown\", inner_key, true);\r\n\r\n\t\t\tfunction inner() {\r\n\t\t\t\tvar value = input.value;\r\n\t\t\t\tif(this.dataset && this.dataset[\"value\"] == \"cancel\")\r\n\t\t\t\t\tvalue = null;\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback)\r\n\t\t\t\t\tcallback( value );\r\n\t\t\t};\r\n\r\n\t\t\tfunction inner_key(e)\r\n\t\t\t{\r\n\t\t\t\tif (!e)\r\n\t\t\t\t\te = window.event;\r\n\t\t\t\tvar keyCode = e.keyCode || e.which;\r\n\t\t\t\tif (keyCode == '13'){\r\n\t\t\t\t\tinner();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\t\t\r\n\t\t\t\tif (keyCode == '29')\r\n\t\t\t\t\tdialog.close();\r\n\t\t\t};\r\n\r\n\t\t\tinput.focus();\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Shows a choice dialog with a message\r\n\t\t* @method choice\r\n\t\t* @param {String} content\r\n\t\t* @param {Function} callback\r\n\t\t* @param {Object} options ( title, width, height, content, noclose )\r\n\t\t**/\r\n\t\tchoice: function( content, choices, callback, options )\r\n\t\t{\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.className = \"alert\";\r\n\t\t\toptions.title = options.title || \"Select one option\";\r\n\t\t\toptions.width = options.width || 280;\r\n\t\t\t//options.height = 100;\r\n\t\t\tif (typeof(content) == \"string\")\r\n\t\t\t\tcontent = \"<p>\" + content + \"</p>\";\r\n\r\n\t\t\tfor(var i in choices)\r\n\t\t\t{\r\n\t\t\t\tcontent +=\"<button class='litebutton' data-value='\"+i+\"' style='width:45%; margin-left: 10px'>\"+(choices[i].content || choices[i])+\"</button>\";\r\n\t\t\t}\r\n\t\t\toptions.noclose = true;\r\n\r\n\t\t\tvar dialog = this.showMessage(content,options);\r\n\t\t\tdialog.content.style.paddingBottom = \"10px\";\r\n\t\t\tvar buttons = dialog.content.querySelectorAll(\"button\");\r\n\t\t\tfor(var i = 0; i < buttons.length; i++)\r\n\t\t\t\tbuttons[i].addEventListener(\"click\", inner);\r\n\r\n\t\t\tfunction inner(v) {\r\n\t\t\t\tvar v = choices[ this.dataset[\"value\"] ];\r\n\t\t\t\tdialog.close(); //close before callback\r\n\t\t\t\tif(callback) \r\n\t\t\t\t\tcallback(v);\r\n\t\t\t}\r\n\r\n\t\t\treturn dialog;\r\n\t\t},\r\n\r\n\t\tdownloadURL: function( url, filename )\r\n\t\t{\r\n\t\t\tvar link = document.createElement('a');\r\n\t\t\tlink.href = url;\r\n\t\t\tlink.download = filename;\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlink.click();\r\n\t\t\tdocument.body.removeChild(link);\r\n\t\t},\r\n\r\n\t\tdownloadFile: function( filename, data, dataType )\r\n\t\t{\r\n\t\t\tif(!data)\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"No file provided to download\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!dataType)\r\n\t\t\t{\r\n\t\t\t\tif(data.constructor === String )\r\n\t\t\t\t\tdataType = 'text/plain';\r\n\t\t\t\telse\r\n\t\t\t\t\tdataType = 'application/octet-stream';\r\n\t\t\t}\r\n\r\n\t\t\tvar file = null;\r\n\t\t\tif(data.constructor !== File && data.constructor !== Blob)\r\n\t\t\t\tfile = new Blob( [ data ], {type : dataType});\r\n\t\t\telse\r\n\t\t\t\tfile = data;\r\n\r\n\t\t\tvar url = URL.createObjectURL( file );\r\n\t\t\tvar element = document.createElement(\"a\");\r\n\t\t\telement.setAttribute('href', url);\r\n\t\t\telement.setAttribute('download', filename );\r\n\t\t\telement.style.display = 'none';\r\n\t\t\tdocument.body.appendChild(element);\r\n\t\t\telement.click();\r\n\t\t\tdocument.body.removeChild(element);\r\n\t\t\tsetTimeout( function(){ URL.revokeObjectURL( url ); }, 1000*60 ); //wait one minute to revoke url\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the URL vars ( ?foo=faa&foo2=etc )\r\n\t\t* @method getUrlVars\r\n\t\t**/\r\n\t\tgetUrlVars: function(){\r\n\t\t\tvar vars = [], hash;\r\n\t\t\tvar hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n\t\t\tfor(var i = 0; i < hashes.length; i++)\r\n\t\t\t{\r\n\t\t\t  hash = hashes[i].split('=');\r\n\t\t\t  vars.push(hash[0]);\r\n\t\t\t  vars[hash[0]] = hash[1];\r\n\t\t\t}\r\n\t\t\treturn vars;\r\n\t\t},\r\n\r\n\t\tgetUrlVar: function(name) {\r\n\t\t\treturn LiteGUI.getUrlVars()[name];\r\n\t\t},\r\n\r\n\t\tfocus: function( element )\r\n\t\t{\r\n\t\t\telement.focus();\r\n\t\t},\r\n\r\n\t\tblur: function( element )\r\n\t\t{\r\n\t\t\telement.blur();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Makes one element draggable\r\n\t\t* @method draggable\r\n\t\t* @param {HTMLEntity} container the element that will be dragged\r\n\t\t* @param {HTMLEntity} dragger the area to start the dragging\r\n\t\t**/\r\n\t\tdraggable: function( container, dragger, on_start, on_finish, on_is_draggable )\r\n\t\t{\r\n\t\t\tdragger = dragger || container;\r\n\t\t\tdragger.addEventListener(\"mousedown\", inner_mouse);\r\n\t\t\tdragger.style.cursor = \"move\";\r\n\t\t\tvar prev_x = 0;\r\n\t\t\tvar prev_y = 0;\r\n\r\n\t\t\tvar rect = container.getClientRects()[0];\r\n\t\t\tvar x = rect ? rect.left : 0;\r\n\t\t\tvar y = rect ? rect.top : 0;\r\n\r\n\t\t\tcontainer.style.position = \"absolute\";\r\n\t\t\tcontainer.style.left = x + \"px\";\r\n\t\t\tcontainer.style.top = y + \"px\";\r\n\r\n\t\t\tfunction inner_mouse(e)\r\n\t\t\t{\r\n\t\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t\t{\r\n\t\t\t\t\tif(!rect)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trect = container.getClientRects()[0];\r\n\t\t\t\t\t\tx = rect ? rect.left : 0;\r\n\t\t\t\t\t\ty = rect ? rect.top : 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(on_is_draggable && on_is_draggable(container,e) == false )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tprev_x = e.clientX;\r\n\t\t\t\t\tprev_y = e.clientY;\r\n\t\t\t\t\tdocument.addEventListener(\"mousemove\",inner_mouse);\r\n\t\t\t\t\tdocument.addEventListener(\"mouseup\",inner_mouse);\r\n\t\t\t\t\tif(on_start)\r\n\t\t\t\t\t\ton_start( container, e );\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.type == \"mouseup\")\r\n\t\t\t\t{\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\",inner_mouse);\r\n\t\t\t\t\tdocument.removeEventListener(\"mouseup\",inner_mouse);\r\n\r\n\t\t\t\t\tif( on_finish )\r\n\t\t\t\t\t\ton_finish( container, e );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(e.type == \"mousemove\")\r\n\t\t\t\t{\r\n\t\t\t\t\tvar deltax = e.clientX - prev_x;\r\n\t\t\t\t\tvar deltay = e.clientY - prev_y;\r\n\t\t\t\t\tprev_x = e.clientX;\r\n\t\t\t\t\tprev_y = e.clientY;\r\n\t\t\t\t\tx += deltax;\r\n\t\t\t\t\ty += deltay;\r\n\t\t\t\t\tcontainer.style.left = x + \"px\";\r\n\t\t\t\t\tcontainer.style.top = y + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Clones object content\r\n\t\t* @method cloneObject\r\n\t\t* @param {Object} object\r\n\t\t* @param {Object} target\r\n\t\t**/\r\n\t\tcloneObject: function(object, target)\r\n\t\t{\r\n\t\t\tvar o = target || {};\r\n\t\t\tfor(var i in object)\r\n\t\t\t{\r\n\t\t\t\tif(i[0] == \"_\" || i.substr(0,6) == \"jQuery\") //skip vars with _ (they are private)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar v = object[i];\r\n\t\t\t\tif(v == null)\r\n\t\t\t\t\to[i] = null;\t\t\t\r\n\t\t\t\telse if ( isFunction(v) )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse if (typeof(v) == \"number\" || typeof(v) == \"string\")\r\n\t\t\t\t\to[i] = v;\r\n\t\t\t\telse if( v.constructor == Float32Array ) //typed arrays are ugly when serialized\r\n\t\t\t\t\to[i] = Array.apply( [], v ); //clone\r\n\t\t\t\telse if ( isArray(v) )\r\n\t\t\t\t{\r\n\t\t\t\t\tif( o[i] && o[i].constructor == Float32Array ) //reuse old container\r\n\t\t\t\t\t\to[i].set(v);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[i] = JSON.parse( JSON.stringify(v) ); //v.slice(0); //not safe using slice because it doesnt clone content, only container\r\n\t\t\t\t}\r\n\t\t\t\telse //slow but safe\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//prevent circular recursions\r\n\t\t\t\t\t\to[i] = JSON.parse( JSON.stringify(v) );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (err)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn o;\r\n\t\t},\r\n\r\n\t\tsafeName: function( str )\r\n\t\t{\r\n\t\t\treturn String(str).replace(/[\\s\\.]/g, '');\r\n\t\t},\r\n\r\n\t\t//those useful HTML unicode codes that I never remeber but I always need\r\n\t\tspecial_codes: {\r\n\t\t\tclose: \"&#10005;\",\r\n\t\t\tnavicon: \"&#9776;\",\r\n\t\t\trefresh: \"&#8634;\",\r\n\t\t\tgear: \"&#9881;\",\r\n\t\t\topen_folder: \"&#128194;\",\r\n\t\t\tdownload: \"&#11123;\",\r\n\t\t\ttick: \"&#10003;\",\r\n\t\t\ttrash: \"&#128465;\"\r\n\t\t},\r\n\t\t\r\n\t\t//given a html entity string it returns the equivalent unicode character\r\n\t\thtmlEncode: function( html_code )\r\n\t\t{\r\n\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\te.innerHTML = html_code;\r\n\t\t\treturn e.innerText;\r\n\t\t},\r\n\r\n\t\t//given a unicode character it returns the equivalent html encoded string\r\n\t\thtmlDecode: function( unicode_character )\r\n\t\t{\r\n\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\te.innerText = unicode_character;\r\n\t\t\treturn e.innerHTML;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Convert sizes in any format to a valid CSS format (number to string, negative number to calc( 100% - number px )\r\n\t\t* @method sizeToCSS\r\n\t\t* @param {String||Number} size\r\n\t\t* @return {String} valid css size string\r\n\t\t**/\r\n\t\tsizeToCSS: function( v )\r\n\t\t{\r\n\t\t\tif( v ===  undefined || v === null )\r\n\t\t\t\treturn null;\r\n\t\t\tif(v.constructor === String )\r\n\t\t\t\treturn v;\r\n\t\t\tif(v >= 0 )\r\n\t\t\t\treturn (v|0) + \"px\";\r\n\t\t\treturn \"calc( 100% - \" + Math.abs(v|0) + \"px )\";\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Returns the window where this element is attached (used in multi window applications)\r\n\t\t* @method getElementWindow\r\n\t\t* @param {HTMLElement} v\r\n\t\t* @return {Window} the window element\r\n\t\t**/\r\n\t\tgetElementWindow: function(v)\r\n\t\t{\r\n\t        var doc = v.ownerDocument;\r\n\t        return doc.defaultView || doc.parentWindow;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Helper, makes drag and drop easier by enabling drag and drop in a given element\r\n\t\t* @method createDropArea\r\n\t\t* @param {HTMLElement} element the element where users could drop items\r\n\t\t* @param {Function} callback_drop function to call when the user drops the item\r\n\t\t* @param {Function} callback_enter [optional] function to call when the user drags something inside\r\n\t\t**/\r\n\t\tcreateDropArea: function( element, callback_drop, callback_enter, callback_exit )\r\n\t\t{\r\n\t\t\telement.addEventListener(\"dragenter\", onDragEvent);\r\n\r\n\t\t\tfunction onDragEvent(evt)\r\n\t\t\t{\r\n\t\t\t\telement.addEventListener(\"dragexit\", onDragEvent);\r\n\t\t\t\telement.addEventListener(\"dragover\", onDragEvent);\r\n\t\t\t\telement.addEventListener(\"drop\", onDrop);\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t\tif(evt.type == \"dragenter\" && callback_enter)\r\n\t\t\t\t\tcallback_enter(evt, this);\r\n\t\t\t\tif(evt.type == \"dragexit\" && callback_exit)\r\n\t\t\t\t\tcallback_exit(evt, this);\r\n\t\t\t}\r\n\r\n\t\t\tfunction onDrop(evt)\r\n\t\t\t{\r\n\t\t\t\tevt.stopPropagation();\r\n\t\t\t\tevt.preventDefault();\r\n\r\n\t\t\t\telement.removeEventListener(\"dragexit\", onDragEvent);\r\n\t\t\t\telement.removeEventListener(\"dragover\", onDragEvent);\r\n\t\t\t\telement.removeEventListener(\"drop\", onDrop);\r\n\r\n\t\t\t\tvar r = undefined;\r\n\t\t\t\tif(callback_drop)\r\n\t\t\t\t\tr = callback_drop(evt);\r\n\t\t\t\tif(r)\r\n\t\t\t\t{\r\n\t\t\t\t\tevt.stopPropagation();\r\n\t\t\t\t\tevt.stopImmediatePropagation();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//low quality templating system\r\n\tObject.defineProperty( String.prototype, \"template\", {\r\n\t\tvalue: function( data, eval_code )\r\n\t\t{\r\n\t\t\tvar tpl = this;\r\n\t\t\tvar re = /{{([^}}]+)?}}/g, match;\r\n\t\t    while(match = re.exec(tpl)) {\r\n\t\t\t\tvar str = eval_code ? (new Function(\"with(this) { try { return \" + match[1] +\"} catch(e) { return 'error';} }\")).call(data) : data[match[1]];\r\n\t\t\t    tpl = tpl.replace(match[0], str);\r\n\t\t    }\r\n\t\t    return tpl;\t\t\r\n\t\t},\r\n\t\tenumerable: false\r\n\t});\r\n\r\n\r\n\tfunction purgeElement(d, skip) {\r\n\t    var a = d.attributes, i, l, n;\r\n\r\n\t    if (a) {\r\n\t        for (i = a.length - 1; i >= 0; i -= 1) {\r\n\t            n = a[i].name;\r\n\t            if (typeof d[n] === 'function') {\r\n\t                d[n] = null;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\r\n\t    a = d.childNodes;\r\n\t    if (a) {\r\n\t        l = a.length;\r\n\t        for (i = 0; i < l; i += 1) {\r\n\t            purgeElement(d.childNodes[i]);\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\t//useful functions\r\n\r\n\t//from stackoverflow http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\r\n\r\n\tif(typeof escapeHtmlEntities == 'undefined') {\r\n\t        escapeHtmlEntities = function (text) {\r\n\t            return text.replace(/[\\u00A0-\\u2666<>\\&]/g, function(c) {\r\n\t                return '&' + \r\n\t                (escapeHtmlEntities.entityTable[c.charCodeAt(0)] || '#'+c.charCodeAt(0)) + ';';\r\n\t            });\r\n\t        };\r\n\r\n\t        // all HTML4 entities as defined here: http://www.w3.org/TR/html4/sgml/entities.html\r\n\t        // added: amp, lt, gt, quot and apos\r\n\t        escapeHtmlEntities.entityTable = {\r\n\t            34 : 'quot', \r\n\t            38 : 'amp', \r\n\t            39 : 'apos', \r\n\t            60 : 'lt', \r\n\t            62 : 'gt', \r\n\t            160 : 'nbsp', \r\n\t            161 : 'iexcl', \r\n\t            162 : 'cent', \r\n\t            163 : 'pound', \r\n\t            164 : 'curren', \r\n\t            165 : 'yen', \r\n\t            166 : 'brvbar', \r\n\t            167 : 'sect', \r\n\t            168 : 'uml', \r\n\t            169 : 'copy', \r\n\t            170 : 'ordf', \r\n\t            171 : 'laquo', \r\n\t            172 : 'not', \r\n\t            173 : 'shy', \r\n\t            174 : 'reg', \r\n\t            175 : 'macr', \r\n\t            176 : 'deg', \r\n\t            177 : 'plusmn', \r\n\t            178 : 'sup2', \r\n\t            179 : 'sup3', \r\n\t            180 : 'acute', \r\n\t            181 : 'micro', \r\n\t            182 : 'para', \r\n\t            183 : 'middot', \r\n\t            184 : 'cedil', \r\n\t            185 : 'sup1', \r\n\t            186 : 'ordm', \r\n\t            187 : 'raquo', \r\n\t            188 : 'frac14', \r\n\t            189 : 'frac12', \r\n\t            190 : 'frac34', \r\n\t            191 : 'iquest', \r\n\t            192 : 'Agrave', \r\n\t            193 : 'Aacute', \r\n\t            194 : 'Acirc', \r\n\t            195 : 'Atilde', \r\n\t            196 : 'Auml', \r\n\t            197 : 'Aring', \r\n\t            198 : 'AElig', \r\n\t            199 : 'Ccedil', \r\n\t            200 : 'Egrave', \r\n\t            201 : 'Eacute', \r\n\t            202 : 'Ecirc', \r\n\t            203 : 'Euml', \r\n\t            204 : 'Igrave', \r\n\t            205 : 'Iacute', \r\n\t            206 : 'Icirc', \r\n\t            207 : 'Iuml', \r\n\t            208 : 'ETH', \r\n\t            209 : 'Ntilde', \r\n\t            210 : 'Ograve', \r\n\t            211 : 'Oacute', \r\n\t            212 : 'Ocirc', \r\n\t            213 : 'Otilde', \r\n\t            214 : 'Ouml', \r\n\t            215 : 'times', \r\n\t            216 : 'Oslash', \r\n\t            217 : 'Ugrave', \r\n\t            218 : 'Uacute', \r\n\t            219 : 'Ucirc', \r\n\t            220 : 'Uuml', \r\n\t            221 : 'Yacute', \r\n\t            222 : 'THORN', \r\n\t            223 : 'szlig', \r\n\t            224 : 'agrave', \r\n\t            225 : 'aacute', \r\n\t            226 : 'acirc', \r\n\t            227 : 'atilde', \r\n\t            228 : 'auml', \r\n\t            229 : 'aring', \r\n\t            230 : 'aelig', \r\n\t            231 : 'ccedil', \r\n\t            232 : 'egrave', \r\n\t            233 : 'eacute', \r\n\t            234 : 'ecirc', \r\n\t            235 : 'euml', \r\n\t            236 : 'igrave', \r\n\t            237 : 'iacute', \r\n\t            238 : 'icirc', \r\n\t            239 : 'iuml', \r\n\t            240 : 'eth', \r\n\t            241 : 'ntilde', \r\n\t            242 : 'ograve', \r\n\t            243 : 'oacute', \r\n\t            244 : 'ocirc', \r\n\t            245 : 'otilde', \r\n\t            246 : 'ouml', \r\n\t            247 : 'divide', \r\n\t            248 : 'oslash', \r\n\t            249 : 'ugrave', \r\n\t            250 : 'uacute', \r\n\t            251 : 'ucirc', \r\n\t            252 : 'uuml', \r\n\t            253 : 'yacute', \r\n\t            254 : 'thorn', \r\n\t            255 : 'yuml', \r\n\t            402 : 'fnof', \r\n\t            913 : 'Alpha', \r\n\t            914 : 'Beta', \r\n\t            915 : 'Gamma', \r\n\t            916 : 'Delta', \r\n\t            917 : 'Epsilon', \r\n\t            918 : 'Zeta', \r\n\t            919 : 'Eta', \r\n\t            920 : 'Theta', \r\n\t            921 : 'Iota', \r\n\t            922 : 'Kappa', \r\n\t            923 : 'Lambda', \r\n\t            924 : 'Mu', \r\n\t            925 : 'Nu', \r\n\t            926 : 'Xi', \r\n\t            927 : 'Omicron', \r\n\t            928 : 'Pi', \r\n\t            929 : 'Rho', \r\n\t            931 : 'Sigma', \r\n\t            932 : 'Tau', \r\n\t            933 : 'Upsilon', \r\n\t            934 : 'Phi', \r\n\t            935 : 'Chi', \r\n\t            936 : 'Psi', \r\n\t            937 : 'Omega', \r\n\t            945 : 'alpha', \r\n\t            946 : 'beta', \r\n\t            947 : 'gamma', \r\n\t            948 : 'delta', \r\n\t            949 : 'epsilon', \r\n\t            950 : 'zeta', \r\n\t            951 : 'eta', \r\n\t            952 : 'theta', \r\n\t            953 : 'iota', \r\n\t            954 : 'kappa', \r\n\t            955 : 'lambda', \r\n\t            956 : 'mu', \r\n\t            957 : 'nu', \r\n\t            958 : 'xi', \r\n\t            959 : 'omicron', \r\n\t            960 : 'pi', \r\n\t            961 : 'rho', \r\n\t            962 : 'sigmaf', \r\n\t            963 : 'sigma', \r\n\t            964 : 'tau', \r\n\t            965 : 'upsilon', \r\n\t            966 : 'phi', \r\n\t            967 : 'chi', \r\n\t            968 : 'psi', \r\n\t            969 : 'omega', \r\n\t            977 : 'thetasym', \r\n\t            978 : 'upsih', \r\n\t            982 : 'piv', \r\n\t            8226 : 'bull', \r\n\t            8230 : 'hellip', \r\n\t            8242 : 'prime', \r\n\t            8243 : 'Prime', \r\n\t            8254 : 'oline', \r\n\t            8260 : 'frasl', \r\n\t            8472 : 'weierp', \r\n\t            8465 : 'image', \r\n\t            8476 : 'real', \r\n\t            8482 : 'trade', \r\n\t            8501 : 'alefsym', \r\n\t            8592 : 'larr', \r\n\t            8593 : 'uarr', \r\n\t            8594 : 'rarr', \r\n\t            8595 : 'darr', \r\n\t            8596 : 'harr', \r\n\t            8629 : 'crarr', \r\n\t            8656 : 'lArr', \r\n\t            8657 : 'uArr', \r\n\t            8658 : 'rArr', \r\n\t            8659 : 'dArr', \r\n\t            8660 : 'hArr', \r\n\t            8704 : 'forall', \r\n\t            8706 : 'part', \r\n\t            8707 : 'exist', \r\n\t            8709 : 'empty', \r\n\t            8711 : 'nabla', \r\n\t            8712 : 'isin', \r\n\t            8713 : 'notin', \r\n\t            8715 : 'ni', \r\n\t            8719 : 'prod', \r\n\t            8721 : 'sum', \r\n\t            8722 : 'minus', \r\n\t            8727 : 'lowast', \r\n\t            8730 : 'radic', \r\n\t            8733 : 'prop', \r\n\t            8734 : 'infin', \r\n\t            8736 : 'ang', \r\n\t            8743 : 'and', \r\n\t            8744 : 'or', \r\n\t            8745 : 'cap', \r\n\t            8746 : 'cup', \r\n\t            8747 : 'int', \r\n\t            8756 : 'there4', \r\n\t            8764 : 'sim', \r\n\t            8773 : 'cong', \r\n\t            8776 : 'asymp', \r\n\t            8800 : 'ne', \r\n\t            8801 : 'equiv', \r\n\t            8804 : 'le', \r\n\t            8805 : 'ge', \r\n\t            8834 : 'sub', \r\n\t            8835 : 'sup', \r\n\t            8836 : 'nsub', \r\n\t            8838 : 'sube', \r\n\t            8839 : 'supe', \r\n\t            8853 : 'oplus', \r\n\t            8855 : 'otimes', \r\n\t            8869 : 'perp', \r\n\t            8901 : 'sdot', \r\n\t            8968 : 'lceil', \r\n\t            8969 : 'rceil', \r\n\t            8970 : 'lfloor', \r\n\t            8971 : 'rfloor', \r\n\t            9001 : 'lang', \r\n\t            9002 : 'rang', \r\n\t            9674 : 'loz', \r\n\t            9824 : 'spades', \r\n\t            9827 : 'clubs', \r\n\t            9829 : 'hearts', \r\n\t            9830 : 'diams', \r\n\t            338 : 'OElig', \r\n\t            339 : 'oelig', \r\n\t            352 : 'Scaron', \r\n\t            353 : 'scaron', \r\n\t            376 : 'Yuml', \r\n\t            710 : 'circ', \r\n\t            732 : 'tilde', \r\n\t            8194 : 'ensp', \r\n\t            8195 : 'emsp', \r\n\t            8201 : 'thinsp', \r\n\t            8204 : 'zwnj', \r\n\t            8205 : 'zwj', \r\n\t            8206 : 'lrm', \r\n\t            8207 : 'rlm', \r\n\t            8211 : 'ndash', \r\n\t            8212 : 'mdash', \r\n\t            8216 : 'lsquo', \r\n\t            8217 : 'rsquo', \r\n\t            8218 : 'sbquo', \r\n\t            8220 : 'ldquo', \r\n\t            8221 : 'rdquo', \r\n\t            8222 : 'bdquo', \r\n\t            8224 : 'dagger', \r\n\t            8225 : 'Dagger', \r\n\t            8240 : 'permil', \r\n\t            8249 : 'lsaquo', \r\n\t            8250 : 'rsaquo', \r\n\t            8364 : 'euro'\r\n\t        };\r\n\t    }\r\n\r\n\tfunction beautifyCode( code, reserved, skip_css )\r\n\t{\r\n\t\treserved = reserved || [\"abstract\", \"else\", \"instanceof\", \"super\", \"boolean\", \"enum\", \"int\", \"switch\", \"break\", \"export\", \"interface\", \"synchronized\", \"byte\", \"extends\", \"let\", \"this\", \"case\", \"false\", \"long\", \"throw\", \"catch\", \"final\", \"native\", \"throws\", \"char\", \"finally\", \"new\", \"transient\", \"class\", \"float\", \"null\", \"true\", \"const\", \"for\", \"package\", \"try\", \"continue\", \"function\", \"private\", \"typeof\", \"debugger\", \"goto\", \"protected\", \"var\", \"default\", \"if\", \"public\", \"void\", \"delete\", \"implements\", \"return\", \"volatile\", \"do\", \"import\", \"short\", \"while\", \"double\", \"in\", \"static\", \"with\"];\r\n\r\n\t\t//reserved words\r\n\t\tcode = code.replace(/\\b(\\w+)\\b/g, function(v) {\r\n\t\t\tif(reserved.indexOf(v) != -1)\r\n\t\t\t\treturn \"<span class='rsv'>\" + v + \"</span>\";\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\t\t//numbers\r\n\t\tcode = code.replace(/\\b([0-9]+)\\b/g, function(v) {\r\n\t\t\treturn \"<span class='num'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//obj.method\r\n\t\tcode = code.replace(/(\\w+\\.\\w+)/g, function(v) {\r\n\t\t\tvar t = v.split(\".\");\r\n\t\t\treturn \"<span class='obj'>\" + t[0] + \"</span>.<span class='prop'>\" + t[1] + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//function\r\n\t\tcode = code.replace(/(\\w+)\\(/g, function(v) {\r\n\t\t\treturn \"<span class='prop'>\" + v.substr(0, v.length - 1) + \"</span>(\";\r\n\t\t});\r\n\r\n\t\t//strings\r\n\t\tcode = code.replace(/(\\\"(\\\\.|[^\\\"])*\\\")/g, function(v) {\r\n\t\t\treturn \"<span class='str'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//comments \r\n\t\tcode = code.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, function(v) { ///(\\/\\/[a-zA-Z0-9\\?\\!\\(\\)_ ]*)/g\r\n\t\t\treturn \"<span class='cmnt'>\" + v.replace(/<[^>]*>/g, \"\") + \"</span>\";\r\n\t\t});\r\n\r\n\r\n\t\tif(!skip_css)\r\n\t\t\tcode = \"<style>.obj { color: #79B; } .prop { color: #B97; }\t.str,.num { color: #A79; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>\" + code;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tfunction beautifyJSON( code, skip_css )\r\n\t{\r\n\t\tif(typeof(code) == \"object\")\r\n\t\t\tcode = JSON.stringify(code);\r\n\r\n\t\tvar reserved = [\"false\", \"true\", \"null\"];\r\n\r\n\t\t//reserved words\r\n\t\tcode = code.replace(/(\\w+)/g, function(v) {\r\n\t\t\tif(reserved.indexOf(v) != -1)\r\n\t\t\t\treturn \"<span class='rsv'>\" + v + \"</span>\";\r\n\t\t\treturn v;\r\n\t\t});\r\n\r\n\r\n\t\t//numbers\r\n\t\tcode = code.replace(/([0-9]+)/g, function(v) {\r\n\t\t\treturn \"<span class='num'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//obj.method\r\n\t\tcode = code.replace(/(\\w+\\.\\w+)/g, function(v) {\r\n\t\t\tvar t = v.split(\".\");\r\n\t\t\treturn \"<span class='obj'>\" + t[0] + \"</span>.<span class='prop'>\" + t[1] + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//strings\r\n\t\tcode = code.replace(/(\\\"(\\\\.|[^\\\"])*\\\")/g, function(v) {\r\n\t\t\treturn \"<span class='str'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\t//comments\r\n\t\tcode = code.replace(/(\\/\\/[a-zA-Z0-9\\?\\!\\(\\)_ ]*)/g, function(v) {\r\n\t\t\treturn \"<span class='cmnt'>\" + v + \"</span>\";\r\n\t\t});\r\n\r\n\t\tif(!skip_css)\r\n\t\t\tcode = \"<style>.obj { color: #79B; } .prop { color: #B97; }\t.str { color: #A79; } .num { color: #B97; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>\" + code;\r\n\r\n\t\treturn code;\r\n\t}\r\n\r\n\tfunction dataURItoBlob( dataURI ) {\r\n\t\tvar pos = dataURI.indexOf(\",\");\r\n\t\t//convert to binary\r\n\t    var byteString = atob( dataURI.substr(pos+1) ); \r\n\t\t//copy from string to array\r\n\t    var ab = new ArrayBuffer( byteString.length ); \r\n\t    var ia = new Uint8Array(ab);\r\n\t\tvar l = byteString.length;\r\n\t    for (var i = 0; i < l; i++) {\r\n\t        ia[i] = byteString.charCodeAt(i);\r\n\t    }\r\n\r\n\t\tvar mime = dataURI.substr(5,pos-5);\r\n\t\tmime = mime.substr(0, mime.length - 7); //strip \";base64\"\r\n\t    return new Blob([ab], { type: mime });\r\n\t}\r\n\r\n\treturn skylark.attach(\"intg.litegui\",LiteGUI);\r\n});"]}
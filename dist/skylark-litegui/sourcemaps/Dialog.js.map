{"version":3,"sources":["Dialog.js"],"names":["define","LiteGUI","Dialog","options","legacy","constructor","String","id","console","warn","this","_ctor","MINIMIZED_WIDTH","title_height","getDialog","element","document","getElementById","dialog","prototype","that","width","height","minWidth","minHeight","content","panel","createElement","className","data","code","title","minimize","hide","detachable","close","closable","special_codes","innerHTML","root","querySelector","footer","fullcontent","style","buttons","i","addButton","name","scroll","overflow","close_button","addEventListener","bind","maximize_button","maximize","minimize_button","hide_button","detach_button","detachWindow","enableProperties","on_attached_to_DOM","on_resize","on_detached_from_DOM","attach","parent","appendChild","center","add","litegui_item","position","indexOf","boxShadow","draggable","bringToFront","minimized","resizable","setResizable","classList","corner","inner_mouse","mouse","is_corner","e","type","body","pageX","pageY","rect","getRect","w","neww","h","newh","removeEventListener","preventDefault","stopPropagation","dockTo","dock_type","top","left","Panel","right","bottom","Function","callback","button","remove","trigger","on_close","onclose","dialog_window","highlight","time","outline","doc","ownerDocument","defaultView","parentWindow","focus","setTimeout","old_box","getBoundingClientRect","display","splice","arrangeMinimized","push","pos","parentNode","makeModal","showModalBackground","modalbg_div","show","removeChild","v","reference_element","detach_window","fadeIn","opacity","transition","setPosition","x","y","setSize","setTitle","text","header","offsetWidth","offsetHeight","parent_width","parent_height","Math","floor","adjustSize","margin","skip_timeout","extra","clear","on_complete","getClientRects","textContent","window","open","write","styles","querySelectorAll","length","outerHTML","onbeforeunload","index","windows","_old_height","reattachWindow","showAll","dialogs","hideAll","closeAll"],"mappings":"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","file":"../Dialog.js","sourcesContent":["define([\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/****************** DIALOG **********************/\r\n\t/**\r\n\t* Dialog\r\n\t*\r\n\t* @class Dialog\r\n\t* @param {Object} options useful options are { title, width, height, closable, on_close, scroll }\r\n\t* @constructor\r\n\t*/\r\n\tfunction Dialog( options, legacy )\r\n\t{\r\n\t\tif( legacy || (options && options.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\tthis._ctor( options );\r\n\t}\r\n\r\n\tDialog.MINIMIZED_WIDTH = 200;\r\n\tDialog.title_height = \"20px\";\r\n\r\n\tDialog.getDialog = function( id )\r\n\t{\r\n\t\tvar element = document.getElementById( id );\t\t\r\n\t\tif(!element)\r\n\t\t\treturn null;\r\n\t\treturn element.dialog;\r\n\t}\r\n\r\n\tDialog.prototype._ctor = function( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar that = this;\r\n\t\tthis.width = options.width;\r\n\t\tthis.height = options.height;\r\n\t\tthis.minWidth = options.minWidth || 150;\r\n\t\tthis.minHeight = options.minHeight || 100;\r\n\t\tthis.content = options.content || \"\";\r\n\r\n\t\tvar panel = document.createElement(\"div\");\r\n\t\tif(options.id)\r\n\t\t\tpanel.id = options.id;\r\n\r\n\t\tpanel.className = \"litedialog \" + (options.className || \"\");\r\n\t\tpanel.data = this;\r\n\t\tpanel.dialog = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(options.title)\r\n\t\t{\r\n\t\t\tcode += \"<div class='panel-header'>\"+options.title+\"</div><div class='buttons'>\";\r\n\t\t\tif(options.minimize){\r\n\t\t\t\tcode += \"<button class='litebutton mini-button minimize-button'>-</button>\";\r\n\t\t\t\tcode += \"<button class='litebutton mini-button maximize-button' style='display:none'></button>\";\r\n\t\t\t}\r\n\t\t\tif(options.hide)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button hide-button'></button>\";\r\n\t\t\tif(options.detachable)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button detach-button'></button>\";\r\n\t\t\t\r\n\t\t\tif(options.close || options.closable)\r\n\t\t\t\tcode += \"<button class='litebutton mini-button close-button'>\"+ LiteGUI.special_codes.close +\"</button>\";\r\n\t\t\tcode += \"</div>\";\r\n\t\t}\r\n\r\n\t\tcode += \"<div class='content'>\"+this.content+\"</div>\";\r\n\t\tcode += \"<div class='panel-footer'></div>\";\r\n\t\tpanel.innerHTML = code;\r\n\r\n\t\tthis.root = panel;\r\n\t\tthis.content = panel.querySelector(\".content\");\r\n\t\tthis.footer = panel.querySelector(\".panel-footer\");\r\n\r\n\t\tif(options.fullcontent)\r\n\t\t{\r\n\t\t\tthis.content.style.width = \"100%\";\t\t\r\n\t\t\tthis.content.style.height = options.title ? \"calc( 100% - \"+Dialog.title_height+\" )\" : \"100%\";\r\n\t\t}\r\n\r\n\t\tif(options.buttons)\r\n\t\t{\r\n\t\t\tfor(var i in options.buttons)\r\n\t\t\t\tthis.addButton(options.buttons[i].name, options.buttons[i]);\r\n\t\t}\r\n\r\n\t\t//if(options.scroll == false)\tthis.content.style.overflow = \"hidden\";\r\n\t\tif(options.scroll == true)\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\r\n\t\t//buttons *********************************\r\n\t\tvar close_button = panel.querySelector(\".close-button\");\r\n\t\tif(close_button)\r\n\t\t\tclose_button.addEventListener(\"click\", this.close.bind(this) );\r\n\r\n\t\tvar maximize_button = panel.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.addEventListener(\"click\", this.maximize.bind(this) );\r\n\r\n\t\tvar minimize_button = panel.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\r\n\t\t\tminimize_button.addEventListener(\"click\", this.minimize.bind(this) );\r\n\r\n\t\tvar hide_button = panel.querySelector(\".hide-button\");\r\n\t\tif(hide_button)\r\n\t\t\thide_button.addEventListener(\"click\", this.hide.bind(this) );\r\n\r\n\t\tvar detach_button = panel.querySelector(\".detach-button\");\r\n\t\tif(detach_button)\r\n\t\t\tdetach_button.addEventListener(\"click\", function() { that.detachWindow(); });\r\n\r\n\t\t//size, draggable, resizable, etc\r\n\t\tthis.enableProperties(options);\r\n\r\n\t\tthis.root.addEventListener(\"DOMNodeInsertedIntoDocument\", function(){ \r\n\t\t\tif( that.on_attached_to_DOM )\r\n\t\t\t\tthat.on_attached_to_DOM();\r\n\t\t\tif( that.on_resize )\r\n\t\t\t\tthat.on_resize();\r\n\t\t});\r\n\t\tthis.root.addEventListener(\"DOMNodeRemovedFromDocument\", function(){ \r\n\t\t\tif( that.on_detached_from_DOM )\r\n\t\t\t\tthat.on_detached_from_DOM();\r\n\t\t});\r\n\r\n\r\n\t\t//attach\r\n\t\tif(options.attach || options.parent)\r\n\t\t{\r\n\t\t\tvar parent = null;\r\n\t\t\tif(options.parent)\r\n\t\t\t\tparent = typeof(options.parent) == \"string\" ? document.querySelector(options.parent) : options.parent;\r\n\t\t\tif(!parent)\r\n\t\t\t\tparent = LiteGUI.root;\r\n\t\t\tparent.appendChild( this.root );\r\n\t\t\tthis.center();\r\n\t\t}\r\n\r\n\t\t//if(options.position) //not docked\r\n\t\t//\tthis.setPosition( options.position[0], options.position[1] );\r\n\t}\r\n\r\n\t/**\r\n\t* add widget or html to the content of the dialog\r\n\t* @method add\r\n\t*/\r\n\tDialog.prototype.add = function( litegui_item )\r\n\t{\r\n\t\tthis.content.appendChild( litegui_item.root || litegui_item );\r\n\t}\r\n\r\n\t//takes the info from the parent to \r\n\tDialog.prototype.enableProperties = function(options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tvar that = this;\r\n\r\n\t\tvar panel = this.root;\r\n\t\tpanel.style.position = \"absolute\";\r\n\t\t//panel.style.display = \"none\";\r\n\r\n\t\tpanel.style.minWidth = this.minWidth + \"px\";\r\n\t\tpanel.style.minHeight = this.minHeight + \"px\";\r\n\r\n\t\tif(this.width)\r\n\t\t\tpanel.style.width = this.width + \"px\";\r\n\r\n\t\tif(this.height)\r\n\t\t{\r\n\t\t\tif(typeof(this.height) == \"number\")\r\n\t\t\t{\r\n\t\t\t\tpanel.style.height = this.height + \"px\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif(this.height.indexOf(\"%\") != -1)\r\n\t\t\t\t\tpanel.style.height = this.height;\r\n\t\t\t}\r\n\r\n\t\t\tthis.content.style.height = \"calc( \" + this.height + \"px - 24px )\";\r\n\t\t}\r\n\r\n\t\tpanel.style.boxShadow = \"0 0 3px black\";\r\n\r\n\t\tif(options.draggable)\r\n\t\t{\r\n\t\t\tthis.draggable = true;\r\n\t\t\tLiteGUI.draggable( panel, panel.querySelector(\".panel-header\"), function(){\r\n\t\t\t\tthat.bringToFront();\r\n\t\t\t},null, function(){\r\n\t\t\t\treturn !that.minimized;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(options.resizable)\r\n\t\t\tthis.setResizable();\r\n\t}\r\n\r\n\tDialog.prototype.setResizable = function()\r\n\t{\r\n\t\tif(this.resizable)\r\n\t\t\treturn;\r\n\r\n\t\tvar root = this.root;\r\n\t\tthis.resizable = true;\r\n\t\tvar footer = this.footer;\r\n\t\tfooter.style.minHeight = \"4px\";\r\n\t\tfooter.classList.add(\"resizable\");\r\n\r\n\t\tvar corner = document.createElement(\"div\");\r\n\t\tcorner.className = \"resizable-corner\";\r\n\t\tthis.root.appendChild( corner );\r\n\r\n\t\tfooter.addEventListener(\"mousedown\", inner_mouse);\r\n\t\tcorner.addEventListener(\"mousedown\", inner_mouse, true);\r\n\r\n\t\tvar mouse = [0,0];\r\n\t\tvar that = this;\r\n\r\n\t\tvar is_corner = false;\r\n\r\n\t\tfunction inner_mouse(e)\r\n\t\t{\r\n\t\t\t//console.log( getTime(), is_corner );\r\n\r\n\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.addEventListener(\"mousemove\", inner_mouse);\r\n\t\t\t\tdocument.body.addEventListener(\"mouseup\", inner_mouse);\r\n\t\t\t\tis_corner = this == corner;\r\n\t\t\t\tmouse[0] = e.pageX;\r\n\t\t\t\tmouse[1] = e.pageY;\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mousemove\")\r\n\t\t\t{\r\n\t\t\t\tvar rect = LiteGUI.getRect( root );\r\n\t\t\t\tvar w = rect.width;\r\n\t\t\t\tvar neww = w - (mouse[0] - e.pageX);\r\n\t\r\n\t\t\t\tvar h = rect.height;\r\n\t\t\t\tvar newh = h - (mouse[1] - e.pageY);\r\n\r\n\t\t\t\tif(is_corner)\r\n\t\t\t\t\troot.style.width = neww + \"px\";\r\n\t\t\t\troot.style.height = newh + \"px\";\r\n\r\n\t\t\t\tmouse[0] = e.pageX;\r\n\t\t\t\tmouse[1] = e.pageY;\r\n\t\t\t\tthat.content.style.height = \"calc( 100% - 24px )\";\r\n\r\n\t\t\t\tif(that.on_resize && (w != neww || h != newh) )\r\n\t\t\t\t\tthat.on_resize(e,neww,newh);\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mouseup\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", inner_mouse);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", inner_mouse);\r\n\t\t\t\tis_corner = false;\r\n\t\t\t}\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.dockTo = function( parent, dock_type )\r\n\t{\r\n\t\tif(!parent) return;\r\n\t\tvar panel = this.root;\r\n\r\n\t\tdock_type = dock_type || \"full\";\r\n\t\tparent = parent.content || parent;\r\n\r\n\t\tpanel.style.top = 0;\r\n\t\tpanel.style.left = 0;\r\n\r\n\t\tpanel.style.boxShadow = \"0 0 0\";\r\n\r\n\t\tif(dock_type == \"full\")\r\n\t\t{\r\n\t\t\tpanel.style.position = \"relative\";\r\n\t\t\tpanel.style.width = \"100%\";\r\n\t\t\tpanel.style.height = \"100%\";\r\n\t\t\tthis.content.style.width = \"100%\";\r\n\t\t\tthis.content.style.height = \"calc(100% - \"+ LiteGUI.Panel.title_height +\")\"; //title offset: 20px\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\t\t}\r\n\t\telse if(dock_type == 'left' || dock_type == 'right')\r\n\t\t{\r\n\t\t\tpanel.style.position = \"absolute\";\r\n\t\t\tpanel.style.top = 0;\r\n\t\t\tpanel.style[dock_type] = 0;\r\n\r\n\t\t\tpanel.style.width = this.width + \"px\";\r\n\t\t\tpanel.style.height = \"100%\";\r\n\t\t\tthis.content.style.height = \"calc(100% - \"+ LiteGUI.Panel.title_height +\")\";\r\n\t\t\tthis.content.style.overflow = \"auto\";\r\n\r\n\t\t\tif(dock_type == 'right')\r\n\t\t\t{\r\n\t\t\t\tpanel.style.left = \"auto\";\r\n\t\t\t\tpanel.style.right = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(dock_type == 'bottom' || dock_type == 'top')\r\n\t\t{\r\n\t\t\tpanel.style.width = \"100%\";\r\n\t\t\tpanel.style.height = this.height + \"px\";\r\n\t\t\tif(dock_type == 'bottom')\r\n\t\t\t{\r\n\t\t\t\tpanel.style.bottom = 0;\r\n\t\t\t\tpanel.style.top = \"auto\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.draggable)\r\n\t\t{\r\n\t\t\tLiteGUI.draggable(panel);\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif(parent.content)\r\n\t\t\tparent.content.appendChild(panel);\r\n\t\telse if( typeof(parent) == \"string\")\r\n\t\t{\r\n\t\t\tparent = document.querySelector( parent );\r\n\t\t\tif(parent)\r\n\t\t\t\tparent.appendChild( panel )\r\n\t\t}\r\n\t\telse\r\n\t\t\tparent.appendChild( panel ); \r\n\t}\r\n\r\n\tDialog.prototype.addButton = function(name,options)\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tif( options.constructor === Function )\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\tbutton.className = \"litebutton\";\r\n\r\n\t\tbutton.innerHTML = name;\r\n\t\tif(options.className)\r\n\t\t\tbutton.className += \" \" + options.className;\r\n\r\n\t\tthis.root.querySelector(\".panel-footer\").appendChild( button );\r\n\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback(this);\r\n\r\n\t\t\tif(options.close)\r\n\t\t\t\tthat.close();\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\t/**\r\n\t* destroys the dialog\r\n\t* @method close\r\n\t*/\r\n\tDialog.prototype.close = function() {\r\n\t\tLiteGUI.remove( this.root );\r\n\t\tLiteGUI.trigger( this, \"closed\", this);\r\n\t\tif(this.on_close)\r\n\t\t\tthis.on_close();\r\n\t\tif(this.onclose)\r\n\t\t\tconsole.warn(\"Dialog: Do not use onclose, use on_close instead\");\r\n\t\tif(this.dialog_window)\r\n\t\t{\r\n\t\t\tthis.dialog_window.close();\r\n\t\t\tthis.dialog_window = null;\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.highlight = function(time)\r\n\t{\r\n\t\ttime = time || 100;\r\n\t\tthis.root.style.outline = \"1px solid white\";\r\n\t\tvar doc = this.root.ownerDocument;\r\n\t\tvar w = doc.defaultView || doc.parentWindow;\r\n\t\tw.focus();\r\n\t\tsetTimeout( (function(){\r\n\t\t\tthis.root.style.outline = null;\r\n\t\t}).bind(this), time );\r\n\t}\r\n\r\n\tDialog.minimized = [];\r\n\r\n\tDialog.prototype.minimize = function() {\r\n\t\tif(this.minimized)\r\n\t\t\treturn;\r\n\r\n\t\tthis.minimized = true;\r\n\t\tthis.old_box = this.root.getBoundingClientRect();\r\n\r\n\t\tthis.root.querySelector(\".content\").style.display = \"none\";\r\n\t\t\r\n\t\tvar minimize_button = this.root.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\t\r\n\t\t\tminimize_button.style.display = \"none\";\r\n\r\n\t\tvar maximize_button = this.root.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.style.display = \"\";\r\n\r\n\t\tthis.root.style.width = LiteGUI.Dialog.MINIMIZED_WIDTH + \"px\";\r\n\r\n\t\tLiteGUI.bind( this, \"closed\", function() {\r\n\t\t\tLiteGUI.Dialog.minimized.splice( LiteGUI.Dialog.minimized.indexOf( this ), 1);\r\n\t\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\t\t});\r\n\r\n\t\tLiteGUI.Dialog.minimized.push( this );\r\n\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\r\n\t\tLiteGUI.trigger( this,\"minimizing\" );\r\n\t}\r\n\r\n\tDialog.arrangeMinimized = function()\r\n\t{\r\n\t\tfor(var i in LiteGUI.Dialog.minimized)\r\n\t\t{\r\n\t\t\tvar dialog = LiteGUI.Dialog.minimized[i];\r\n\t\t\tvar parent = dialog.root.parentNode;\r\n\t\t\tvar pos = parent.getBoundingClientRect().height - 20;\r\n\t\t\tdialog.root.style.left = LiteGUI.Dialog.MINIMIZED_WIDTH * i;\r\n\t\t\tdialog.root.style.top = pos + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.maximize = function() {\r\n\t\tif(!this.minimized)\r\n\t\t\treturn;\r\n\t\tthis.minimized = false;\r\n\r\n\t\tthis.root.querySelector(\".content\").style.display = \"\";\r\n\t\tLiteGUI.draggable(this.root);\r\n\t\tthis.root.style.left = this.old_box.left+\"px\";\r\n\t\tthis.root.style.top = this.old_box.top + \"px\";\r\n\t\tthis.root.style.width = this.old_box.width + \"px\";\r\n\t\tthis.root.style.height = this.old_box.height + \"px\";\r\n\r\n\t\tvar minimize_button = this.root.querySelector(\".minimize-button\");\r\n\t\tif(minimize_button)\r\n\t\t\tminimize_button.style.display = \"\";\r\n\r\n\t\tvar maximize_button = this.root.querySelector(\".maximize-button\");\r\n\t\tif(maximize_button)\r\n\t\t\tmaximize_button.style.display = \"none\";\r\n\r\n\t\tLiteGUI.Dialog.minimized.splice( LiteGUI.Dialog.minimized.indexOf( this ), 1);\r\n\t\tLiteGUI.Dialog.arrangeMinimized();\r\n\t\tLiteGUI.trigger( this, \"maximizing\" );\r\n\t}\r\n\r\n\tDialog.prototype.makeModal = function()\r\n\t{\r\n\t\tLiteGUI.showModalBackground(true);\r\n\t\tLiteGUI.modalbg_div.appendChild( this.root ); //add panel\r\n\t\tthis.show();\r\n\t\tthis.center();\r\n\r\n\t\tLiteGUI.bind( this, \"closed\", inner );\r\n\r\n\t\tfunction inner(e)\r\n\t\t{\r\n\t\t\tLiteGUI.showModalBackground(false);\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.prototype.bringToFront = function()\r\n\t{\r\n\t\tvar parent = this.root.parentNode;\r\n\t\tparent.removeChild(this.root);\r\n\t\tparent.appendChild(this.root);\r\n\t}\r\n\r\n\t/**\r\n\t* shows a hidden dialog\r\n\t* @method show\r\n\t*/\r\n\tDialog.prototype.show = function( v, reference_element )\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t{\r\n\t\t\tif(!reference_element)\r\n\t\t\t\tLiteGUI.add( this );\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar doc = reference_element.ownerDocument;\r\n\t\t\t\tvar parent = doc.querySelector(\".litegui-wrap\") || doc.body;\r\n\t\t\t\tparent.appendChild( this.root );\r\n\t\t\t\tvar w = doc.defaultView || doc.parentWindow;\r\n\t\t\t\tw.focus();\r\n\t\t\t}\r\n\t\t\tthis.center();\r\n\t\t}\r\n\r\n\t\tif(!this.detach_window)\r\n\t\t{\r\n\t\t\tthis.root.style.display = \"\";\r\n\t\t\tLiteGUI.trigger( this, \"shown\" );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* hides the dialog\r\n\t* @method hide\r\n\t*/\r\n\tDialog.prototype.hide = function( v )\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t\tLiteGUI.trigger(this, \"hidden\");\r\n\t}\r\n\r\n\tDialog.prototype.fadeIn = function(time)\r\n\t{\r\n\t\ttime = time || 1000;\r\n\t\tthis.root.style.display = \"\";\r\n\t\tthis.root.style.opacity = 0;\r\n\t\tvar that = this;\r\n\t\tsetTimeout(function(){\r\n\t\t\tthat.root.style.transition = \"opacity \"+time+\"ms\";\r\n\t\t\tthat.root.style.opacity = 1;\r\n\t\t},100);\r\n\t}\r\n\r\n\tDialog.prototype.setPosition = function(x,y)\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t\tconsole.warn(\"LiteGUI.Dialog: Cannot set position of dialog if it is not in the DOM\");\r\n\t\tthis.root.position = \"absolute\";\r\n\t\tthis.root.style.left = x + \"px\";\r\n\t\tthis.root.style.top = y + \"px\";\r\n\t}\r\n\r\n\tDialog.prototype.setSize = function( w, h )\r\n\t{\r\n\t\tthis.root.style.width = typeof(w) == \"number\" ? w + \"px\" : w;\r\n\t\tthis.root.style.height = typeof(h) == \"number\" ? h + \"px\" : h;\r\n\t}\r\n\r\n\tDialog.prototype.setTitle = function(text)\r\n\t{\r\n\t\tif(!this.header)\r\n\t\t\treturn;\r\n\t\tthis.header.innerHTML = text;\r\n\t}\r\n\r\n\tDialog.prototype.center = function()\r\n\t{\r\n\t\tif(!this.root.parentNode)\r\n\t\t\treturn;\r\n\r\n\t\tthis.root.position = \"absolute\";\r\n\t\tvar width = this.root.offsetWidth;\r\n\t\tvar height = this.root.offsetHeight;\r\n\t\tvar parent_width = this.root.parentNode.offsetWidth;\r\n\t\tvar parent_height = this.root.parentNode.offsetHeight;\r\n\t\tthis.root.style.left = Math.floor(( parent_width - width ) * 0.5) + \"px\";\r\n\t\tthis.root.style.top = Math.floor(( parent_height - height ) * 0.5) + \"px\";\r\n\t}\r\n\r\n\t/**\r\n\t* Adjust the size of the dialog to the size of the content\r\n\t* @method adjustSize\r\n\t* @param {number} margin\r\n\t*/\r\n\tDialog.prototype.adjustSize = function( margin, skip_timeout )\r\n\t{\r\n\t\tmargin = margin || 0;\r\n\t\tthis.content.style.height = \"auto\";\r\n\r\n\t\tif(this.content.offsetHeight == 0 && !skip_timeout) //happens sometimes if the dialog is not yet visible\r\n\t\t{\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout( function(){ that.adjustSize( margin, true ); }, 1 );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar extra = 0;\r\n\t\tvar footer = this.root.querySelector(\".panel-footer\");\r\n\t\tif(footer)\r\n\t\t\textra += footer.offsetHeight;\r\n\r\n\t\tvar width = this.content.offsetWidth;\r\n\t\tvar height = this.content.offsetHeight + 20 + margin + extra;\r\n\r\n\t\tthis.setSize( width, height );\r\n\t}\r\n\r\n\tDialog.prototype.clear = function()\r\n\t{\r\n\t\tthis.content.innerHTML = \"\";\r\n\t}\r\n\r\n\tDialog.prototype.detachWindow = function( on_complete, on_close )\r\n\t{\r\n\t\tif(this.dialog_window)\r\n\t\t\treturn;\r\n\r\n\t\t//create window\r\n\t\tvar rect = this.root.getClientRects()[0];\r\n\t\tvar w = rect.width;\r\n\t\tvar h = rect.height;\r\n\t\tvar title = \"Window\";\r\n\t\tvar header = this.root.querySelector(\".panel-header\");\r\n\t\tif(header)\r\n\t\t\ttitle = header.textContent;\r\n\r\n\t\tvar dialog_window = window.open(\"\",\"\",\"width=\"+w+\", height=\"+h+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\tdialog_window.document.write( \"<head><title>\"+title+\"</title>\" );\r\n\t\tthis.dialog_window = dialog_window;\r\n\r\n\t\t//transfer style\r\n\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\tdialog_window.document.write( styles[i].outerHTML );\r\n\t\tdialog_window.document.write( \"</head><body></body>\" );\r\n\t\tdialog_window.document.close();\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t//closing event\r\n\t\tdialog_window.onbeforeunload = function(){\r\n\t\t\tvar index = LiteGUI.windows.indexOf( dialog_window );\r\n\t\t\tif(index != -1)\r\n\t\t\t\tLiteGUI.windows.splice( index, 1 );\r\n\t\t\tif(on_close)\r\n\t\t\t\ton_close();\r\n\t\t}\r\n\r\n\t\t//move the content there\r\n\t\tdialog_window.document.body.appendChild( this.content );\r\n\t\tthis.root.style.display = \"none\"; //hide\r\n\t\tthis._old_height = this.content.style.height;\r\n\t\tthis.content.style.height = \"100%\";\r\n\r\n\t\tLiteGUI.windows.push( dialog_window );\r\n\r\n\t\tif(on_complete)\r\n\t\t\ton_complete();\r\n\r\n\t\treturn dialog_window;\t\t\r\n\t}\r\n\r\n\tDialog.prototype.reattachWindow = function( on_complete )\r\n\t{\r\n\t\tif(!this.dialog_window)\r\n\t\t\treturn;\r\n\r\n\t\tthis.root.appendChild( this.content );\r\n\t\tthis.root.style.display = \"\"; //show\r\n\t\tthis.content.style.height = this._old_height;\r\n\t\tdelete this._old_height;\r\n\t\tthis.dialog_window.close();\r\n\t\tvar index = LiteGUI.windows.indexOf( this.dialog_window );\r\n\t\tif(index != -1)\r\n\t\t\tLiteGUI.windows.splice( index, 1 );\r\n\t\tthis.dialog_window = null;\r\n\t}\r\n\r\n\r\n\t//*********************************************\r\n\r\n\tDialog.showAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.show();\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.hideAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.hide();\r\n\t\t}\r\n\t}\r\n\r\n\tDialog.closeAll = function()\r\n\t{\r\n\t\tvar dialogs = document.body.querySelectorAll(\"litedialog\");\r\n\t\tfor(var i = 0; i < dialogs.length; i++)\r\n\t\t{\r\n\t\t\tvar dialog = dialogs[i];\r\n\t\t\tdialog.dialog.close();\r\n\t\t}\r\n\t}\r\n\r\n\treturn LiteGUI.Dialog = Dialog;\r\n});"]}
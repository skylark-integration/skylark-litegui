{"version":3,"sources":["Table.js"],"names":["define","LiteGUI","Table","options","this","root","document","createElement","classList","add","columns","column_fields","rows","data","_must_update_header","colums","setColumns","scrollable","style","overflow","height","sizeToCSS","setRows","prototype","reuse","updateContent","addRow","row","skip_add","tr","j","length","td","value","undefined","constructor","Array","innerHTML","column","className","width","appendChild","push","updateRow","index","cells","querySelectorAll","field","updateCell","cell","childNodes","avg_width","Math","floor","toFixed","rest","i","c","String","Number","name","toLowerCase","join","header","th","data_row"],"mappings":"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","file":"../Table.js","sourcesContent":["//enclose in a scope\r\ndefine([\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\tfunction Table( options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tthis.root = document.createElement(\"table\");\r\n\t\tthis.root.classList.add(\"litetable\");\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.column_fields = [];\r\n\t\tthis.rows = [];\r\n\t\tthis.data = [];\r\n\r\n\t\tthis._must_update_header = true;\r\n\r\n\t\tif(options.colums)\r\n\t\t\tthis.setColumns(options.colums);\r\n\r\n\t\tif(options.scrollable)\r\n\t\t\tthis.root.style.overflow = \"auto\";\r\n\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\r\n\t\tif(options.columns)\r\n\t\t\tthis.setColumns( options.columns );\r\n\r\n\t\tif(options.rows)\r\n\t\t\tthis.setRows( options.data );\r\n\t}\r\n\r\n\tTable.prototype.setRows = function( data, reuse )\r\n\t{\r\n\t\tthis.data = data;\r\n\t\tthis.updateContent( reuse );\r\n\t}\r\n\r\n\tTable.prototype.addRow = function( row, skip_add )\r\n\t{\r\n\t\tvar tr = document.createElement(\"tr\");\r\n\r\n\t\t//create cells\r\n\t\tfor(var j = 0; j < this.column_fields.length; ++j)\r\n\t\t{\r\n\t\t\tvar td = document.createElement(\"td\");\r\n\r\n\t\t\tvar value = null;\r\n\r\n\t\t\tif(row.constructor === Array )\r\n\t\t\t\tvalue = row[ j ];\r\n\t\t\telse //object\r\n\t\t\t\tvalue = row[ this.column_fields[j] ];\r\n\t\t\tif(value === undefined)\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\ttd.innerHTML = value;\r\n\r\n\t\t\tvar column = this.columns[j];\r\n\t\t\tif(column === undefined)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tif(column.className)\r\n\t\t\t\ttd.className = column.className;\r\n\t\t\tif(column.width)\r\n\t\t\t\ttd.style.width = column.width;\r\n\t\t\ttr.appendChild( td );\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild( tr );\r\n\t\tthis.rows.push( tr );\r\n\t\tif(!skip_add)\r\n\t\t\tthis.data.push( row );\r\n\r\n\t\treturn tr;\r\n\t}\r\n\r\n\tTable.prototype.updateRow = function( index, row )\r\n\t{\r\n\t\tthis.data[ index ] = row;\r\n\r\n\t\tvar tr = this.rows[index];\r\n\t\tif(!tr)\r\n\t\t\treturn;\r\n\r\n\t\tvar cells = tr.querySelectorAll(\"td\");\r\n\t\tfor(var j = 0; j < cells.length; ++j)\r\n\t\t{\r\n\t\t\tvar column = this.columns[j];\r\n\r\n\t\t\tvar value = null;\r\n\r\n\t\t\tif(row.constructor === Array )\r\n\t\t\t\tvalue = row[ j ];\r\n\t\t\telse\r\n\t\t\t\tvalue = row[ column.field ];\r\n\r\n\t\t\tif(value === undefined)\r\n\t\t\t\tvalue = \"\";\r\n\r\n\t\t\tcells[j].innerHTML = value;\r\n\t\t}\r\n\t\treturn tr;\r\n\t}\r\n\r\n\tTable.prototype.updateCell = function( row, cell, data )\r\n\t{\r\n\t\tvar tr = this.rows[ row ];\r\n\t\tif(!tr)\r\n\t\t\treturn;\r\n\t\tvar cell = tr.childNodes[cell];\r\n\t\tif(!cell)\r\n\t\t\treturn;\r\n\t\tcell.innerHTML = data;\r\n\t\treturn cell;\r\n\t}\r\n\r\n\r\n\tTable.prototype.setColumns = function( columns )\r\n\t{\r\n\t\tthis.columns.length = 0;\r\n\t\tthis.column_fields.length = 0;\r\n\r\n\t\tvar avg_width = ((Math.floor(100 / columns.length)).toFixed(1)) + \"%\";\r\n\r\n\t\tvar rest = [];\r\n\r\n\t\tfor(var i = 0; i < columns.length; ++i)\r\n\t\t{\r\n\t\t\tvar c = columns[i];\r\n\r\n\t\t\tif( c === null || c === undefined )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t//allow to pass just strings or numbers instead of objects\r\n\t\t\tif( c.constructor === String || c.constructor === Number )\r\n\t\t\t\tc = { name: String(c) };\r\n\r\n\t\t\tvar column = {\r\n\t\t\t\tname: c.name || \"\",\r\n\t\t\t\twidth: LiteGUI.sizeToCSS(c.width || avg_width),\r\n\t\t\t\tfield: (c.field || c.name || \"\").toLowerCase(),\r\n\t\t\t\tclassName: c.className\r\n\t\t\t};\r\n\r\n\t\t\t//last\r\n\t\t\tif(i == columns.length - 1)\r\n\t\t\t\tcolumn.width = \" calc( 100% - ( \" + rest.join(\" + \") + \" ) )\";\r\n\t\t\telse\r\n\t\t\t\trest.push( column.width );\r\n\r\n\t\t\tthis.columns.push( column );\r\n\t\t\tthis.column_fields.push( column.field );\r\n\t\t}\r\n\r\n\t\tthis._must_update_header = true;\r\n\t\tthis.updateContent();\r\n\t}\r\n\r\n\tTable.prototype.updateContent = function( reuse )\r\n\t{\r\n\t\tthis.root.innerHTML = \"\";\r\n\r\n\t\t//update header\r\n\t\tif(this._must_update_header)\r\n\t\t{\r\n\t\t\tthis.header = document.createElement(\"tr\");\r\n\t\t\tfor(var i = 0; i < this.columns.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar column = this.columns[i];\r\n\t\t\t\tvar th = document.createElement(\"th\");\r\n\t\t\t\tth.innerHTML = column.name;\r\n\t\t\t\tif(column.width)\r\n\t\t\t\t\tth.style.width = column.width;\r\n\t\t\t\tcolumn.th = th;\r\n\t\t\t\tthis.header.appendChild( th );\r\n\t\t\t}\r\n\t\t\tthis._must_update_header = false;\r\n\t\t}\r\n\t\tthis.root.appendChild( this.header );\r\n\r\n\t\tif(!this.data)\r\n\t\t\treturn;\r\n\r\n\t\tif(this.data.length != this.rows.length)\r\n\t\t\treuse = false;\r\n\r\n\t\tif(reuse)\r\n\t\t{\r\n\t\t\tfor(var i = 0; i < this.rows.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar data_row = this.data[i];\r\n\t\t\t\tvar tr = this.updateRow( i, data_row );\r\n\t\t\t\tthis.root.appendChild( tr );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.rows.length = 0;\r\n\r\n\t\t\t//create rows\r\n\t\t\tfor(var i = 0; i < this.data.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar row = this.data[i];\r\n\t\t\t\tthis.addRow( row, true );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\treturn LiteGUI.Table = Table;\r\n\r\n\r\n});"]}
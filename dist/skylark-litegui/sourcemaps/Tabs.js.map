{"version":3,"sources":["Tabs.js"],"names":["define","LiteGUI","Tabs","options","legacy","constructor","String","id","console","warn","this","mode","root","document","createElement","data","className","tabs","current_tab","size","style","height","width","Number","toFixed","list","onMouseWheel","e","deltaY","scrollLeft","tabs_width","tabs_height","addEventListener","appendChild","tabs_root","tabs_by_index","selected","onchange","callback","parent","appendTo","prototype","show","display","hide","getCurrentTab","getCurrentTabId","getPreviousTab","previous_tab","at_front","prepend","getTab","getTabByIndex","index","getNumOfTabs","num","i","getTabContent","tab","content","getTabIndex","childNodes","length","addTab","skip_event","that","undefined","Math","random","element","safe_id","replace","dataset","innerHTML","title","button","tab_className","bigicon","closable","special_codes","close","querySelector","removeTab","preventDefault","stopPropagation","after","insertBefore","plus_tab","tab_width","minWidth","autoswitch","classList","add","_timeout_mouseover","clearTimeout","setTimeout","trigger","bind","overflow","tab_id","onTabClicked","tab_info","v","setTitle","click","destroy","onclose","recomputeTabsByIndex","callback_context","call","selectTab","skip_callbacks","addPlusTab","addButtonTab","contains","parentNode","callback_canopen","callback_leave","tab_content","querySelectorAll","remove","skip_events","setTabVisibility","child","previousSibling","removeChild","removeAllTabs","keep_plus","push","clear","hideTab","showTab","transferTab","target_tabs","newtab","detachTab","on_complete","on_close","tab_window","window","open","write","styles","outerHTML","newtabs","onbeforeunload","body"],"mappings":"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","file":"../Tabs.js","sourcesContent":["/**************  ***************************/\r\ndefine([\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\t\r\n\r\n\t/**\r\n\t* Widget that contains several tabs and their content\r\n\t* Options:\r\n\t* - mode: \"vertical\",\"horizontal\"\r\n\t* - size\r\n\t* - width,height\r\n\t* - autoswitch: allow autoswitch (switch when mouse over)\r\n\t* @class Tabs\r\n\t* @constructor\r\n\t*/\r\n\tfunction Tabs( options, legacy )\r\n\t{\r\n\t\tif( legacy || (options && options.constructor === String) )\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = legacy || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Tabs legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tthis.options = options;\r\n\r\n\t\tvar mode = this.mode = options.mode || \"horizontal\";\r\n\r\n\t\tvar root = document.createElement(\"DIV\");\r\n\t\tif(options.id) \r\n\t\t\troot.id = options.id;\r\n\t\troot.data = this;\r\n\t\troot.className = \"litetabs \" + mode;\r\n\t\tthis.root = root;\r\n\t\tthis.root.tabs = this;\r\n\r\n\t\tthis.current_tab = null; //current tab array [id, tab, content]\r\n\r\n\t\tif(mode == \"horizontal\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t\tthis.root.style.height = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.root.style.height = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(mode == \"vertical\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t\tthis.root.style.width = \"100%\";\r\n\t\t\t\telse\r\n\t\t\t\t\tthis.root.style.width = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = options.width.constructor === Number ? options.width.toFixed(0) + \"px\" : options.width;\r\n\t\tif(options.height)\r\n\t\t\tthis.root.style.height = options.height.constructor === Number ? options.height.toFixed(0) + \"px\" : options.height;\r\n\r\n\t\t//container of tab elements\r\n\t\tvar list = document.createElement(\"UL\");\r\n\t\tlist.className = \"wtabcontainer\";\r\n\t\tif(mode == \"vertical\")\r\n\t\t\tlist.style.width = LiteGUI.Tabs.tabs_width + \"px\";\r\n\t\telse\r\n\t\t\tlist.style.height = LiteGUI.Tabs.tabs_height + \"px\";\r\n\r\n\t\t//allows to use the wheel to see hidden tabs\r\n\t\tlist.addEventListener(\"wheel\", onMouseWheel);\r\n\t\tlist.addEventListener(\"mousewheel\", onMouseWheel);\r\n\t\tfunction onMouseWheel(e){\r\n\t\t\tif(e.deltaY)\r\n\t\t\t\tlist.scrollLeft += e.deltaY;\r\n\t\t}\r\n\r\n\t\tthis.list = list;\r\n\t\tthis.root.appendChild(this.list);\r\n\t\tthis.tabs_root = list;\r\n\r\n\t\tthis.tabs = {};\r\n\t\tthis.tabs_by_index = [];\r\n\t\tthis.selected = null;\r\n\r\n\t\tthis.onchange = options.callback;\r\n\r\n\t\tif(options.parent)\r\n\t\t\tthis.appendTo(options.parent);\r\n\t}\r\n\r\n\tTabs.tabs_width = 64;\r\n\tTabs.tabs_height = 26;\r\n\r\n\tTabs.prototype.show = function()\r\n\t{\r\n\t\tthis.root.style.display = \"block\";\r\n\t}\r\n\r\n\tTabs.prototype.hide = function()\r\n\t{\r\n\t\tthis.root.style.display = \"none\";\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Returns the currently selected tab in the form of a tab object\r\n\t* @method getCurrentTab\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getCurrentTab = function()\r\n\t{\r\n\t\tif(!this.current_tab)\r\n\t\t\treturn null;\r\n\t\treturn this.tabs[ this.current_tab[0] ];\r\n\t}\r\n\r\n\tTabs.prototype.getCurrentTabId = function()\r\n\t{\r\n\t\treturn this.current_tab[0];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the last tab pressed before this one. used to know from which tab we come\r\n\t* @method getCurrentTab\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getPreviousTab = function()\r\n\t{\r\n\t\tif(!this.previous_tab)\r\n\t\t\treturn null;\r\n\t\treturn this.tabs[ this.previous_tab[0] ];\r\n\t}\r\n\r\n\tTabs.prototype.appendTo = function(parent, at_front)\r\n\t{\r\n\t\tif(at_front)\r\n\t\t\tparent.prepend(this.root);\r\n\t\telse\r\n\t\t\tparent.appendChild(this.root);\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a tab given its id\r\n\t* @method getTab\r\n\t* @param {String} id tab id\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getTab = function(id)\r\n\t{\r\n\t\treturn this.tabs[id];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns a tab given its index in the tabs list\r\n\t* @method getTabByIndex\r\n\t* @param {Number} index\r\n\t* @return {Object} the tab in the form of an object with {id,tab,content}\r\n\t*/\r\n\tTabs.prototype.getTabByIndex = function(index)\r\n\t{\r\n\t\treturn this.tabs_by_index[index];\r\n\t}\r\n\r\n\t/**\r\n\t* Returns how many tabs there is\r\n\t* @method getNumOfTabs\r\n\t* @return {number} number of tabs\r\n\t*/\r\n\tTabs.prototype.getNumOfTabs = function()\r\n\t{\r\n\t\tvar num = 0;\r\n\t\tfor(var i in this.tabs)\r\n\t\t\tnum++;\r\n\t\treturn num;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the content HTML element of a tab\r\n\t* @method getTabContent\r\n\t* @param {String} id\r\n\t* @return {HTMLEntity} content\r\n\t*/\r\n\tTabs.prototype.getTabContent = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(tab)\r\n\t\t\treturn tab.content;\r\n\t}\r\n\r\n\t/**\r\n\t* Returns the index of a tab (the position in the tabs list)\r\n\t* @method getTabIndex\r\n\t* @param {String} id\r\n\t* @return {number} index\r\n\t*/\r\n\tTabs.prototype.getTabIndex = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn -1;\r\n\t\tfor(var i = 0; i < this.list.childNodes.length; i++)\r\n\t\t\tif( this.list.childNodes[i] == tab.tab )\r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Create a new tab, where id is a unique identifier\r\n\t* @method addTab\r\n\t* @param {String} id could be null then a random id is generated\r\n\t* @param {Object} options { \r\n\t*\ttitle: tab text, \r\n\t*\tcallback: called when selected, \r\n\t*\tcallback_leave: callback when leaving, \r\n\t*   callback_context: on right click on tab\r\n\t*   callback_canopen: used to block if this tab can be opened or not (if it returns true then yes)\r\n\t*\tcontent: HTML content, \r\n\t*   closable: if it can be closed (callback is onclose), \r\n\t*\ttab_width: size of the tab,\r\n\t*\ttab_className: classes for the tab element,\r\n\t*\tid: content id,\r\n\t*\tsize: full means all,\r\n\t*\tmode: \"vertical\" or \"horizontal\",\r\n\t*\tbutton: if it is a button tab, not a selectable tab\r\n\t*\t}\r\n\t* @param {bool} skip_event prevent dispatching events\r\n\t* @return {Object} an object containing { id, tab, content }\r\n\t*/\r\n\tTabs.prototype.addTab = function( id, options, skip_event )\r\n\t{\r\n\t\toptions = options || {};\r\n\t\tif(typeof(options) == \"function\")\r\n\t\t\toptions = { callback: options };\r\n\r\n\t\tvar that = this;\r\n\t\tif(id === undefined || id === null)\r\n\t\t\tid = \"rand_\" + ((Math.random() * 1000000)|0);\r\n\r\n\t\t//the tab element\r\n\t\tvar element = document.createElement(\"LI\");\r\n\t\tvar safe_id = id.replace(/ /gi,\"_\");\r\n\t\telement.className = \"wtab wtab-\" + safe_id + \" \";\r\n\t\t//if(options.selected) element.className += \" selected\";\r\n\t\telement.dataset[\"id\"] = id;\r\n\t\telement.innerHTML = \"<span class='tabtitle'>\" + (options.title || id) + \"</span>\";\r\n\r\n\t\tif(options.button)\r\n\t\t\telement.className += \"button \";\r\n\t\tif(options.tab_className)\r\n\t\t\telement.className += options.tab_className;\r\n\t\tif(options.bigicon)\r\n\t\t\telement.innerHTML = \"<img class='tabbigicon' src='\" + options.bigicon+\"'/>\" + element.innerHTML;\r\n\t\tif(options.closable)\r\n\t\t{\r\n\t\t\telement.innerHTML += \"<span class='tabclose'>\" + LiteGUI.special_codes.close + \"</span>\";\r\n\t\t\telement.querySelector(\"span.tabclose\").addEventListener(\"click\", function(e) { \r\n\t\t\t\tthat.removeTab(id);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t},true);\r\n\t\t}\r\n\t\t//WARNING: do not modify element.innerHTML or events will be lost\r\n\r\n\t\tif( options.index !== undefined )\r\n\t\t{\r\n\t\t\tvar after = this.list.childNodes[options.index];\r\n\t\t\tif(after)\r\n\t\t\t\tthis.list.insertBefore(element,after);\r\n\t\t\telse\r\n\t\t\t\tthis.list.appendChild(element);\r\n\t\t}\r\n\t\telse if( this.plus_tab )\r\n\t\t\tthis.list.insertBefore( element, this.plus_tab );\r\n\t\telse\r\n\t\t\tthis.list.appendChild(element);\r\n\r\n\t\tif(options.tab_width)\r\n\t\t{\r\n\t\t\telement.style.width = options.tab_width.constructor === Number ? ( options.tab_width.toFixed(0) + \"px\" ) : options.tab_width;\r\n\t\t\telement.style.minWidth = \"0\";\r\n\t\t}\r\n\r\n\t\tif(this.options.autoswitch)\r\n\t\t{\r\n\t\t\telement.classList.add(\"autoswitch\");\r\n\t\t\telement.addEventListener(\"dragenter\",function(e){\r\n\t\t\t\t//console.log(\"Enter\",this.dataset[\"id\"]);\r\n\t\t\t\tif(that._timeout_mouseover)\r\n\t\t\t\t\tclearTimeout(that._timeout_mouseover);\r\n\t\t\t\tthat._timeout_mouseover = setTimeout((function(){\r\n\t\t\t\t\tLiteGUI.trigger(this,\"click\");\r\n\t\t\t\t\tthat._timeout_mouseover = null;\r\n\t\t\t\t}).bind(this),500);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\telement.addEventListener(\"dragleave\",function(e){\r\n\t\t\t\t//console.log(\"Leave\",this.dataset[\"id\"]);\r\n\t\t\t\tif(that._timeout_mouseover)\r\n\t\t\t\t{\r\n\t\t\t\t\tclearTimeout(that._timeout_mouseover);\r\n\t\t\t\t\tthat._timeout_mouseover = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t//the content of the tab\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif(options.id)\r\n\t\t\tcontent.id = options.id;\r\n\r\n\t\tcontent.className = \"wtabcontent \" + \"wtabcontent-\" + safe_id + \" \" + (options.className || \"\");\r\n\t\tcontent.dataset[\"id\"] = id;\r\n\t\tcontent.style.display = \"none\";\r\n\r\n\t\t//adapt height\r\n\t\tif(this.mode == \"horizontal\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent.style.width = \"100%\";\r\n\t\t\t\t\tcontent.style.height = \"calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.height = \"-moz-calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.height = \"-webkit-calc( 100% - \"+LiteGUI.Tabs.tabs_height+\"px )\"; //minus title\r\n\t\t\t\t\t//content.style.height = \"-webkit-calc( 90% )\"; //minus title\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent.style.height = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(this.mode == \"vertical\")\r\n\t\t{\r\n\t\t\tif(options.size)\r\n\t\t\t{\r\n\t\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t\t\tif(options.size == \"full\")\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent.style.height = \"100%\";\r\n\t\t\t\t\tcontent.style.width = \"calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.width = \"-moz-calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\tcontent.style.width = \"-webkit-calc( 100% - \"+LiteGUI.Tabs.tabs_width+\"px )\"; //minus title\r\n\t\t\t\t\t//content.style.height = \"-webkit-calc( 90% )\"; //minus title\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tcontent.style.width = options.size;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//overwrite\r\n\t\tif(options.width !== undefined )\r\n\t\t\tcontent.style.width = typeof(options.width) === \"string\" ? options.width : options.width + \"px\";\r\n\t\tif(options.height !== undefined )\r\n\t\t\tcontent.style.height = typeof(options.height) === \"string\" ? options.height : options.height + \"px\";\r\n\r\n\t\t//add content\r\n\t\tif(options.content)\r\n\t\t{\r\n\t\t\tif (typeof(options.content) == \"string\")\r\n\t\t\t\tcontent.innerHTML = options.content;\r\n\t\t\telse\r\n\t\t\t\tcontent.appendChild(options.content);\r\n\t\t}\r\n\r\n\t\tthis.root.appendChild(content);\r\n\r\n\t\t//when clicked\r\n\t\tif(!options.button)\r\n\t\t\telement.addEventListener(\"click\", Tabs.prototype.onTabClicked );\r\n\t\telse\r\n\t\t\telement.addEventListener(\"click\", function(e){ \r\n\t\t\t\tvar tab_id = this.dataset[\"id\"];\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback( tab_id, e );\r\n\t\t\t});\r\n\r\n\t\telement.options = options;\r\n\t\telement.tabs = this;\r\n\r\n\t\tvar title = element.querySelector(\"span.tabtitle\");\r\n\r\n\t\t//tab object\r\n\t\tvar tab_info = {\r\n\t\t\tid: id,\r\n\t\t\ttab: element,\r\n\t\t\tcontent: content,\r\n\t\t\ttitle: title,\r\n\t\t\tadd: function(v) { this.content.appendChild(v.root || v); },\r\n\t\t\tsetTitle: function( title )\t{ this.title.innerHTML = title; },\r\n\t\t\tclick: function(){ LiteGUI.trigger( this.tab, \"click\" ); },\r\n\t\t\tdestroy: function(){ that.removeTab(this.id) }\r\n\t\t};\r\n\r\n\t\tif(options.onclose)\r\n\t\t\ttab_info.onclose = options.onclose;\r\n\t\tthis.tabs[ id ] = tab_info;\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\r\n\t\t//context menu\r\n\t\telement.addEventListener(\"contextmenu\", (function(e) { \r\n\t\t\tif(e.button != 2) //right button\r\n\t\t\t\treturn false;\r\n\t\t\te.preventDefault(); \r\n\t\t\tif(options.callback_context)\r\n\t\t\t\toptions.callback_context.call(tab_info);\r\n\t\t\treturn false;\r\n\t\t}).bind(this));\r\n\r\n\t\tif ( options.selected == true || this.selected == null )\r\n\t\t\tthis.selectTab( id, options.skip_callbacks );\r\n\r\n\t\treturn tab_info;\r\n\t}\r\n\r\n\tTabs.prototype.addPlusTab = function( callback )\r\n\t{\r\n\t\tif(this.plus_tab)\r\n\t\t\tconsole.warn(\"There is already a plus tab created in this tab widget\");\r\n\t\tthis.plus_tab = this.addTab( \"plus_tab\", { title: \"+\", tab_width: 20, button: true, callback: callback, skip_callbacks: true });\r\n\t}\r\n\r\n\tTabs.prototype.addButtonTab = function( id, title, callback )\r\n\t{\r\n\t\treturn this.addTab( id, { title: title, tab_width: 20, button: true, callback: callback, skip_callbacks: true });\r\n\t}\r\n\r\n\t//this is tab\r\n\tTabs.prototype.onTabClicked = function(e)\r\n\t{\r\n\t\t//skip if already selected\r\n\t\tif( this.classList.contains(\"selected\") ) \r\n\t\t\treturn;\r\n\r\n\t\tif(!this.parentNode)\r\n\t\t\treturn; //this could happend if it gets removed while being clicked (not common)\r\n\r\n\t\tvar options = this.options;\r\n\t\tvar tabs = this.parentNode.parentNode.tabs;\r\n\t\tif(!tabs)\r\n\t\t\tthrow(\"tabs not found\");\r\n\t\tvar that = tabs;\r\n\r\n\t\t//check if this tab is available\r\n\t\tif(options.callback_canopen && options.callback_canopen() == false)\r\n\t\t\treturn;\r\n\r\n\t\t//launch leaving current tab event\r\n\t\tif( that.current_tab && \r\n\t\t\tthat.current_tab[0] != tab_id && \r\n\t\t\tthat.current_tab[2] && \r\n\t\t\tthat.current_tab[2].callback_leave)\r\n\t\t\t\tthat.current_tab[2].callback_leave( that.current_tab[0], that.current_tab[1], that.current_tab[2] );\r\n\r\n\t\tvar tab_id = this.dataset[\"id\"];\r\n\t\tvar tab_content = null;\r\n\r\n\t\t//iterate tab labels\r\n\t\tfor(var i in that.tabs)\r\n\t\t{\r\n\t\t\tvar tab_info = that.tabs[i];\r\n\t\t\tif( i == tab_id )\r\n\t\t\t{\r\n\t\t\t\ttab_info.selected = true;\r\n\t\t\t\ttab_info.content.style.display = \"\";\r\n\t\t\t\ttab_content = tab_info.content;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdelete tab_info.selected;\r\n\t\t\t\ttab_info.content.style.display = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar list = that.list.querySelectorAll(\"li.wtab\");\r\n\t\tfor(var i = 0; i < list.length; ++i)\r\n\t\t\tlist[i].classList.remove(\"selected\");\r\n\t\tthis.classList.add(\"selected\");\r\n\r\n\t\t//change tab\r\n\t\tthat.previous_tab = that.current_tab;\r\n\t\tthat.current_tab = [tab_id, tab_content, options];\r\n\r\n\t\tif(e) //user clicked\r\n\t\t{\r\n\t\t\t//launch callback\r\n\t\t\tif(options.callback) \r\n\t\t\t\toptions.callback(tab_id, tab_content,e);\r\n\r\n\t\t\tLiteGUI.trigger(that,\"wchange\",[tab_id, tab_content]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange( tab_id, tab_content );\r\n\t\t}\r\n\r\n\t\t//change afterwards in case the user wants to know the previous one\r\n\t\tthat.selected = tab_id;\r\n\t}\r\n\r\n\tTabs.prototype.selectTab = function( id, skip_events )\r\n\t{\r\n\t\tif(!id)\r\n\t\t\treturn;\r\n\r\n\t\tif( id.constructor != String )\r\n\t\t\tid = id.id; //in case id is the object referencing the tab\r\n\r\n\t\tvar tabs = this.list.querySelectorAll(\"li.wtab\");\r\n\t\tfor(var i = 0; i < tabs.length; i++)\r\n\t\t\tif( id == tabs[i].dataset[\"id\"] )\r\n\t\t\t{\r\n\t\t\t\tthis.onTabClicked.call( tabs[i], !skip_events );\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t}\r\n\r\n\tTabs.prototype.setTabVisibility = function(id, v)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\ttab.tab.style.display = v ? \"none\" : null;\r\n\t\ttab.content.style.display = v ? \"none\" : null;\r\n\t}\r\n\r\n\tTabs.prototype.recomputeTabsByIndex = function()\r\n\t{\r\n\t\tthis.tabs_by_index = [];\r\n\r\n\t\tfor(var i in this.tabs)\r\n\t\t{\r\n\t\t\tvar tab = this.tabs[i];\r\n\r\n\t\t\t//compute index\r\n\t\t\tvar index = 0;\r\n\t\t\tvar child = tab.tab;\r\n\t\t\twhile( (child = child.previousSibling) != null ) \r\n\t\t\t\tindex++;\r\n\r\n\t\t\tthis.tabs_by_index[index] = tab;\r\n\t\t}\r\n\t}\r\n\r\n\tTabs.prototype.removeTab = function(id)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t{\r\n\t\t\tconsole.warn( \"tab not found: \" + id );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(tab.onclose)\r\n\t\t\ttab.onclose(tab);\r\n\r\n\t\tif(tab.tab.parentNode)\r\n\t\t\ttab.tab.parentNode.removeChild( tab.tab );\r\n\t\tif(tab.content.parentNode)\r\n\t\t\ttab.content.parentNode.removeChild( tab.content );\r\n\t\tdelete this.tabs[id];\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\t}\r\n\r\n\tTabs.prototype.removeAllTabs = function( keep_plus )\r\n\t{\r\n\t\tvar tabs = [];\r\n\t\tfor(var i in this.tabs)\r\n\t\t\ttabs.push( this.tabs[i] );\r\n\r\n\t\tfor(var i in tabs)\r\n\t\t{\r\n\t\t\tvar tab = tabs[i];\r\n\t\t\tif(tab == this.plus_tab && keep_plus)\r\n\t\t\t\tcontinue;\r\n\t\t\tif(tab.tab.parentNode)\r\n\t\t\t\ttab.tab.parentNode.removeChild( tab.tab );\r\n\t\t\tif(tab.content.parentNode)\r\n\t\t\t\ttab.content.parentNode.removeChild( tab.content );\r\n\t\t\tdelete this.tabs[ tab.id ];\r\n\t\t}\r\n\r\n\t\tthis.recomputeTabsByIndex();\r\n\t}\r\n\r\n\tTabs.prototype.clear = function()\r\n\t{\r\n\t\tthis.removeAllTabs();\r\n\t}\r\n\r\n\tTabs.prototype.hideTab = function(id)\r\n\t{\r\n\t\tthis.setTabVisibility(id, false);\r\n\t}\r\n\r\n\tTabs.prototype.showTab = function(id)\r\n\t{\r\n\t\tthis.setTabVisibility(id, true);\r\n\t}\r\n\r\n\tTabs.prototype.transferTab = function(id, target_tabs, index)\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\ttarget_tabs.tabs[id] = tab;\r\n\r\n\t\tif(index !== undefined)\r\n\t\t\ttarget_tabs.list.insertBefore(tab.tab, target_tabs.list.childNodes[index]);\r\n\t\telse\r\n\t\t\ttarget_tabs.list.appendChild(tab.tab);\r\n\t\ttarget_tabs.root.appendChild(tab.content);\r\n\t\tdelete this.tabs[id];\r\n\r\n\t\tvar newtab = null;\r\n\t\tfor(var i in this.tabs)\r\n\t\t{\r\n\t\t\tnewtab = i;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(newtab)\r\n\t\t\tthis.selectTab(newtab);\r\n\r\n\t\ttab.tab.classList.remove(\"selected\");\r\n\t\ttarget_tabs.selectTab(id);\r\n\t}\r\n\r\n\tTabs.prototype.detachTab = function(id, on_complete, on_close )\r\n\t{\r\n\t\tvar tab = this.tabs[id];\r\n\t\tif(!tab)\r\n\t\t\treturn;\r\n\r\n\t\tvar index = this.getTabIndex( id );\r\n\r\n\t\t//create window\r\n\t\tvar w = 800;\r\n\t\tvar h = 600;\r\n\t\tvar tab_window = window.open(\"\",\"\",\"width=\"+w+\", height=\"+h+\", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes\");\r\n\t\ttab_window.document.write( \"<head><title>\"+id+\"</title>\" );\r\n\r\n\t\t//transfer style\r\n\t\tvar styles = document.querySelectorAll(\"link[rel='stylesheet'],style\");\r\n\t\tfor(var i = 0; i < styles.length; i++)\r\n\t\t\ttab_window.document.write( styles[i].outerHTML );\r\n\t\ttab_window.document.write( \"</head><body></body>\" );\r\n\t\ttab_window.document.close();\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t//transfer content after a while so the window is propertly created\r\n\t\tvar newtabs = new LiteGUI.Tabs(null, this.options );\r\n\t\ttab_window.tabs = newtabs;\r\n\r\n\t\t//closing event\r\n\t\ttab_window.onbeforeunload = function(){\r\n\t\t\tnewtabs.transferTab( id, that, index);\r\n\t\t\tif(on_close)\r\n\t\t\t\ton_close();\r\n\t\t}\r\n\r\n\t\t//move the content there\r\n\t\tnewtabs.list.style.height = \"20px\";\r\n\t\ttab_window.document.body.appendChild(newtabs.root);\r\n\t\tthat.transferTab(id, newtabs);\r\n\t\tnewtabs.tabs[id].tab.classList.add(\"selected\");\r\n\t\tthis.recomputeTabsByIndex();\r\n\r\n\t\tif(on_complete)\r\n\t\t\ton_complete();\r\n\r\n\t\treturn tab_window;\r\n\t}\r\n\r\n\r\n\treturn LiteGUI.Tabs = Tabs;\r\n});"]}
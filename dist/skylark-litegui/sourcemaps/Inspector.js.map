{"version":3,"sources":["Inspector.js"],"names":["define","LiteGUI","Inspector","options","constructor","String","id","arguments","console","warn","this","root","document","createElement","className","full","one_line","sections","values","widgets","widgets_by_name","row_number","addContainer","tab_index","Math","floor","random","width","style","sizeToCSS","height","overflow","name_width","widgets_width","noscroll","onchange","parent","appendTo","widgets_per_row","prototype","getValues","r","i","getValue","setValues","v","setValue","at_front","querySelector","insertBefore","firstChild","appendChild","clear","purgeElement","hasChildNodes","removeChild","lastChild","current_section","_current_container","_current_container_stack","refresh","on_refresh","append","widget","widget_parent","replace","parentNode","replaceChild","section","pushContainer","container","indexOf","push","isContainerInStack","popContainer","length","aux","pop","setup","info","w","add","type","name","value","getWidget","Number","inspectInstance","instance","properties","properties_info_example","properties_to_skip","getProperties","collectProperties","classObject","properties_info","getInspectorProperties","inner_clone","shared_options","undefined","step","Boolean","Array","BYTES_PER_ELEMENT","is_number","properties_order","sorted_properties","showProperties","original","target","j","substr","Function","varname","callback","o","assignValue","bind","callback_update","on_addProperty","onShowProperties","current_value","parseFloat","Object","getOwnPropertyDescriptor","set","__proto__","createWidget","content","element","inspector","minWidth","minHeight","widget_name","toFixed","display","namewidth","contentwidth","content_width","code","pretitle","filling","content_class","title","innerHTML","content_element","remove","onWidgetChange","expand_value","event","skip_wchange","trigger","apply","call","widget_constructors","null","default","number","slider","string","text","textarea","color","boolean","checkbox","icon","vec2","vector2","vec3","vector3","vec4","vector4","enum","dropdown","combo","button","buttons","file","line","list","tree","datatree","pad","array","separator","registerWidget","func_name","charAt","toUpperCase","slice","func","toLowerCase","applyOptions","addSeparator","addNull","addDefault","addCheckbox","addString","addNumber","addVector4","addVector3","addVector2","processOptions","that","inputtype","password","focus","disabled","input","placeHolder","setAttribute","align","direction","addEventListener","immediate","e","callback_enter","keyCode","preventDefault","setIcon","img","background","paddingLeft","skip_event","disable","enable","processElement","addStringButton","callback_button","button_width","addTextarea","callback_keydown","extraclass","precision","dragger","Dragger","callback_before","ret","units","setRange","min","max","wcontent","dragger1","marginLeft","dragger2","inner_before_change","draggers","inputs","querySelectorAll","elems","new_val","dragger3","addPad","minx","miny","maxx","maxy","backgroundImage","backgroundSize","backgroundRepeat","handler","_onMouseEvent","b","getBoundingClientRect","mousex","pageX","left","mousey","pageY","top","stopPropagation","body","x","y","removeEventListener","h","addInfo","nodeName","childNodes","margin","scrollToBottom","scrollTop","offsetTop","addSlider","slider_container","Slider","text_input","onChange","label_on","label","label_off","classList","addFlags","flags","force_flags","f","flag_options","addCombo","stop_event","selected","index","item_value","item_index","item_title","select","items","item","dataset","selectedIndex","removeAttribute","setOptionValues","addComboButtons","buttonname","elements","addTags","tags","inner_addtag","tagname","tag","data","addList","list_height","inputfield","paddingBottom","ul_elements","ul","inner_key","callback_dblclick","next","nextSibling","scrollIntoViewIfNeeded","block","behavior","prev","previousSibling","inner_item_click","multiselection","toggle","lis","inner_item_dblclick","insert_item","item_style","item_name","li_element","safeName","updateItems","new_values","item_selected","addItem","error","removeItem","getSelected","getByIndex","num","getIndex","selectIndex","add_to_selection","deselectIndex","scrollToIndex","selectAll","contains","deselectAll","getNumberOfItems","filter","case_sensitive","use_string","needle","selectByFilter","addButton","button_text","button_classname","micro","attrs","wclick","addButtons","evt","addIcon","img_url","image","size","padding","cursor","backgroundPosition","setTimeout","addColor","show_rgb","parseColor","input_element","myColor","window","jscolor","pickerFaceColor","pickerBorderColor","pickerInsetColor","rgb_intensity","pickerOnfocus","fromRGB","rgbelement","rgb","onImmediateChange","event_data","concat","toString","dragger_class","addFile","position","filename_element","innerText","files","generate_url","url","URL","createObjectURL","read_file","reader","FileReader","onload","e2","result","readAsArrayBuffer","readAsDataURL","readAsText","addLine","line_editor","LineEditor","addTree","tree_root","Tree","tree_options","onItemSelected","node","updateTree","addDataTree","inner_recursive","root_node","addArray","data_type","max_items","length_widget","parseInt","row","item_options","assign","data_options","startContainer","endContainer","addSection","end","collapsed","no_collapse","_last_container_stack","sectiontitle","localName","seccont","setCurrentSection","getCurrentSection","endCurrentSection","beginGroup","group","scrollable","header","endGroup","addTitle","help","scrollTo","delta","on_update","updateWidgets"],"mappings":"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","file":"../Inspector.js","sourcesContent":["define([\r\n\t\"./litegui\"\r\n],function(LiteGUI){\r\n\r\n\r\n\t/**\r\n\t* Inspector allows to create a list of widgets easily, it also provides methods to create the widgets automatically.<br/>\r\n\t* Every widget is created calling the function add followed by the widget name, p.e. addSlider or addVector3 or addNumber.<br/>\r\n\t* Widgets always receive three parameters:<br/>\r\n\t* - name: String that defines the name at that it will be shown in the left side of the widget.<br/>\r\n\t* - value: the value that will be displayed in the widget.<br/>\r\n\t* - options: Object containing all the values .<br/>\r\n\t*\r\n\t* @class Inspector\r\n\t* @param {Object} options object with a set of options { <br/>\r\n\t\twidth: total width <br/>\r\n\t\theight: total height <br/>\r\n\t\twidgets_width: width of every widget (used mostly in horizontal inspectors) <br/>\r\n\t\tname_width: width of the name part of widgets <br/>\r\n\t\tfull: set to true if you want the inspector to use all the parent width and height <br/>\r\n\t\twidgets_per_row: number of widgets per row, default is 1 but you can change it if you want to pack several widgets in a row (useful for small widgets like checkboxes) <br/>\r\n\t\tone_line: widgets are place one next to the other horizontaly <br/>\r\n\t\tonchange: callback to call when something changes <br/>\r\n\t   } <br/>\r\n\r\n\t\tDependencies: \r\n\t\t\t- jscolor.js\r\n\r\n\t* @constructor\r\n\t*/\r\n\r\n\tfunction Inspector( options )\r\n\t{\r\n\t\t//for legacy code\r\n\t\tif(options && options.constructor === String)\r\n\t\t{\r\n\t\t\tvar id = options;\r\n\t\t\toptions = arguments[1] || {};\r\n\t\t\toptions.id = id;\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector legacy parameter, use options as first parameter instead of id.\");\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tthis.root = document.createElement(\"DIV\");\r\n\t\tthis.root.className = \"inspector \" + ( options.full ? \"full\" : \"\") + (options.className || \"\");\r\n\t\tif(options.one_line)\r\n\t\t{\r\n\t\t\tthis.one_line = true;\r\n\t\t\tthis.root.className += \" one_line\";\r\n\t\t}\r\n\r\n\t\tif(options.id)\r\n\t\t\tthis.root.id = options.id;\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis.values = {};\r\n\t\tthis.widgets = [];\r\n\t\tthis.widgets_by_name = {};\r\n\t\tthis.row_number = 0; //used to detect if element is even (cannot use CSS, special cases everywhere)\r\n\r\n\t\tthis.addContainer(); //add empty container\r\n\t\tthis.tab_index = Math.floor(Math.random() * 10000);\r\n\r\n\t\tif(options.width)\r\n\t\t\tthis.root.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\tthis.root.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\t\tif(!options.one_line)\r\n\t\t\t\tthis.root.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\tif(options.name_width)\r\n\t\t\tthis.name_width = options.name_width;\r\n\t\tif(options.widgets_width)\r\n\t\t\tthis.widgets_width = options.widgets_width;\r\n\r\n\t\tif(options.noscroll)\r\n\t\t\tthis.root.style.overflow = \"hidden\";\r\n\r\n\t\tif(options.onchange)\r\n\t\t\tthis.onchange = options.onchange;\r\n\r\n\t\tif(options.parent)\r\n\t\t\tthis.appendTo(options.parent);\r\n\r\n\t\tthis.className = this.root.className;\r\n\r\n\t\tthis.widgets_per_row = options.widgets_per_row || 1;\r\n\t}\r\n\r\n\tInspector.prototype.getValues = function()\r\n\t{\r\n\t\tvar r = {};\r\n\t\tfor(var i in this.widgets_by_name)\r\n\t\t\tr[i] = this.widgets_by_name[i].getValue();\r\n\t\treturn r;\r\n\t}\r\n\r\n\tInspector.prototype.setValues = function(v)\r\n\t{\r\n\t\tfor(var i in v)\r\n\t\t\tif( this.widgets_by_name[i] )\r\n\t\t\t\tthis.widgets_by_name[i].setValue( v[i] );\r\n\t}\r\n\r\n\t//append the inspector to a parent\r\n\tInspector.prototype.appendTo = function( parent, at_front )\r\n\t{\r\n\t\tif(!parent)\r\n\t\t\treturn;\r\n\t\tif(parent.constructor === String)\r\n\t\t\tparent = document.querySelector(parent);\r\n\t\tif(!parent)\r\n\t\t\treturn;\r\n\t\tif( at_front )\r\n\t\t\tparent.insertBefore( this.root, parent.firstChild );\r\n\t\telse\r\n\t\t\tparent.appendChild( this.root );\r\n\t}\r\n\r\n\t/**\r\n\t* Removes all the widgets inside the inspector\r\n\t* @method clear\r\n\t*/\r\n\tInspector.prototype.clear = function()\r\n\t{\r\n\t\tpurgeElement( this.root, true ); //hack, but doesnt seem to work\r\n\r\n\t\twhile(this.root.hasChildNodes())\r\n\t\t\tthis.root.removeChild( this.root.lastChild );\r\n\r\n\t\tthis.root.className = this.className;\r\n\r\n\t\tthis.row_number = 0;\r\n\t\tthis.values = {};\r\n\t\tthis.widgets = [];\r\n\t\tthis.widgets_by_name = {};\r\n\t\tthis.sections = [];\r\n\t\tthis.current_section = null;\r\n\t\tthis._current_container = null;\r\n\t\tthis._current_container_stack = null;\r\n\t\tthis.addContainer();\r\n\t}\r\n\r\n\t/**\r\n\t* Tryes to refresh (calls on_refresh)\r\n\t* @method refresh\r\n\t*/\r\n\tInspector.prototype.refresh = function()\r\n\t{\r\n\t\tif(this.on_refresh)\r\n\t\t\tthis.on_refresh();\r\n\t}\r\n\r\n\t// Append widget to this inspector (TODO: rename to appendWidget)\r\n\t// + widget_parent\r\n\t// + replace\r\n\tInspector.prototype.append = function( widget, options )\r\n\t{\r\n\t\toptions = options || {};\r\n\r\n\t\tvar root = options.widget_parent || this._current_container || this.root;\r\n\r\n\t\tif(options.replace)\r\n\t\t\toptions.replace.parentNode.replaceChild( widget, options.replace );\r\n\t\telse\r\n\t\t{\r\n\t\t\twidget.section = this.current_section;\r\n\t\t\troot.appendChild( widget );\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.prototype.pushContainer = function( container )\r\n\t{\r\n\t\tif( !this._current_container_stack )\r\n\t\t\tthis._current_container_stack = [ container ];\r\n\t\telse\r\n\t\t{\r\n\t\t\tif( this._current_container_stack.indexOf( container ) != -1 )\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"Container already in the stack\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._current_container_stack.push( container );\r\n\t\t}\r\n\r\n\t\tthis._current_container = container;\r\n\t}\r\n\r\n\tInspector.prototype.isContainerInStack = function( container )\r\n\t{\r\n\t\tif(!this._current_container_stack)\r\n\t\t\treturn false;\r\n\t\tif( this._current_container_stack.indexOf( container ) != -1 )\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tInspector.prototype.popContainer = function( container )\r\n\t{\r\n\t\tthis.row_number = 0;\r\n\t\tif(this._current_container_stack && this._current_container_stack.length)\r\n\t\t{\r\n\t\t\tif(container)\r\n\t\t\t{\r\n\t\t\t\tvar aux = this._current_container_stack.pop();\r\n\t\t\t\twhile(aux && aux != container)\r\n\t\t\t\t\taux = this._current_container_stack.pop();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis._current_container_stack.pop();\r\n\t\t\t}\r\n\t\t\tthis._current_container = this._current_container_stack[ this._current_container_stack.length - 1 ];\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._current_container = null;\r\n\t}\r\n\r\n\tInspector.prototype.setup = function(info)\r\n\t{\r\n\t\tfor(var i in info)\r\n\t\t{\r\n\t\t\tvar w = info[i];\r\n\t\t\tvar widget = this.add( w.type, w.name, w.value, w.options );\r\n\t\t}\r\n\t}\r\n\r\n\t/**  Returns the widget given the name\r\n\t*\r\n\t* @method getWidget\r\n\t* @param {String} name the name of the widget supplied when creating it or the number of the widget\r\n\t* @return {Object} widget object\r\n\t*/\r\n\tInspector.prototype.getWidget = function( name )\r\n\t{\r\n\t\tif( name !== null && name.constructor === Number )\r\n\t\t\treturn this.widgets[ name ];\r\n\t\treturn this.widgets_by_name[ name ];\r\n\t}\r\n\r\n\t/**  Given an instance it shows all the attributes\r\n\t*\r\n\t* @method inspectInstance\r\n\t* @param {Object} instance the instance that you want to inspect, attributes will be collected from this object\r\n\t* @param {Array} properties an array with all the names of the properties you want to inspect, \r\n\t*\t\t  if not specified then it calls getProperties, othewise collect them and tries to guess the type\r\n\t* @param {Object} properties_info_example it overwrites the info about properties found in the object (in case the automaticaly guessed type is wrong)\r\n\t* @param {Array} properties_to_skip this properties will be ignored\r\n\t*/\r\n\tInspector.prototype.inspectInstance = function( instance, properties, properties_info_example, properties_to_skip ) \r\n\t{\r\n\t\tif(!instance)\r\n\t\t\treturn;\r\n\r\n\t\tif( !properties )\r\n\t\t{\tif( instance.getProperties )\r\n\t\t\t\tproperties = instance.getProperties();\r\n\t\t\telse\r\n\t\t\t\tproperties = this.collectProperties( instance );\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t}\r\n\r\n\t\tvar classObject = instance.constructor;\r\n\t\tif(!properties_info_example && classObject.properties)\r\n\t\t\tproperties_info_example = classObject.properties;\r\n\r\n\t\t//Properties info contains  name:type for every property\r\n\t\t//Must be cloned to ensure there is no overlap between widgets reusing the same container\r\n\t\tvar properties_info = {};\r\n\r\n\t\tif( instance.getInspectorProperties )\r\n\t\t\tproperties_info = instance.getInspectorProperties();\r\n\t\telse\r\n\t\t{\r\n\t\t\t//add to properties_info the ones that are not specified \r\n\t\t\tfor(var i in properties)\r\n\t\t\t{\r\n\t\t\t\tif( properties_info_example && properties_info_example[i] )\r\n\t\t\t\t{\r\n\t\t\t\t\t//clone\r\n\t\t\t\t\tproperties_info[i] = inner_clone( properties_info_example[i] );\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar v = properties[i];\r\n\r\n\t\t\t\tif(classObject[\"@\" + i]) //guess from class object info\r\n\t\t\t\t{\r\n\t\t\t\t\tvar shared_options = classObject[\"@\" + i];\r\n\t\t\t\t\tif( shared_options && shared_options.widget === null)\r\n\t\t\t\t\t\tcontinue; //skip\r\n\t\t\t\t\tproperties_info[i] = inner_clone( shared_options );\r\n\t\t\t\t}\r\n\t\t\t\telse if(instance[\"@\" + i]) //guess from instance info\r\n\t\t\t\t\tproperties_info[i] = instance[\"@\" + i];\r\n\t\t\t\telse if(v === null || v === undefined) //are you sure?\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tswitch( v.constructor )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcase Number: properties_info[i] = { type: \"number\", step: 0.1 }; break;\r\n\t\t\t\t\t\tcase String: properties_info[i] = { type: \"string\" }; break;\r\n\t\t\t\t\t\tcase Boolean: properties_info[i] = { type: \"boolean\" }; break;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif( v && (v.constructor === Array || v.constructor.BYTES_PER_ELEMENT) ) //Array or typed_array\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvar is_number = v[0] != null && v[0].constructor === Number;\r\n\t\t\t\t\t\t\t\tswitch(v.length)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcase 2: properties_info[i] = { type: is_number ? \"vec2\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tcase 3: properties_info[i] = { type: is_number ? \"vec3\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tcase 4: properties_info[i] = { type: is_number ? \"vec4\" : \"Array\", step: 0.1 }; break;\r\n\t\t\t\t\t\t\t\t\tdefault: \r\n\t\t\t\t\t\t\t\t\t\tproperties_info[i] = { type: \"Array\" }; break;\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(properties_to_skip)\r\n\t\t\tfor(var i in properties_to_skip)\r\n\t\t\t\tdelete properties_info[ properties_to_skip[i] ];\r\n\r\n\t\t//allows to establish the order of the properties in the inspector\r\n\t\tif(classObject.properties_order)\r\n\t\t{\r\n\t\t\tvar sorted_properties = {};\r\n\t\t\tfor(var i in classObject.properties_order)\r\n\t\t\t{\r\n\t\t\t\tvar name = classObject.properties_order[i];\r\n\t\t\t\tif( properties_info[ name ] )\r\n\t\t\t\t\tsorted_properties[ name ] = properties_info[ name ];\r\n\t\t\t\telse\r\n\t\t\t\t\tconsole.warn(\"property not found in instance:\", name );\r\n\t\t\t}\r\n\t\t\tfor(var i in properties_info) //add the missing ones at the end (should this be optional?)\r\n\t\t\t{\r\n\t\t\t\tif( !sorted_properties[i] )\r\n\t\t\t\t\tsorted_properties[i] = properties_info[i];\r\n\t\t\t}\r\n\t\t\tproperties_info = sorted_properties;\r\n\t\t}\r\n\r\n\r\n\t\t//showAttributes doesnt return anything but just in case...\r\n\t\treturn this.showProperties( instance, properties_info );\r\n\r\n\t\t//basic cloner\r\n\t\tfunction inner_clone(original, target)\r\n\t\t{\r\n\t\t\ttarget = target || {};\r\n\t\t\tfor(var j in original)\r\n\t\t\t\ttarget[j] = original[j];\r\n\t\t\treturn target;\r\n\t\t}\r\n\t}\r\n\r\n\t/**  extract all attributes from an instance (enumerable properties that are not function and a name starting with alphabetic character)\r\n\t*\r\n\t* @method collectPropertier\r\n\t* @param {Object} instance extract enumerable and public (name do not start with '_' ) properties from an object\r\n\t* return {Object} object with \"name\" : value for every property\r\n\t**/\r\n\tInspector.prototype.collectProperties = function( instance )\r\n\t{\r\n\t\tvar properties = {};\r\n\r\n\t\tfor(var i in instance)\r\n\t\t{\r\n\t\t\tif(i[0] == \"_\" || i[0] == \"@\" || i.substr(0,6) == \"jQuery\") //skip vars with _ (they are private)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar v = instance[i];\r\n\t\t\tif ( v && v.constructor == Function && !instance.constructor[\"@\" + i])\r\n\t\t\t\tcontinue;\r\n\t\t\tproperties[i] = v;\r\n\t\t}\r\n\t\treturn properties;\r\n\t}\r\n\r\n\t/** Adds the widgets for the properties specified in properties_info of instance, it will create callback and callback_update\r\n\t*\r\n\t* @method showProperties\r\n\t* @param {Object} instance the instance that you want to inspect\r\n\t* @param {Object} properties_info object containing   \"property_name\" :{ type: value, widget:..., min:..., max:... }  or just \"property\":\"type\"\r\n\t* @param {Array} properties_to_skip this properties will be ignored\r\n\t*/\r\n\tInspector.prototype.showProperties = function( instance, properties_info ) \r\n\t{\r\n\t\t//for every enumerable property create widget\r\n\t\tfor(var i in properties_info)\r\n\t\t{\r\n\t\t\tvar varname = i;\r\n\t\t\tvar options = properties_info[i];\r\n\t\t\tif(!options)\r\n\t\t\t\tcontinue;\r\n\t\t\tif(options.constructor === String) //it allows to just specify the type\r\n\t\t\t\toptions = { type: options };\r\n\t\t\tif(options.name)\r\n\t\t\t\tvarname = options.name;\r\n\t\t\tif(!options.callback) //generate default callback to modify data\r\n\t\t\t{\r\n\t\t\t\tvar o = { instance: instance, name: varname, options: options };\r\n\t\t\t\tif(options.type == \"function\")\r\n\t\t\t\t{\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\toptions.callback = Inspector.assignValue.bind( o );\r\n\r\n\t\t\t}\r\n\t\t\tif(!options.callback_update) //generate default refresh\r\n\t\t\t{\r\n\t\t\t\tvar o = { instance: instance, name: varname };\r\n\t\t\t\toptions.callback_update = (function(){ return this.instance[ this.name ]; }).bind(o);\r\n\t\t\t}\r\n\r\n\t\t\toptions.instance = instance;\r\n\t\t\toptions.varname = varname;\r\n\r\n\t\t\tvar type = options.widget || options.type || \"string\";\r\n\r\n\t\t\t//used to hook stuff on special occasions\r\n\t\t\tif( this.on_addProperty )\r\n\t\t\t\tthis.on_addProperty( type, instance, varname, instance[varname], options );\r\n\t\t\tthis.add( type, varname, instance[varname], options );\r\n\t\t}\r\n\r\n\t\t//extra widgets inserted by the object (stored in the constructor)\r\n\t\tif(instance.constructor.widgets)\r\n\t\t\tfor(var i in instance.constructor.widgets)\r\n\t\t\t{\r\n\t\t\t\tvar w = instance.constructor.widgets[i];\r\n\t\t\t\tthis.add( w.widget, w.name, w.value, w );\r\n\t\t\t}\r\n\r\n\t\t//used to add extra widgets at the end\r\n\t\tif(instance.onShowProperties)\r\n\t\t\tinstance.onShowProperties(this);\r\n\t\tif(instance.constructor.onShowProperties)\r\n\t\t\tinstance.constructor.onShowProperties(instance, this);\r\n\t}\r\n\r\n\t/**\r\n\t* Tryes to assigns a value to the instance stored in this.instance\r\n\t* @method assignValue\r\n\t*/\r\n\tInspector.assignValue = function(value)\r\n\t{\r\n\t\tvar instance = this.instance;\r\n\t\tvar current_value = instance[ this.name ];\r\n\r\n\t\tif(current_value == null || value == null || this.options.type == \"enum\")\r\n\t\t\tinstance[this.name] = value;\r\n\t\telse if(typeof(current_value) == \"number\")\r\n\t\t\tinstance[this.name] = parseFloat(value);\r\n\t\telse if(typeof(current_value) == \"string\")\r\n\t\t\tinstance[this.name] = value;\r\n\t\telse if( value && value.length && current_value && current_value.length && \r\n\t\t\t( !Object.getOwnPropertyDescriptor( instance, this.name ) || !Object.getOwnPropertyDescriptor( instance, this.name ).set ) &&  //no setters\r\n\t\t\t( !Object.getOwnPropertyDescriptor( instance.__proto__, this.name ) || !Object.getOwnPropertyDescriptor( instance.__proto__, this.name ).set ) ) \r\n\t\t{\r\n\t\t\tfor(var i = 0; i < value.length; ++i)\r\n\t\t\t\tcurrent_value[i] = value[i];\r\n\t\t}\r\n\t\telse\r\n\t\t\tinstance[ this.name ] = value;\r\n\t}\r\n\r\n\t/**\r\n\t* Used by all widgets to create the container of one widget\r\n\t* @method createWidget\r\n\t* @param {string} name the string to show at the left side of the widget, if null this element wont be created and the value part will use the full width\r\n\t* @param {string} content the string with the html of the elements that conform the interactive part of the widget\r\n\t* @param {object} options some generic options that any widget could have:\r\n\t* - widget_name: the name used to store this widget in the widgets_by_name container, if omited the parameter name is used\r\n\t* - width: the width of the widget (if omited it will use the Inspector widgets_width, otherwise 100%\r\n\t* - name_width: the width of the name part of the widget, if not specified it will use Inspector name_width, otherwise css default\r\n\t* - content_width: the width of the widget content area\r\n\t* - pre_title: string to append to the left side of the name, this is helpful if you want to add icons with behaviour when clicked\r\n\t* - title: string to replace the name, sometimes you want to supply a different name than the one you want to show (this is helpful to retrieve values from an inspector)\r\n\t*/\r\n\tInspector.prototype.createWidget = function( name, content, options ) \r\n\t{\r\n\t\toptions = options || {};\r\n\t\tcontent = (content === undefined || content === null) ? \"\" : content;\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"widget \" + (options.className || \"\");\r\n\t\telement.inspector = this;\r\n\t\telement.options = options;\r\n\t\telement.name = name;\r\n\t\t\r\n\t\tthis.row_number += this.widgets_per_row;\r\n\t\tif(this.row_number % 2 == 0)\r\n\t\t\telement.className += \" even\";\r\n\r\n\t\tvar width = options.width || this.widgets_width;\r\n\t\tif( width )\r\n\t\t{\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS( width );\r\n\t\t\tif(!element.style.width)\r\n\t\t\t\telement.style.width = \"calc(\" + LiteGUI.sizeToCSS( width ) + \")\";\r\n\t\t\telement.style.minWidth = \"auto\";\r\n\t\t}\r\n\t\tvar height = options.height || this.height;\r\n\t\tif( height )\r\n\t\t{\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( height );\r\n\t\t\tif(!element.style.height)\r\n\t\t\t\telement.style.height = \"calc(\" + LiteGUI.sizeToCSS( height ) + \")\";\r\n\t\t\telement.style.minHeight = \"auto\";\r\n\t\t}\r\n\r\n\t\t//store widgets \r\n\t\tthis.widgets.push( element );\r\n\t\tif(options.widget_name || name)\r\n\t\t\tthis.widgets_by_name[ options.widget_name || name ] = element;\r\n\r\n\t\tif(this.widgets_per_row != 1)\r\n\t\t{\r\n\t\t\tif(!options.width)\r\n\t\t\t\telement.style.width = (100 / this.widgets_per_row).toFixed(2) + \"%\";\r\n\t\t\telement.style.display = \"inline-block\";\r\n\t\t}\r\n\r\n\t\tvar namewidth = \"\";\r\n\t\tvar contentwidth = \"\";\r\n\t\tif( (name !== undefined && name !== null) && (this.name_width || options.name_width) && !this.one_line)\r\n\t\t{\r\n\t\t\tvar w = LiteGUI.sizeToCSS( options.name_width || this.name_width );\r\n\t\t\tnamewidth = \"style='width: calc(\" + w + \" - 0px); width: -webkit-calc(\" + w + \" - 0px); width: -moz-calc(\" + w + \" - 0px); '\"; //hack \r\n\t\t\tcontentwidth = \"style='width: calc( 100% - \" + w + \"); width: -webkit-calc(100% - \" + w + \"); width: -moz-calc( 100% - \" + w + \"); '\";\r\n\t\t}\r\n\r\n\t\tif(options.name_width)\r\n\t\t\tnamewidth = \"style='width: \"+ LiteGUI.sizeToCSS(options.name_width)+\" '\";\r\n\t\tif(options.content_width)\r\n\t\t\tcontentwidth = \"style='width: \"+ LiteGUI.sizeToCSS(options.content_width)+\" '\";\r\n\r\n\t\tvar code = \"\";\r\n\t\tvar pretitle = \"\";\r\n\t\tvar filling = this.one_line ? \"\" : \"<span class='filling'></span>\";\r\n\r\n\t\tif(options.pretitle)\r\n\t\t\tpretitle = options.pretitle;\r\n\r\n\t\tvar content_class = \"wcontent \";\r\n\t\tvar title = name;\r\n\t\tif(options.title)\r\n\t\t\ttitle = options.title;\r\n\t\tif( name === null || name === undefined )\r\n\t\t\tcontent_class += \" full\";\r\n\t\telse if(name === \"\") //three equals because 0 == \"\" \r\n\t\t\tcode += \"<span class='wname' title='\"+title+\"' \"+namewidth+\">\"+ pretitle +\"</span>\";\r\n\t\telse\r\n\t\t\tcode += \"<span class='wname' title='\"+title+\"' \"+namewidth+\">\"+ pretitle + name + filling + \"</span>\";\r\n\r\n\t\tif( content.constructor === String || content.constructor === Number || content.constructor === Boolean )\r\n\t\t\telement.innerHTML = code + \"<span class='info_content \"+content_class+\"' \"+contentwidth+\">\"+content+\"</span>\";\r\n\t\telse\r\n\t\t{\r\n\t\t\telement.innerHTML = code + \"<span class='info_content \"+content_class+\"' \"+contentwidth+\"></span>\";\r\n\t\t\tvar content_element = element.querySelector(\"span.info_content\");\r\n\t\t\tif(content_element)\r\n\t\t\t\tcontent_element.appendChild( content );\r\n\t\t}\r\n\r\n\t\telement.content = element.querySelector(\"span.info_content\");\r\n\t\telement.remove = function() { \r\n\t\t\tif( this.parentNode ) \r\n\t\t\t\tthis.parentNode.removeChild( this );\r\n\t\t};\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//calls callback, triggers wchange, calls onchange in Inspector\r\n\tInspector.onWidgetChange = function( element, name, value, options, expand_value, event )\r\n\t{\r\n\t\tvar section = element.section; //this.current_section\r\n\r\n\t\tif(!options.skip_wchange)\r\n\t\t{\r\n\t\t\tif(section)\r\n\t\t\t\tLiteGUI.trigger( section, \"wbeforechange\", value );\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", value );\r\n\t\t}\r\n\r\n\t\t//assign and launch callbacks\r\n\t\tthis.values[ name ] = value;\r\n\t\tvar r = undefined;\r\n\t\tif(options.callback)\r\n\t\t{\r\n\t\t\tif(expand_value)\r\n\t\t\t\tr = options.callback.apply( element, value );\r\n\t\t\telse\r\n\t\t\t\tr = options.callback.call( element, value, event );\r\n\t\t}\r\n\r\n\t\tif(!options.skip_wchange)\r\n\t\t{\r\n\t\t\tif(section)\r\n\t\t\t\tLiteGUI.trigger( section, \"wchange\", value, element );\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", value, element );\r\n\t\t}\r\n\r\n\t\tif(this.onchange) \r\n\t\t\tthis.onchange(name, value, element);\r\n\t\treturn r;\r\n\t}\r\n\r\n\t//must be lowercase\r\n\tInspector.widget_constructors = {\r\n\t\t\"null\": 'addNull', //use for special cases\r\n\t\ttitle: 'addTitle',\r\n\t\tinfo: 'addInfo',\r\n\t\t\"default\": 'addDefault', //it guesses\r\n\t\tnumber: 'addNumber',\r\n\t\tslider: 'addSlider',\r\n\t\tstring: 'addString',\r\n\t\ttext: 'addString',\r\n\t\ttextarea: 'addTextarea',\r\n\t\tcolor: 'addColor',\r\n\t\t\"boolean\": 'addCheckbox', \r\n\t\tcheckbox: 'addCheckbox',\r\n\t\ticon: 'addIcon',\r\n\t\tvec2: 'addVector2',\r\n\t\tvector2: 'addVector2',\r\n\t\tvec3: 'addVector3',\r\n\t\tvector3: 'addVector3',\r\n\t\tvec4: 'addVector4',\r\n\t\tvector4: 'addVector4',\r\n\t\t\"enum\": 'addCombo',\r\n\t\tdropdown: 'addCombo',\r\n\t\tcombo: 'addCombo',\r\n\t\tbutton: 'addButton',\r\n\t\tbuttons: 'addButtons',\r\n\t\tfile: 'addFile',\r\n\t\tline: 'addLine',\r\n\t\tlist: 'addList',\r\n\t\ttree: 'addTree',\r\n\t\tdatatree: 'addDataTree',\r\n\t\tpad: 'addPad',\r\n\t\tarray: 'addArray',\r\n\t\tseparator: 'addSeparator'\r\n\t};\r\n\r\n\r\n\tInspector.registerWidget = function(name, callback)\r\n\t{\r\n\t\tvar func_name = \"add\" + name.charAt(0).toUpperCase() + name.slice(1);\r\n\t\tInspector.prototype[func_name] = callback;\r\n\t\tInspector.widget_constructors[name] = func_name;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Adds a widgete to the inspector, its a way to provide the widget type from a string\r\n\t* @method add\r\n\t* @param {string} type string specifying the name of the widget to use (check Inspector.widget_constructors for a complete list)\r\n\t* @param {string} name the string to show at the left side of the widget, if null this element wont be created and the value part will use the full width\r\n\t* @param {string} value the value to assign to the widget\r\n\t* @param {object} options: some generic options that any widget could have:\r\n\t* - type: overwrites the type\r\n\t* - callback: function to call when the user interacts with the widget and changes the value\r\n\t* [For a bigger list check createWidget and every widget in particular]\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.add = function( type, name, value, options )\r\n\t{\r\n\t\tif(!type)\r\n\t\t\tthrow(\"Inspector: no type specified\");\r\n\r\n\t\t//type could be an object with every parameter contained inside\r\n\t\tif( arguments.length == 1 && typeof(type) == \"object\" )\r\n\t\t{\r\n\t\t\toptions = type;\r\n\t\t\ttype = options.type;\r\n\t\t\tname = options.name;\r\n\t\t\tvalue = options.value;\r\n\t\t}\r\n\r\n\t\tvar func = LiteGUI.Inspector.widget_constructors[type.toLowerCase()];\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector do not have a widget called\",type);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif( func.constructor === String )\r\n\t\t\tfunc = LiteGUI.Inspector.prototype[func];\r\n\t\tif( !func )\r\n\t\t\treturn;\r\n\t\tif( func.constructor !== Function )\r\n\t\t\treturn;\r\n\r\n\t\tif( options && options.constructor === Function )\r\n\t\t\toptions = { callback: options };\r\n\t\t\r\n\t\treturn func.call( this, name,value, options );\r\n\t}\r\n\r\n\tInspector.prototype.getValue = function(name)\r\n\t{\r\n\t\treturn this.values[name];\r\n\t}\r\n\r\n\r\n\tInspector.prototype.applyOptions = function( element, options )\r\n\t{\r\n\t\tif(!element || !options)\r\n\t\t\treturn;\r\n\r\n\t\tif(options.className)\r\n\t\t\telement.className += \" \" + options.className;\r\n\t\tif(options.id)\r\n\t\t\telement.id = options.id;\r\n\t\tif(options.width)\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS( options.width );\r\n\t\tif(options.height)\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Creates a line\r\n\t* @method addSeparator\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addSeparator = function()\r\n\t{\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"separator\";\r\n\t\tthis.append(element);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//used when you want to skip the widget of an object\r\n\tInspector.prototype.addNull = function(name,value, options)\r\n\t{\r\n\t\treturn null;\r\n\t}\r\n\r\n\t//used when you dont know which widget to use\r\n\tInspector.prototype.addDefault = function( name, value, options)\r\n\t{\r\n\t\tif(value === null || value === undefined) //can we guess it from the current value?\r\n\t\t\treturn null;\r\n\r\n\t\tif( value.constructor === Boolean )\r\n\t\t\treturn this.addCheckbox( name, value, options );\r\n\t\telse if( value.constructor === String )\r\n\t\t\treturn this.addString( name, value, options );\r\n\t\telse if( value.constructor === Number )\r\n\t\t\treturn this.addNumber( name, value, options );\r\n\t\telse if( value.length == 4)\r\n\t\t\treturn this.addVector4( name, value, options );\r\n\t\telse if( value.length == 3)\r\n\t\t\treturn this.addVector3( name, value, options );\r\n\t\telse if( value.length == 2)\r\n\t\t\treturn this.addVector2( name, value, options );\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t* Widget to edit strings\r\n\t* @method addString\r\n\t* @param {string} name \r\n\t* @param {string} value\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - focus: true if you want the cursor to be here\r\n\t* - password: true if you want to hide the string \r\n\t* - immediate: calls the callback once every keystroke\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the widget changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addString = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar inputtype = \"text\";\r\n\t\tif(options.password) \r\n\t\t\tinputtype = \"password\";\r\n\t\tvar focus = options.focus ? \"autofocus\" : \"\";\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full \"+(options.disabled?\"disabled\":\"\")+\"'><input type='\"+inputtype+\"' tabIndex='\"+this.tab_index+\"' \"+focus+\" class='text string' value='\"+value+\"' \"+(options.disabled?\"disabled\":\"\")+\"/></span>\", options);\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\r\n\t\tif(options.placeHolder)\r\n\t\t\tinput.setAttribute(\"placeHolder\",options.placeHolder);\r\n\r\n\t\tif(options.align == \"right\")\r\n\t\t{\r\n\t\t\tinput.style.direction = \"rtl\";\r\n\t\t\t//input.style.textAlign = \"right\";\r\n\t\t}\r\n\r\n\t\tinput.addEventListener( options.immediate ? \"keyup\" : \"change\", function(e) { \r\n\t\t\tvar r = Inspector.onWidgetChange.call(that, element, name, e.target.value, options);\r\n\t\t\tif(r !== undefined)\r\n\t\t\t\tthis.value = r;\r\n\t\t});\r\n\r\n\t\tif(options.callback_enter)\r\n\t\t\tinput.addEventListener( \"keydown\" , function(e) { \r\n\t\t\t\tif(e.keyCode == 13)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar r = Inspector.onWidgetChange.call(that, element, name, e.target.value, options);\r\n\t\t\t\t\toptions.callback_enter();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis.tab_index += 1;\r\n\r\n\t\telement.setIcon = function(img)\r\n\t\t{\r\n\t\t\tif(!img)\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"\";\r\n\t\t\t\tinput.style.paddingLeft = \"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"transparent url('\"+img+\"') no-repeat left 4px center\";\r\n\t\t\t\tinput.style.paddingLeft = \"1.7em\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.icon)\r\n\t\t\telement.setIcon( options.icon );\r\n\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined )\r\n\t\t\t\treturn;\r\n\t\t\tif(v === input.value)\r\n\t\t\t\treturn;\r\n\t\t\tinput.value = v; \r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger(input, \"change\" );\r\n\t\t};\r\n\t\telement.getValue = function() { return input.value; };\r\n\t\telement.focus = function() { this.querySelector(\"input\").focus(); };\r\n\t\telement.disable = function() { input.disabled = true; };\r\n\t\telement.enable = function() { input.disabled = false; };\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit strings, but it adds a button behind (useful to search values somewhere in case the user do not remember the name)\r\n\t* @method addStringButton\r\n\t* @param {string} name \r\n\t* @param {string} value the string to show\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - disabled: shows the widget disabled\r\n\t* - button: string to show inside the button, default is \"...\"\r\n\t* - callback: function to call when the string is edited\r\n\t* - callback_button: function to call when the button is pressed\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addStringButton = function( name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tif(value === undefined)\r\n\t\t\tvalue = \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget( name, \"<span class='inputfield button'><input type='text' tabIndex='\"+this.tab_index+\"' class='text string' value='' \"+(options.disabled?\"disabled\":\"\")+\"/></span><button class='micro'>\"+(options.button || \"...\")+\"</button>\", options);\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\t\tinput.value = value;\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\t\t\tvar r = Inspector.onWidgetChange.call(that,element,name,e.target.value, options);\r\n\t\t\tif(r !== undefined)\r\n\t\t\t\tthis.value = r;\r\n\t\t});\r\n\r\n\t\tif( options.disabled )\r\n\t\t\tinput.setAttribute(\"disabled\",\"disabled\");\r\n\r\n\t\telement.setIcon = function(img)\r\n\t\t{\r\n\t\t\tif(!img)\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"\";\r\n\t\t\t\tinput.style.paddingLeft = \"\";\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinput.style.background = \"transparent url('\"+img+\"') no-repeat left 4px center\";\r\n\t\t\t\tinput.style.paddingLeft = \"1.7em\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(options.icon)\r\n\t\t\telement.setIcon( options.icon );\r\n\r\n\t\tvar button = element.querySelector(\".wcontent button\");\r\n\t\tbutton.addEventListener(\"click\", function(e) { \r\n\t\t\tif(options.callback_button)\r\n\t\t\t\toptions.callback_button.call( element, input.value, e );\r\n\t\t});\r\n\r\n\t\tif(options.button_width)\r\n\t\t{\r\n\t\t\tbutton.style.width = LiteGUI.sizeToCSS( options.button_width );\r\n\t\t\tvar inputfield = element.querySelector(\".inputfield\");\r\n\t\t\tinputfield.style.width = \"calc( 100% - \" + button.style.width + \" - 6px)\";\r\n\t\t}\r\n\r\n\r\n\t\tthis.tab_index += 1;\r\n\t\tthis.append(element,options);\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tinput.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger(input, \"change\" );\r\n\t\t};\r\n\t\telement.disable = function() { input.disabled = true; button.disabled = true; };\r\n\t\telement.enable = function() { input.disabled = false; button.disabled = false; };\r\n\t\telement.getValue = function() { return input.value; };\r\n\t\telement.focus = function() { LiteGUI.focus(input); };\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit strings with multiline support\r\n\t* @method addTextarea\r\n\t* @param {string} name \r\n\t* @param {string} value\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - focus: true if you want the cursor to be here\r\n\t* - password: true if you want to hide the string \r\n\t* - immediate: calls the callback once every keystroke\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the widget changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addTextarea = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield textarea \"+(options.disabled?\"disabled\":\"\")+\"'><textarea tabIndex='\"+this.tab_index+\"' \"+(options.disabled?\"disabled\":\"\")+\"></textarea></span>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar textarea = element.querySelector(\".wcontent textarea\");\r\n\t\ttextarea.value = value;\r\n\t\ttextarea.addEventListener( options.immediate ? \"keyup\" : \"change\", function(e) { \r\n\t\t\tInspector.onWidgetChange.call(that,element,name,e.target.value, options, false, e);\r\n\t\t});\r\n\t\tif(options.callback_keydown)\r\n\t\t\ttextarea.addEventListener( \"keydown\", options.callback_keydown );\r\n\r\n\t\tif(options.height)\r\n\t\t\ttextarea.style.height = \"calc( \" + LiteGUI.sizeToCSS( options.height ) + \" - 5px )\";\r\n\t\t\t//textarea.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tthis.append(element,options);\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tif(v == textarea.value)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\ttextarea.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger( textarea,\"change\" );\r\n\t\t};\r\n\t\telement.getValue = function(v) { \r\n\t\t\treturn textarea.value;\r\n\t\t}\r\n\t\telement.focus = function() { LiteGUI.focus(textarea); };\r\n\t\telement.disable = function() { textarea.disabled = true;};\r\n\t\telement.enable = function() { textarea.disabled = false;};\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addNumber\r\n\t* @param {string} name \r\n\t* @param {number} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addNumber = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || 0;\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\t\tthis.append(element,options);\r\n\r\n\t\toptions.extraclass = \"full\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\t//options.dragger_class = \"full\";\r\n\t\toptions.full = true;\r\n\t\toptions.precision = options.precision !== undefined ? options.precision : 2;\r\n\t\toptions.step = options.step === undefined ? (options.precision == 0 ? 1 : 0.1) : options.step;\r\n\r\n\t\tthis.tab_index++;\r\n\t\t\r\n\t\tvar dragger = null;\r\n\t\t\r\n\t\tdragger = new LiteGUI.Dragger(value, options);\r\n\t\tdragger.root.style.width = \"calc( 100% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger.root );\r\n\t\tdragger.root.addEventListener(\"start_dragging\", inner_before_change.bind(options) );\r\n\t\telement.dragger = dragger;\r\n\r\n\t\tif( options.disabled )\r\n\t\t\tdragger.input.setAttribute(\"disabled\",\"disabled\");\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) \r\n\t\t\t\tthis.callback_before.call(element);\r\n\t\t}\r\n\r\n\t\tvar input = element.querySelector(\"input\");\r\n\t\t\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", e.target.value );\r\n\r\n\t\t\tthat.values[name] = e.target.value;\r\n\t\t\t//Inspector.onWidgetChange.call(that,this,name,ret, options);\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar ret = options.callback.call( element, parseFloat( e.target.value) ); \r\n\t\t\t\tif( typeof(ret) == \"number\")\r\n\t\t\t\t\tthis.value = ret;\r\n\t\t\t}\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", e.target.value );\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,e.target.value,element);\r\n\t\t});\r\n\r\n\t\telement.setValue = function( v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tv = parseFloat(v);\r\n\t\t\tif(options.precision)\r\n\t\t\t\tv = v.toFixed( options.precision );\r\n\t\t\tv += (options.units || \"\");\r\n\t\t\tif(input.value == v)\r\n\t\t\t\treturn;\r\n\t\t\tinput.value = v;\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tLiteGUI.trigger( input,\"change\" );\r\n\t\t};\r\n\r\n\t\telement.setRange = function(min,max) { dragger.setRange(min,max); }\r\n\t\telement.getValue = function() { return parseFloat( input.value ); };\r\n\t\telement.focus = function() { LiteGUI.focus(input); };\r\n\t\telement.disable = function() { input.disabled = true;};\r\n\t\telement.enable = function() { input.disabled = false;};\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector2\r\n\t* @param {string} name \r\n\t* @param {vec2} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector2 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step ||0.1;\r\n\t\t//options.dragger_class = \"medium\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar wcontent = element.querySelector(\".wcontent\");\r\n\r\n\t\tvar dragger1 = new LiteGUI.Dragger(value[0], options);\r\n\t\tdragger1.root.style.marginLeft = 0;\r\n\t\tdragger1.root.style.width = \"calc( 50% - 1px )\";\r\n\t\twcontent.appendChild( dragger1.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger2 = new LiteGUI.Dragger(value[1], options);\r\n\t\tdragger2.root.style.width = \"calc( 50% - 1px )\";\r\n\t\twcontent.appendChild( dragger2.root );\r\n\t\telement.draggers = [dragger1,dragger2];\r\n\r\n\t\tLiteGUI.bind( dragger1.root ,\"start_dragging\", inner_before_change.bind(options) );\r\n\t\tLiteGUI.bind( dragger2.root, \"start_dragging\", inner_before_change.bind(options) );\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) this.callback_before(e);\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener( \"change\" , function(e) { \r\n\r\n\t\t\t//gather all three parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\t\r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 2)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\", [r] );\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tif(dragger1.getValue() != v[0])\r\n\t\t\t\tdragger1.setValue(v[0],true);\r\n\t\t\tif(dragger2.getValue() != v[1])\r\n\t\t\t\tdragger2.setValue(v[1],skip_event); //last one triggers the event\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { dragger1.setRange(min,max); dragger2.setRange(min,max); }\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector3\r\n\t* @param {string} name \r\n\t* @param {vec3} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector3 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step || 0.1;\r\n\t\t//options.dragger_class = \"mini\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger1 = new LiteGUI.Dragger(value[0], options );\r\n\t\tdragger1.root.style.marginLeft = 0;\r\n\t\tdragger1.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger1.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger2 = new LiteGUI.Dragger(value[1], options );\r\n\t\tdragger2.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger2.root );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragger3 = new LiteGUI.Dragger(value[2], options );\r\n\t\tdragger3.root.style.width = \"calc( 33% - 1px )\";\r\n\t\telement.querySelector(\".wcontent\").appendChild( dragger3.root );\r\n\t\telement.draggers = [dragger1,dragger2,dragger3];\r\n\r\n\t\tdragger1.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\t\tdragger2.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\t\tdragger3.root.addEventListener( \"start_dragging\", inner_before_change.bind(options) );\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before) this.callback_before();\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener(\"change\", function(e) { \r\n\t\t\t//gather all three parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element,r ); \r\n\t\t\t\t\r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 3)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event ) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tdragger1.setValue(v[0],true);\r\n\t\t\tdragger2.setValue(v[1],true);\r\n\t\t\tdragger3.setValue(v[2],skip_event); //last triggers\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { dragger1.setRange(min,max); dragger2.setRange(min,max); dragger3.setRange(min,max); }\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers (it adds a dragging mini widget in the right side)\r\n\t* @method addVector4\r\n\t* @param {string} name \r\n\t* @param {vec4} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - max: maximum value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addVector4 = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget( name,\"\", options );\r\n\r\n\t\toptions.step = options.step || 0.1;\r\n\t\t//options.dragger_class = \"mini\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar draggers = element.draggers = [];\r\n\r\n\t\tfor(var i = 0; i < 4; i++)\r\n\t\t{\r\n\t\t\tvar dragger = new LiteGUI.Dragger(value[i], options );\r\n\t\t\tdragger.root.style.marginLeft = 0;\r\n\t\t\tdragger.root.style.width = \"calc( 25% - 1px )\";\r\n\t\t\telement.querySelector(\".wcontent\").appendChild( dragger.root );\r\n\t\t\toptions.tab_index = this.tab_index;\r\n\t\t\tthis.tab_index++;\r\n\t\t\tdragger.root.addEventListener(\"start_dragging\", inner_before_change.bind(options) );\r\n\t\t\tdraggers.push(dragger);\r\n\t\t}\r\n\r\n\t\tfunction inner_before_change(e)\r\n\t\t{\r\n\t\t\tif(this.callback_before)\r\n\t\t\t\tthis.callback_before();\r\n\t\t}\r\n\r\n\t\tvar inputs = element.querySelectorAll(\"input\");\r\n\t\tfor(var i = 0; i < inputs.length; ++i)\r\n\t\t\tinputs[i].addEventListener(\"change\", function(e) { \r\n\t\t\t//gather all parameters\r\n\t\t\tvar r = [];\r\n\t\t\tvar elems = inputs;\r\n\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\tr.push( parseFloat( elems[i].value ) );\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\tthat.values[name] = r;\r\n\r\n\t\t\tif(options.callback)\r\n\t\t\t{\r\n\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\tif(typeof(new_val) == \"object\" && new_val.length >= 4)\r\n\t\t\t\t{\r\n\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\telems[i].value = new_val[i];\r\n\t\t\t\t\tr = new_val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name,r,element);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function( v, skip_event ) { \r\n\t\t\tif(!v)\r\n\t\t\t\treturn;\r\n\t\t\tfor(var i = 0; i < draggers.length; i++)\r\n\t\t\t\tdraggers[i].setValue(v[i],skip_event);\r\n\t\t}\r\n\t\telement.setRange = function(min,max) { for(var i in draggers) { draggers[i].setRange(min,max); } }\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit two numbers using a rectangular pad where you can drag horizontaly and verticaly a handler\r\n\t* @method addPad\r\n\t* @param {string} name \r\n\t* @param {vec2} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - callback: function to call once the value changes\r\n\t* - disabled: shows the widget disabled\r\n\t* - callback: function to call when the string is edited\r\n\t* - precision: number of digits after the colon\r\n\t* - units: string to show after the number\r\n\t* - min: minimum value accepted\r\n\t* - minx: minimum x value accepted\r\n\t* - miny: minimum y value accepted\r\n\t* - max: maximum value accepted\r\n\t* - maxx: maximum x value accepted\r\n\t* - maxy: maximum y value accepted\r\n\t* - step: increments when draggin the mouse (default is 0.1)\r\n\t* - background: url of image to use as background (it will be streched)\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addPad = function(name,value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tif(!options.step)\r\n\t\t\toptions.step = 0.1;\r\n\r\n\t\tvalue = value || [0,0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"\", options);\r\n\r\n\t\toptions.step = options.step ||0.1;\r\n\t\t//options.dragger_class = \"medium\";\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\toptions.full = true;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar minx = options.minx || options.min || 0;\r\n\t\tvar miny = options.miny || options.min || 0;\r\n\t\tvar maxx = options.maxx || options.max || 1;\r\n\t\tvar maxy = options.maxy || options.max || 1;\r\n\r\n\t\tvar wcontent = element.querySelector(\".wcontent\");\r\n\r\n\t\tvar pad = document.createElement(\"div\");\r\n\t\tpad.className = \"litepad\";\r\n\t\twcontent.appendChild( pad );\r\n\t\tpad.style.width = \"100%\";\r\n\t\tpad.style.height = \"100px\";\r\n\t\tif (options.background)\r\n\t\t{\r\n\t\t\tpad.style.backgroundImage = \"url('\" + options.background + \"')\";\r\n\t\t\tpad.style.backgroundSize = \"100%\";\r\n\t\t\tpad.style.backgroundRepeat = \"no-repeat\";\r\n\t\t}\r\n\r\n\t\tvar handler = document.createElement(\"div\");\r\n\t\thandler.className = \"litepad-handler\";\r\n\t\tpad.appendChild( handler );\r\n\r\n\t\toptions.tab_index = this.tab_index;\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar dragging = false;\r\n\r\n\t\tpad._onMouseEvent = function(e)\r\n\t\t{\r\n\t\t\tvar b = pad.getBoundingClientRect();\r\n\t\t\te.mousex = e.pageX - b.left;\r\n\t\t\te.mousey = e.pageY - b.top;\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(e.type == \"mousedown\")\r\n\t\t\t{\r\n\t\t\t\tdocument.body.addEventListener(\"mousemove\", pad._onMouseEvent );\r\n\t\t\t\tdocument.body.addEventListener(\"mouseup\", pad._onMouseEvent );\r\n\t\t\t\tdragging = true;\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mousemove\")\r\n\t\t\t{\r\n\t\t\t\tvar x = e.mousex / (b.width);\r\n\t\t\t\tvar y = e.mousey / (b.height);\r\n\r\n\t\t\t\tx = x * (maxx - minx) + minx;\r\n\t\t\t\ty = y * (maxy - miny) + minx;\r\n\r\n\t\t\t\tvar r = [x,y];\r\n\r\n\t\t\t\tLiteGUI.trigger( element, \"wbeforechange\", [r] );\r\n\r\n\t\t\t\telement.setValue(r);\r\n\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar new_val = options.callback.call( element, r ); \r\n\t\t\t\t\tif( new_val && new_val.length >= 2)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor(var i = 0; i < elems.length; i++)\r\n\t\t\t\t\t\t\telement.setValue( new_val );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tLiteGUI.trigger( element, \"wchange\",[r]);\r\n\t\t\t\tif(that.onchange)\r\n\t\t\t\t\tthat.onchange(name,r,element);\r\n\t\t\t}\r\n\t\t\telse if(e.type == \"mouseup\")\r\n\t\t\t{\r\n\t\t\t\tdragging = false;\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", pad._onMouseEvent );\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", pad._onMouseEvent );\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tpad.addEventListener(\"mousedown\", pad._onMouseEvent );\r\n\r\n\t\telement.setValue = function(v,skip_event)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar b = pad.getBoundingClientRect();\r\n\t\t\tvar x = (v[0] - minx) / (maxx - minx);\r\n\t\t\tvar y = (v[1] - miny) / (maxy - miny);\r\n\t\t\tx = Math.max( 0, Math.min( x, 1 ) ); //clamp\r\n\t\t\ty = Math.max( 0, Math.min( y, 1 ) );\r\n\r\n\t\t\t//handler.style.left = (x * (b.width - 10)) + \"px\";\r\n\t\t\t//handler.style.top = (y * (b.height - 10)) + \"px\";\r\n\t\t\tvar w = ((b.width - 10) / b.width) * 100;\r\n\t\t\tvar h = ((b.height - 10) / b.height) * 100;\r\n\t\t\thandler.style.left = (x * w).toFixed(1) + \"%\";\r\n\t\t\thandler.style.top = (y * h).toFixed(1) + \"%\";\r\n\r\n\t\t\t//if(!skip_event)\r\n\t\t\t//\tLiteGUI.trigger(this,\"change\");\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue( value );\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to show plain information in HTML (not interactive)\r\n\t* @method addInfo\r\n\t* @param {string} name \r\n\t* @param {string} value HTML code\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - className: to specify a classname of the content\r\n\t* - height: to specify a height\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addInfo = function( name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = (value === undefined || value === null) ? \"\" : value;\r\n\t\tvar element = null;\r\n\t\tif(name != null)\r\n\t\t\telement = this.createWidget( name, value, options);\r\n\t\telse\r\n\t\t{\r\n\t\t\telement = document.createElement(\"div\");\r\n\t\t\tif(options.className)\r\n\t\t\t\telement.className = options.className;\r\n\t\t\tif(value.nodeName !== undefined)\r\n\t\t\t{\r\n\t\t\t\telement.innerHTML = \"<span class='winfo'></span>\";\r\n\t\t\t\telement.childNodes[0].appendChild( value );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\telement.innerHTML = \"<span class='winfo'>\"+value+\"</span>\";\r\n\t\t}\r\n\r\n\t\tvar info = element.querySelector(\".winfo\") || element.querySelector(\".wcontent\");\r\n\r\n\t\tif(options.callback)\r\n\t\t\telement.addEventListener(\"click\",options.callback.bind(element));\r\n\r\n\t\telement.setValue = function(v) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tif(info)\r\n\t\t\t\tinfo.innerHTML = v;\r\n\t\t};\r\n\r\n\t\tvar content = element.querySelector(\"span.info_content\");\r\n\t\tif(!content)\r\n\t\t\tcontent = element.querySelector(\".winfo\");\r\n\r\n\t\tif(options.width)\r\n\t\t{\r\n\t\t\telement.style.width = LiteGUI.sizeToCSS(options.width);\r\n\t\t\telement.style.display = \"inline-block\";\r\n\t\t\tif(!name)\r\n\t\t\t\tinfo.style.margin = \"2px\";\r\n\t\t}\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\tcontent.style.height = LiteGUI.sizeToCSS(options.height);\r\n\t\t\tcontent.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\telement.scrollToBottom = function(){\r\n\t\t\tcontent.scrollTop = content.offsetTop;\r\n\t\t}\r\n\r\n\t\telement.add = function(e)\r\n\t\t{\r\n\t\t\tcontent.appendChild(e);\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a number using a slider\r\n\t* @method addSlider\r\n\t* @param {string} name \r\n\t* @param {number} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - min: min value\r\n\t* - max: max value\r\n\t* - step: increments when dragging\r\n\t* - callback: function to call once the value changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addSlider = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tif(options.min === undefined)\r\n\t\t\toptions.min = 0;\r\n\r\n\t\tif(options.max === undefined)\r\n\t\t\toptions.max = 1;\r\n\r\n\t\tif(options.step === undefined)\r\n\t\t\toptions.step = 0.01;\r\n\r\n\t\tvar that = this;\r\n\t\tif(value === undefined || value === null)\r\n\t\t\tvalue = 0;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full'>\\\r\n\t\t\t\t\t<input tabIndex='\"+this.tab_index+\"' type='text' class='slider-text fixed liteslider-value' value='' /><span class='slider-container'></span></span>\", options);\r\n\r\n\t\tvar slider_container = element.querySelector(\".slider-container\");\r\n\r\n\t\tvar slider = new LiteGUI.Slider(value,options);\r\n\t\tslider_container.appendChild(slider.root);\r\n\r\n\t\t//Text change -> update slider\r\n\t\tvar skip_change = false; //used to avoid recursive loops\r\n\t\tvar text_input = element.querySelector(\".slider-text\");\r\n\t\ttext_input.value = value;\r\n\t\ttext_input.addEventListener('change', function(e) {\r\n\t\t\tif(skip_change)\r\n\t\t\t\treturn;\r\n\t\t\tvar v = parseFloat( this.value );\r\n\t\t\tvalue = v;\r\n\t\t\tslider.setValue( v );\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,v, options );\r\n\t\t});\r\n\r\n\t\t//Slider change -> update Text\r\n\t\tslider.onChange = function(value) {\r\n\t\t\ttext_input.value = value;\r\n\t\t\tInspector.onWidgetChange.call( that, element, name, value, options);\r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function(v,skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tslider.setValue(v,skip_event);\r\n\t\t};\r\n\t\telement.getValue = function() { \r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a boolean value using a checkbox\r\n\t* @method addCheckbox\r\n\t* @param {string} name \r\n\t* @param {boolean} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - label: text to show, otherwise it shows on/off\r\n\t* - label_on: text to show when on\r\n\t* - label_off: text to show when off\r\n\t* - callback: function to call once the value changes\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addCheckbox = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tvalue = !!value;\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\r\n\t\tvar label_on = options.label_on || options.label || \"on\";\r\n\t\tvar label_off = options.label_off || options.label || \"off\";\r\n\t\tvar label = (value ? label_on : label_off);\r\n\t\t\r\n\t\t//var element = this.createWidget(name,\"<span class='inputfield'><span class='fixed flag'>\"+(value ? \"on\" : \"off\")+\"</span><span tabIndex='\"+this.tab_index+\"'class='checkbox \"+(value?\"on\":\"\")+\"'></span></span>\", options );\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield'><span tabIndex='\"+this.tab_index+\"' class='fixed flag checkbox \"+(value ? \"on\" : \"off\")+\"'>\"+label+\"</span></span>\", options );\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar checkbox = element.querySelector(\".wcontent .checkbox\");\r\n\t\tcheckbox.addEventListener(\"keypress\", function(e) { \r\n\t\t\tif(e.keyCode == 32)\r\n\t\t\t\tLiteGUI.trigger(this, \"click\");\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"click\", function() {\r\n\t\t\tvalue = !value;\r\n\t\t\telement.querySelector(\"span.flag\").innerHTML = value ? label_on : label_off;\r\n\t\t\tif(value)\r\n\t\t\t\tcheckbox.classList.add(\"on\");\r\n\t\t\telse\r\n\t\t\t\tcheckbox.classList.remove(\"on\");\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,value, options);\r\n\t\t});\r\n\t\t\r\n\t\telement.getValue = function() { \r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v,skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tif(\tthat.values[name] != v && !skip_event)\r\n\t\t\t\tLiteGUI.trigger( checkbox, \"click\" ); \r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit a set of boolean values using checkboxes\r\n\t* @method addFlags\r\n\t* @param {Object} value object that contains all the booleans \r\n\t* @param {Object} optional object with extra flags to insert\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addFlags = function(flags, force_flags, options)\r\n\t{\r\n\t\tvar f = {};\r\n\t\tfor(var i in flags)\r\n\t\t\tf[i] = flags[i];\r\n\t\tif(force_flags)\r\n\t\t\tfor(var i in force_flags)\r\n\t\t\t\tif( typeof(f[i]) == \"undefined\" )\r\n\t\t\t\t\tf[i] = ( force_flags[i] ? true : false );\r\n\r\n\t\tfor(var i in f)\r\n\t\t{\r\n\t\t\tvar flag_options = {};\r\n\t\t\tfor(var j in options)\r\n\t\t\t\tflag_options[j] = options[j];\r\n\r\n\t\t\tflag_options.callback = (function(j) {\r\n\t\t\t\t\treturn function(v) { \r\n\t\t\t\t\t\tflags[j] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t})(i);\r\n\r\n\t\t\tthis.addCheckbox(i, f[i], flag_options );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit an enumeration using a combobox\r\n\t* @method addCombo\r\n\t* @param {string} name \r\n\t* @param {*} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - values: a list with all the possible values, it could be an array, or an object, in case of an object, the key is the string to show, the value is the value to assign\r\n\t* - disabled: true to disable\r\n\t* - callback: function to call once an items is clicked\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addCombo = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\t//value = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full inputcombo \"+(options.disabled?\"disabled\":\"\")+\"'></span>\", options);\r\n\t\telement.options = options;\r\n\r\n\t\tvar values = options.values || [];\r\n\t\tif(values.constructor === Function)\r\n\t\t\tvalues = options.values();\r\n\r\n\t\t/*\r\n\t\tif(!values)\r\n\t\t\tvalues = [];\r\n\r\n\t\tvar index = 0;\r\n\t\tfor(var i in values)\r\n\t\t{\r\n\t\t\tvar item_value = values[i];\r\n\t\t\tvar item_index = values.constructor === Array ? index : i;\r\n\t\t\tvar item_title = values.constructor === Array ? item_value : i;\r\n\t\t\tif(item_value && item_value.title)\r\n\t\t\t\titem_title = item_value.title;\r\n\t\t\tcode += \"<option value='\"+item_index+\"' \"+( item_value == value ? \" selected\":\"\")+\" data-index='\"+item_index+\"'>\" + item_title + \"</option>\";\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\t*/\r\n\r\n\t\tvar code = \"<select tabIndex='\"+this.tab_index+\"' \"+(options.disabled?\"disabled\":\"\")+\" class='\"+(options.disabled?\"disabled\":\"\")+\"'></select>\";\r\n\t\telement.querySelector(\"span.inputcombo\").innerHTML = code;\r\n\t\tsetValues(values);\r\n\t\t\r\n\t\tvar stop_event = false; //used internally\r\n\r\n\t\tvar select = element.querySelector(\".wcontent select\");\r\n\t\tselect.addEventListener(\"change\", function(e) { \r\n\t\t\tvar index = e.target.value;\r\n\t\t\tvalue = values[index];\r\n\t\t\tif(stop_event)\r\n\t\t\t\treturn;\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,value, options );\r\n\t\t});\r\n\r\n\t\telement.getValue = function()\r\n\t\t{\r\n\t\t\treturn value;\t\t\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v, skip_event) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tvar select = element.querySelector(\"select\");\r\n\t\t\tvar items = select.querySelectorAll(\"option\");\r\n\t\t\tvar index =  -1;\r\n\t\t\tif(values.constructor === Array)\r\n\t\t\t\tindex = values.indexOf(v);\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//search the element index in the values\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor(var i in values)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(values[j] == v)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tindex = j;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tj++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(index == -1)\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\tstop_event = skip_event;\r\n\r\n\t\t\tfor(var i in items)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(!item || !item.dataset) //weird bug\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tif( parseFloat(item.dataset[\"index\"]) == index )\r\n\t\t\t\t{\r\n\t\t\t\t\titem.setAttribute(\"selected\", true);\r\n\t\t\t\t\tselect.selectedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\titem.removeAttribute(\"selected\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstop_event = false;\r\n\t\t};\r\n\r\n\t\tfunction setValues(v, selected){\r\n\t\t\tif(!v)\r\n\t\t\t\tv = [];\r\n\t\t\tvalues = v;\r\n\t\t\tif(selected)\r\n\t\t\t\tvalue = selected;\r\n\t\t\tvar code = \"\";\r\n\t\t\tvar index = 0;\r\n\t\t\tfor(var i in values)\r\n\t\t\t{\r\n\t\t\t\tvar item_value = values[i];\r\n\t\t\t\tvar item_index = values.constructor === Array ? index : i;\r\n\t\t\t\tvar item_title = values.constructor === Array ? item_value : i;\r\n\t\t\t\tif(item_value && item_value.title)\r\n\t\t\t\t\titem_title = item_value.title;\r\n\t\t\t\tcode += \"<option value='\"+item_index+\"' \"+( item_value == value ? \" selected\":\"\")+\" data-index='\"+item_index+\"'>\" + item_title + \"</option>\";\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\telement.querySelector(\"select\").innerHTML = code;\r\n\t\t}\r\n\r\n\t\telement.setOptionValues = setValues;\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addComboButtons = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"\";\r\n\t\tif(options.values)\r\n\t\t\tfor(var i in options.values)\r\n\t\t\t\tcode += \"<button class='wcombobutton \"+(value == options.values[i] ? \"selected\":\"\")+\"' data-name='options.values[i]'>\" + options.values[i] + \"</button>\";\r\n\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tvar buttons = element.querySelectorAll( \".wcontent button\" );\r\n\t\tLiteGUI.bind( buttons, \"click\", function(e) { \r\n\r\n\t\t\tvar buttonname = e.target.innerHTML;\r\n\t\t\tthat.values[name] = buttonname;\r\n\r\n\t\t\tvar elements = element.querySelectorAll(\".selected\");\r\n\t\t\tfor(var i = 0; i < elements.length; ++i)\r\n\t\t\t\telements[i].classList.remove(\"selected\");\r\n\t\t\tthis.classList.add(\"selected\");\r\n\r\n\t\t\tInspector.onWidgetChange.call( that,element,name,buttonname, options );\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addTags = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || [];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"<select>\";\r\n\t\tif(options.values)\r\n\t\t\tfor(var i in options.values)\r\n\t\t\t\tcode += \"<option>\" + options.values[i] + \"</option>\";\r\n\r\n\t\tcode += \"</select><div class='wtagscontainer inputfield'></div>\";\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full'>\"+code+\"</span>\", options);\r\n\t\telement.tags = {};\r\n\r\n\t\t//add default tags\r\n\t\tfor(var i in options.value)\r\n\t\t\tinner_addtag(options.value[i]);\r\n\r\n\t\t//combo change\r\n\t\tvar select_element = element.querySelector(\".wcontent select\");\r\n\t\tselect_element.addEventListener(\"change\", function(e) { \r\n\t\t\tinner_addtag(e.target.value);\r\n\t\t});\r\n\r\n\t\tfunction inner_addtag(tagname)\r\n\t\t{\r\n\t\t\tif( element.tags[tagname] )\r\n\t\t\t\treturn; //repeated tags no\r\n\r\n\t\t\tLiteGUI.trigger( element, \"wbeforechange\", element.tags);\r\n\r\n\t\t\telement.tags[tagname] = true;\r\n\r\n\t\t\tvar tag = document.createElement(\"div\");\r\n\t\t\ttag.data = tagname;\r\n\t\t\ttag.className = \"wtag\";\r\n\t\t\ttag.innerHTML = tagname+\"<span class='close'>X</span>\";\r\n\r\n\t\t\ttag.querySelector(\".close\").addEventListener(\"click\", function(e) {\r\n\t\t\t\tvar tagname = this.parentNode.data;\r\n\t\t\t\tdelete element.tags[tagname];\r\n\t\t\t\tLiteGUI.remove(this.parentNode);\r\n\t\t\t\tLiteGUI.trigger( element, \"wremoved\", tagname );\r\n\t\t\t\tInspector.onWidgetChange.call(that,element,name,element.tags, options);\r\n\t\t\t});\r\n\r\n\t\t\telement.querySelector(\".wtagscontainer\").appendChild(tag);\r\n\r\n\t\t\tthat.values[name] = element.tags;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element, element.tags ); \r\n\t\t\tLiteGUI.trigger( element, \"wchange\", element.tags);\r\n\t\t\tLiteGUI.trigger( element, \"wadded\", tagname);\r\n\t\t\tif(that.onchange)\r\n\t\t\t\tthat.onchange(name, element.tags, element);\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to select from a list of items\r\n\t* @method addList\r\n\t* @param {string} name \r\n\t* @param {*} value [Array or Object]\r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - multiselection: allow multiple selection\r\n\t* - callback: function to call once an items is clicked\r\n\t* - selected: the item selected\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addList = function(name, values, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar that = this;\r\n\t\t\r\n\t\tvar list_height = \"\";\r\n\t\tif(options.height)\r\n\t\t\tlist_height = \"style='height: 100%; overflow: auto;'\";\r\n\t\t\t//height = \"style='height: \"+options.height+\"px; overflow: auto;'\";\r\n\r\n\t\tvar code = \"<ul class='lite-list' \"+list_height+\" tabIndex='\"+this.tab_index+\"'><ul>\";\r\n\t\tthis.tab_index++;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full \"+(options.disabled?\"disabled\":\"\")+\"' style='height: 100%;'>\"+code+\"</span>\", options);\r\n\r\n\t\tvar infocontent = element.querySelector(\".info_content\");\r\n\t\tinfocontent.style.height = \"100%\";\r\n\r\n\t\tvar list_element = element.querySelector(\".lite-list\");\r\n\r\n\t\tvar inputfield = element.querySelector(\".inputfield\");\r\n\t\tinputfield.style.height = \"100%\";\r\n\t\tinputfield.style.paddingBottom = \"0.2em\";\r\n\r\n\t\tvar ul_elements = element.querySelectorAll(\"ul\");\r\n\t\tfor(var i = 0; i < ul_elements.length; ++i)\r\n\t\t{\r\n\t\t\tvar ul = ul_elements[i];\r\n\t\t\tul.addEventListener(\"focus\",function() { \r\n\t\t\t\tdocument.addEventListener(\"keydown\",inner_key,true);\r\n\t\t\t});\r\n\t\t\tul.addEventListener(\"blur\",function() {\r\n\t\t\t\tdocument.removeEventListener(\"keydown\",inner_key,true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction inner_key(e)\r\n\t\t{\r\n\t\t\tvar selected = element.querySelector(\"li.selected\");\r\n\t\t\tif( !selected )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.keyCode == 13) //intro\r\n\t\t\t{\r\n\t\t\t\tif(!selected)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar value = values[ selected.dataset[\"pos\"] ];\r\n\t\t\t\tif(options.callback_dblclick)\r\n\t\t\t\t\toptions.callback_dblclick.call(that,value);\r\n\t\t\t}\r\n\t\t\telse if(e.keyCode == 40) //arrow down\r\n\t\t\t{\r\n\t\t\t\tvar next = selected.nextSibling;\r\n\t\t\t\tif(next)\r\n\t\t\t\t\tLiteGUI.trigger(next, \"click\");\r\n\t\t\t\tif(selected.scrollIntoViewIfNeeded)\r\n\t\t\t\t\tselected.scrollIntoViewIfNeeded({block: \"end\", behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t\telse if(e.keyCode == 38) //arrow up\r\n\t\t\t{\r\n\t\t\t\tvar prev = selected.previousSibling;\r\n\t\t\t\tif(prev)\r\n\t\t\t\t\tLiteGUI.trigger(prev,\"click\");\r\n\t\t\t\tif(selected.scrollIntoViewIfNeeded)\r\n\t\t\t\t\tselected.scrollIntoViewIfNeeded({block: \"end\", behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn;\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction inner_item_click(e) { \r\n\r\n\t\t\tif(options.multiselection)\r\n\t\t\t\tthis.classList.toggle(\"selected\");\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//batch action, jquery...\r\n\t\t\t\tvar lis = element.querySelectorAll(\"li\");\r\n\t\t\t\tfor(var i = 0; i < lis.length; ++i)\r\n\t\t\t\t\tlis[i].classList.remove(\"selected\");\r\n\t\t\t\tthis.classList.add(\"selected\");\r\n\t\t\t}\r\n\r\n\t\t\tvar value = values[ this.dataset[\"pos\"] ];\r\n\t\t\t//if(options.callback) options.callback.call(element,value); //done in onWidgetChange\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,value, options);\r\n\t\t\tLiteGUI.trigger(element, \"wadded\", value );\r\n\t\t}\r\n\r\n\t\tfunction inner_item_dblclick(e) { \r\n\t\t\tvar value = values[ this.dataset[\"pos\"] ];\r\n\t\t\tif(options.callback_dblclick)\r\n\t\t\t\toptions.callback_dblclick.call(that,value);\r\n\t\t}\r\n\r\n\t\telement.updateItems = function( new_values, item_selected )\r\n\t\t{\r\n\t\t\titem_selected = item_selected || options.selected;\r\n\t\t\tvar code = \"\";\r\n\t\t\tvalues = new_values;\r\n\t\t\tvar ul = this.querySelector(\"ul\");\r\n\t\t\tul.innerHTML = \"\";\r\n\r\n\t\t\tif(values)\r\n\t\t\t\tfor(var i in values)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar\tvalue = values[i];\r\n\t\t\t\t\tvar li_element = insert_item( value, item_selected, i );\r\n\t\t\t\t\tul.appendChild( li_element );\r\n\t\t\t\t}\r\n\r\n\t\t\t//ul.innerHTML = code;\r\n\t\t\tLiteGUI.bind( ul.querySelectorAll(\"li\"), \"click\", inner_item_click );\r\n\t\t}\r\n\r\n\t\tfunction insert_item( value, selected, index )\r\n\t\t{\r\n\t\t\tvar item_index = index; //to reference it\r\n\t\t\tvar item_title = index; //to show in the list\r\n\t\t\tselected = !!selected;\r\n\r\n\t\t\tvar item_style = null;\r\n\t\t\tvar icon = \"\";\r\n\t\t\tif( value != null )\r\n\t\t\t{\r\n\t\t\t\tif( value.constructor === String || value.constructor === Number || value.constructor === Boolean )\r\n\t\t\t\t{\r\n\t\t\t\t\titem_title = String(value);\r\n\t\t\t\t}\r\n\t\t\t\telse if( value )\r\n\t\t\t\t{\r\n\t\t\t\t\titem_title = value.content || value.title || value.name || index;\r\n\t\t\t\t\titem_style = value.style;\r\n\t\t\t\t\tif(value.icon)\r\n\t\t\t\t\t\ticon = \"<img src='\"+value.icon+\"' class='icon' /> \";\r\n\t\t\t\t\tif(value.selected)\r\n\t\t\t\t\t\tselected = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item_name = item_title;\r\n\t\t\titem_name = item_name.replace(/<(?:.|\\n)*?>/gm, ''); //remove html tags that could break the html\r\n\r\n\t\t\tvar li_element = document.createElement(\"li\");\r\n\t\t\tli_element.classList.add( 'item-' + LiteGUI.safeName(item_index) );\r\n\t\t\tif( selected )\r\n\t\t\t\tli_element.classList.add( 'selected' );\r\n\t\t\tli_element.dataset[\"name\"] = item_name;\r\n\t\t\tli_element.dataset[\"pos\"] = item_index;\r\n\t\t\tli_element.value = value;\r\n\t\t\tif(item_style)\r\n\t\t\t\tli_element.setAttribute(\"style\", item_style );\r\n\t\t\tli_element.innerHTML = icon + item_title;\r\n\t\t\tli_element.addEventListener( \"click\", inner_item_click );\r\n\t\t\tif(options.callback_dblclick)\r\n\t\t\t\tli_element.addEventListener( \"dblclick\", inner_item_dblclick );\r\n\t\t\treturn li_element;\r\n\t\t}\r\n\r\n\t\telement.addItem = function( value, selected, name )\r\n\t\t{\r\n\t\t\tif(values.constructor !== Array)\r\n\t\t\t{\r\n\t\t\t\tconsole.error(\"cannot add item to list of object, only array\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvalues.push( value );\r\n\t\t\tvar ul = this.querySelector(\"ul\");\r\n\t\t\tvar li_element = insert_item( value, selected);\r\n\t\t\tul.appendChild( li_element );\r\n\t\t}\r\n\r\n\t\telement.removeItem = function(name)\r\n\t\t{\r\n\t\t\tvar items = element.querySelectorAll(\".wcontent li\");\r\n\t\t\tfor(var i = 0; i < items.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif(items[i].dataset[\"name\"] == name)\r\n\t\t\t\t\tLiteGUI.remove( items[i] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.updateItems( values, options.selected );\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.getSelected = function()\r\n\t\t{\r\n\t\t\tvar r = [];\r\n\t\t\tvar selected = this.querySelectorAll(\"ul li.selected\");\r\n\t\t\tfor(var i = 0; i < selected.length; ++i)\r\n\t\t\t\tr.push( selected[i].dataset[\"name\"] );\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\telement.getByIndex = function(num)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\treturn items[num];\r\n\t\t}\r\n\t\telement.getIndex = element.getByIndex; //legacy\r\n\r\n\t\telement.selectIndex = function( num, add_to_selection )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(i == num)\r\n\t\t\t\t\titem.classList.add(\"selected\");\r\n\t\t\t\telse if(!add_to_selection)\r\n\t\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t\treturn items[num];\r\n\t\t}\r\n\r\n\t\telement.deselectIndex = function( num )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar item = items[num];\r\n\t\t\tif(item)\r\n\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\telement.scrollToIndex = function(num)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar item = items[num];\r\n\t\t\tif(!item)\r\n\t\t\t\treturn;\r\n\t\t\tthis.scrollTop = item.offsetTop;\r\n\t\t}\r\n\r\n\t\telement.selectAll = function()\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif( item.classList.contains(\"selected\") )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.deselectAll = function()\r\n\t\t{\r\n\t\t\t//there has to be a more efficient way to do this\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif( !item.classList.contains(\"selected\") )\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tLiteGUI.trigger( item, \"click\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tthis.updateItems(v);\r\n\t\t}\r\n\r\n\t\telement.getNumberOfItems = function()\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\treturn items.length;\r\n\t\t}\r\n\r\n\t\telement.filter = function( callback, case_sensitive )\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tvar use_string = false;\r\n\r\n\t\t\tif( callback && callback.constructor === String )\r\n\t\t\t{\r\n\t\t\t\tvar needle = callback;\r\n\t\t\t\tif( case_sensitive )\r\n\t\t\t\t\tneedle.toLowerCase();\r\n\t\t\t\tuse_string = true;\r\n\t\t\t\tcallback = function(v){ return ( (case_sensitive ? v : v.toLowerCase()).indexOf(needle) != -1); };\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif(!callback)\r\n\t\t\t\t{\r\n\t\t\t\t\titem.style.display = \"\";\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar value = item.value;\r\n\t\t\t\tif(use_string && value != null && value.constructor !== String)\r\n\t\t\t\t\tvalue = item.innerHTML;\r\n\r\n\t\t\t\tif( !callback( value, item, item.classList.contains(\"selected\") ) )\r\n\t\t\t\t\titem.style.display = \"none\";\r\n\t\t\t\telse\r\n\t\t\t\t\titem.style.display = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.selectByFilter = function(callback)\r\n\t\t{\r\n\t\t\tvar items = this.querySelectorAll(\"ul li\");\r\n\t\t\tfor(var i = 0; i < items.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tvar r = callback( item.value, item, item.classList.contains(\"selected\") );\r\n\t\t\t\tif( r === true )\r\n\t\t\t\t\titem.classList.add(\"selected\");\r\n\t\t\t\telse if( r === false )\r\n\t\t\t\t\titem.classList.remove(\"selected\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.height) \r\n\t\t\telement.scrollTop = 0;\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addButton = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = options.button_text || value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar button_classname = \"\";\r\n\t\tif(name === null)\r\n\t\t\tbutton_classname = \"single\";\r\n\t\tif(options.micro)\r\n\t\t\tbutton_classname += \" micro\";\r\n\r\n\t\tvar attrs = \"\";\r\n\t\tif(options.disabled)\r\n\t\t\tattrs = \"disabled='disabled'\";\r\n\r\n\t\tvar title = options.title || \"\";\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<button tabIndex='\"+ this.tab_index + \"' \"+attrs+\"></button>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar button = element.querySelector(\"button\");\r\n\t\tbutton.setAttribute(\"title\",title);\r\n\t\tbutton.className = \"litebutton \" + button_classname;\r\n\t\tbutton.innerHTML = value;\r\n\t\tbutton.addEventListener(\"click\", function(event) {\r\n\t\t\tInspector.onWidgetChange.call( that, element, name, this.innerHTML, options, false, event);\r\n\t\t\tLiteGUI.trigger( button, \"wclick\", value );\r\n\t\t});\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.wclick = function(callback) { \r\n\t\t\tif(!options.disabled)\r\n\t\t\t\tLiteGUI.bind(this, \"wclick\", callback ); \r\n\t\t}\r\n\r\n\t\telement.setValue = function(v)\r\n\t\t{\r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tbutton.innerHTML = v;\r\n\t\t}\r\n\r\n\t\telement.disable = function() { button.disabled = true; };\r\n\t\telement.enable = function() { button.disabled = false; };\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addButtons = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar code = \"\";\r\n\t\t//var w = \"calc(\"+(100/value.length).toFixed(3)+\"% - \"+Math.floor(16/value.length)+\"px);\";\r\n\t\tvar w = \"calc( \" + (100/value.length).toFixed(3) + \"% - 4px )\";\r\n\t\tvar style = \"width:\"+w+\"; width: -moz-\"+w+\"; width: -webkit-\"+w+\"; margin: 2px;\";\r\n\t\tif(value && typeof(value) == \"object\")\r\n\t\t{\r\n\t\t\tfor(var i in value)\r\n\t\t\t{\r\n\t\t\t\tvar title = \"\";\r\n\t\t\t\tif( options.title && options.title.constructor === Array)\r\n\t\t\t\t\ttitle = options.title[i] || \"\";\r\n\t\t\t\tcode += \"<button class='litebutton' title='\"+title+\"' tabIndex='\"+this.tab_index+\"' style='\"+style+\"'>\"+value[i]+\"</button>\";\r\n\t\t\t\tthis.tab_index++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tvar buttons = element.querySelectorAll(\"button\");\r\n\t\tfor(var i = 0; i < buttons.length; ++i)\r\n\t\t{\r\n\t\t\tvar button = buttons[i];\r\n\t\t\tbutton.addEventListener(\"click\", function(evt) {\r\n\t\t\t\tInspector.onWidgetChange.call(that, element, name, this.innerHTML, options, null, evt);\r\n\t\t\t\tLiteGUI.trigger( element, \"wclick\",this.innerHTML );\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addIcon = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\r\n\t\tvar img_url = options.image;\r\n\t\tvar width = options.width || options.size || 20;\r\n\t\tvar height = options.height || options.size || 20;\r\n\r\n\t\tvar element = this.createWidget(name,\"<span class='icon' \"+(options.title ? \"title='\"+options.title+\"'\" : \"\" )+\" tabIndex='\"+ this.tab_index + \"'></span>\", options);\r\n\t\tthis.tab_index++;\r\n\t\tvar content = element.querySelector(\"span.wcontent\");\r\n\t\tvar icon = element.querySelector(\"span.icon\");\r\n\r\n\t\tvar x = options.x || 0;\r\n\t\tif(options.index)\r\n\t\t\tx = options.index * -width;\r\n\t\tvar y = value ? height : 0;\r\n\r\n\t\telement.style.minWidth = element.style.width = (width) + \"px\";\r\n\t\telement.style.margin = \"0 2px\"; element.style.padding = \"0\";\r\n\t\tcontent.style.margin = \"0\"; content.style.padding = \"0\";\r\n\r\n\t\ticon.style.display = \"inline-block\"\r\n\t\ticon.style.cursor = \"pointer\";\r\n\t\ticon.style.width = width + \"px\";\r\n\t\ticon.style.height = height + \"px\";\r\n\t\ticon.style.backgroundImage = \"url('\"+img_url+\"')\";\r\n\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\r\n\t\ticon.addEventListener(\"mousedown\", function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvalue = !value;\r\n\t\t\tvar ret = Inspector.onWidgetChange.call(that,element,name, value, options);\r\n\t\t\tLiteGUI.trigger( element, \"wclick\", value);\r\n\r\n\t\t\tif(ret !== undefined)\r\n\t\t\t\tvalue = ret;\r\n\r\n\t\t\tvar y = value ? height : 0;\r\n\t\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\r\n\t\t\tif(options.toggle === false) //blink\r\n\t\t\t\tsetTimeout( function(){ icon.style.backgroundPosition = x + \"px 0px\"; value = false; },200 );\r\n\r\n\t\t});\r\n\t\tthis.append(element,options);\r\n\r\n\t\telement.setValue = function(v, skip_event ) { \r\n\t\t\tif(v === undefined)\r\n\t\t\t\treturn;\r\n\t\t\tvalue = v;\r\n\t\t\tvar y = value ? height : 0;\r\n\t\t\ticon.style.backgroundPosition = x + \"px \" + y + \"px\";\r\n\t\t\tif(!skip_event)\r\n\t\t\t\tInspector.onWidgetChange.call(that,element,name, value, options);\r\n\t\t};\r\n\t\telement.getValue = function() { return value; };\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addColor = function( name, value, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || [0.0,0.0,0.0];\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar code = \"<input tabIndex='\"+this.tab_index+\"' id='colorpicker-\"+name+\"' class='color' value='\"+(value[0]+\",\"+value[1]+\",\"+value[2])+\"' \"+(options.disabled?\"disabled\":\"\")+\"/>\";\r\n\t\tthis.tab_index++;\r\n\r\n\t\tif(options.show_rgb)\r\n\t\t\tcode += \"<span class='rgb-color'>\"+Inspector.parseColor(value)+\"</span>\";\r\n\t\tvar element = this.createWidget(name,code, options);\r\n\t\tthis.append(element,options); //add now or jscolor dont work\r\n\r\n\t\t//create jsColor \r\n\t\tvar input_element = element.querySelector(\"input.color\");\r\n\t\tvar myColor = null;\r\n\r\n\t\tif( window.jscolor )\r\n\t\t{\r\n\r\n\t\t\t//SHOWS CONTEXTUAL MENU\r\n\t\t\t//block focusing\r\n\t\t\t/*\r\n\t\t\tinput_element.addEventListener(\"contextmenu\", function(e) { \r\n\t\t\t\tif(e.button != 2) //right button\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t//create the context menu\r\n\t\t\t\tvar contextmenu = new LiteGUI.ContextMenu( [\"Copy in HEX\",\"Copy in RGBA\"], { event: e, callback: inner_action });\r\n\t\t\t\te.preventDefault(); \r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tinput_element.addEventListener(\"focus\", block_focus , true);\r\n\t\t\t\tsetTimeout(function(){ input_element.removeEventListener(\"focus\", block_focus , true);},1000);\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},true);\t\r\n\r\n\t\t\tfunction block_focus(e)\r\n\t\t\t{\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfunction inner_action(v)\r\n\t\t\t{\r\n\t\t\t\tif(v == \"Copy in HEX\")\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.toClipboard( \"in HEX\");\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tLiteGUI.toClipboard( \"in RGB\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tmyColor = new jscolor.color(input_element);\r\n\t\t\tmyColor.pickerFaceColor = \"#333\";\r\n\t\t\tmyColor.pickerBorderColor = \"black\";\r\n\t\t\tmyColor.pickerInsetColor = \"#222\";\r\n\t\t\tmyColor.rgb_intensity = 1.0;\r\n\r\n\t\t\tif(options.disabled) \r\n\t\t\t\tmyColor.pickerOnfocus = false; //this doesnt work\r\n\r\n\t\t\tif( value.constructor !== String && value.length && value.length > 2)\r\n\t\t\t{\r\n\t\t\t\tvar intensity = 1.0;\r\n\t\t\t\tmyColor.fromRGB(value[0]*intensity,value[1]*intensity,value[2]*intensity);\r\n\t\t\t\tmyColor.rgb_intensity = intensity;\r\n\t\t\t}\r\n\r\n\t\t\t//update values in rgb format\r\n\t\t\tinput_element.addEventListener(\"change\", function(e) { \r\n\t\t\t\tvar rgbelement = element.querySelector(\".rgb-color\");\r\n\t\t\t\tif(rgbelement)\r\n\t\t\t\t\trgbelement.innerHTML = LiteGUI.Inspector.parseColor(myColor.rgb);\r\n\t\t\t});\r\n\r\n\t\t\tmyColor.onImmediateChange = function() \r\n\t\t\t{\r\n\t\t\t\tvar v = [ myColor.rgb[0] * myColor.rgb_intensity, myColor.rgb[1] * myColor.rgb_intensity, myColor.rgb[2] * myColor.rgb_intensity ];\r\n\t\t\t\t//Inspector.onWidgetChange.call(that,element,name,v, options);\r\n\t\t\t\tvar event_data = [v.concat(), myColor.toString()];\r\n\t\t\t\tLiteGUI.trigger( element, \"wbeforechange\", event_data );\r\n\t\t\t\tthat.values[name] = v;\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback.call( element, v.concat(), \"#\" + myColor.toString(), myColor );\r\n\t\t\t\tLiteGUI.trigger( element, \"wchange\", event_data );\r\n\t\t\t\tif(that.onchange) that.onchange(name, v.concat(), element);\r\n\t\t\t}\r\n\r\n\t\t\t//alpha dragger\r\n\t\t\toptions.step = options.step || 0.01;\r\n\t\t\toptions.dragger_class = \"nano\";\r\n\r\n\t\t\tvar dragger = new LiteGUI.Dragger(1, options);\r\n\t\t\telement.querySelector('.wcontent').appendChild(dragger.root);\r\n\t\t\tdragger.input.addEventListener(\"change\", function(e)\r\n\t\t\t{\r\n\t\t\t\tvar v = parseFloat( this.value );\r\n\t\t\t\tmyColor.rgb_intensity = v;\r\n\t\t\t\tif (myColor.onImmediateChange)\r\n\t\t\t\t\tmyColor.onImmediateChange();\r\n\t\t\t});\r\n\r\n\t\t\telement.setValue = function(value,skip_event) { \r\n\t\t\t\tmyColor.fromRGB(value[0],value[1],value[2]);\r\n\t\t\t\tif(!skip_event)\r\n\t\t\t\t\tLiteGUI.trigger( dragger.input, \"change\" ); \r\n\t\t\t};\r\n\r\n\t\t\telement.getValue = function() { \r\n\t\t\t\treturn value;\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tinput_element.addEventListener(\"change\", function(e) { \r\n\t\t\t\tvar rgbelement = element.querySelector(\".rgb-color\");\r\n\t\t\t\tif(rgbelement)\r\n\t\t\t\t\trgbelement.innerHTML = LiteGUI.Inspector.parseColor(myColor.rgb);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addFile = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'></span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='\"+value+\"'/>\", options);\r\n\t\tvar content = element.querySelector(\".wcontent\");\r\n\t\tcontent.style.position = \"relative\";\r\n\t\tvar input = element.querySelector(\".wcontent input\");\r\n\t\tvar filename_element = element.querySelector(\".wcontent .filename\");\r\n\t\tif(value)\r\n\t\t\tfilename_element.innerText = value.name;\r\n\r\n\t\tinput.addEventListener(\"change\", function(e) { \r\n\t\t\tif(!e.target.files.length)\r\n\t\t\t{\r\n\t\t\t\t//nothing\r\n\t\t\t\tfilename_element.innerText = \"\";\r\n\t\t\t\tInspector.onWidgetChange.call(that, element, name, null, options);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar url = null;\r\n\t\t\t//var data = { url: url, filename: e.target.value, file: e.target.files[0], files: e.target.files };\r\n\t\t\tvar file = e.target.files[0];\r\n\t\t\tfile.files = e.target.files;\r\n\t\t\tif( options.generate_url )\r\n\t\t\t\tfile.url = URL.createObjectURL( e.target.files[0] );\r\n\t\t\tfilename_element.innerText = file.name;\r\n\r\n\t\t\tif(options.read_file)\r\n\t\t\t{\r\n\t\t\t\t var reader = new FileReader();\r\n\t\t\t\t reader.onload = function(e2){\r\n\t\t\t\t\tfile.data = e2.target.result;\r\n\t\t\t\t\tInspector.onWidgetChange.call( that, element, name, file, options );\r\n\t\t\t\t }\r\n\t\t\t\t if( options.read_file == \"binary\" )\r\n\t\t\t\t\t reader.readAsArrayBuffer( file );\r\n\t\t\t\t else if( options.read_file == \"data_url\" )\r\n\t\t\t\t\t reader.readAsDataURL( file );\r\n\t\t\t\t else\r\n\t\t\t\t\t reader.readAsText( file );\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tInspector.onWidgetChange.call( that, element, name, file, options );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addLine = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar that = this;\r\n\t\tthis.values[name] = value;\r\n\t\t\r\n\t\tvar element = this.createWidget(name,\"<span class='line-editor'></span>\", options);\r\n\t\telement.style.width = \"100%\";\r\n\r\n\t\tvar line_editor = new LiteGUI.LineEditor(value,options);\r\n\t\telement.querySelector(\"span.line-editor\").appendChild(line_editor);\r\n\r\n\t\tLiteGUI.bind( line_editor, \"change\", function(e) { \r\n\t\t\tLiteGUI.trigger(element, \"wbeforechange\",[e.target.value]);\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element,e.target.value );\r\n\t\t\tLiteGUI.trigger(element, \"wchange\",[e.target.value]);\r\n\t\t\tInspector.onWidgetChange.call(that,element,name,e.target.value, options);\r\n\t\t});\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addTree = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = this.createWidget(name,\"<div class='wtree inputfield full'></div>\", options);\r\n\t\t\r\n\t\tvar tree_root = element.querySelector(\".wtree\");\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\ttree_root.style.height = typeof(options.height) == \"number\" ? options.height + \"px\" : options.height;\r\n\t\t\ttree_root.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\tvar current = value;\r\n\r\n\t\tvar tree = element.tree = new LiteGUI.Tree( value, options.tree_options );\r\n\t\ttree.onItemSelected = function(node, data) {\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( element, node, data);\r\n\t\t};\r\n\r\n\t\ttree_root.appendChild(tree.root);\r\n\r\n\t\telement.setValue = function(v) { \r\n\t\t\ttree.updateTree(v);\r\n\t\t};\r\n\r\n\t\tthis.append(element,options);\r\n\t\tthis.processElement(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.addDataTree = function(name, value, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvalue = value || \"\";\r\n\t\tvar element = this.createWidget(name,\"<div class='wtree'></div>\", options);\r\n\t\t\r\n\t\tvar node = element.querySelector(\".wtree\");\r\n\t\tvar current = value;\r\n\r\n\t\tinner_recursive(node,value);\r\n\r\n\t\tfunction inner_recursive( root_node, value)\r\n\t\t{\r\n\t\t\tfor(var i in value)\r\n\t\t\t{\r\n\t\t\t\tvar e = document.createElement(\"div\");\r\n\t\t\t\te.className = \"treenode\";\r\n\t\t\t\tif( typeof( value[i] ) == \"object\" )\r\n\t\t\t\t{\r\n\t\t\t\t\te.innerHTML = \"<span class='itemname'>\" + i + \"</span><span class='itemcontent'></span>\";\r\n\t\t\t\t\tinner_recursive( e.querySelector(\".itemcontent\"), value[i] );\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\te.innerHTML = \"<span class='itemname'>\" + i + \"</span><span class='itemvalue'>\" + value[i] + \"</span>\";\r\n\t\t\t\troot_node.appendChild(e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.append(element,options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t* Widget to edit an array of values of a certain type\r\n\t* @method addArray\r\n\t* @param {string} name \r\n\t* @param {Array} value \r\n\t* @param {Object} options, here is a list for this widget (check createWidget for a list of generic options):\r\n\t* - data_type: the type of every value inside the array\r\n\t* - data_options: options for the widgets of every item in the array\r\n\t* - max_items: max number of items to show from the array, default is 100\r\n\t* - callback: function to call once an items inside the array has changed\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addArray = function( name, value, options )\r\n\t{\r\n\t\tvar that = this;\r\n\r\n\t\tif( !value || value.constructor !== Array )\r\n\t\t{\r\n\t\t\tconsole.error(\"Inspector: Array widget value must be a valid array\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar type = options.data_type || \"string\";\r\n\t\tvar max_items = options.max_items || 100;\r\n\t\tvar container = null;\r\n\r\n\t\t//length widget\r\n\t\tthis.widgets_per_row = 3;\r\n\t\tthis.addInfo(name,null,{ name_width: \"100%\", width: \"100% - 160px\"});\r\n\t\tvar length_widget = this.addString( \"length\", value.length || \"0\", { width: 100, callback: function(v){ \r\n\t\t\tvar v = parseInt(v);\r\n\t\t\tif(value < 0)\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue.length = v;\r\n\t\t\trefresh.call( container );\r\n\t\t}});\r\n\r\n\t\tthis.addButtons( null,[\"+\",\"-\"], { width: 60, callback: function(v){\r\n\t\t\tif(v == \"+\")\r\n\t\t\t\tvalue.length = value.length + 1;\r\n\t\t\telse if(value.length > 0)\r\n\t\t\t\tvalue.length = value.length - 1;\r\n\t\t\tlength_widget.setValue( value.length );\r\n\t\t\trefresh.call( container );\r\n\t\t}});\r\n\r\n\t\tthis.widgets_per_row = 1;\r\n\t\tcontainer = this.addContainer( name, options );\r\n\t\tcontainer.value = value;\r\n\r\n\t\trefresh.call( container );\r\n\r\n\t\tfunction refresh()\r\n\t\t{\r\n\t\t\tvar container = this;\r\n\t\t\tvar value = container.value;\r\n\t\t\tvar size = Math.min( value.length, max_items );\r\n\r\n\t\t\tthat.widgets_per_row += 1;\r\n\t\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\t\tfor(var i = 0; i < size; ++i)\r\n\t\t\t{\r\n\t\t\t\tvar v = null;\r\n\t\t\t\tif (value[i] !== undefined)\r\n\t\t\t\t\tv = value[i];\r\n\t\t\t\tvar row = document.createElement(\"div\");\r\n\t\t\t\trow.className = \"array-row\";\r\n\t\t\t\trow.innerHTML = \"<span class='row-index'>\" + i + \"</span><span class='row-cell'></span><button style='width: 30px;' class='litebutton single row-trash'><img src='imgs/mini-icon-trash.png'/></button>\";\r\n\t\t\t\tcontainer.appendChild(row);\r\n\r\n\t\t\t\tvar widget_row_container = row.querySelector('.row-cell');\r\n\t\t\t\t\r\n\t\t\t\tvar item_options = { widget_parent: widget_row_container, callback: assign.bind({value: this.value, index: i}) };\r\n\t\t\t\tif(options.data_options)\r\n\t\t\t\t\tfor(var j in options.data_options)\r\n\t\t\t\t\t\titem_options[j] = options.data_options[j];\r\n\t\t\t\tvar w = that.add( type, null, v, item_options );\r\n\r\n\t\t\t\t/*\r\n\t\t\t\tthat.addButton(null,\"<img src='imgs/mini-icon-trash.png'/>\", {  widget_parent: container, index: i, width: 30, callback: function(){\r\n\t\t\t\t\tif( value && value.length > (this.options.index-1))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue.splice( this.options.index,1 );\r\n\t\t\t\t\t\tlength_widget.setValue( value.length, true );\r\n\t\t\t\t\t\trefresh.call( container );\r\n\t\t\t\t\t}\r\n\t\t\t\t}});\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t\tthat.widgets_per_row -= 1;\r\n\t\t}\r\n\r\n\t\tfunction assign(v)\r\n\t\t{\r\n\t\t\tthis.value[ this.index ] = v;\r\n\t\t\tif(options.callback)\r\n\t\t\t\toptions.callback.call( container, this.value, this.index );\r\n\t\t\t//todo: trigger change\r\n\t\t}\r\n\r\n\t\tcontainer.setValue = function(v)\r\n\t\t{\r\n\t\t\tthis.value = v;\r\n\t\t\trefresh.call(container);\r\n\t\t}\r\n\r\n\t\tcontainer.getValue = function()\r\n\t\t{\r\n\t\t\treturn this.value = v;\r\n\t\t}\r\n\r\n\t\t//this.append(element,options);\r\n\t\treturn container;\r\n\t}\r\n\r\n\t//***** containers ********/\r\n\t//creates an empty container but it is not set active\r\n\tInspector.prototype.addContainer = function(name, options)\r\n\t{\r\n\t\tif(name && name.constructor !== String)\r\n\t\t\tconsole.warn(\"LiteGUI.Inspector.addContainer first parameter must be a string with the name\");\r\n\t\tvar element = this.startContainer(null,options);\r\n\t\tthis.endContainer();\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//creates an empty container and sets its as active\r\n\tInspector.prototype.startContainer = function(name, options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wcontainer\";\r\n\t\tthis.applyOptions(element, options);\r\n\t\tthis.row_number = 0;\r\n\r\n\t\tthis.append( element );\r\n\t\tthis.pushContainer( element );\r\n\r\n\t\tif(options.widgets_per_row)\r\n\t\t\tthis.widgets_per_row = options.widgets_per_row;\r\n\r\n\t\tif(options.height)\r\n\t\t{\r\n\t\t\telement.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\t\telement.style.overflow = \"auto\";\r\n\t\t}\r\n\r\n\t\telement.refresh = function()\r\n\t\t{\r\n\t\t\tif(element.on_refresh)\r\n\t\t\t\telement.on_refresh.call(this, element);\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.endContainer = function(name, options)\r\n\t{\r\n\t\tthis.popContainer();\r\n\t}\r\n\r\n\t//it is like a group but they cant be nested inside containers\r\n\tInspector.prototype.addSection = function( name, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\t\tvar that = this;\r\n\r\n\t\tif(this.current_section)\r\n\t\t\tthis.current_section.end();\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wsection\";\r\n\t\tif(!name) \r\n\t\t\telement.className += \" notitle\";\r\n\t\tif(options.className)\r\n\t\t\telement.className += \" \" + options.className;\r\n\t\tif(options.collapsed)\r\n\t\t\telement.className += \" collapsed\";\r\n\r\n\t\tif(options.id)\r\n\t\t\telement.id = options.id;\r\n\t\tif(options.instance)\r\n\t\t\telement.instance = options.instance;\r\n\r\n\t\tvar code = \"\";\r\n\t\tif(name)\r\n\t\t\tcode += \"<div class='wsectiontitle'>\"+(options.no_collapse ? \"\" : \"<span class='switch-section-button'></span>\")+name+\"</div>\";\r\n\t\tcode += \"<div class='wsectioncontent'></div>\";\r\n\t\telement.innerHTML = code;\r\n\r\n\t\t//append to inspector\r\n\t\telement._last_container_stack = this._current_container_stack.concat();\r\n\t\t//this.append( element ); //sections are added to the root, not to the current container\r\n\t\tthis.root.appendChild( element );\r\n\t\tthis.sections.push( element );\r\n\r\n\t\telement.sectiontitle = element.querySelector(\".wsectiontitle\");\r\n\r\n\t\tif(name)\r\n\t\t\telement.sectiontitle.addEventListener(\"click\",function(e) {\r\n\t\t\t\tif(e.target.localName == \"button\") \r\n\t\t\t\t\treturn;\r\n\t\t\t\telement.classList.toggle(\"collapsed\");\r\n\t\t\t\tvar seccont = element.querySelector(\".wsectioncontent\");\r\n\t\t\t\tseccont.style.display = seccont.style.display === \"none\" ? null : \"none\";\r\n\t\t\t\tif(options.callback)\r\n\t\t\t\t\toptions.callback.call( element, !element.classList.contains(\"collapsed\") );\r\n\t\t\t});\r\n\r\n\t\tif(options.collapsed)\r\n\t\t\telement.querySelector(\".wsectioncontent\").style.display = \"none\";\r\n\r\n\t\tthis.setCurrentSection( element );\r\n\r\n\t\tif(options.widgets_per_row)\r\n\t\t\tthis.widgets_per_row = options.widgets_per_row;\r\n\r\n\t\telement.refresh = function()\r\n\t\t{\r\n\t\t\tif(element.on_refresh)\r\n\t\t\t\telement.on_refresh.call(this, element);\r\n\t\t}\r\n\r\n\t\telement.end = function()\r\n\t\t{\r\n\t\t\tif(that.current_section != this)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthat._current_container_stack = this._last_container_stack;\r\n\t\t\tthat._current_container = null;\r\n\r\n\t\t\tvar content = this.querySelector(\".wsectioncontent\");\r\n\t\t\tif(!content)\r\n\t\t\t\treturn;\r\n\t\t\tif( that.isContainerInStack( content ) )\r\n\t\t\t\tthat.popContainer( content );\r\n\t\t\tthat.current_section = null;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t//change current section (allows to add widgets to previous sections)\r\n\tInspector.prototype.setCurrentSection = function( section )\r\n\t{\r\n\t\tif( this.current_section == section )\r\n\t\t\treturn;\r\n\r\n\t\tthis.current_section = section;\r\n\r\n\t\tvar parent = section.parentNode;\r\n\t\tthis.popContainer( parent ); //go back till that container\r\n\r\n\t\tvar content = section.querySelector(\".wsectioncontent\");\r\n\t\tthis.pushContainer( content );\r\n\t}\r\n\r\n\tInspector.prototype.getCurrentSection = function()\r\n\t{\r\n\t\tfor(var i = this._current_container_stack.length - 1; i >= 0; --i)\r\n\t\t{\r\n\t\t\tvar container = this._current_container_stack[i];\r\n\t\t\tif(container.classList.contains(\"wsectioncontent\"))\r\n\t\t\t\treturn container.parentNode;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tInspector.prototype.endCurrentSection = function()\r\n\t{\r\n\t\tif(this.current_section)\r\n\t\t\tthis.current_section.end();\r\n\t}\r\n\r\n\t//A container of widgets with a title \r\n\tInspector.prototype.beginGroup = function( name, options )\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\telement.className = \"wgroup\";\r\n\t\tname = name || \"\";\r\n\t\telement.innerHTML = \"<div class='wgroupheader \"+ (options.title ? \"wtitle\" : \"\") +\"'><span class='switch-section-button'></span>\"+name+\"</div>\";\r\n\t\telement.group = true;\r\n\r\n\t\tvar content = document.createElement(\"DIV\");\r\n\t\tcontent.className = \"wgroupcontent\";\r\n\t\tif(options.collapsed)\r\n\t\t\tcontent.style.display = \"none\";\r\n\r\n\t\tif( options.height )\r\n\t\t\tcontent.style.height = LiteGUI.sizeToCSS( options.height );\r\n\t\tif( options.scrollable )\r\n\t\t\tcontent.style.overflow = \"auto\";\r\n\r\n\t\telement.appendChild( content );\r\n\r\n\t\tvar collapsed = options.collapsed || false;\r\n\t\tvar header = element.querySelector(\".wgroupheader\");\r\n\t\tif(collapsed)\r\n\t\t\theader.classList.add(\"collapsed\");\r\n\t\theader.addEventListener(\"click\", function(e) { \r\n\t\t\tvar style = element.querySelector(\".wgroupcontent\").style;\r\n\t\t\tstyle.display = style.display === \"none\" ? \"\" : \"none\";\r\n\t\t\tcollapsed = !collapsed;\r\n\t\t\tif(collapsed)\r\n\t\t\t\theader.classList.add(\"collapsed\");\r\n\t\t\telse\r\n\t\t\t\theader.classList.remove(\"collapsed\");\r\n\t\t\t//element.querySelector(\".switch-section-button\").innerHTML = (collapsed ? \"+\" : \"-\");\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\r\n\t\tthis.append( element, options );\r\n\t\tthis.pushContainer( content );\r\n\t\treturn element;\r\n\t}\r\n\r\n\tInspector.prototype.endGroup = function()\r\n\t{\r\n\t\tdo\r\n\t\t{\r\n\t\t\tthis.popContainer();\r\n\t\t}\r\n\t\twhile( this._current_container && !this._current_container.classList.contains(\"wgroupcontent\") )\r\n\t}\r\n\r\n\t/**\r\n\t* Creates a title bar in the widgets list to help separate widgets\r\n\t* @method addTitle\r\n\t* @param {string} title \r\n\t* @param {Object} options\r\n\t* @return {HTMLElement} the widget in the form of the DOM element that contains it\r\n\t**/\r\n\tInspector.prototype.addTitle = function(title,options)\r\n\t{\r\n\t\toptions = this.processOptions(options);\r\n\r\n\t\tvar element = document.createElement(\"DIV\");\r\n\t\tvar code = \"<span class='wtitle'><span class='text'>\"+title+\"</span>\";\r\n\t\tif(options.help)\r\n\t\t{\r\n\t\t\tcode += \"<span class='help'><div class='help-content'>\"+options.help+\"</div></span>\";\r\n\t\t}\r\n\t\tcode += \"</span>\";\r\n\t\telement.innerHTML = code;\r\n\t\telement.setValue = function(v) { \r\n\t\t\tthis.querySelector(\".text\").innerHTML = v;\r\n\t\t};\r\n\t\tthis.row_number = 0;\r\n\t\tthis.append(element, options);\r\n\t\treturn element;\r\n\t}\r\n\r\n\r\n\tInspector.prototype.scrollTo = function( id )\r\n\t{\r\n\t\tvar element = this.root.querySelector(\"#\" + id );\r\n\t\tif(!element)\r\n\t\t\treturn;\r\n\t\tvar top = this.root.offsetTop;\r\n\t\tvar delta = element.offsetTop - top;\r\n\t\tthis.root.parentNode.parentNode.scrollTop = delta;\r\n\t}\r\n\r\n\tInspector.prototype.processOptions = function(options)\r\n\t{\r\n\t\tif(typeof(options) == \"function\")\r\n\t\t\toptions = { callback: options };\r\n\t\treturn options || {};\r\n\t}\r\n\r\n\tInspector.prototype.processElement = function(element, options)\r\n\t{\r\n\t\tif(options.callback_update && element.setValue)\r\n\t\t{\r\n\t\t\telement.on_update = function(){\r\n\t\t\t\tthis.setValue( options.callback_update.call(this), true );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.prototype.updateWidgets = function()\r\n\t{\r\n\t\tfor(var i = 0; i < this.widgets.length; ++i)\r\n\t\t{\r\n\t\t\tvar widget = this.widgets[i];\r\n\t\t\tif(widget.on_update)\r\n\t\t\t\twidget.on_update( widget );\r\n\t\t}\r\n\t}\r\n\r\n\tInspector.parseColor = function(color)\r\n\t{\r\n\t\treturn \"<span style='color: #FAA'>\" + color[0].toFixed(2) + \"</span>,<span style='color: #AFA'>\" + color[1].toFixed(2) + \"</span>,<span style='color: #AAF'>\" + color[2].toFixed(2) + \"</span>\";\r\n\t}\r\n\r\n\treturn LiteGUI.Inspector = Inspector;\r\n\r\n});"]}
/**
 * skylark-litegui - A version of litegui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-litegui/
 * @license MIT
 */
define(["./litegui"],function(t){function e(t){t=t||{},this.root=document.createElement("div"),this.root.className="liteconsole",this.root.innerHTML="<div class='log'></div><div class='foot'><input type='text'/></div>",this.log_element=this.root.querySelector(".log"),this.input=this.root.querySelector("input"),this.input.addEventListener("keydown",this.processKeyDown.bind(this)),this._prompt=t.prompt||"]",this.onAutocomplete=null,this.onProcessCommand=null,this.history=[],this._history_offset=0}return e.prototype.processKeyDown=function(t){if(!this._input_blocked){if(13==t.keyCode){var e=this.input.value.trim();this.addMessage(this._prompt+e,"me",!0),this.input.value="",this.history.push(e),this.history.length>10&&this.history.shift(),this.onProcessCommand&&this.onProcessCommand(e),this._history_offset=0}else if(38==t.keyCode||40==t.keyCode){this._history_offset+=38==t.keyCode?-1:1,this._history_offset>0?this._history_offset=0:this._history_offset<-this.history.length&&(this._history_offset=-this.history.length);var o=this.history.length+this._history_offset;if(o<0)return;o>=this.history.length?this.input.value="":this.input.value=this.history[o]}else{if(9!=t.keyCode)return;if(!this.onAutocomplete)return;this.input.value=this.onAutocomplete(this.input.value)}t.preventDefault(),t.stopPropagation()}},e.prototype.addMessage=function(t,e,o){var i=this.log_element,s=null;if(t&&t.constructor===Array)for(var r=0;r<t.length;++r)n(t[r]);else t&&t.constructor===Object?n(JSON.stringify(t,null,""),this):n(t,this);function n(t,r){s=document.createElement("pre"),o?s.innerText=t:s.innerHTML=t,s.className="msg",e&&(s.className+=" "+e),i.appendChild(s),i.children.length>1e3&&i.removeChild(i.children[0])}return this.log_element.scrollTop=1e6,s.update=function(t){this.innerHTML=t},s},e.prototype.log=function(){var t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msglog")},e.prototype.warn=function(){var t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msgwarn")},e.prototype.error=function(){var t=Array.prototype.slice.call(arguments).join(",");return this.addMessage(t,"msgerror")},e.prototype.clear=function(){this.log_element.innerHTML=""},t.Console=e});
//# sourceMappingURL=sourcemaps/Console.js.map

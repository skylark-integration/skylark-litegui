/**
 * skylark-litegui - A version of litegui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-litegui/
 * @license MIT
 */
define(["./litegui"],function(t){function e(e){e=e||{},this.root=document.createElement("table"),this.root.classList.add("litetable"),this.columns=[],this.column_fields=[],this.rows=[],this.data=[],this._must_update_header=!0,e.colums&&this.setColumns(e.colums),e.scrollable&&(this.root.style.overflow="auto"),e.height&&(this.root.style.height=t.sizeToCSS(e.height)),e.columns&&this.setColumns(e.columns),e.rows&&this.setRows(e.data)}return e.prototype.setRows=function(t,e){this.data=t,this.updateContent(e)},e.prototype.addRow=function(t,e){for(var s=document.createElement("tr"),i=0;i<this.column_fields.length;++i){var o=document.createElement("td"),h=null;void 0===(h=t.constructor===Array?t[i]:t[this.column_fields[i]])&&(h=""),o.innerHTML=h;var n=this.columns[i];if(void 0===n)break;n.className&&(o.className=n.className),n.width&&(o.style.width=n.width),s.appendChild(o)}return this.root.appendChild(s),this.rows.push(s),e||this.data.push(t),s},e.prototype.updateRow=function(t,e){this.data[t]=e;var s=this.rows[t];if(s){for(var i=s.querySelectorAll("td"),o=0;o<i.length;++o){var h=this.columns[o],n=null;void 0===(n=e.constructor===Array?e[o]:e[h.field])&&(n=""),i[o].innerHTML=n}return s}},e.prototype.updateCell=function(t,e,s){var i=this.rows[t];if(i&&(e=i.childNodes[e]))return e.innerHTML=s,e},e.prototype.setColumns=function(e){this.columns.length=0,this.column_fields.length=0;for(var s=Math.floor(100/e.length).toFixed(1)+"%",i=[],o=0;o<e.length;++o){var h=e[o];if(null!==h&&void 0!==h){h.constructor!==String&&h.constructor!==Number||(h={name:String(h)});var n={name:h.name||"",width:t.sizeToCSS(h.width||s),field:(h.field||h.name||"").toLowerCase(),className:h.className};o==e.length-1?n.width=" calc( 100% - ( "+i.join(" + ")+" ) )":i.push(n.width),this.columns.push(n),this.column_fields.push(n.field)}}this._must_update_header=!0,this.updateContent()},e.prototype.updateContent=function(t){if(this.root.innerHTML="",this._must_update_header){this.header=document.createElement("tr");for(var e=0;e<this.columns.length;++e){var s=this.columns[e],i=document.createElement("th");i.innerHTML=s.name,s.width&&(i.style.width=s.width),s.th=i,this.header.appendChild(i)}this._must_update_header=!1}if(this.root.appendChild(this.header),this.data)if(this.data.length!=this.rows.length&&(t=!1),t)for(e=0;e<this.rows.length;++e){var o=this.data[e],h=this.updateRow(e,o);this.root.appendChild(h)}else{this.rows.length=0;for(e=0;e<this.data.length;++e){var n=this.data[e];this.addRow(n,!0)}}},t.Table=e});
//# sourceMappingURL=sourcemaps/Table.js.map

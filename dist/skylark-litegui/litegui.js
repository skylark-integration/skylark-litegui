/**
 * skylark-litegui - A version of litegui.js  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-litegui/
 * @license MIT
 */
define(["skylark-langx-ns"],function(e){var t={root:null,content:null,panels:{},windows:[],undo_steps:[],modalbg_div:null,mainmenu:null,init:function(e){if((e=e||{}).width&&e.height&&this.setWindowSize(e.width,e.height),this.container=null,e.container&&(this.container=document.getElementById(e.container)),this.container||(this.container=document.body),e.wrapped){var n=document.createElement("div");n.style.position="relative",n.style.overflow="hidden",this.root=n,this.container.appendChild(n);var r=document.createElement("div");this.content=r,this.root.appendChild(r),this.root.classList.contains("fullscreen")&&window.addEventListener("resize",function(e){t.maximizeWindow()})}else this.root=this.content=this.container;this.root.className="litegui-wrap fullscreen",this.content.className="litegui-maincontent";var o=this.modalbg_div=document.createElement("div");this.modalbg_div.className="litemodalbg",this.root.appendChild(this.modalbg_div),o.style.display="none",e.menubar&&this.createMenubar(),e.gui_callback&&e.gui_callback(),window.addEventListener("beforeunload",function(e){for(var n in t.windows)t.windows[n].close();t.windows=[]})},trigger:function(e,t,n,r){var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,!0,!0,n),o.srcElement=r,e.dispatchEvent?e.dispatchEvent(o):e.__events&&e.__events.dispatchEvent(o),o},bind:function(e,t,n){if(!e)throw"Cannot bind to null";if(!t)throw"Event bind missing";if(!n)throw"Bind callback missing";if(e.constructor===String&&(e=document.querySelectorAll(e)),e.constructor===NodeList||e.constructor===Array)for(var r=0;r<e.length;++r)o(e[r]);else o(e);function o(e){if(e.addEventListener)e.addEventListener(t,n);else if(e.__events)e.__events.addEventListener(t,n);else{var r=document.createElement("span");r.widget=e,Object.defineProperty(e,"__events",{enumerable:!1,configurable:!1,writable:!1,value:r}),e.__events.addEventListener(t,n)}}},unbind:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.__events&&e.__events.removeEventListener&&e.__events.removeEventListener(t,n)},removeClass:function(e,t,n){n||(n=t,t="."+t);for(var r=(e||document).querySelectorAll(t),o=0;o<r.length;++o)r[o].classList.remove(n)},add:function(e){this.content.appendChild(e.root||e)},remove:function(e){if(e){if(e.constructor===String)for(var n=document.querySelectorAll(e),r=0;r<n.length;++r){(e=n[r])&&e.parentNode&&e.parentNode.removeChild(e)}if(e.constructor===Array||e.constructor===NodeList)for(r=0;r<e.length;++r)t.remove(e[r]);else e.root&&e.root.parentNode?e.root.parentNode.removeChild(e.root):e.parentNode&&e.parentNode.removeChild(e)}},getById:function(e){return document.getElementById(e)},createMenubar:function(){this.menubar=new t.Menubar("mainmenubar"),this.add(this.menubar)},setWindowSize:function(e,n){var r=this.root.style;if(e&&n)r.width=e+"px",r.height=n+"px",r.boxShadow="0 0 4px black",this.root.classList.remove("fullscreen");else{if(this.root.classList.contains("fullscreen"))return;this.root.classList.add("fullscreen"),r.width="100%",r.height="100%",r.boxShadow="0 0 0"}t.trigger(t,"resized")},maximizeWindow:function(){this.setWindowSize()},setCursor:function(e){this.root.style.cursor=e},isCursorOverElement:function(e,t){var n=e.pageX,r=e.pageY,o=t.getBoundingClientRect();return!!o&&(r>o.top&&r<o.top+o.height&&n>o.left&&n<o.left+o.width)},getRect:function(e){return e.getBoundingClientRect()},toClipboard:function(e,t){e&&e.constructor!==String&&(e=JSON.stringify(e));var n=null,r=!1;if(!t)try{document.queryCommandSupported("copy");(n=document.createElement("input")).type="text",n.style.opacity=0,n.value=e,document.body.appendChild(n),n.select(),r=document.execCommand("copy"),console.log(r?"saved to clipboard":"problem saving to clipboard"),document.body.removeChild(n)}catch(e){n&&document.body.removeChild(n),console.warn("Oops, unable to copy using the true clipboard")}try{this._safe_cliboard=null,localStorage.setItem("litegui_clipboard",e)}catch(t){this._safe_cliboard=e,console.warn("cliboard quota excedeed")}},getLocalClipboard:function(){var e=localStorage.getItem("litegui_clipboard");return!e&&this._safe_cliboard&&(e=this._safe_cliboard),e?"{"==e[0]?JSON.parse(e):e:null},addCSS:function(e){if(e){if(e.constructor===String){var t=document.createElement("style");return t.type="text/css",t.innerHTML=e,void document.getElementsByTagName("head")[0].appendChild(t)}for(var n in e)document.body.style[n]=e[n]}},requireCSS:function(e,t){for("string"==typeof e&&(e=[e]);e.length;){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e.shift(1),n.media="all",document.getElementsByTagName("head")[0].appendChild(n),0==e.length&&(n.onload=t)}},request:function(e){var t=e.dataType||"text";"json"==t?t="text":"xml"==t?t="text":"binary"==t&&(t="arraybuffer",e.mimeType="application/octet-stream");var n=new XMLHttpRequest;n.open(e.data?"POST":"GET",e.url,!0),t&&(n.responseType=t),e.mimeType&&n.overrideMimeType(e.mimeType),e.nocache&&n.setRequestHeader("Cache-Control","no-cache"),n.onload=function(t){var r=this.response;if(200!=this.status){var o="Error "+this.status;return e.error&&e.error(o),void LEvent.trigger(n,"fail",this.status)}if("json"==e.dataType)try{r=JSON.parse(r)}catch(o){if(!e.error)throw o;e.error(o)}else if("xml"==e.dataType)try{r=(new DOMParser).parseFromString(r,"text/xml")}catch(o){if(!e.error)throw o;e.error(o)}e.success&&e.success.call(this,r,this)},n.onerror=function(t){e.error&&e.error(t)};var r=new FormData;if(e.data)for(var o in e.data)r.append(o,e.data[o]);return n.send(r),n},requestText:function(e,t,n){return this.request({url:e,dataType:"text",success:t,error:n})},requestJSON:function(e,t,n){return this.request({url:e,dataType:"json",success:t,error:n})},requestBinary:function(e,t,n){return this.request({url:e,dataType:"binary",success:t,error:n})},requireScript:function(e,t,n,r,o){if(!e)throw"invalid URL";e.constructor===String&&(e=[e]);var i=e.length,a=[];for(var s in e){var l=document.createElement("script");l.num=s,l.type="text/javascript",l.src=e[s]+(o?"?version="+o:""),l.original_src=e[s],l.async=!1,l.onload=function(e){i--,a.push(this),i?r&&r(this.original_src,this.num):t&&t(a)},n&&(l.onerror=function(e){n(e,this.original_src,this.num)}),document.getElementsByTagName("head")[0].appendChild(l)}},requireScriptSerial:function(e,t,n){"string"==typeof e&&(e=[e]);var r=[];!function o(){var i=document.createElement("script");i.type="text/javascript",i.src=e.shift(1),i.onload=function(i){if(e.length)return n&&n(e[0],e.length),void o();r.push(this),t&&t(r)},document.getElementsByTagName("head")[0].appendChild(i)}()},newDiv:function(e,t){return this.createElement("div",e,t)},createElement:function(e,t,n,r,o){var i=document.createElement(e);if(t)for(var a=t.split(" "),s=0;s<a.length;s++)"."==a[s][0]?i.classList.add(a[s].substr(1)):"#"==a[s][0]?i.id=a[s].substr(1):i.id=a[s];if(i.root=i,n&&(i.innerHTML=n),i.add=function(e){this.appendChild(e.root||e)},r)if(r.constructor===String)i.setAttribute("style",r);else for(var s in r)i.style[s]=r[s];if(o)for(var s in o)i.addEventListener(s,o[s]);return i},createListItem:function(e,t,n){var r=document.createElement("span");if(r.innerHTML=e,r=r.childNodes[0],t)for(var o in t){var i=r.querySelector(o);i&&(i.innerText=t[o])}if(n)for(var o in n)r.style[o]=n[o];return r},createButton:function(e,t,n,r){var o=document.createElement("button");if(o.className="litegui litebutton button",e)for(var i=e.split(" "),a=0;a<i.length;a++)"."==i[a][0]?o.classList.add(i[a].substr(1)):"#"==i[a][0]?o.id=i[a].substr(1):o.id=i[a];if(o.root=o,void 0!==t&&(o.innerHTML=t),n&&o.addEventListener("click",n),r)if(r.constructor===String)o.setAttribute("style",r);else for(var a in r)o.style[a]=r[a];return o},getParents:function(e){for(var t=[];null!==(e=e.parentElement);)e.nodeType===Node.ELEMENT_NODE&&t.push(elem);return t},newWindow:function(e,t,n,r){r=r||{};var o=window.open("","","width="+t+", height="+n+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");o.document.write("<html><head><title>"+e+"</title>");for(var i=document.querySelectorAll("link[rel='stylesheet'],style"),a=0;a<i.length;a++)o.document.write(i[a].outerHTML);if(r.scripts){var s=document.querySelectorAll("script");for(a=0;a<s.length;a++)s[a].src&&o.document.write(s[a].outerHTML)}var l=r.content||"";return o.document.write("</head><body>"+l+"</body></html>"),o.document.close(),o},showModalBackground:function(e){t.modalbg_div&&(t.modalbg_div.style.display=e?"block":"none")},showMessage:function(e,n){(n=n||{}).title=n.title||"Attention",n.content=e,n.close="fade";var r=new t.Dialog(n);return n.noclose||r.addButton("Close",{close:!0}),r.makeModal("fade"),r},popup:function(e,n){(n=n||{}).min_height=140,"string"==typeof e&&(e="<p>"+e+"</p>"),n.content=e,n.close="fade";var r=new t.Dialog(n);return n.noclose||r.addButton("Close",{close:!0}),r.show(),r},alert:function(e,n){return(n=n||{}).className="alert",n.title=n.title||"Alert",n.width=n.width||280,n.height=n.height||140,"string"==typeof e&&(e="<p>"+e+"</p>"),t.remove(".litepanel.alert"),t.showMessage(e,n)},confirm:function(e,t,n){(n=n||{}).className="alert",n.title=n.title||"Confirm",n.width=n.width||280,"string"==typeof e&&(e="<p>"+e+"</p>"),e+="<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>",n.noclose=!0;var r=this.showMessage(e,n);r.content.style.paddingBottom="10px";for(var o=r.content.querySelectorAll("button"),i=0;i<o.length;i++)o[i].addEventListener("click",a);function a(e){e="yes"==this.dataset.value;r.close(),t&&t(e)}return o[0].focus(),r},prompt:function(e,t,n){(n=n||{}).className="alert",n.title=n.title||"Prompt",n.width=n.width||280,"string"==typeof e&&(e="<p>"+e+"</p>");var r=n.value||"",o="<input type='text' value='"+r+"'/>";n.textarea&&(o="<textarea class='textfield' style='width:95%'>"+r+"</textarea>"),e+="<p>"+o+"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>",n.noclose=!0;for(var i=this.showMessage(e,n),a=i.content.querySelectorAll("button"),s=0;s<a.length;s++)a[s].addEventListener("click",c);var l=i.content.querySelector("input,textarea");function c(){var e=l.value;this.dataset&&"cancel"==this.dataset.value&&(e=null),i.close(),t&&t(e)}return l.addEventListener("keydown",function(e){e||(e=window.event);var t=e.keyCode||e.which;if("13"==t)return c(),!1;"29"==t&&i.close()},!0),l.focus(),i},choice:function(e,t,n,r){for(var o in(r=r||{}).className="alert",r.title=r.title||"Select one option",r.width=r.width||280,"string"==typeof e&&(e="<p>"+e+"</p>"),t)e+="<button class='litebutton' data-value='"+o+"' style='width:45%; margin-left: 10px'>"+(t[o].content||t[o])+"</button>";r.noclose=!0;var i=this.showMessage(e,r);i.content.style.paddingBottom="10px";var a=i.content.querySelectorAll("button");for(o=0;o<a.length;o++)a[o].addEventListener("click",s);function s(e){e=t[this.dataset.value];i.close(),n&&n(e)}return i},downloadURL:function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},downloadFile:function(e,t,n){if(t){n||(n=t.constructor===String?"text/plain":"application/octet-stream");var r=null;r=t.constructor!==File&&t.constructor!==Blob?new Blob([t],{type:n}):t;var o=URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",o),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(function(){URL.revokeObjectURL(o)},6e4)}else console.warn("No file provided to download")},getUrlVars:function(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++)e=n[r].split("="),t.push(e[0]),t[e[0]]=e[1];return t},getUrlVar:function(e){return t.getUrlVars()[e]},focus:function(e){e.focus()},blur:function(e){e.blur()},draggable:function(e,t,n,r,o){(t=t||e).addEventListener("mousedown",function t(u){if("mousedown"==u.type)return s||(s=e.getClientRects()[0],l=s?s.left:0,c=s?s.top:0),o&&0==o(e,u)?(u.stopPropagation(),u.preventDefault(),!1):(i=u.clientX,a=u.clientY,document.addEventListener("mousemove",t),document.addEventListener("mouseup",t),n&&n(e,u),u.stopPropagation(),u.preventDefault(),!1);if("mouseup"==u.type)return document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",t),void(r&&r(e,u));if("mousemove"==u.type){var d=u.clientX-i,p=u.clientY-a;i=u.clientX,a=u.clientY,l+=d,c+=p,e.style.left=l+"px",e.style.top=c+"px"}}),t.style.cursor="move";var i=0,a=0,s=e.getClientRects()[0],l=s?s.left:0,c=s?s.top:0;e.style.position="absolute",e.style.left=l+"px",e.style.top=c+"px"},cloneObject:function(e,t){var n=t||{};for(var r in e)if("_"!=r[0]&&"jQuery"!=r.substr(0,6)){var o=e[r];if(null==o)n[r]=null;else{if(isFunction(o))continue;if("number"==typeof o||"string"==typeof o)n[r]=o;else if(o.constructor==Float32Array)n[r]=Array.apply([],o);else if(isArray(o))n[r]&&n[r].constructor==Float32Array?n[r].set(o):n[r]=JSON.parse(JSON.stringify(o));else try{n[r]=JSON.parse(JSON.stringify(o))}catch(e){console.error(e)}}}return n},safeName:function(e){return String(e).replace(/[\s\.]/g,"")},special_codes:{close:"&#10005;",navicon:"&#9776;",refresh:"&#8634;",gear:"&#9881;",open_folder:"&#128194;",download:"&#11123;",tick:"&#10003;",trash:"&#128465;"},htmlEncode:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},htmlDecode:function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML},sizeToCSS:function(e){return void 0===e||null===e?null:e.constructor===String?e:e>=0?(0|e)+"px":"calc( 100% - "+Math.abs(0|e)+"px )"},getElementWindow:function(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow},createDropArea:function(e,t,n,r){function o(t){e.addEventListener("dragexit",o),e.addEventListener("dragover",o),e.addEventListener("drop",i),t.stopPropagation(),t.preventDefault(),"dragenter"==t.type&&n&&n(t,this),"dragexit"==t.type&&r&&r(t,this)}function i(n){n.stopPropagation(),n.preventDefault(),e.removeEventListener("dragexit",o),e.removeEventListener("dragover",o),e.removeEventListener("drop",i);var r=void 0;if(t&&(r=t(n)),r)return n.stopPropagation(),n.stopImmediatePropagation(),!0}e.addEventListener("dragenter",o)}};return Object.defineProperty(String.prototype,"template",{value:function(e,t){for(var n,r=this,o=/{{([^}}]+)?}}/g;n=o.exec(r);){var i=t?new Function("with(this) { try { return "+n[1]+"} catch(e) { return 'error';} }").call(e):e[n[1]];r=r.replace(n[0],i)}return r},enumerable:!1}),"undefined"==typeof escapeHtmlEntities&&(escapeHtmlEntities=function(e){return e.replace(/[\u00A0-\u2666<>\&]/g,function(e){return"&"+(escapeHtmlEntities.entityTable[e.charCodeAt(0)]||"#"+e.charCodeAt(0))+";"})},escapeHtmlEntities.entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"}),e.attach("intg.litegui",t)});
//# sourceMappingURL=sourcemaps/litegui.js.map
